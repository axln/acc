var Vn=Object.defineProperty;var Jn=(t,e,n)=>e in t?Vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ct=(t,e,n)=>(Jn(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function k(){}function gt(t,e){for(const n in e)t[n]=e[n];return t}function Kn(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function In(t){return t()}function Et(){return Object.create(null)}function ne(t){t.forEach(In)}function et(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Zn(t){return Object.keys(t).length===0}function En(t,...e){if(t==null){for(const r of e)r(void 0);return k}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Z(t,e,n){t.$$.on_destroy.push(En(e,n))}function Ve(t,e,n,r){if(t){const o=An(t,e,n,r);return t[0](o)}}function An(t,e,n,r){return t[1]&&r?gt(n.ctx.slice(),t[1](r(e))):n.ctx}function Je(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const c=[],s=Math.max(e.dirty.length,o.length);for(let l=0;l<s;l+=1)c[l]=e.dirty[l]|o[l];return c}return e.dirty|o}return e.dirty}function Ke(t,e,n,r,o,c){if(o){const s=An(e,n,r,c);t.p(s,o)}}function Ze(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function tt(t){return t&&et(t.destroy)?t.destroy:k}function h(t,e){t.appendChild(e)}function A(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function Me(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function ae(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function j(t){return document.createTextNode(t)}function L(){return j(" ")}function ee(){return j("")}function V(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Le(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Yn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Wn(t){return Array.from(t.childNodes)}function H(t,e){e=""+e,t.data!==e&&(t.data=e)}function F(t,e){t.value=e??""}function fe(t,e,n){for(let r=0;r<t.options.length;r+=1){const o=t.options[r];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Re(t){const e=t.querySelector(":checked");return e&&e.__value}function Oe(t,e,n){t.classList.toggle(e,!!n)}function Qn(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function Ye(t,e){return new t(e)}let Ue;function _e(t){Ue=t}function Fe(){if(!Ue)throw new Error("Function called outside component initialization");return Ue}function ze(t){Fe().$$.on_mount.push(t)}function xn(t){Fe().$$.after_update.push(t)}function er(t){Fe().$$.on_destroy.push(t)}function Ce(){const t=Fe();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const c=Qn(e,n,{cancelable:r});return o.slice().forEach(s=>{s.call(t,c)}),!c.defaultPrevented}return!0}}function At(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const je=[],Q=[];let Ne=[];const dt=[],Dn=Promise.resolve();let _t=!1;function Tn(){_t||(_t=!0,Dn.then(bt))}function Pn(){return Tn(),Dn}function ye(t){Ne.push(t)}function Be(t){dt.push(t)}const lt=new Set;let Te=0;function bt(){if(Te!==0)return;const t=Ue;do{try{for(;Te<je.length;){const e=je[Te];Te++,_e(e),tr(e.$$)}}catch(e){throw je.length=0,Te=0,e}for(_e(null),je.length=0,Te=0;Q.length;)Q.pop()();for(let e=0;e<Ne.length;e+=1){const n=Ne[e];lt.has(n)||(lt.add(n),n())}Ne.length=0}while(je.length);for(;dt.length;)dt.pop()();_t=!1,lt.clear(),_e(t)}function tr(t){if(t.fragment!==null){t.update(),ne(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ye)}}function nr(t){const e=[],n=[];Ne.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Ne=e}const qe=new Set;let ve;function ce(){ve={r:0,c:[],p:ve}}function le(){ve.r||ne(ve.c),ve=ve.p}function $(t,e){t&&t.i&&(qe.delete(t),t.i(e))}function v(t,e,n,r){if(t&&t.o){if(qe.has(t))return;qe.add(t),ve.c.push(()=>{qe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function jn(t,e){const n=e.token={};function r(o,c,s,l){if(e.token!==n)return;e.resolved=l;let i=e.ctx;s!==void 0&&(i=i.slice(),i[s]=l);const u=o&&(e.current=o)(i);let a=!1;e.block&&(e.blocks?e.blocks.forEach((f,_)=>{_!==c&&f&&(ce(),v(f,1,1,()=>{e.blocks[_]===f&&(e.blocks[_]=null)}),le())}):e.block.d(1),u.c(),$(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[c]=u),a&&bt()}if(Kn(t)){const o=Fe();if(t.then(c=>{_e(o),r(e.then,1,e.value,c),_e(null)},c=>{if(_e(o),r(e.catch,2,e.error,c),_e(null),!e.hasCatch)throw c}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function rr(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}function J(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function He(t,e){t.d(1),e.delete(t.key)}function Nn(t,e){v(t,1,1,()=>{e.delete(t.key)})}function $e(t,e,n,r,o,c,s,l,i,u,a,f){let _=t.length,d=c.length,m=_;const b={};for(;m--;)b[t[m].key]=m;const y=[],S=new Map,N=new Map,P=[];for(m=d;m--;){const D=f(o,c,m),T=n(D);let I=s.get(T);I?r&&P.push(()=>I.p(D,e)):(I=u(T,D),I.c()),S.set(T,y[m]=I),T in b&&N.set(T,Math.abs(m-b[T]))}const w=new Set,C=new Set;function M(D){$(D,1),D.m(l,a),s.set(D.key,D),a=D.first,d--}for(;_&&d;){const D=y[d-1],T=t[_-1],I=D.key,Y=T.key;D===T?(a=D.first,_--,d--):S.has(Y)?!s.has(I)||w.has(I)?M(D):C.has(Y)?_--:N.get(I)>N.get(Y)?(C.add(I),M(D)):(w.add(Y),_--):(i(T,s),_--)}for(;_--;){const D=t[_];S.has(D.key)||i(D,s)}for(;d;)M(y[d-1]);return ne(P),y}function We(t,e){const n={},r={},o={$$scope:1};let c=t.length;for(;c--;){const s=t[c],l=e[c];if(l){for(const i in s)i in l||(r[i]=1);for(const i in l)o[i]||(n[i]=l[i],o[i]=1);t[c]=l}else for(const i in s)o[i]=1}for(const s in r)s in n||(n[s]=void 0);return n}function Qe(t){return typeof t=="object"&&t!==null?t:{}}function Ge(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function G(t){t&&t.c()}function O(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),ye(()=>{const c=t.$$.on_mount.map(In).filter(et);t.$$.on_destroy?t.$$.on_destroy.push(...c):ne(c),t.$$.on_mount=[]}),o.forEach(ye)}function B(t,e){const n=t.$$;n.fragment!==null&&(nr(n.after_update),ne(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function or(t,e){t.$$.dirty[0]===-1&&(je.push(t),Tn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,n,r,o,c,s=null,l=[-1]){const i=Ue;_e(t);const u=t.$$={fragment:null,ctx:[],props:c,update:k,not_equal:o,bound:Et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:Et(),dirty:l,skip_bound:!1,root:e.target||i.$$.root};s&&s(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(f,_,...d)=>{const m=d.length?d[0]:_;return u.ctx&&o(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),a&&or(t,f)),_}):[],u.update(),a=!0,ne(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=Wn(e.target);u.fragment&&u.fragment.l(f),f.forEach(E)}else u.fragment&&u.fragment.c();e.intro&&$(t.$$.fragment),O(t,e.target,e.anchor),bt()}_e(i)}class q{constructor(){ct(this,"$$");ct(this,"$$set")}$destroy(){B(this,1),this.$destroy=k}$on(e,n){if(!et(n))return k;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!Zn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const sr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(sr);const Pe=[];function On(t,e){return{subscribe:Ie(t,e).subscribe}}function Ie(t,e=k){let n;const r=new Set;function o(l){if(z(t,l)&&(t=l,n)){const i=!Pe.length;for(const u of r)u[1](),Pe.push(u,t);if(i){for(let u=0;u<Pe.length;u+=2)Pe[u][0](Pe[u+1]);Pe.length=0}}}function c(l){o(l(t))}function s(l,i=k){const u=[l,i];return r.add(u),r.size===1&&(n=e(o,c)||k),l(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:o,update:c,subscribe:s}}function Bn(t,e,n){const r=!Array.isArray(t),o=r?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const c=e.length<2;return On(n,(s,l)=>{let i=!1;const u=[];let a=0,f=k;const _=()=>{if(a)return;f();const m=e(r?u[0]:u,s,l);c?s(m):f=et(m)?m:k},d=o.map((m,b)=>En(m,y=>{u[b]=y,a&=~(1<<b),i&&_()},()=>{a|=1<<b}));return i=!0,_(),function(){ne(d),f(),i=!1}})}function cr(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,o,c,s=[],l="",i=t.split("/");for(i[0]||i.shift();o=i.shift();)n=o[0],n==="*"?(s.push("wild"),l+="/(.*)"):n===":"?(r=o.indexOf("?",1),c=o.indexOf(".",1),s.push(o.substring(1,~r?r:~c?c:o.length)),l+=~r&&!~c?"(?:/([^/]+?))?":"/([^/]+?)",~c&&(l+=(~r?"?":"")+"\\"+o.substring(c))):l+="/"+o;return{keys:s,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}function lr(t){let e,n,r;const o=[t[2]];var c=t[0];function s(l,i){let u={};if(i!==void 0&&i&4)u=We(o,[Qe(l[2])]);else for(let a=0;a<o.length;a+=1)u=gt(u,o[a]);return{props:u}}return c&&(e=Ye(c,s(t)),e.$on("routeEvent",t[7])),{c(){e&&G(e.$$.fragment),n=ee()},m(l,i){e&&O(e,l,i),A(l,n,i),r=!0},p(l,i){if(i&1&&c!==(c=l[0])){if(e){ce();const u=e;v(u.$$.fragment,1,0,()=>{B(u,1)}),le()}c?(e=Ye(c,s(l,i)),e.$on("routeEvent",l[7]),G(e.$$.fragment),$(e.$$.fragment,1),O(e,n.parentNode,n)):e=null}else if(c){const u=i&4?We(o,[Qe(l[2])]):{};e.$set(u)}},i(l){r||(e&&$(e.$$.fragment,l),r=!0)},o(l){e&&v(e.$$.fragment,l),r=!1},d(l){l&&E(n),e&&B(e,l)}}}function ir(t){let e,n,r;const o=[{params:t[1]},t[2]];var c=t[0];function s(l,i){let u={};if(i!==void 0&&i&6)u=We(o,[i&2&&{params:l[1]},i&4&&Qe(l[2])]);else for(let a=0;a<o.length;a+=1)u=gt(u,o[a]);return{props:u}}return c&&(e=Ye(c,s(t)),e.$on("routeEvent",t[6])),{c(){e&&G(e.$$.fragment),n=ee()},m(l,i){e&&O(e,l,i),A(l,n,i),r=!0},p(l,i){if(i&1&&c!==(c=l[0])){if(e){ce();const u=e;v(u.$$.fragment,1,0,()=>{B(u,1)}),le()}c?(e=Ye(c,s(l,i)),e.$on("routeEvent",l[6]),G(e.$$.fragment),$(e.$$.fragment,1),O(e,n.parentNode,n)):e=null}else if(c){const u=i&6?We(o,[i&2&&{params:l[1]},i&4&&Qe(l[2])]):{};e.$set(u)}},i(l){r||(e&&$(e.$$.fragment,l),r=!0)},o(l){e&&v(e.$$.fragment,l),r=!1},d(l){l&&E(n),e&&B(e,l)}}}function ur(t){let e,n,r,o;const c=[ir,lr],s=[];function l(i,u){return i[1]?0:1}return e=l(t),n=s[e]=c[e](t),{c(){n.c(),r=ee()},m(i,u){s[e].m(i,u),A(i,r,u),o=!0},p(i,[u]){let a=e;e=l(i),e===a?s[e].p(i,u):(ce(),v(s[a],1,1,()=>{s[a]=null}),le(),n=s[e],n?n.p(i,u):(n=s[e]=c[e](i),n.c()),$(n,1),n.m(r.parentNode,r))},i(i){o||($(n),o=!0)},o(i){v(n),o=!1},d(i){i&&E(r),s[e].d(i)}}}function Dt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const yt=On(null,function(e){e(Dt());const n=()=>{e(Dt())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});Bn(yt,t=>t.location);Bn(yt,t=>t.querystring);const Tt=Ie(void 0);async function W(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await Pn(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}function $t(t,e){if(e=jt(e),!t||!t.tagName||t.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Pt(t,e),{update(n){n=jt(n),Pt(t,n)}}}function ar(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Pt(t,e){let n=e.href||t.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);t.setAttribute("href",n),t.addEventListener("click",r=>{r.preventDefault(),e.disabled||fr(r.currentTarget.getAttribute("href"))})}function jt(t){return t&&typeof t=="string"?{href:t}:t||{}}function fr(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=t}function dr(t,e,n){let{routes:r={}}=e,{prefix:o=""}=e,{restoreScrollState:c=!1}=e;class s{constructor(C,M){if(!M||typeof M!="function"&&(typeof M!="object"||M._sveltesparouter!==!0))throw Error("Invalid component object");if(!C||typeof C=="string"&&(C.length<1||C.charAt(0)!="/"&&C.charAt(0)!="*")||typeof C=="object"&&!(C instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:D,keys:T}=cr(C);this.path=C,typeof M=="object"&&M._sveltesparouter===!0?(this.component=M.component,this.conditions=M.conditions||[],this.userData=M.userData,this.props=M.props||{}):(this.component=()=>Promise.resolve(M),this.conditions=[],this.props={}),this._pattern=D,this._keys=T}match(C){if(o){if(typeof o=="string")if(C.startsWith(o))C=C.substr(o.length)||"/";else return null;else if(o instanceof RegExp){const I=C.match(o);if(I&&I[0])C=C.substr(I[0].length)||"/";else return null}}const M=this._pattern.exec(C);if(M===null)return null;if(this._keys===!1)return M;const D={};let T=0;for(;T<this._keys.length;){try{D[this._keys[T]]=decodeURIComponent(M[T+1]||"")||null}catch{D[this._keys[T]]=null}T++}return D}async checkConditions(C){for(let M=0;M<this.conditions.length;M++)if(!await this.conditions[M](C))return!1;return!0}}const l=[];r instanceof Map?r.forEach((w,C)=>{l.push(new s(C,w))}):Object.keys(r).forEach(w=>{l.push(new s(w,r[w]))});let i=null,u=null,a={};const f=Ce();async function _(w,C){await Pn(),f(w,C)}let d=null,m=null;c&&(m=w=>{w.state&&(w.state.__svelte_spa_router_scrollY||w.state.__svelte_spa_router_scrollX)?d=w.state:d=null},window.addEventListener("popstate",m),xn(()=>{ar(d)}));let b=null,y=null;const S=yt.subscribe(async w=>{b=w;let C=0;for(;C<l.length;){const M=l[C].match(w.location);if(!M){C++;continue}const D={route:l[C].path,location:w.location,querystring:w.querystring,userData:l[C].userData,params:M&&typeof M=="object"&&Object.keys(M).length?M:null};if(!await l[C].checkConditions(D)){n(0,i=null),y=null,_("conditionsFailed",D);return}_("routeLoading",Object.assign({},D));const T=l[C].component;if(y!=T){T.loading?(n(0,i=T.loading),y=T,n(1,u=T.loadingParams),n(2,a={}),_("routeLoaded",Object.assign({},D,{component:i,name:i.name,params:u}))):(n(0,i=null),y=null);const I=await T();if(w!=b)return;n(0,i=I&&I.default||I),y=T}M&&typeof M=="object"&&Object.keys(M).length?n(1,u=M):n(1,u=null),n(2,a=l[C].props),_("routeLoaded",Object.assign({},D,{component:i,name:i.name,params:u})).then(()=>{Tt.set(u)});return}n(0,i=null),y=null,Tt.set(void 0)});er(()=>{S(),m&&window.removeEventListener("popstate",m)});function N(w){At.call(this,t,w)}function P(w){At.call(this,t,w)}return t.$$set=w=>{"routes"in w&&n(3,r=w.routes),"prefix"in w&&n(4,o=w.prefix),"restoreScrollState"in w&&n(5,c=w.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=c?"manual":"auto")},[i,u,a,r,o,c,N,P]}class _r extends q{constructor(e){super(),X(this,e,dr,ur,z,{routes:3,prefix:4,restoreScrollState:5})}}const pr=(t,e)=>e.some(n=>t instanceof n);let Nt,Ot;function hr(){return Nt||(Nt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mr(){return Ot||(Ot=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gn=new WeakMap,pt=new WeakMap,Mn=new WeakMap,it=new WeakMap,wt=new WeakMap;function gr(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",c),t.removeEventListener("error",s)},c=()=>{n(ge(t.result)),o()},s=()=>{r(t.error),o()};t.addEventListener("success",c),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&Gn.set(n,t)}).catch(()=>{}),wt.set(e,t),e}function br(t){if(pt.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",s),t.removeEventListener("abort",s)},c=()=>{n(),o()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",c),t.addEventListener("error",s),t.addEventListener("abort",s)});pt.set(t,e)}let ht={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pt.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mn.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ge(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function yr(t){ht=t(ht)}function $r(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ut(this),e,...n);return Mn.set(r,e.sort?e.sort():[e]),ge(r)}:mr().includes(t)?function(...e){return t.apply(ut(this),e),ge(Gn.get(this))}:function(...e){return ge(t.apply(ut(this),e))}}function wr(t){return typeof t=="function"?$r(t):(t instanceof IDBTransaction&&br(t),pr(t,hr())?new Proxy(t,ht):t)}function ge(t){if(t instanceof IDBRequest)return gr(t);if(it.has(t))return it.get(t);const e=wr(t);return e!==t&&(it.set(t,e),wt.set(e,t)),e}const ut=t=>wt.get(t);function vr(t,e,{blocked:n,upgrade:r,blocking:o,terminated:c}={}){const s=indexedDB.open(t,e),l=ge(s);return r&&s.addEventListener("upgradeneeded",i=>{r(ge(s.result),i.oldVersion,i.newVersion,ge(s.transaction),i)}),n&&s.addEventListener("blocked",i=>n(i.oldVersion,i.newVersion,i)),l.then(i=>{c&&i.addEventListener("close",()=>c()),o&&i.addEventListener("versionchange",u=>o(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const kr=["get","getKey","getAll","getAllKeys","count"],Sr=["put","add","delete","clear"],at=new Map;function Bt(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(at.get(e))return at.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=Sr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||kr.includes(n)))return;const c=async function(s,...l){const i=this.transaction(s,o?"readwrite":"readonly");let u=i.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),o&&i.done]))[0]};return at.set(e,c),c}yr(t=>({...t,get:(e,n,r)=>Bt(e,n)||t.get(e,n,r),has:(e,n)=>!!Bt(e,n)||t.has(e,n)}));let ke=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const re=Ie([]),we=Ie([]),Ee=Ie([]),Ae=Ie([]),nt=Ie([]);var be=(t=>(t.Expense="EXPENSE",t.Income="INCOME",t.Transfer="TRANSFER",t))(be||{});let U;const Cr=vr("acc",1,{upgrade(t){t.objectStoreNames.contains("accountGroups")||t.createObjectStore("accountGroups",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("accounts")||t.createObjectStore("accounts",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("currencies")||t.createObjectStore("currencies",{keyPath:"code"}),t.objectStoreNames.contains("categories")||t.createObjectStore("categories",{keyPath:"id"}).createIndex("title",["title","subtitle"]),t.objectStoreNames.contains("entries")||t.createObjectStore("entries",{keyPath:"id"}).createIndex("accountId","accountId"),t.objectStoreNames.contains("transactions")||t.createObjectStore("transactions",{keyPath:"id"}),t.objectStoreNames.contains("settings")||t.createObjectStore("settings",{keyPath:"name"})}}).then(t=>{U=t});function De(){return U.getAllFromIndex("accounts","title")}function Ir(t){return U.get("accounts",t)}async function Er(t){await U.put("accounts",t),re.set(await De())}async function Ar(t){const e=await U.get("transactions",t);await Promise.all([U.delete("transactions",t),U.delete("entries",e.entryId),e.secondEntryId?U.delete("entries",e.secondEntryId):null]),await Promise.all([Se(e.accountId),e.secondAccountId?Se(e.secondAccountId):null]),re.set(await De())}async function Dr(t,e){const[n,r]=await Promise.all([U.get("entries",t.entryId),t.secondEntryId?U.get("entries",t.secondEntryId):null]),[o,c,s]=Un(e,t.id,n.id,r?r.id:ke(5));await Promise.all([U.put("transactions",o),U.put("entries",c),s?r?U.put("entries",s):U.add("entries",s):r?U.delete("entries",r.id):null]);const[l,i]=await Promise.all([Se(o.accountId),o.secondAccountId?Se(o.secondAccountId):null,t.secondAccountId&&t.secondAccountId!==e.secondAccountId?Se(t.secondAccountId):null]);(l||i)&&re.set(await De())}function rt(){return U.getAllFromIndex("accountGroups","title")}function ot(){return U.getAllFromIndex("categories","title")}function st(){return U.getAll("currencies")}function Ln(){return U.getAll("settings")}async function Hn(t,e=!0){return(await U.getAllFromIndex("entries","accountId",t)).sort((r,o)=>r.timestamp<o.timestamp?e?1:-1:r.timestamp>o.timestamp?e?-1:1:0)}function Tr(t){return U.get("transactions",t)}async function Pr(t,e){await U.put("accountGroups",{id:ke(5),currencyCode:e,title:t}),we.set(await rt())}async function jr(t){await U.put("accountGroups",t),we.set(await rt())}async function Nr(t,e,n){await U.put("accounts",{id:ke(5),title:t,groupId:e,currencyCode:n,balance:0}),re.set(await De())}async function Or(t,e){await U.put("categories",{id:ke(5),title:t,subtitle:e}),Ee.set(await ot())}async function Br(t){await U.put("settings",t),nt.set(await Ln())}async function Gr(t){await U.put("categories",t),Ee.set(await ot())}async function Mr(t,e){await U.put("currencies",{code:t,title:e}),Ae.set(await st())}async function Lr(t){await U.put("currencies",t),Ae.set(await st())}function Un({kind:t,accountId:e,timestamp:n,categoryId:r,secondAccountId:o,secondAmount:c,amount:s,comment:l},i,u,a){const f={id:u,timestamp:n,accountId:e,...r?{categoryId:r}:{},transactionId:i,comment:l,amount:t==="INCOME"?s:-s,total:0};if(t==="TRANSFER"){const _={id:a,timestamp:n,accountId:o,transactionId:i,comment:l,amount:c||s,total:0};return[{id:i,kind:t,timestamp:n,accountId:e,secondAccountId:o,amount:s,...c?{secondAmount:c}:{},comment:l,entryId:f.id,secondEntryId:_.id},f,_]}else return[{id:i,kind:t,timestamp:n,accountId:e,...r?{categoryId:r}:{},amount:s,comment:l,entryId:f.id},f]}async function Se(t){const e=await Hn(t,!1);let n=0;for(const o of e)n+=o.amount,o.total!==n&&await U.put("entries",{...o,total:n});const r=await Ir(t);return r.balance!==n?(await U.put("accounts",{...r,balance:n}),!0):!1}async function Hr(t){const e=U.transaction(["entries","transactions"],"readwrite"),n=e.objectStore("entries"),r=e.objectStore("transactions"),[o,c,s]=Un(t,ke(5),ke(5),ke(5));await Promise.all([r.add(o),n.add(c),...s?[n.add(s)]:[],e.done]);const[l,i]=await Promise.all([Se(o.accountId),o.secondAccountId?Se(o.secondAccountId):!1]);(l||i)&&re.set(await De())}async function Rn(){const[t,e,n,r,o]=await Promise.all([De(),rt(),ot(),st(),Ln()]);Ae.set(r),we.set(e),re.set(t),Ee.set(n),nt.set(o)}async function Ur(){await Cr,await Rn()}const Rr=Ur();function Fr(t){function e(r){r.target instanceof Node&&t.hasAttribute("data-opened")&&(t.contains(r.target)||t.removeAttribute("data-opened"))}function n(r){r.code==="Escape"&&t.hasAttribute("data-opened")&&t.removeAttribute("data-opened")}return document.addEventListener("click",e),document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n),document.removeEventListener("click",e)}}}const zr=t=>({}),Gt=t=>({});function Xr(t){let e,n,r,o,c,s,l,i;const u=t[4].default,a=Ve(u,t,t[3],null),f=t[4].content,_=Ve(f,t,t[3],Gt);return{c(){e=g("div"),n=g("div"),a&&a.c(),r=L(),o=g("div"),_&&_.c(),p(n,"class","_3g1Lt"),p(o,"class","_214AN"),p(e,"class",c="_1vPHZ "+t[0])},m(d,m){A(d,e,m),h(e,n),a&&a.m(n,null),h(e,r),h(e,o),_&&_.m(o,null),t[6](e),s=!0,l||(i=[V(n,"click",t[5]),tt(Fr.call(null,e))],l=!0)},p(d,[m]){a&&a.p&&(!s||m&8)&&Ke(a,u,d,d[3],s?Je(u,d[3],m,null):Ze(d[3]),null),_&&_.p&&(!s||m&8)&&Ke(_,f,d,d[3],s?Je(f,d[3],m,zr):Ze(d[3]),Gt),(!s||m&1&&c!==(c="_1vPHZ "+d[0]))&&p(e,"class",c)},i(d){s||($(a,d),$(_,d),s=!0)},o(d){v(a,d),v(_,d),s=!1},d(d){d&&E(e),a&&a.d(d),_&&_.d(d),t[6](null),l=!1,ne(i)}}}function qr(t,e,n){let{$$slots:r={},$$scope:o}=e,c,{class:s=void 0}=e;function l(){c.toggleAttribute("data-opened",!1)}const i=()=>{c.toggleAttribute("data-opened")};function u(a){Q[a?"unshift":"push"](()=>{c=a,n(1,c)})}return t.$$set=a=>{"class"in a&&n(0,s=a.class),"$$scope"in a&&n(3,o=a.$$scope)},[s,c,l,o,r,i,u]}class Vr extends q{constructor(e){super(),X(this,e,qr,Xr,z,{class:0,close:2})}get close(){return this.$$.ctx[2]}}function Mt(t,e,n){const r=t.slice();return r[3]=e[n],r}function Jr(t){let e,n=t[3].title+"",r;return{c(){e=g("span"),r=j(n),p(e,"class","_2YoB_")},m(o,c){A(o,e,c),h(e,r)},p(o,c){c&1&&n!==(n=o[3].title+"")&&H(r,n)},d(o){o&&E(e)}}}function Kr(t){let e,n=t[3].title+"",r,o,c,s;return{c(){e=g("a"),r=j(n),p(e,"class","_2blFf"),p(e,"href",o=t[3].to)},m(l,i){A(l,e,i),h(e,r),c||(s=tt($t.call(null,e)),c=!0)},p(l,i){i&1&&n!==(n=l[3].title+"")&&H(r,n),i&1&&o!==(o=l[3].to)&&p(e,"href",o)},d(l){l&&E(e),c=!1,s()}}}function Lt(t,e){let n,r,o,c,s;function l(a,f){return a[3].to?Kr:Jr}let i=l(e),u=i(e);return{key:t,first:null,c(){n=g("li"),u.c(),r=L(),p(n,"class","_161ne"),p(n,"data-id",o=e[3].id),this.first=n},m(a,f){A(a,n,f),u.m(n,null),h(n,r),c||(s=V(n,"click",e[2]),c=!0)},p(a,f){e=a,i===(i=l(e))&&u?u.p(e,f):(u.d(1),u=i(e),u&&(u.c(),u.m(n,r))),f&1&&o!==(o=e[3].id)&&p(n,"data-id",o)},d(a){a&&E(n),u.d(),c=!1,s()}}}function Zr(t){let e,n=[],r=new Map,o=J(t[0]);const c=s=>s[3].id;for(let s=0;s<o.length;s+=1){let l=Mt(t,o,s),i=c(l);r.set(i,n[s]=Lt(i,l))}return{c(){e=g("ul");for(let s=0;s<n.length;s+=1)n[s].c();p(e,"class","_4OB04")},m(s,l){A(s,e,l);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,[l]){l&3&&(o=J(s[0]),n=$e(n,l,c,1,s,o,r,e,He,Lt,null,Mt))},i:k,o:k,d(s){s&&E(e);for(let l=0;l<n.length;l+=1)n[l].d()}}}function Yr(t,e,n){let{items:r=[]}=e;const o=Ce(),c=s=>{o("menu",{id:s.currentTarget.dataset.id})};return t.$$set=s=>{"items"in s&&n(0,r=s.items)},[r,o,c]}class Wr extends q{constructor(e){super(),X(this,e,Yr,Zr,z,{items:0})}}function Qr(t){let e,n,r;return{c(){e=ae("svg"),n=ae("line"),r=ae("polyline"),p(n,"x1","19"),p(n,"y1","12"),p(n,"x2","5"),p(n,"y2","12"),p(r,"points","12 19 5 12 12 5"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"width",t[0]),p(e,"height",t[0]),p(e,"viewBox","0 0 24 24"),p(e,"fill","none"),p(e,"stroke","currentColor"),p(e,"stroke-width","2"),p(e,"stroke-linecap","round"),p(e,"stroke-linejoin","round"),p(e,"class","feather feather-arrow-left")},m(o,c){A(o,e,c),h(e,n),h(e,r)},p(o,[c]){c&1&&p(e,"width",o[0]),c&1&&p(e,"height",o[0])},i:k,o:k,d(o){o&&E(e)}}}function xr(t,e,n){let{size:r=24}=e;return t.$$set=o=>{"size"in o&&n(0,r=o.size)},[r]}class eo extends q{constructor(e){super(),X(this,e,xr,Qr,z,{size:0})}}function to(t){let e,n,r;return{c(){e=ae("svg"),n=ae("line"),r=ae("line"),p(n,"x1","12"),p(n,"y1","5"),p(n,"x2","12"),p(n,"y2","19"),p(r,"x1","5"),p(r,"y1","12"),p(r,"x2","19"),p(r,"y2","12"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"width",t[0]),p(e,"height",t[0]),p(e,"viewBox","0 0 24 24"),p(e,"fill","none"),p(e,"stroke","currentColor"),p(e,"stroke-width","2"),p(e,"stroke-linecap","round"),p(e,"stroke-linejoin","round"),p(e,"class","feather feather-plus")},m(o,c){A(o,e,c),h(e,n),h(e,r)},p(o,[c]){c&1&&p(e,"width",o[0]),c&1&&p(e,"height",o[0])},i:k,o:k,d(o){o&&E(e)}}}function no(t,e,n){let{size:r=24}=e;return t.$$set=o=>{"size"in o&&n(0,r=o.size)},[r]}class ro extends q{constructor(e){super(),X(this,e,no,to,z,{size:0})}}function oo(t){let e,n,r,o;return{c(){e=ae("svg"),n=ae("line"),r=ae("line"),o=ae("line"),p(n,"x1","3"),p(n,"y1","12"),p(n,"x2","21"),p(n,"y2","12"),p(r,"x1","3"),p(r,"y1","6"),p(r,"x2","21"),p(r,"y2","6"),p(o,"x1","3"),p(o,"y1","18"),p(o,"x2","21"),p(o,"y2","18"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"width",t[0]),p(e,"height",t[0]),p(e,"viewBox","0 0 24 24"),p(e,"fill","none"),p(e,"stroke","currentColor"),p(e,"stroke-width","2"),p(e,"stroke-linecap","round"),p(e,"stroke-linejoin","round"),p(e,"class","feather feather-menu")},m(c,s){A(c,e,s),h(e,n),h(e,r),h(e,o)},p(c,[s]){s&1&&p(e,"width",c[0]),s&1&&p(e,"height",c[0])},i:k,o:k,d(c){c&&E(e)}}}function so(t,e,n){let{size:r=24}=e;return t.$$set=o=>{"size"in o&&n(0,r=o.size)},[r]}class co extends q{constructor(e){super(),X(this,e,so,oo,z,{size:0})}}function Ht(t){let e,n,r,o,c;return n=new eo({}),{c(){e=g("a"),G(n.$$.fragment),p(e,"class","_3sGwx"),p(e,"href",t[1])},m(s,l){A(s,e,l),O(n,e,null),r=!0,o||(c=tt($t.call(null,e)),o=!0)},p(s,l){(!r||l&2)&&p(e,"href",s[1])},i(s){r||($(n.$$.fragment,s),r=!0)},o(s){v(n.$$.fragment,s),r=!1},d(s){s&&E(e),B(n),o=!1,c()}}}function Ut(t){let e,n,r,o,c;return n=new ro({}),{c(){e=g("a"),G(n.$$.fragment),p(e,"class","_3sGwx"),p(e,"href",t[2])},m(s,l){A(s,e,l),O(n,e,null),r=!0,o||(c=tt($t.call(null,e)),o=!0)},p(s,l){(!r||l&4)&&p(e,"href",s[2])},i(s){r||($(n.$$.fragment,s),r=!0)},o(s){v(n.$$.fragment,s),r=!1},d(s){s&&E(e),B(n),o=!1,c()}}}function Rt(t){let e,n,r={class:"HiS8Z",$$slots:{content:[io],default:[lo]},$$scope:{ctx:t}};return e=new Vr({props:r}),t[7](e),{c(){G(e.$$.fragment)},m(o,c){O(e,o,c),n=!0},p(o,c){const s={};c&280&&(s.$$scope={dirty:c,ctx:o}),e.$set(s)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),n=!1},d(o){t[7](null),B(e,o)}}}function lo(t){let e,n;return e=new co({}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function io(t){let e,n;return e=new Wr({props:{items:t[3]}}),e.$on("menu",t[6]),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,o){const c={};o&8&&(c.items=r[3]),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function uo(t){let e,n,r,o,c,s,l,i,u,a=t[1]&&Ht(t),f=t[2]&&Ut(t),_=t[3]&&Rt(t);return{c(){e=g("header"),n=g("div"),a&&a.c(),r=L(),o=g("h1"),c=j(t[0]),s=L(),l=g("div"),f&&f.c(),i=L(),_&&_.c(),p(n,"class","_32hq"),p(o,"class","u4ShF"),p(l,"class","_3Grsk"),p(e,"class","_3C4lv")},m(d,m){A(d,e,m),h(e,n),a&&a.m(n,null),h(e,r),h(e,o),h(o,c),h(e,s),h(e,l),f&&f.m(l,null),h(l,i),_&&_.m(l,null),u=!0},p(d,[m]){d[1]?a?(a.p(d,m),m&2&&$(a,1)):(a=Ht(d),a.c(),$(a,1),a.m(n,null)):a&&(ce(),v(a,1,1,()=>{a=null}),le()),(!u||m&1)&&H(c,d[0]),d[2]?f?(f.p(d,m),m&4&&$(f,1)):(f=Ut(d),f.c(),$(f,1),f.m(l,i)):f&&(ce(),v(f,1,1,()=>{f=null}),le()),d[3]?_?(_.p(d,m),m&8&&$(_,1)):(_=Rt(d),_.c(),$(_,1),_.m(l,null)):_&&(ce(),v(_,1,1,()=>{_=null}),le())},i(d){u||($(a),$(f),$(_),u=!0)},o(d){v(a),v(f),v(_),u=!1},d(d){d&&E(e),a&&a.d(),f&&f.d(),_&&_.d()}}}function ao(t,e,n){let{title:r}=e,{returnPath:o=void 0}=e,{addPath:c=void 0}=e,{menuItems:s=null}=e,l=null;const i=Ce(),u=f=>{l.close(),i("menu",{id:f.detail.id})};function a(f){Q[f?"unshift":"push"](()=>{l=f,n(4,l)})}return t.$$set=f=>{"title"in f&&n(0,r=f.title),"returnPath"in f&&n(1,o=f.returnPath),"addPath"in f&&n(2,c=f.addPath),"menuItems"in f&&n(3,s=f.menuItems)},[r,o,c,s,l,i,u,a]}class ie extends q{constructor(e){super(),X(this,e,ao,uo,z,{title:0,returnPath:1,addPath:2,menuItems:3})}}const fo=t=>({}),Ft=t=>({});function _o(t){let e,n,r;const o=t[1].header,c=Ve(o,t,t[0],Ft),s=t[1].default,l=Ve(s,t,t[0],null);return{c(){e=g("main"),c&&c.c(),n=L(),l&&l.c(),p(e,"class","_2HUC4")},m(i,u){A(i,e,u),c&&c.m(e,null),h(e,n),l&&l.m(e,null),r=!0},p(i,[u]){c&&c.p&&(!r||u&1)&&Ke(c,o,i,i[0],r?Je(o,i[0],u,fo):Ze(i[0]),Ft),l&&l.p&&(!r||u&1)&&Ke(l,s,i,i[0],r?Je(s,i[0],u,null):Ze(i[0]),null)},i(i){r||($(c,i),$(l,i),r=!0)},o(i){v(c,i),v(l,i),r=!1},d(i){i&&E(e),c&&c.d(i),l&&l.d(i)}}}function po(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=c=>{"$$scope"in c&&n(0,o=c.$$scope)},[o,r]}class ue extends q{constructor(e){super(),X(this,e,po,_o,z,{})}}const ho=[{value:be.Expense,title:"Expense"},{value:be.Income,title:"Income"},{value:be.Transfer,title:"Transfer"}],zt=4.78,Xt=461.43,qt=96.62,Vt={KZT:{RUB:1/zt,USD:1/Xt},RUB:{USD:1/qt,KZT:zt},USD:{KZT:Xt,RUB:qt}},mt="baseCurrencyCode",mo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function go(t){const e=t.getTimezoneOffset()*6e4,n=new Date(t.getTime()-e),r=n.getFullYear(),o=String(n.getUTCMonth()+1).padStart(2,"0"),c=String(n.getUTCDate()).padStart(2,"0"),s=String(n.getUTCHours()).padStart(2,"0"),l=String(n.getUTCMinutes()).padStart(2,"0");return`${r}-${o}-${c}T${s}:${l}`}function Fn(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),o=r.getFullYear(),c=String(r.getUTCMonth()+1).padStart(2,"0"),s=String(r.getUTCDate()).padStart(2,"0"),l=String(r.getUTCHours()).padStart(2,"0"),i=String(r.getUTCMinutes()).padStart(2,"0");return`${o}-${c}-${s} ${l}:${i}`}function bo(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),o=r.getFullYear(),c=String(r.getUTCMonth()+1).padStart(2,"0"),s=String(r.getUTCDate()).padStart(2,"0"),l=mo[e.getUTCDay()];return`${o}-${c}-${s} ${l}`}function Jt(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),o=String(r.getUTCHours()).padStart(2,"0"),c=String(r.getUTCMinutes()).padStart(2,"0");return`${o}:${c}`}function xe(t){return/^[1-9]\d*([.,]\d{2})?$/.test(t)}function ft(t){return/[.,]/.test(t)?parseInt(t.replace(/[,.]/,"")):parseInt(t)*100}function se(t,e,n){t=Math.round(t);const r=t<0?Math.ceil(t/100):Math.floor(t/100),o=Math.abs(t%100);return(n&&t>0?"+":"")+`${e?yo(r):r}.${String(o).padStart(2,"0")}`}function zn(t,e){var n,r;return(n=Vt[t])!=null&&n[e]?(r=Vt[t])==null?void 0:r[e]:NaN}function yo(t,e=" "){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)}function $o(t,e){return t.reduce((n,r)=>(r.currencyCode===e?n+=r.balance:n+=r.balance*zn(r.currencyCode,e),n),0)}function wo(t,e){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=e,o.click(),URL.revokeObjectURL(r)}function vo(t){const e=document.createElement("input");e.type="file",e.accept="application/json",e.multiple=!1,e.onchange=()=>{const n=e.files[0];if(n){const r=new FileReader;r.onload=function(){t(r.result)},r.readAsText(n)}},e.click()}function ko(t){try{return JSON.parse(t)}catch{return console.warn("JSON parsing failed."),null}}async function So(){const[t,e,n,r,o,c]=await Promise.all([st(),rt(),De(),ot(),U.getAll("transactions"),U.getAll("entries")]);return{ver:Fn(Date.now()),currencies:t,accountGroups:e,accounts:n,categories:r,transactions:o,entries:c}}async function Co(t){if(!confirm("All the data will be overwritten. Are you sure you want to continue?"))return!1;if(Io(t)){const e=U.transaction(["currencies","accountGroups","accounts","categories","transactions","entries"],"readwrite");await Promise.all([e.objectStore("currencies").clear(),e.objectStore("accountGroups").clear(),e.objectStore("accounts").clear(),e.objectStore("categories").clear(),e.objectStore("transactions").clear(),e.objectStore("entries").clear()]);for(const n of t.currencies)await e.objectStore("currencies").put(n);for(const n of t.accountGroups)await e.objectStore("accountGroups").put(n);for(const n of t.accounts)await e.objectStore("accounts").put(n);for(const n of t.categories)await e.objectStore("categories").put(n);for(const n of t.transactions)await e.objectStore("transactions").put(n);for(const n of t.entries)await e.objectStore("entries").put(n);return await e.done,!0}else return alert("Invalid snapshot format."),!1}function Io(t){return!(!t.ver||!t.currencies||!t.accountGroups||!t.categories||!t.categories||!t.transactions||!t.entries)}function Eo(t){let e,n,r,o=t[0].title+"",c,s,l,i=se(t[0].balance,!0)+"",u,a,f=t[0].currencyCode+"",_,d,m;return{c(){e=g("div"),n=g("div"),r=g("span"),c=j(o),s=L(),l=g("span"),u=j(i),a=L(),_=j(f),p(r,"class","_1Pq8u"),p(n,"class","_1wAoL"),p(e,"class","_2R8pY"),p(e,"data-role","account")},m(b,y){A(b,e,y),h(e,n),h(n,r),h(r,c),h(n,s),h(n,l),h(l,u),h(l,a),h(l,_),d||(m=V(e,"click",t[3]),d=!0)},p(b,[y]){y&1&&o!==(o=b[0].title+"")&&H(c,o),y&1&&i!==(i=se(b[0].balance,!0)+"")&&H(u,i),y&1&&f!==(f=b[0].currencyCode+"")&&H(_,f)},i:k,o:k,d(b){b&&E(e),d=!1,m()}}}function Ao(t,e,n){let{account:r}=e,{editing:o=!1}=e;const c=Ce(),s=()=>{o||c("account",{id:r.id})};return t.$$set=l=>{"account"in l&&n(0,r=l.account),"editing"in l&&n(1,o=l.editing)},[r,o,c,s]}class Do extends q{constructor(e){super(),X(this,e,Ao,Eo,z,{account:0,editing:1})}}function Kt(t,e,n){const r=t.slice();return r[5]=e[n],r}function Zt(t,e){let n,r,o;return r=new Do({props:{account:e[5]}}),r.$on("account",e[4]),{key:t,first:null,c(){n=ee(),G(r.$$.fragment),this.first=n},m(c,s){A(c,n,s),O(r,c,s),o=!0},p(c,s){e=c;const l={};s&2&&(l.account=e[5]),r.$set(l)},i(c){o||($(r.$$.fragment,c),o=!0)},o(c){v(r.$$.fragment,c),o=!1},d(c){c&&E(n),B(r,c)}}}function To(t){let e,n,r,o=t[0].title+"",c,s,l,i=se(t[2],!0)+"",u,a,f=t[0].currencyCode+"",_,d,m=[],b=new Map,y,S=J(t[1]);const N=P=>P[5].id;for(let P=0;P<S.length;P+=1){let w=Kt(t,S,P),C=N(w);b.set(C,m[P]=Zt(C,w))}return{c(){e=g("div"),n=g("div"),r=g("span"),c=j(o),s=L(),l=g("span"),u=j(i),a=L(),_=j(f),d=L();for(let P=0;P<m.length;P+=1)m[P].c();p(r,"class","_5RrCD"),p(n,"class","_3gZXT")},m(P,w){A(P,e,w),h(e,n),h(n,r),h(r,c),h(n,s),h(n,l),h(l,u),h(l,a),h(l,_),h(e,d);for(let C=0;C<m.length;C+=1)m[C]&&m[C].m(e,null);y=!0},p(P,[w]){(!y||w&1)&&o!==(o=P[0].title+"")&&H(c,o),(!y||w&4)&&i!==(i=se(P[2],!0)+"")&&H(u,i),(!y||w&1)&&f!==(f=P[0].currencyCode+"")&&H(_,f),w&2&&(S=J(P[1]),ce(),m=$e(m,w,N,1,P,S,b,e,Nn,Zt,null,Kt),le())},i(P){if(!y){for(let w=0;w<S.length;w+=1)$(m[w]);y=!0}},o(P){for(let w=0;w<m.length;w+=1)v(m[w]);y=!1},d(P){P&&E(e);for(let w=0;w<m.length;w+=1)m[w].d()}}}function Po(t,e,n){let r,o,c;Z(t,re,i=>n(3,c=i));let{accountGroup:s}=e;const l=i=>{W(`/accounts/${i.detail.id}`)};return t.$$set=i=>{"accountGroup"in i&&n(0,s=i.accountGroup)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=c.filter(i=>i.groupId===s.id)),t.$$.dirty&3&&n(2,o=$o(r,s.currencyCode))},[s,r,o,c,l]}class jo extends q{constructor(e){super(),X(this,e,Po,To,z,{accountGroup:0})}}function Yt(t,e,n){const r=t.slice();return r[8]=e[n],r}function Wt(t){let e,n;return e=new jo({props:{accountGroup:t[8]}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,o){const c={};o&4&&(c.accountGroup=r[8]),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function No(t){let e,n,r,o,c,s=se(t[1],!0)+"",l,i,u=(t[0]||"")+"",a,f,_=J(t[2]),d=[];for(let b=0;b<_.length;b+=1)d[b]=Wt(Yt(t,_,b));const m=b=>v(d[b],1,1,()=>{d[b]=null});return{c(){for(let b=0;b<d.length;b+=1)d[b].c();e=L(),n=g("div"),r=g("div"),r.textContent="Total",o=L(),c=g("div"),l=j(s),i=L(),a=j(u),p(c,"class","_2Os0c"),p(n,"class","_1rK1Z")},m(b,y){for(let S=0;S<d.length;S+=1)d[S]&&d[S].m(b,y);A(b,e,y),A(b,n,y),h(n,r),h(n,o),h(n,c),h(c,l),h(c,i),h(c,a),f=!0},p(b,y){if(y&4){_=J(b[2]);let S;for(S=0;S<_.length;S+=1){const N=Yt(b,_,S);d[S]?(d[S].p(N,y),$(d[S],1)):(d[S]=Wt(N),d[S].c(),$(d[S],1),d[S].m(e.parentNode,e))}for(ce(),S=_.length;S<d.length;S+=1)m(S);le()}(!f||y&2)&&s!==(s=se(b[1],!0)+"")&&H(l,s),(!f||y&1)&&u!==(u=(b[0]||"")+"")&&H(a,u)},i(b){if(!f){for(let y=0;y<_.length;y+=1)$(d[y]);f=!0}},o(b){d=d.filter(Boolean);for(let y=0;y<d.length;y+=1)v(d[y]);f=!1},d(b){b&&(E(e),E(n)),Me(d,b)}}}function Oo(t){let e,n;return e=new ie({props:{slot:"header",title:"Accounts",addPath:"/accounts/new",menuItems:t[3]}}),e.$on("menu",t[7]),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Bo(t){let e,n;return e=new ue({props:{$$slots:{header:[Oo],default:[No]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&2055&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Go(t,e,n){let r,o,c,s,l,i;Z(t,re,f=>n(4,c=f)),Z(t,Ae,f=>n(5,s=f)),Z(t,nt,f=>n(6,l=f)),Z(t,we,f=>n(2,i=f));const u=[{id:"groups",title:"Account Groups",to:"/groups"},{id:"category",title:"Categories",to:"/categories"},{id:"currency",title:"Currencies",to:"/currencies"},{id:"backup",title:"Backup"},{id:"restore",title:"Restore"},{id:"settings",title:"Settings",to:"/settings"}],a=f=>{switch(f.detail.id){case"backup":So().then(_=>{wo(_,`${Fn(Date.now())}.json`)});break;case"restore":vo(_=>{const d=ko(_);d&&Co(d).then(m=>{m&&Rn()})});break}};return t.$$.update=()=>{var f,_;t.$$.dirty&96&&n(0,r=((f=l.find(d=>d.name===mt))==null?void 0:f.value)||((_=s[0])==null?void 0:_.code)),t.$$.dirty&17&&n(1,o=c.reduce((d,m)=>(m.currencyCode===r?d+=m.balance:d+=m.balance*zn(m.currencyCode,r),d),0))},[r,o,i,u,c,s,l,a]}class Mo extends q{constructor(e){super(),X(this,e,Go,Bo,z,{})}}function Qt(t,e,n){const r=t.slice();return r[2]=e[n],r}function xt(t,e){let n,r=e[2].title+"",o,c,s,l,i;return{key:t,first:null,c(){n=g("div"),o=j(r),c=L(),p(n,"class","_3JK5K"),p(n,"data-id",s=e[2].id),this.first=n},m(u,a){A(u,n,a),h(n,o),h(n,c),l||(i=V(n,"click",e[1]),l=!0)},p(u,a){e=u,a&1&&r!==(r=e[2].title+"")&&H(o,r),a&1&&s!==(s=e[2].id)&&p(n,"data-id",s)},d(u){u&&E(n),l=!1,i()}}}function Lo(t){let e=[],n=new Map,r,o=J(t[0]);const c=s=>s[2].id;for(let s=0;s<o.length;s+=1){let l=Qt(t,o,s),i=c(l);n.set(i,e[s]=xt(i,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=ee()},m(s,l){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(s,l);A(s,r,l)},p(s,l){l&3&&(o=J(s[0]),e=$e(e,l,c,1,s,o,n,r.parentNode,He,xt,r,Qt))},d(s){s&&E(r);for(let l=0;l<e.length;l+=1)e[l].d(s)}}}function Ho(t){let e,n;return e=new ie({props:{slot:"header",title:"Account Groups",returnPath:"/",addPath:"/groups/new"}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Uo(t){let e,n;return e=new ue({props:{$$slots:{header:[Ho],default:[Lo]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&33&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Ro(t,e,n){let r;Z(t,we,c=>n(0,r=c));function o(c){c.target instanceof HTMLElement&&c.target.dataset.id&&W(`/groups/${c.target.dataset.id}`)}return[r,o]}class Fo extends q{constructor(e){super(),X(this,e,Ro,Uo,z,{})}}function en(t,e,n){const r=t.slice();return r[4]=e[n].code,r[5]=e[n].title,r}function tn(t,e){let n,r,o=e[4]+"",c,s,l=e[5]+"",i,u,a;return{key:t,first:null,c(){n=j(`}
    `),r=g("option"),c=j(o),s=L(),i=j(l),u=L(),r.__value=a=e[4],F(r,r.__value),this.first=n},m(f,_){A(f,n,_),A(f,r,_),h(r,c),h(r,s),h(r,i),h(r,u)},p(f,_){e=f,_&4&&o!==(o=e[4]+"")&&H(c,o),_&4&&l!==(l=e[5]+"")&&H(i,l),_&4&&a!==(a=e[4])&&(r.__value=a,F(r,r.__value))},d(f){f&&(E(n),E(r))}}}function zo(t){let e,n,r,o=[],c=new Map,s,l,i=J(t[2]);const u=a=>a[4];for(let a=0;a<i.length;a+=1){let f=en(t,i,a),_=u(f);c.set(_,o[a]=tn(_,f))}return{c(){e=g("select"),n=g("option"),r=j(t[1]);for(let a=0;a<o.length;a+=1)o[a].c();n.__value="",F(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,p(e,"class","_1kHx0"),e.required=!0,t[0]===void 0&&ye(()=>t[3].call(e))},m(a,f){A(a,e,f),h(e,n),h(n,r);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(e,null);fe(e,t[0],!0),s||(l=V(e,"change",t[3]),s=!0)},p(a,[f]){f&2&&H(r,a[1]),f&4&&(i=J(a[2]),o=$e(o,f,u,1,a,i,c,e,He,tn,null,en)),f&5&&fe(e,a[0])},i:k,o:k,d(a){a&&E(e);for(let f=0;f<o.length;f+=1)o[f].d();s=!1,l()}}}function Xo(t,e,n){let r;Z(t,Ae,l=>n(2,r=l));let{currencyCode:o}=e,{placeholder:c="Currency"}=e;function s(){o=Re(this),n(0,o)}return t.$$set=l=>{"currencyCode"in l&&n(0,o=l.currencyCode),"placeholder"in l&&n(1,c=l.placeholder)},[o,c,r,s]}class vt extends q{constructor(e){super(),X(this,e,Xo,zo,z,{currencyCode:0,placeholder:1})}}function qo(t){let e,n,r,o,c,s,l,i,u,a,f=t[4]?"Save":"Create",_,d,m,b;function y(N){t[7](N)}let S={};return t[1]!==void 0&&(S.currencyCode=t[1]),r=new vt({props:S}),Q.push(()=>Ge(r,"currencyCode",y)),{c(){e=g("form"),n=g("div"),G(r.$$.fragment),c=L(),s=g("div"),l=g("input"),i=L(),u=g("div"),a=g("button"),_=j(f),p(l,"class","_3xyX_"),p(l,"type","text"),l.disabled=t[3],p(l,"placeholder","Title"),p(a,"class","_2G9AC"),p(a,"type","submit"),a.disabled=t[3],p(e,"class","_3RSQr")},m(N,P){A(N,e,P),h(e,n),O(r,n,null),h(e,c),h(e,s),h(s,l),t[8](l),F(l,t[0]),h(e,i),h(e,u),h(u,a),h(a,_),d=!0,m||(b=[V(l,"input",t[9]),V(e,"submit",Le(t[5]))],m=!0)},p(N,P){const w={};!o&&P&2&&(o=!0,w.currencyCode=N[1],Be(()=>o=!1)),r.$set(w),(!d||P&8)&&(l.disabled=N[3]),P&1&&l.value!==N[0]&&F(l,N[0]),(!d||P&8)&&(a.disabled=N[3])},i(N){d||($(r.$$.fragment,N),d=!0)},o(N){v(r.$$.fragment,N),d=!1},d(N){N&&E(e),B(r),t[8](null),m=!1,ne(b)}}}function Vo(t){let e,n;return e=new ie({props:{slot:"header",title:t[4]?"Account Group":"New Account Group",returnPath:"/groups"}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Jo(t){let e,n;return e=new ue({props:{$$slots:{header:[Vo],default:[qo]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&4111&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Ko(t,e,n){let r;Z(t,we,b=>n(10,r=b));let{params:o}=e;const{id:c}=o;let s=c?r.find(b=>b.id===c):null,l=s?s.title:"",i=s?s.currencyCode:void 0,u,a=!1;ze(()=>{u.focus()});function f(){l.trim()&&i?(n(3,a=!0),s?jr({...s,title:l.trim(),currencyCode:i}).then(()=>{W("/groups")}).finally(()=>{n(3,a=!1)}):Pr(l,i).then(()=>{W("/groups")}).finally(()=>{n(3,a=!1)})):alert("All fields must be specified.")}function _(b){i=b,n(1,i)}function d(b){Q[b?"unshift":"push"](()=>{u=b,n(2,u)})}function m(){l=this.value,n(0,l)}return t.$$set=b=>{"params"in b&&n(6,o=b.params)},[l,i,u,a,s,f,o,_,d,m]}class nn extends q{constructor(e){super(),X(this,e,Ko,Jo,z,{params:6})}}function rn(t,e,n){const r=t.slice();return r[3]=e[n],r}function on(t){let e,n=t[3].title+"",r,o,c;return{c(){e=g("option"),r=j(n),o=L(),e.__value=c=t[3].id,F(e,e.__value)},m(s,l){A(s,e,l),h(e,r),h(e,o)},p(s,l){l&2&&n!==(n=s[3].title+"")&&H(r,n),l&2&&c!==(c=s[3].id)&&(e.__value=c,F(e,e.__value))},d(s){s&&E(e)}}}function Zo(t){let e,n,r,o,c=J(t[1]),s=[];for(let l=0;l<c.length;l+=1)s[l]=on(rn(t,c,l));return{c(){e=g("select"),n=g("option"),n.textContent="Account Group";for(let l=0;l<s.length;l+=1)s[l].c();p(n,"class","placeholder"),n.__value="",F(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,p(e,"class","_2Ge4O"),e.required=!0,t[0]===void 0&&ye(()=>t[2].call(e))},m(l,i){A(l,e,i),h(e,n);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);fe(e,t[0],!0),r||(o=V(e,"change",t[2]),r=!0)},p(l,[i]){if(i&2){c=J(l[1]);let u;for(u=0;u<c.length;u+=1){const a=rn(l,c,u);s[u]?s[u].p(a,i):(s[u]=on(a),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=c.length}i&3&&fe(e,l[0])},i:k,o:k,d(l){l&&E(e),Me(s,l),r=!1,o()}}}function Yo(t,e,n){let r;Z(t,we,s=>n(1,r=s));let{groupId:o}=e;function c(){o=Re(this),n(0,o)}return t.$$set=s=>{"groupId"in s&&n(0,o=s.groupId)},[o,r,c]}class Wo extends q{constructor(e){super(),X(this,e,Yo,Zo,z,{groupId:0})}}function Qo(t){let e,n,r,o,c,s,l,i,u,a,f,_,d,m,b=t[0]?"Save":"Create",y,S,N,P,w;function C(I){t[8](I)}let M={};t[2]!==void 0&&(M.groupId=t[2]),r=new Wo({props:M}),Q.push(()=>Ge(r,"groupId",C));function D(I){t[9](I)}let T={};return t[3]!==void 0&&(T.currencyCode=t[3]),l=new vt({props:T}),Q.push(()=>Ge(l,"currencyCode",D)),{c(){e=g("form"),n=g("div"),G(r.$$.fragment),c=L(),s=g("div"),G(l.$$.fragment),u=L(),a=g("div"),f=g("input"),_=L(),d=g("div"),m=g("button"),y=j(b),p(f,"class","_3hIGg"),p(f,"type","text"),p(f,"placeholder","Title"),f.disabled=t[5],p(m,"class","J-mxG"),p(m,"type","submit"),m.disabled=t[5],p(e,"class",S="_2Na6L "+t[1])},m(I,Y){A(I,e,Y),h(e,n),O(r,n,null),h(e,c),h(e,s),O(l,s,null),h(e,u),h(e,a),h(a,f),F(f,t[4]),t[11](f),h(e,_),h(e,d),h(d,m),h(m,y),N=!0,P||(w=[V(f,"input",t[10]),V(e,"submit",Le(t[7]))],P=!0)},p(I,[Y]){const oe={};!o&&Y&4&&(o=!0,oe.groupId=I[2],Be(()=>o=!1)),r.$set(oe);const pe={};!i&&Y&8&&(i=!0,pe.currencyCode=I[3],Be(()=>i=!1)),l.$set(pe),(!N||Y&32)&&(f.disabled=I[5]),Y&16&&f.value!==I[4]&&F(f,I[4]),(!N||Y&1)&&b!==(b=I[0]?"Save":"Create")&&H(y,b),(!N||Y&32)&&(m.disabled=I[5]),(!N||Y&2&&S!==(S="_2Na6L "+I[1]))&&p(e,"class",S)},i(I){N||($(r.$$.fragment,I),$(l.$$.fragment,I),N=!0)},o(I){v(r.$$.fragment,I),v(l.$$.fragment,I),N=!1},d(I){I&&E(e),B(r),B(l),t[11](null),P=!1,ne(w)}}}function xo(t,e,n){let{accountDoc:r=null}=e,{class:o=void 0}=e,{groupId:c,currencyCode:s,title:l=""}=r||{},i=!1,u;const a=Ce();function f(){l.trim()&&c&&s?(n(5,i=!0),a("save",{groupId:c,currencyCode:s,title:l})):alert("Must fill all fields.")}ze(()=>{u&&u.focus()});function _(y){c=y,n(2,c)}function d(y){s=y,n(3,s)}function m(){l=this.value,n(4,l)}function b(y){Q[y?"unshift":"push"](()=>{u=y,n(6,u)})}return t.$$set=y=>{"accountDoc"in y&&n(0,r=y.accountDoc),"class"in y&&n(1,o=y.class)},[r,o,c,s,l,i,u,f,_,d,m,b]}class Xn extends q{constructor(e){super(),X(this,e,xo,Qo,z,{accountDoc:0,class:1})}}function es(t){let e,n;return e=new Xn({props:{class:"_1tO9D"}}),e.$on("save",t[2]),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ts(t){let e,n;return e=new Xn({props:{class:"_1tO9D",accountDoc:t[1]}}),e.$on("save",t[2]),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ns(t){let e,n,r,o;const c=[ts,es],s=[];function l(i,u){return i[0]?0:1}return e=l(t),n=s[e]=c[e](t),{c(){n.c(),r=ee()},m(i,u){s[e].m(i,u),A(i,r,u),o=!0},p(i,u){n.p(i,u)},i(i){o||($(n),o=!0)},o(i){v(n),o=!1},d(i){i&&E(r),s[e].d(i)}}}function rs(t){var r;let e,n;return e=new ie({props:{slot:"header",title:t[0]?(r=t[1])==null?void 0:r.title:"New Account",returnPath:"/"}}),{c(){G(e.$$.fragment)},m(o,c){O(e,o,c),n=!0},p:k,i(o){n||($(e.$$.fragment,o),n=!0)},o(o){v(e.$$.fragment,o),n=!1},d(o){B(e,o)}}}function os(t){let e,n;return e=new ue({props:{$$slots:{header:[rs],default:[ns]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&32&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ss(t,e,n){let r;Z(t,re,i=>n(4,r=i));let{params:o}=e;const{id:c}=o;let s=c?r.find(i=>i.id===c):null;function l(i){const{title:u,groupId:a,currencyCode:f}=i.detail;c?Er({...s,title:u,groupId:a,currencyCode:f}).then(()=>{W("/")}):Nr(u,a,f).then(()=>{W("/")})}return t.$$set=i=>{"params"in i&&n(3,o=i.params)},[c,s,l,o]}class sn extends q{constructor(e){super(),X(this,e,ss,os,z,{params:3})}}function cn(t){let e,n=t[1].title+"",r,o=t[1].subtitle?`:${t[1].subtitle}`:"",c;return{c(){e=g("span"),r=j(n),c=j(o),p(e,"class","_322dv")},m(s,l){A(s,e,l),h(e,r),h(e,c)},p(s,l){l&2&&n!==(n=s[1].title+"")&&H(r,n),l&2&&o!==(o=s[1].subtitle?`:${s[1].subtitle}`:"")&&H(c,o)},d(s){s&&E(e)}}}function cs(t){let e,n,r,o,c=t[0].comment+"",s,l,i,u,a=se(t[0].amount,!0,!0)+"",f,_,d,m,b=Jt(t[0].timestamp)+"",y,S,N,P=se(t[0].total,!0)+"",w,C,M,D=t[1]&&cn(t);return{c(){e=g("div"),n=g("div"),r=g("div"),o=g("span"),s=j(c),l=L(),D&&D.c(),i=L(),u=g("div"),f=j(a),_=L(),d=g("div"),m=g("div"),y=j(b),S=L(),N=g("div"),w=j(P),p(o,"class","_2kX3c"),p(r,"class","_1OurC"),p(u,"class","_26PI4"),Oe(u,"_3DGXJ",t[0].amount>0),p(n,"class","_2FZ7Z"),p(m,"class","w2k25"),p(N,"class","XyJeD"),p(d,"class","tBvyS"),p(e,"class","Xkc2I")},m(T,I){A(T,e,I),h(e,n),h(n,r),h(r,o),h(o,s),h(r,l),D&&D.m(r,null),h(n,i),h(n,u),h(u,f),h(e,_),h(e,d),h(d,m),h(m,y),h(d,S),h(d,N),h(N,w),C||(M=V(e,"click",t[4]),C=!0)},p(T,[I]){I&1&&c!==(c=T[0].comment+"")&&H(s,c),T[1]?D?D.p(T,I):(D=cn(T),D.c(),D.m(r,null)):D&&(D.d(1),D=null),I&1&&a!==(a=se(T[0].amount,!0,!0)+"")&&H(f,a),I&1&&Oe(u,"_3DGXJ",T[0].amount>0),I&1&&b!==(b=Jt(T[0].timestamp)+"")&&H(y,b),I&1&&P!==(P=se(T[0].total,!0)+"")&&H(w,P)},i:k,o:k,d(T){T&&E(e),D&&D.d(),C=!1,M()}}}function ls(t,e,n){let r,o;Z(t,Ee,i=>n(3,o=i));let{entry:c}=e;const s=Ce(),l=()=>{s("transaction",{id:c.transactionId})};return t.$$set=i=>{"entry"in i&&n(0,c=i.entry)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=c.categoryId?o.find(i=>i.id===c.categoryId):null)},[c,r,s,o,l]}class is extends q{constructor(e){super(),X(this,e,ls,cs,z,{entry:0})}}function ln(t,e,n){const r=t.slice();return r[7]=e[n],r}function un(t,e,n){const r=t.slice();return r[10]=e[n],r}function an(t,e){let n,r,o;return r=new is({props:{entry:e[10]}}),r.$on("transaction",e[6]),{key:t,first:null,c(){n=ee(),G(r.$$.fragment),this.first=n},m(c,s){A(c,n,s),O(r,c,s),o=!0},p(c,s){e=c;const l={};s&1&&(l.entry=e[10]),r.$set(l)},i(c){o||($(r.$$.fragment,c),o=!0)},o(c){v(r.$$.fragment,c),o=!1},d(c){c&&E(n),B(r,c)}}}function fn(t){let e,n=t[7]+"",r,o,c=[],s=new Map,l,i,u=J(t[0][t[7]]);const a=f=>f[10].id;for(let f=0;f<u.length;f+=1){let _=un(t,u,f),d=a(_);s.set(d,c[f]=an(d,_))}return{c(){e=g("div"),r=j(n),o=L();for(let f=0;f<c.length;f+=1)c[f].c();l=ee(),p(e,"class","_14m25")},m(f,_){A(f,e,_),h(e,r),A(f,o,_);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(f,_);A(f,l,_),i=!0},p(f,_){(!i||_&1)&&n!==(n=f[7]+"")&&H(r,n),_&5&&(u=J(f[0][f[7]]),ce(),c=$e(c,_,a,1,f,u,s,l.parentNode,Nn,an,l,un),le())},i(f){if(!i){for(let _=0;_<u.length;_+=1)$(c[_]);i=!0}},o(f){for(let _=0;_<c.length;_+=1)v(c[_]);i=!1},d(f){f&&(E(e),E(o),E(l));for(let _=0;_<c.length;_+=1)c[_].d(f)}}}function us(t){let e,n,r=J(Object.keys(t[0])),o=[];for(let s=0;s<r.length;s+=1)o[s]=fn(ln(t,r,s));const c=s=>v(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=ee()},m(s,l){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(s,l);A(s,e,l),n=!0},p(s,l){if(l&5){r=J(Object.keys(s[0]));let i;for(i=0;i<r.length;i+=1){const u=ln(s,r,i);o[i]?(o[i].p(u,l),$(o[i],1)):(o[i]=fn(u),o[i].c(),$(o[i],1),o[i].m(e.parentNode,e))}for(ce(),i=r.length;i<o.length;i+=1)c(i);le()}},i(s){if(!n){for(let l=0;l<r.length;l+=1)$(o[l]);n=!0}},o(s){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)v(o[l]);n=!1},d(s){s&&E(e),Me(o,s)}}}function as(t){let e,n;return e=new ie({props:{slot:"header",title:t[1]?`${t[1].title}`:"Not Found",returnPath:"/",addPath:`/accounts/${t[2]}/transactions/new`,menuItems:t[3]}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,o){const c={};o&2&&(c.title=r[1]?`${r[1].title}`:"Not Found"),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function fs(t){let e,n;return e=new ue({props:{$$slots:{header:[as],default:[us]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&8195&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ds(t,e,n){let r,o;Z(t,re,a=>n(5,o=a));let{params:c}=e;const{id:s}=c;let l={};Hn(s).then(a=>{n(0,l=a.reduce((f,_)=>{const d=bo(_.timestamp);return f[d]?f[d].push(_):f[d]=[_],f},{}))});const i=[{id:"edit",title:"Edit",to:`/accounts/${s}/edit`}],u=a=>{W(`/accounts/${s}/transactions/${a.detail.id}`)};return t.$$set=a=>{"params"in a&&n(4,c=a.params)},t.$$.update=()=>{t.$$.dirty&32&&n(1,r=o.find(a=>a.id===s))},[l,r,s,i,c,o,u]}class _s extends q{constructor(e){super(),X(this,e,ds,fs,z,{params:4})}}function dn(t,e,n){const r=t.slice();return r[2]=e[n],r}function _n(t,e){let n,r=e[2].title+"",o,c=e[2].subtitle?`:${e[2].subtitle}`:"",s,l,i,u,a;return{key:t,first:null,c(){n=g("div"),o=j(r),s=j(c),l=L(),p(n,"class","_6UwqU"),p(n,"data-id",i=e[2].id),this.first=n},m(f,_){A(f,n,_),h(n,o),h(n,s),h(n,l),u||(a=V(n,"click",e[1]),u=!0)},p(f,_){e=f,_&1&&r!==(r=e[2].title+"")&&H(o,r),_&1&&c!==(c=e[2].subtitle?`:${e[2].subtitle}`:"")&&H(s,c),_&1&&i!==(i=e[2].id)&&p(n,"data-id",i)},d(f){f&&E(n),u=!1,a()}}}function ps(t){let e=[],n=new Map,r,o=J(t[0]);const c=s=>s[2].id;for(let s=0;s<o.length;s+=1){let l=dn(t,o,s),i=c(l);n.set(i,e[s]=_n(i,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=ee()},m(s,l){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(s,l);A(s,r,l)},p(s,l){l&3&&(o=J(s[0]),e=$e(e,l,c,1,s,o,n,r.parentNode,He,_n,r,dn))},d(s){s&&E(r);for(let l=0;l<e.length;l+=1)e[l].d(s)}}}function hs(t){let e,n;return e=new ie({props:{slot:"header",title:"Categories",returnPath:"/",addPath:"/categories/new"}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ms(t){let e,n;return e=new ue({props:{$$slots:{header:[hs],default:[ps]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&33&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function gs(t,e,n){let r;Z(t,Ee,c=>n(0,r=c));function o(c){if(c.target.dataset.id){const s=c.target.dataset.id;W(`/categories/${s}`)}}return[r,o]}class bs extends q{constructor(e){super(),X(this,e,gs,ms,z,{})}}function ys(t){let e,n,r,o,c,s,l,i,u,a;function f(d){t[2](d)}let _={placeholder:"Base Currency"};return t[0]!==void 0&&(_.currencyCode=t[0]),o=new vt({props:_}),Q.push(()=>Ge(o,"currencyCode",f)),{c(){e=g("form"),n=g("div"),r=j(`Base currency:
      `),G(o.$$.fragment),s=L(),l=g("div"),l.innerHTML='<button type="submit" class="_19-gA">Save</button>',p(e,"class","_1JFP_")},m(d,m){A(d,e,m),h(e,n),h(n,r),O(o,n,null),h(e,s),h(e,l),i=!0,u||(a=V(e,"submit",Le(t[1])),u=!0)},p(d,m){const b={};!c&&m&1&&(c=!0,b.currencyCode=d[0],Be(()=>c=!1)),o.$set(b)},i(d){i||($(o.$$.fragment,d),i=!0)},o(d){v(o.$$.fragment,d),i=!1},d(d){d&&E(e),B(o),u=!1,a()}}}function $s(t){let e,n;return e=new ie({props:{slot:"header",title:"Settings",returnPath:"/"}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ws(t){let e,n;return e=new ue({props:{$$slots:{header:[$s],default:[ys]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&17&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function vs(t,e,n){var l;let r;Z(t,nt,i=>n(3,r=i));let o=(l=r.find(i=>i.name===mt))==null?void 0:l.value;function c(){Br({name:mt,value:o}).then(()=>{W("/")})}function s(i){o=i,n(0,o)}return[o,c,s]}class ks extends q{constructor(e){super(),X(this,e,vs,ws,z,{})}}function pn(t,e,n){const r=t.slice();return r[2]=e[n],r}function hn(t,e){let n,r,o=e[2].code+"",c,s,l,i=e[2].title+"",u,a,f,_,d;return{key:t,first:null,c(){n=g("div"),r=g("div"),c=j(o),s=L(),l=g("div"),u=j(i),a=L(),p(r,"class","_9tmh3"),p(l,"class","lB3BI"),p(n,"class","_3DaGu"),p(n,"data-role","item"),p(n,"data-code",f=e[2].code),this.first=n},m(m,b){A(m,n,b),h(n,r),h(r,c),h(n,s),h(n,l),h(l,u),h(n,a),_||(d=V(n,"click",e[1]),_=!0)},p(m,b){e=m,b&1&&o!==(o=e[2].code+"")&&H(c,o),b&1&&i!==(i=e[2].title+"")&&H(u,i),b&1&&f!==(f=e[2].code)&&p(n,"data-code",f)},d(m){m&&E(n),_=!1,d()}}}function Ss(t){let e=[],n=new Map,r,o=J(t[0]);const c=s=>s[2].code;for(let s=0;s<o.length;s+=1){let l=pn(t,o,s),i=c(l);n.set(i,e[s]=hn(i,l))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=ee()},m(s,l){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(s,l);A(s,r,l)},p(s,l){l&3&&(o=J(s[0]),e=$e(e,l,c,1,s,o,n,r.parentNode,He,hn,r,pn))},d(s){s&&E(r);for(let l=0;l<e.length;l+=1)e[l].d(s)}}}function Cs(t){let e,n;return e=new ie({props:{slot:"header",title:"Currencies",returnPath:"/",addPath:"/currencies/new"}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Is(t){let e,n;return e=new ue({props:{$$slots:{header:[Cs],default:[Ss]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&33&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Es(t,e,n){let r;Z(t,Ae,c=>n(0,r=c));function o(c){if(console.log("e:",c),c.target instanceof HTMLElement){const s=c.target.closest('[data-role="item"]');s instanceof HTMLElement&&s.dataset.code&&W(`/currencies/${s.dataset.code}`)}}return[r,o]}class As extends q{constructor(e){super(),X(this,e,Es,Is,z,{})}}function Ds(t){let e,n,r,o,c,s,l,i,u,a,f;return{c(){e=g("form"),n=g("div"),r=g("input"),o=L(),c=g("div"),s=g("input"),l=L(),i=g("div"),u=g("button"),u.textContent=`${t[3]?"Save":"Create"}`,p(r,"type","text"),p(r,"placeholder","Title"),p(n,"class","_1H9BX"),p(s,"type","text"),p(s,"placeholder","Subtitle (optional)"),p(c,"class","_1H9BX"),p(u,"type","submit"),p(i,"class","_1H9BX"),p(e,"class","_2vZ1J")},m(_,d){A(_,e,d),h(e,n),h(n,r),F(r,t[0]),t[7](r),h(e,o),h(e,c),h(c,s),F(s,t[1]),h(e,l),h(e,i),h(i,u),a||(f=[V(r,"input",t[6]),V(s,"input",t[8]),V(e,"submit",Le(t[4]))],a=!0)},p(_,d){d&1&&r.value!==_[0]&&F(r,_[0]),d&2&&s.value!==_[1]&&F(s,_[1])},d(_){_&&E(e),t[7](null),a=!1,ne(f)}}}function Ts(t){let e,n;return e=new ie({props:{slot:"header",title:t[3]?"Category":"New Category",returnPath:"/categories"}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Ps(t){let e,n;return e=new ue({props:{$$slots:{header:[Ts],default:[Ds]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&2055&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function js(t,e,n){let r;Z(t,Ee,m=>n(9,r=m));let{params:o}=e;const{id:c}=o;let s=c?r.find(m=>m.id===c):null,l=s?s.title:"",i=s?s.subtitle:"",u;ze(()=>{u&&u.focus()});function a(){l.trim()?s?Gr({...s,title:l.trim(),subtitle:i.trim()}).then(()=>{W("/categories")}):Or(l.trim(),i.trim()).then(()=>{W("/categories")}):alert("The title must be specified.")}function f(){l=this.value,n(0,l)}function _(m){Q[m?"unshift":"push"](()=>{u=m,n(2,u)})}function d(){i=this.value,n(1,i)}return t.$$set=m=>{"params"in m&&n(5,o=m.params)},[l,i,u,s,a,o,f,_,d]}class mn extends q{constructor(e){super(),X(this,e,js,Ps,z,{params:5})}}function Ns(t){let e,n,r,o,c,s,l,i,u,a,f;return{c(){e=g("form"),n=g("div"),r=g("input"),o=L(),c=g("div"),s=g("input"),l=L(),i=g("div"),u=g("button"),u.textContent=`${t[4]?"Save":"Add"}`,p(r,"type","text"),p(r,"placeholder","Code"),r.disabled=t[4]!==null,p(n,"class","EbSwc"),p(s,"type","text"),p(s,"placeholder","Title"),p(c,"class","EbSwc"),p(u,"type","submit"),p(i,"class","EbSwc")},m(_,d){A(_,e,d),h(e,n),h(n,r),F(r,t[0]),t[8](r),h(e,o),h(e,c),h(c,s),F(s,t[1]),t[10](s),h(e,l),h(e,i),h(i,u),a||(f=[V(r,"input",t[7]),V(s,"input",t[9]),V(e,"submit",Le(t[5]))],a=!0)},p(_,d){d&1&&r.value!==_[0]&&F(r,_[0]),d&2&&s.value!==_[1]&&F(s,_[1])},d(_){_&&E(e),t[8](null),t[10](null),a=!1,ne(f)}}}function Os(t){let e,n;return e=new ie({props:{slot:"header",title:t[4]?"Currency":"New Currency",returnPath:"/currencies"}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Bs(t){let e,n;return e=new ue({props:{$$slots:{header:[Os],default:[Ns]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&8207&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Gs(t,e,n){let r;Z(t,Ae,y=>n(11,r=y));let{params:o}=e;const{cid:c}=o;let s=c?r.find(y=>y.code===c):null,l=s?s.code:"",i=s?s.title:"",u,a;function f(){l.trim()&&i.trim()?s?Lr({...s,title:i.trim()}).then(()=>{W("/currencies")}):Mr(l.trim(),i.trim()).then(()=>{W("/currencies")}):alert("Code and title must be specified.")}ze(()=>{s?a&&a.focus():u&&u.focus()});function _(){l=this.value,n(0,l)}function d(y){Q[y?"unshift":"push"](()=>{u=y,n(2,u)})}function m(){i=this.value,n(1,i)}function b(y){Q[y?"unshift":"push"](()=>{a=y,n(3,a)})}return t.$$set=y=>{"params"in y&&n(6,o=y.params)},[l,i,u,a,s,f,o,_,d,m,b]}class gn extends q{constructor(e){super(),X(this,e,Gs,Bs,z,{params:6})}}function bn(t,e,n){const r=t.slice();return r[6]=e[n],r}function yn(t,e,n){const r=t.slice();return r[9]=e[n],r}function $n(t){let e,n=t[9].title+"",r,o;return{c(){e=g("option"),r=j(n),e.__value=o=t[9].id,F(e,e.__value)},m(c,s){A(c,e,s),h(e,r)},p(c,s){s&4&&n!==(n=c[9].title+"")&&H(r,n),s&4&&o!==(o=c[9].id)&&(e.__value=o,F(e,e.__value))},d(c){c&&E(e)}}}function wn(t){let e,n,r=J(t[6].accounts),o=[];for(let c=0;c<r.length;c+=1)o[c]=$n(yn(t,r,c));return{c(){e=g("optgroup");for(let c=0;c<o.length;c+=1)o[c].c();p(e,"label",n=t[6].title)},m(c,s){A(c,e,s);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null)},p(c,s){if(s&4){r=J(c[6].accounts);let l;for(l=0;l<r.length;l+=1){const i=yn(c,r,l);o[l]?o[l].p(i,s):(o[l]=$n(i),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=r.length}s&4&&n!==(n=c[6].title)&&p(e,"label",n)},d(c){c&&E(e),Me(o,c)}}}function Ms(t){let e,n,r,o,c,s=J(t[2]),l=[];for(let i=0;i<s.length;i+=1)l[i]=wn(bn(t,s,i));return{c(){e=g("select"),n=g("option"),r=j(t[1]);for(let i=0;i<l.length;i+=1)l[i].c();n.__value="",F(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,p(e,"class","_1vWtV"),e.required=!0,t[0]===void 0&&ye(()=>t[5].call(e))},m(i,u){A(i,e,u),h(e,n),h(n,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);fe(e,t[0],!0),o||(c=V(e,"change",t[5]),o=!0)},p(i,[u]){if(u&2&&H(r,i[1]),u&4){s=J(i[2]);let a;for(a=0;a<s.length;a+=1){const f=bn(i,s,a);l[a]?l[a].p(f,u):(l[a]=wn(f),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=s.length}u&5&&fe(e,i[0])},i:k,o:k,d(i){i&&E(e),Me(l,i),o=!1,c()}}}function Ls(t,e,n){let r,o,c;Z(t,re,u=>n(3,o=u)),Z(t,we,u=>n(4,c=u));let{accountId:s}=e,{placeholder:l="Account"}=e;function i(){s=Re(this),n(0,s),n(2,r),n(4,c),n(3,o)}return t.$$set=u=>{"accountId"in u&&n(0,s=u.accountId),"placeholder"in u&&n(1,l=u.placeholder)},t.$$.update=()=>{t.$$.dirty&24&&n(2,r=c.reduce((u,a)=>{const f={title:a.title,accounts:o.filter(_=>_.groupId===a.id)};return u.push(f),u},[]))},[s,l,r,o,c,i]}class Hs extends q{constructor(e){super(),X(this,e,Ls,Ms,z,{accountId:0,placeholder:1})}}function vn(t,e,n){const r=t.slice();return r[3]=e[n],r}function kn(t,e){let n,r=e[3].title+"",o,c=e[3].subtitle?`:${e[3].subtitle}`:"",s,l;return{key:t,first:null,c(){n=g("option"),o=j(r),s=j(c),n.__value=l=e[3].id,F(n,n.__value),this.first=n},m(i,u){A(i,n,u),h(n,o),h(n,s)},p(i,u){e=i,u&2&&r!==(r=e[3].title+"")&&H(o,r),u&2&&c!==(c=e[3].subtitle?`:${e[3].subtitle}`:"")&&H(s,c),u&2&&l!==(l=e[3].id)&&(n.__value=l,F(n,n.__value))},d(i){i&&E(n)}}}function Us(t){let e,n,r=[],o=new Map,c,s,l=J(t[1]);const i=u=>u[3].id;for(let u=0;u<l.length;u+=1){let a=vn(t,l,u),f=i(a);o.set(f,r[u]=kn(f,a))}return{c(){e=g("select"),n=g("option"),n.textContent="Category";for(let u=0;u<r.length;u+=1)r[u].c();n.__value="",F(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,p(e,"class","_1m8Jt"),t[0]===void 0&&ye(()=>t[2].call(e)),Oe(e,"_36b4Q",!t[0])},m(u,a){A(u,e,a),h(e,n);for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(e,null);fe(e,t[0],!0),c||(s=V(e,"change",t[2]),c=!0)},p(u,[a]){a&2&&(l=J(u[1]),r=$e(r,a,i,1,u,l,o,e,He,kn,null,vn)),a&3&&fe(e,u[0]),a&1&&Oe(e,"_36b4Q",!u[0])},i:k,o:k,d(u){u&&E(e);for(let a=0;a<r.length;a+=1)r[a].d();c=!1,s()}}}function Rs(t,e,n){let r;Z(t,Ee,s=>n(1,r=s));let{categoryId:o}=e;function c(){o=Re(this),n(0,o)}return t.$$set=s=>{"categoryId"in s&&n(0,o=s.categoryId)},[o,r,c]}class Fs extends q{constructor(e){super(),X(this,e,Rs,Us,z,{categoryId:0})}}function zs(t,e,n){const r=t.slice();return r[11]=e[n],r}function Xs(t){let e;return{c(){e=g("option"),e.textContent=`${t[11].title}`,e.__value=t[11].value,F(e,e.__value)},m(n,r){A(n,e,r)},p:k,d(n){n&&E(e)}}}function qs(t){let e,n,r,o,c,s,l,i,u,a;function f(d){t[19](d)}let _={};return t[5]!==void 0&&(_.categoryId=t[5]),n=new Fs({props:_}),Q.push(()=>Ge(n,"categoryId",f)),{c(){e=g("div"),G(n.$$.fragment),o=L(),c=g("button"),s=j("Clear"),p(c,"type","button"),c.disabled=l=!t[5],p(e,"class","_1JmTY")},m(d,m){A(d,e,m),O(n,e,null),h(e,o),h(e,c),h(c,s),i=!0,u||(a=V(c,"click",Yn(t[20])),u=!0)},p(d,m){const b={};!r&&m&32&&(r=!0,b.categoryId=d[5],Be(()=>r=!1)),n.$set(b),(!i||m&32&&l!==(l=!d[5]))&&(c.disabled=l)},i(d){i||($(n.$$.fragment,d),i=!0)},o(d){v(n.$$.fragment,d),i=!1},d(d){d&&E(e),B(n),u=!1,a()}}}function Vs(t){let e,n,r;function o(s){t[18](s)}let c={placeholder:"To"};return t[1]!==void 0&&(c.accountId=t[1]),e=new Hs({props:c}),Q.push(()=>Ge(e,"accountId",o)),{c(){G(e.$$.fragment)},m(s,l){O(e,s,l),r=!0},p(s,l){const i={};!n&&l&2&&(n=!0,i.accountId=s[1],Be(()=>n=!1)),e.$set(i)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){v(e.$$.fragment,s),r=!1},d(s){B(e,s)}}}function Sn(t){var u;let e,n,r=((u=t[2])==null?void 0:u.currencyCode)+"",o,c,s,l,i;return{c(){e=g("div"),n=j("Amount, "),o=j(r),c=j(`:
      `),s=g("input"),p(s,"class","_1usnT"),p(s,"type","string")},m(a,f){A(a,e,f),h(e,n),h(e,o),h(e,c),h(e,s),F(s,t[9]),l||(i=V(s,"input",t[23]),l=!0)},p(a,f){var _;f&4&&r!==(r=((_=a[2])==null?void 0:_.currencyCode)+"")&&H(o,r),f&512&&F(s,a[9])},d(a){a&&E(e),l=!1,i()}}}function Js(t){var Ct;let e,n,r,o,c,s,l,i,u,a,f,_,d,m=((Ct=t[3])==null?void 0:Ct.currencyCode)+"",b,y,S,N,P,w,C,M,D,T,I=t[0]?"Save":"Create",Y,oe,pe,Xe,K=J(ho),de=[];for(let R=0;R<K.length;R+=1)de[R]=Xs(zs(t,K,R));const kt=[Vs,qs],he=[];function St(R,te){return R[11]===be.Transfer?0:1}u=St(t),a=he[u]=kt[u](t);let x=t[10]&&Sn(t);return{c(){e=g("form"),n=g("div"),r=g("select");for(let R=0;R<de.length;R+=1)de[R].c();o=L(),c=g("div"),s=g("input"),l=L(),i=g("div"),a.c(),f=L(),_=g("div"),d=j("Amount, "),b=j(m),y=j(`:
    `),S=g("input"),N=L(),x&&x.c(),P=L(),w=g("div"),C=g("input"),M=L(),D=g("div"),T=g("button"),Y=j(I),p(r,"class","_1Hq_3"),t[11]===void 0&&ye(()=>t[16].call(r)),p(s,"class","_1usnT"),p(s,"type","datetime-local"),p(S,"class","_1usnT"),p(S,"type","text"),Oe(S,"_2gQro",!xe(t[8])),p(C,"class","_1usnT"),p(C,"type","text"),p(C,"placeholder","Comment"),p(T,"class","_3_X88"),p(T,"type","submit"),p(e,"class","pBK27")},m(R,te){A(R,e,te),h(e,n),h(n,r);for(let me=0;me<de.length;me+=1)de[me]&&de[me].m(r,null);fe(r,t[11],!0),h(e,o),h(e,c),h(c,s),F(s,t[7]),h(e,l),h(e,i),he[u].m(i,null),h(e,f),h(e,_),h(_,d),h(_,b),h(_,y),h(_,S),F(S,t[8]),t[22](S),h(e,N),x&&x.m(e,null),h(e,P),h(e,w),h(w,C),F(C,t[6]),h(e,M),h(e,D),h(D,T),h(T,Y),oe=!0,pe||(Xe=[V(r,"change",t[16]),V(s,"input",t[17]),V(S,"input",t[21]),V(C,"input",t[24]),V(e,"submit",Le(t[12]))],pe=!0)},p(R,[te]){var It;te&2048&&fe(r,R[11]),te&128&&F(s,R[7]);let me=u;u=St(R),u===me?he[u].p(R,te):(ce(),v(he[me],1,1,()=>{he[me]=null}),le(),a=he[u],a?a.p(R,te):(a=he[u]=kt[u](R),a.c()),$(a,1),a.m(i,null)),(!oe||te&8)&&m!==(m=((It=R[3])==null?void 0:It.currencyCode)+"")&&H(b,m),te&256&&S.value!==R[8]&&F(S,R[8]),(!oe||te&256)&&Oe(S,"_2gQro",!xe(R[8])),R[10]?x?x.p(R,te):(x=Sn(R),x.c(),x.m(e,P)):x&&(x.d(1),x=null),te&64&&C.value!==R[6]&&F(C,R[6]),(!oe||te&1)&&I!==(I=R[0]?"Save":"Create")&&H(Y,I)},i(R){oe||($(a),oe=!0)},o(R){v(a),oe=!1},d(R){R&&E(e),Me(de,R),he[u].d(),t[22](null),x&&x.d(),pe=!1,ne(Xe)}}}function Ks(t,e,n){let r,o,c,s,l;Z(t,re,K=>n(15,l=K));let{accountId:i}=e,{transactionDoc:u=null}=e,a;ze(()=>{a&&a.focus()});let{kind:f=be.Expense,categoryId:_,secondAccountId:d,comment:m=""}=u||{},b=go(new Date((u==null?void 0:u.timestamp)||Date.now())),y=u?se(u.amount):"",S=u?se(u.secondAmount):"";const N=Ce();function P(){const K=w();if(K){alert(K);return}const de=f===be.Transfer?{kind:f,timestamp:new Date(b).getTime(),accountId:i,secondAccountId:d,...s?{secondAmount:ft(S)}:{},amount:ft(y),comment:m.trim()}:{kind:f,timestamp:new Date(b).getTime(),accountId:i,categoryId:_||null,amount:ft(y),comment:m.trim()};N("save",{params:de})}function w(){if(!xe(y))return"Invalid amount";if(f===be.Transfer){if(!d)return"Must choose the second account";if(d===i)return"Cannot transfer to the same account";if(s&&!xe(S))return"Invalid second amount"}return""}function C(){f=Re(this),n(11,f)}function M(){b=this.value,n(7,b)}function D(K){d=K,n(1,d)}function T(K){_=K,n(5,_)}const I=()=>{n(5,_="")};function Y(){y=this.value,n(8,y)}function oe(K){Q[K?"unshift":"push"](()=>{a=K,n(4,a)})}function pe(){S=this.value,n(9,S)}function Xe(){m=this.value,n(6,m)}return t.$$set=K=>{"accountId"in K&&n(13,i=K.accountId),"transactionDoc"in K&&n(0,u=K.transactionDoc)},t.$$.update=()=>{t.$$.dirty&40960&&n(3,r=l.find(K=>K.id===i)),t.$$.dirty&8&&n(14,o=r==null?void 0:r.currencyCode),t.$$.dirty&32770&&n(2,c=d?l.find(K=>K.id===d):null),t.$$.dirty&16388&&n(10,s=c&&o?c.currencyCode!==o:!1)},[u,d,c,r,a,_,m,b,y,S,s,f,P,i,o,l,C,M,D,T,I,Y,oe,pe,Xe]}class qn extends q{constructor(e){super(),X(this,e,Ks,Js,z,{accountId:13,transactionDoc:0})}}function Zs(t){let e,n;return e=new qn({props:{accountId:t[2]}}),e.$on("save",t[6]),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p:k,i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Ys(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:xs,then:Qs,catch:Ws,blocks:[,,,]};return jn(t[5](t[3]),r),{c(){e=ee(),r.block.c()},m(o,c){A(o,e,c),r.block.m(o,r.anchor=c),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(o,c){t=o,rr(r,t,c)},i(o){n||($(r.block),n=!0)},o(o){for(let c=0;c<3;c+=1){const s=r.blocks[c];v(s)}n=!1},d(o){o&&E(e),r.block.d(o),r.token=null,r=null}}}function Ws(t){return{c:k,m:k,p:k,i:k,o:k,d:k}}function Qs(t){let e,n;return e=new qn({props:{accountId:t[2],transactionDoc:t[0]}}),e.$on("save",t[6]),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,o){const c={};o&1&&(c.transactionDoc=r[0]),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function xs(t){return{c:k,m:k,p:k,i:k,o:k,d:k}}function ec(t){let e,n,r,o;const c=[Ys,Zs],s=[];function l(i,u){return i[3]?0:1}return e=l(t),n=s[e]=c[e](t),{c(){n.c(),r=ee()},m(i,u){s[e].m(i,u),A(i,r,u),o=!0},p(i,u){n.p(i,u)},i(i){o||($(n),o=!0)},o(i){v(n),o=!1},d(i){i&&E(r),s[e].d(i)}}}function tc(t){let e,n;return e=new ie({props:{slot:"header",title:t[1]?`${t[1].title}: Transaction`:"Transaction",returnPath:`/accounts/${t[2]}`,menuItems:t[4]}}),e.$on("menu",t[9]),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,o){const c={};o&2&&(c.title=r[1]?`${r[1].title}: Transaction`:"Transaction"),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function nc(t){let e,n;return e=new ue({props:{$$slots:{header:[tc],default:[ec]},$$scope:{ctx:t}}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},p(r,[o]){const c={};o&1027&&(c.$$scope={dirty:o,ctx:r}),e.$set(c)},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function rc(t,e,n){let r,o;Z(t,re,d=>n(8,o=d));let{params:c}=e;const{id:s,tid:l}=c;let i;const u=l?[{id:"delete",title:"Delete"}]:null;async function a(d){n(0,i=await Tr(d))}function f(d){l?Dr(i,d.detail.params).then(()=>{W(`/accounts/${s}`)}):Hr(d.detail.params).then(()=>{W(`/accounts/${s}`)})}const _=d=>{switch(d.detail.id){case"delete":if(!confirm("Delete transaction?"))return!1;l&&Ar(l).then(()=>{W(`/accounts/${s}`)});break}};return t.$$set=d=>{"params"in d&&n(7,c=d.params)},t.$$.update=()=>{t.$$.dirty&256&&n(1,r=o.find(d=>d.id===s))},[i,r,s,l,u,a,f,c,o,_]}class Cn extends q{constructor(e){super(),X(this,e,rc,nc,z,{params:7})}}function oc(t){let e,n,r=t[0].wild+"",o;return{c(){e=g("div"),n=j("Page Not Found: /"),o=j(r)},m(c,s){A(c,e,s),h(e,n),h(e,o)},p(c,[s]){s&1&&r!==(r=c[0].wild+"")&&H(o,r)},i:k,o:k,d(c){c&&E(e)}}}function sc(t,e,n){let{params:r={}}=e;return t.$$set=o=>{"params"in o&&n(0,r=o.params)},[r]}class cc extends q{constructor(e){super(),X(this,e,sc,oc,z,{params:0})}}const lc={"/":Mo,"/groups":Fo,"/groups/new":nn,"/groups/:id":nn,"/accounts/:id":_s,"/accounts/new":sn,"/accounts/:id/edit":sn,"/accounts/:id/transactions/new":Cn,"/accounts/:id/transactions/:tid":Cn,"/categories":bs,"/categories/new":mn,"/categories/:id":mn,"/currencies":As,"/currencies/new":gn,"/currencies/:cid":gn,"/settings":ks,"*":cc};function ic(t){return{c:k,m:k,i:k,o:k,d:k}}function uc(t){let e,n;return e=new _r({props:{routes:lc}}),{c(){G(e.$$.fragment)},m(r,o){O(e,r,o),n=!0},i(r){n||($(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ac(t){return{c:k,m:k,i:k,o:k,d:k}}function fc(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:ac,then:uc,catch:ic,blocks:[,,,]};return jn(Rr,r),{c(){e=ee(),r.block.c()},m(o,c){A(o,e,c),r.block.m(o,r.anchor=c),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(o,[c]){t=o},i(o){n||($(r.block),n=!0)},o(o){for(let c=0;c<3;c+=1){const s=r.blocks[c];v(s)}n=!1},d(o){o&&E(e),r.block.d(o),r.token=null,r=null}}}class dc extends q{constructor(e){super(),X(this,e,null,fc,z,{})}}new dc({target:document.getElementById("app")});
