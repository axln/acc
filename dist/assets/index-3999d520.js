var er=Object.defineProperty;var tr=(t,e,n)=>e in t?er(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var it=(t,e,n)=>(tr(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function k(){}function yt(t,e){for(const n in e)t[n]=e[n];return t}function nr(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function Ln(t){return t()}function Tt(){return Object.create(null)}function ee(t){t.forEach(Ln)}function Fe(t){return typeof t=="function"}function H(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function rr(t){return Object.keys(t).length===0}function Nn(t,...e){if(t==null){for(const r of e)r(void 0);return k}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function W(t,e,n){t.$$.on_destroy.push(Nn(e,n))}function qe(t,e,n,r){if(t){const o=On(t,e,n,r);return t[0](o)}}function On(t,e,n,r){return t[1]&&r?yt(n.ctx.slice(),t[1](r(e))):n.ctx}function Ke(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const l=[],s=Math.max(e.dirty.length,o.length);for(let c=0;c<s;c+=1)l[c]=e.dirty[c]|o[c];return l}return e.dirty|o}return e.dirty}function We(t,e,n,r,o,l){if(o){const s=On(e,n,r,l);t.p(s,o)}}function Ye(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function tt(t){return t&&Fe(t.destroy)?t.destroy:k}function h(t,e){t.appendChild(e)}function I(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function Oe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function ae(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function M(t){return document.createTextNode(t)}function G(){return M(" ")}function te(){return M("")}function z(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Me(t){return function(e){return e.preventDefault(),t.call(this,e)}}function or(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function p(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function lr(t){return Array.from(t.childNodes)}function U(t,e){e=""+e,t.data!==e&&(t.data=e)}function R(t,e){t.value=e??""}function Le(t,e,n){for(let r=0;r<t.options.length;r+=1){const o=t.options[r];if(o.__value===e){o.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function wt(t){const e=t.querySelector(":checked");return e&&e.__value}function me(t,e,n){t.classList.toggle(e,!!n)}function sr(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function Ze(t,e){return new t(e)}let Ue;function fe(t){Ue=t}function He(){if(!Ue)throw new Error("Function called outside component initialization");return Ue}function Re(t){He().$$.on_mount.push(t)}function cr(t){He().$$.after_update.push(t)}function ir(t){He().$$.on_destroy.push(t)}function Se(){const t=He();return(e,n,{cancelable:r=!1}={})=>{const o=t.$$.callbacks[e];if(o){const l=sr(e,n,{cancelable:r});return o.slice().forEach(s=>{s.call(t,l)}),!l.defaultPrevented}return!0}}function Pt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Pe=[],Z=[];let je=[];const pt=[],Mn=Promise.resolve();let ht=!1;function Bn(){ht||(ht=!0,Mn.then($t))}function Gn(){return Bn(),Mn}function Ne(t){je.push(t)}function ve(t){pt.push(t)}const ut=new Set;let De=0;function $t(){if(De!==0)return;const t=Ue;do{try{for(;De<Pe.length;){const e=Pe[De];De++,fe(e),ur(e.$$)}}catch(e){throw Pe.length=0,De=0,e}for(fe(null),Pe.length=0,De=0;Z.length;)Z.pop()();for(let e=0;e<je.length;e+=1){const n=je[e];ut.has(n)||(ut.add(n),n())}je.length=0}while(Pe.length);for(;pt.length;)pt.pop()();ht=!1,ut.clear(),fe(t)}function ur(t){if(t.fragment!==null){t.update(),ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ne)}}function ar(t){const e=[],n=[];je.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),je=e}const Ve=new Set;let ye;function se(){ye={r:0,c:[],p:ye}}function ce(){ye.r||ee(ye.c),ye=ye.p}function w(t,e){t&&t.i&&(Ve.delete(t),t.i(e))}function $(t,e,n,r){if(t&&t.o){if(Ve.has(t))return;Ve.add(t),ye.c.push(()=>{Ve.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Un(t,e){const n=e.token={};function r(o,l,s,c){if(e.token!==n)return;e.resolved=c;let i=e.ctx;s!==void 0&&(i=i.slice(),i[s]=c);const u=o&&(e.current=o)(i);let a=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==l&&f&&(se(),$(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),ce())}):e.block.d(1),u.c(),w(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[l]=u),a&&$t()}if(nr(t)){const o=He();if(t.then(l=>{fe(o),r(e.then,1,e.value,l),fe(null)},l=>{if(fe(o),r(e.catch,2,e.error,l),fe(null),!e.hasCatch)throw l}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function fr(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}function K(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Be(t,e){t.d(1),e.delete(t.key)}function Fn(t,e){$(t,1,1,()=>{e.delete(t.key)})}function ge(t,e,n,r,o,l,s,c,i,u,a,f){let d=t.length,_=l.length,m=d;const y={};for(;m--;)y[t[m].key]=m;const g=[],E=new Map,S=new Map,j=[];for(m=_;m--;){const T=f(o,l,m),L=n(T);let A=s.get(L);A?r&&j.push(()=>A.p(T,e)):(A=u(L,T),A.c()),E.set(L,g[m]=A),L in y&&S.set(L,Math.abs(m-y[L]))}const v=new Set,D=new Set;function P(T){w(T,1),T.m(c,a),s.set(T.key,T),a=T.first,_--}for(;d&&_;){const T=g[_-1],L=t[d-1],A=T.key,Y=L.key;T===L?(a=T.first,d--,_--):E.has(Y)?!s.has(A)||v.has(A)?P(T):D.has(Y)?d--:S.get(A)>S.get(Y)?(D.add(A),P(T)):(v.add(Y),d--):(i(L,s),d--)}for(;d--;){const T=t[d];E.has(T.key)||i(T,s)}for(;_;)P(g[_-1]);return ee(j),g}function Qe(t,e){const n={},r={},o={$$scope:1};let l=t.length;for(;l--;){const s=t[l],c=e[l];if(c){for(const i in s)i in c||(r[i]=1);for(const i in c)o[i]||(n[i]=c[i],o[i]=1);t[l]=c}else for(const i in s)o[i]=1}for(const s in r)s in n||(n[s]=void 0);return n}function xe(t){return typeof t=="object"&&t!==null?t:{}}function ke(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function B(t){t&&t.c()}function N(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),Ne(()=>{const l=t.$$.on_mount.map(Ln).filter(Fe);t.$$.on_destroy?t.$$.on_destroy.push(...l):ee(l),t.$$.on_mount=[]}),o.forEach(Ne)}function O(t,e){const n=t.$$;n.fragment!==null&&(ar(n.after_update),ee(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dr(t,e){t.$$.dirty[0]===-1&&(Pe.push(t),Bn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(t,e,n,r,o,l,s=null,c=[-1]){const i=Ue;fe(t);const u=t.$$={fragment:null,ctx:[],props:l,update:k,not_equal:o,bound:Tt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:Tt(),dirty:c,skip_bound:!1,root:e.target||i.$$.root};s&&s(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(f,d,..._)=>{const m=_.length?_[0]:d;return u.ctx&&o(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),a&&dr(t,f)),d}):[],u.update(),a=!0,ee(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=lr(e.target);u.fragment&&u.fragment.l(f),f.forEach(C)}else u.fragment&&u.fragment.c();e.intro&&w(t.$$.fragment),N(t,e.target,e.anchor),$t()}fe(i)}class X{constructor(){it(this,"$$");it(this,"$$set")}$destroy(){O(this,1),this.$destroy=k}$on(e,n){if(!Fe(n))return k;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!rr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const _r="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_r);const Te=[];function Hn(t,e){return{subscribe:Ce(t,e).subscribe}}function Ce(t,e=k){let n;const r=new Set;function o(c){if(H(t,c)&&(t=c,n)){const i=!Te.length;for(const u of r)u[1](),Te.push(u,t);if(i){for(let u=0;u<Te.length;u+=2)Te[u][0](Te[u+1]);Te.length=0}}}function l(c){o(c(t))}function s(c,i=k){const u=[c,i];return r.add(u),r.size===1&&(n=e(o,l)||k),c(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:o,update:l,subscribe:s}}function Rn(t,e,n){const r=!Array.isArray(t),o=r?[t]:t;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const l=e.length<2;return Hn(n,(s,c)=>{let i=!1;const u=[];let a=0,f=k;const d=()=>{if(a)return;f();const m=e(r?u[0]:u,s,c);l?s(m):f=Fe(m)?m:k},_=o.map((m,y)=>Nn(m,g=>{u[y]=g,a&=~(1<<y),i&&d()},()=>{a|=1<<y}));return i=!0,d(),function(){ee(_),f(),i=!1}})}function pr(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,o,l,s=[],c="",i=t.split("/");for(i[0]||i.shift();o=i.shift();)n=o[0],n==="*"?(s.push("wild"),c+="/(.*)"):n===":"?(r=o.indexOf("?",1),l=o.indexOf(".",1),s.push(o.substring(1,~r?r:~l?l:o.length)),c+=~r&&!~l?"(?:/([^/]+?))?":"/([^/]+?)",~l&&(c+=(~r?"?":"")+"\\"+o.substring(l))):c+="/"+o;return{keys:s,pattern:new RegExp("^"+c+(e?"(?=$|/)":"/?$"),"i")}}function hr(t){let e,n,r;const o=[t[2]];var l=t[0];function s(c,i){let u={};if(i!==void 0&&i&4)u=Qe(o,[xe(c[2])]);else for(let a=0;a<o.length;a+=1)u=yt(u,o[a]);return{props:u}}return l&&(e=Ze(l,s(t)),e.$on("routeEvent",t[7])),{c(){e&&B(e.$$.fragment),n=te()},m(c,i){e&&N(e,c,i),I(c,n,i),r=!0},p(c,i){if(i&1&&l!==(l=c[0])){if(e){se();const u=e;$(u.$$.fragment,1,0,()=>{O(u,1)}),ce()}l?(e=Ze(l,s(c,i)),e.$on("routeEvent",c[7]),B(e.$$.fragment),w(e.$$.fragment,1),N(e,n.parentNode,n)):e=null}else if(l){const u=i&4?Qe(o,[xe(c[2])]):{};e.$set(u)}},i(c){r||(e&&w(e.$$.fragment,c),r=!0)},o(c){e&&$(e.$$.fragment,c),r=!1},d(c){c&&C(n),e&&O(e,c)}}}function mr(t){let e,n,r;const o=[{params:t[1]},t[2]];var l=t[0];function s(c,i){let u={};if(i!==void 0&&i&6)u=Qe(o,[i&2&&{params:c[1]},i&4&&xe(c[2])]);else for(let a=0;a<o.length;a+=1)u=yt(u,o[a]);return{props:u}}return l&&(e=Ze(l,s(t)),e.$on("routeEvent",t[6])),{c(){e&&B(e.$$.fragment),n=te()},m(c,i){e&&N(e,c,i),I(c,n,i),r=!0},p(c,i){if(i&1&&l!==(l=c[0])){if(e){se();const u=e;$(u.$$.fragment,1,0,()=>{O(u,1)}),ce()}l?(e=Ze(l,s(c,i)),e.$on("routeEvent",c[6]),B(e.$$.fragment),w(e.$$.fragment,1),N(e,n.parentNode,n)):e=null}else if(l){const u=i&6?Qe(o,[i&2&&{params:c[1]},i&4&&xe(c[2])]):{};e.$set(u)}},i(c){r||(e&&w(e.$$.fragment,c),r=!0)},o(c){e&&$(e.$$.fragment,c),r=!1},d(c){c&&C(n),e&&O(e,c)}}}function gr(t){let e,n,r,o;const l=[mr,hr],s=[];function c(i,u){return i[1]?0:1}return e=c(t),n=s[e]=l[e](t),{c(){n.c(),r=te()},m(i,u){s[e].m(i,u),I(i,r,u),o=!0},p(i,[u]){let a=e;e=c(i),e===a?s[e].p(i,u):(se(),$(s[a],1,1,()=>{s[a]=null}),ce(),n=s[e],n?n.p(i,u):(n=s[e]=l[e](i),n.c()),w(n,1),n.m(r.parentNode,r))},i(i){o||(w(n),o=!0)},o(i){$(n),o=!1},d(i){i&&C(r),s[e].d(i)}}}function jt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const vt=Hn(null,function(e){e(jt());const n=()=>{e(jt())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});Rn(vt,t=>t.location);Rn(vt,t=>t.querystring);const Lt=Ce(void 0);async function Q(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await Gn(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}function kt(t,e){if(e=Ot(e),!t||!t.tagName||t.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Nt(t,e),{update(n){n=Ot(n),Nt(t,n)}}}function br(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Nt(t,e){let n=e.href||t.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);t.setAttribute("href",n),t.addEventListener("click",r=>{r.preventDefault(),e.disabled||yr(r.currentTarget.getAttribute("href"))})}function Ot(t){return t&&typeof t=="string"?{href:t}:t||{}}function yr(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=t}function wr(t,e,n){let{routes:r={}}=e,{prefix:o=""}=e,{restoreScrollState:l=!1}=e;class s{constructor(D,P){if(!P||typeof P!="function"&&(typeof P!="object"||P._sveltesparouter!==!0))throw Error("Invalid component object");if(!D||typeof D=="string"&&(D.length<1||D.charAt(0)!="/"&&D.charAt(0)!="*")||typeof D=="object"&&!(D instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:T,keys:L}=pr(D);this.path=D,typeof P=="object"&&P._sveltesparouter===!0?(this.component=P.component,this.conditions=P.conditions||[],this.userData=P.userData,this.props=P.props||{}):(this.component=()=>Promise.resolve(P),this.conditions=[],this.props={}),this._pattern=T,this._keys=L}match(D){if(o){if(typeof o=="string")if(D.startsWith(o))D=D.substr(o.length)||"/";else return null;else if(o instanceof RegExp){const A=D.match(o);if(A&&A[0])D=D.substr(A[0].length)||"/";else return null}}const P=this._pattern.exec(D);if(P===null)return null;if(this._keys===!1)return P;const T={};let L=0;for(;L<this._keys.length;){try{T[this._keys[L]]=decodeURIComponent(P[L+1]||"")||null}catch{T[this._keys[L]]=null}L++}return T}async checkConditions(D){for(let P=0;P<this.conditions.length;P++)if(!await this.conditions[P](D))return!1;return!0}}const c=[];r instanceof Map?r.forEach((v,D)=>{c.push(new s(D,v))}):Object.keys(r).forEach(v=>{c.push(new s(v,r[v]))});let i=null,u=null,a={};const f=Se();async function d(v,D){await Gn(),f(v,D)}let _=null,m=null;l&&(m=v=>{v.state&&(v.state.__svelte_spa_router_scrollY||v.state.__svelte_spa_router_scrollX)?_=v.state:_=null},window.addEventListener("popstate",m),cr(()=>{br(_)}));let y=null,g=null;const E=vt.subscribe(async v=>{y=v;let D=0;for(;D<c.length;){const P=c[D].match(v.location);if(!P){D++;continue}const T={route:c[D].path,location:v.location,querystring:v.querystring,userData:c[D].userData,params:P&&typeof P=="object"&&Object.keys(P).length?P:null};if(!await c[D].checkConditions(T)){n(0,i=null),g=null,d("conditionsFailed",T);return}d("routeLoading",Object.assign({},T));const L=c[D].component;if(g!=L){L.loading?(n(0,i=L.loading),g=L,n(1,u=L.loadingParams),n(2,a={}),d("routeLoaded",Object.assign({},T,{component:i,name:i.name,params:u}))):(n(0,i=null),g=null);const A=await L();if(v!=y)return;n(0,i=A&&A.default||A),g=L}P&&typeof P=="object"&&Object.keys(P).length?n(1,u=P):n(1,u=null),n(2,a=c[D].props),d("routeLoaded",Object.assign({},T,{component:i,name:i.name,params:u})).then(()=>{Lt.set(u)});return}n(0,i=null),g=null,Lt.set(void 0)});ir(()=>{E(),m&&window.removeEventListener("popstate",m)});function S(v){Pt.call(this,t,v)}function j(v){Pt.call(this,t,v)}return t.$$set=v=>{"routes"in v&&n(3,r=v.routes),"prefix"in v&&n(4,o=v.prefix),"restoreScrollState"in v&&n(5,l=v.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=l?"manual":"auto")},[i,u,a,r,o,l,S,j]}class $r extends X{constructor(e){super(),J(this,e,wr,gr,H,{routes:3,prefix:4,restoreScrollState:5})}}const vr=(t,e)=>e.some(n=>t instanceof n);let Mt,Bt;function kr(){return Mt||(Mt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Sr(){return Bt||(Bt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zn=new WeakMap,mt=new WeakMap,Jn=new WeakMap,at=new WeakMap,St=new WeakMap;function Cr(t){const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",s)},l=()=>{n(pe(t.result)),o()},s=()=>{r(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&zn.set(n,t)}).catch(()=>{}),St.set(e,t),e}function Ir(t){if(mt.has(t))return;const e=new Promise((n,r)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",s),t.removeEventListener("abort",s)},l=()=>{n(),o()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",s),t.addEventListener("abort",s)});mt.set(t,e)}let gt={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mt.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Jn.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pe(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Er(t){gt=t(gt)}function Ar(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ft(this),e,...n);return Jn.set(r,e.sort?e.sort():[e]),pe(r)}:Sr().includes(t)?function(...e){return t.apply(ft(this),e),pe(zn.get(this))}:function(...e){return pe(t.apply(ft(this),e))}}function Dr(t){return typeof t=="function"?Ar(t):(t instanceof IDBTransaction&&Ir(t),vr(t,kr())?new Proxy(t,gt):t)}function pe(t){if(t instanceof IDBRequest)return Cr(t);if(at.has(t))return at.get(t);const e=Dr(t);return e!==t&&(at.set(t,e),St.set(e,t)),e}const ft=t=>St.get(t);function Tr(t,e,{blocked:n,upgrade:r,blocking:o,terminated:l}={}){const s=indexedDB.open(t,e),c=pe(s);return r&&s.addEventListener("upgradeneeded",i=>{r(pe(s.result),i.oldVersion,i.newVersion,pe(s.transaction),i)}),n&&s.addEventListener("blocked",i=>n(i.oldVersion,i.newVersion,i)),c.then(i=>{l&&i.addEventListener("close",()=>l()),o&&i.addEventListener("versionchange",u=>o(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const Pr=["get","getKey","getAll","getAllKeys","count"],jr=["put","add","delete","clear"],dt=new Map;function Gt(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dt.get(e))return dt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=jr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Pr.includes(n)))return;const l=async function(s,...c){const i=this.transaction(s,o?"readwrite":"readonly");let u=i.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),o&&i.done]))[0]};return dt.set(e,l),l}Er(t=>({...t,get:(e,n,r)=>Gt(e,n)||t.get(e,n,r),has:(e,n)=>!!Gt(e,n)||t.has(e,n)}));let we=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const re=Ce([]),be=Ce([]),Ie=Ce([]),Ee=Ce([]),nt=Ce([]);var he=(t=>(t.Expense="EXPENSE",t.Income="INCOME",t.Transfer="TRANSFER",t))(he||{});let F;const Lr=Tr("acc",1,{upgrade(t){t.objectStoreNames.contains("accountGroups")||t.createObjectStore("accountGroups",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("accounts")||t.createObjectStore("accounts",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("currencies")||t.createObjectStore("currencies",{keyPath:"code"}),t.objectStoreNames.contains("categories")||t.createObjectStore("categories",{keyPath:"id"}).createIndex("title",["title","subtitle"]),t.objectStoreNames.contains("entries")||t.createObjectStore("entries",{keyPath:"id"}).createIndex("accountId","accountId"),t.objectStoreNames.contains("transactions")||t.createObjectStore("transactions",{keyPath:"id"}),t.objectStoreNames.contains("settings")||t.createObjectStore("settings",{keyPath:"name"})}}).then(t=>{F=t});function Ae(){return F.getAllFromIndex("accounts","title")}function Nr(t){return F.get("accounts",t)}async function Or(t){await F.put("accounts",t),re.set(await Ae())}async function Mr(t){const e=await F.get("transactions",t);await Promise.all([F.delete("transactions",t),F.delete("entries",e.entryId),e.secondEntryId?F.delete("entries",e.secondEntryId):null]),await Promise.all([$e(e.accountId),e.secondAccountId?$e(e.secondAccountId):null]),re.set(await Ae())}async function Br(t,e){const[n,r]=await Promise.all([F.get("entries",t.entryId),t.secondEntryId?F.get("entries",t.secondEntryId):null]),[o,l,s]=qn(e,t.id,n.id,r?r.id:we(5));await Promise.all([F.put("transactions",o),F.put("entries",l),s?r?F.put("entries",s):F.add("entries",s):r?F.delete("entries",r.id):null]);const[c,i]=await Promise.all([$e(o.accountId),o.secondAccountId?$e(o.secondAccountId):null,t.secondAccountId&&t.secondAccountId!==e.secondAccountId?$e(t.secondAccountId):null]);(c||i)&&re.set(await Ae())}function rt(){return F.getAllFromIndex("accountGroups","title")}function ot(){return F.getAllFromIndex("categories","title")}function lt(){return F.getAll("currencies")}function Xn(){return F.getAll("settings")}async function Vn(t,e=!0){return(await F.getAllFromIndex("entries","accountId",t)).sort((r,o)=>r.timestamp<o.timestamp?e?1:-1:r.timestamp>o.timestamp?e?-1:1:0)}function Gr(t){return F.get("transactions",t)}async function Ur(t,e){await F.put("accountGroups",{id:we(5),currencyCode:e,title:t}),be.set(await rt())}async function Fr(t){await F.put("accountGroups",t),be.set(await rt())}async function Hr(t,e,n){await F.put("accounts",{id:we(5),title:t,groupId:e,currencyCode:n,balance:0}),re.set(await Ae())}async function Rr(t,e){await F.put("categories",{id:we(5),title:t,subtitle:e}),Ie.set(await ot())}async function zr(t){await F.put("settings",t),nt.set(await Xn())}async function Jr(t){await F.put("categories",t),Ie.set(await ot())}async function Xr(t,e){await F.put("currencies",{code:t,title:e}),Ee.set(await lt())}async function Vr(t){await F.put("currencies",t),Ee.set(await lt())}function qn({kind:t,accountId:e,timestamp:n,categoryId:r,secondAccountId:o,secondAmount:l,amount:s,comment:c},i,u,a){const f={id:u,timestamp:n,accountId:e,...r?{categoryId:r}:{},transactionId:i,comment:c,amount:t==="INCOME"?s:-s,total:0};if(t==="TRANSFER"){const d={id:a,timestamp:n,accountId:o,transactionId:i,comment:c,amount:l||s,total:0};return[{id:i,kind:t,timestamp:n,accountId:e,secondAccountId:o,amount:s,...l?{secondAmount:l}:{},comment:c,entryId:f.id,secondEntryId:d.id},f,d]}else return[{id:i,kind:t,timestamp:n,accountId:e,...r?{categoryId:r}:{},amount:s,comment:c,entryId:f.id},f]}async function $e(t){const e=await Vn(t,!1);let n=0;for(const o of e)n+=o.amount,o.total!==n&&await F.put("entries",{...o,total:n});const r=await Nr(t);return r.balance!==n?(await F.put("accounts",{...r,balance:n}),!0):!1}async function qr(t){const e=F.transaction(["entries","transactions"],"readwrite"),n=e.objectStore("entries"),r=e.objectStore("transactions"),[o,l,s]=qn(t,we(5),we(5),we(5));await Promise.all([r.add(o),n.add(l),...s?[n.add(s)]:[],e.done]);const[c,i]=await Promise.all([$e(o.accountId),o.secondAccountId?$e(o.secondAccountId):!1]);(c||i)&&re.set(await Ae())}async function Kn(){const[t,e,n,r,o]=await Promise.all([Ae(),rt(),ot(),lt(),Xn()]);Ee.set(r),be.set(e),re.set(t),Ie.set(n),nt.set(o)}async function Kr(){await Lr,await Kn()}const Wr=Kr();function Yr(t){function e(r){r.target instanceof Node&&t.hasAttribute("data-opened")&&(t.contains(r.target)||t.removeAttribute("data-opened"))}function n(r){r.code==="Escape"&&t.hasAttribute("data-opened")&&t.removeAttribute("data-opened")}return document.addEventListener("click",e),document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n),document.removeEventListener("click",e)}}}const Zr=t=>({}),Ut=t=>({});function Qr(t){let e,n,r,o,l,s,c,i;const u=t[6].default,a=qe(u,t,t[5],null),f=t[6].content,d=qe(f,t,t[5],Ut);return{c(){e=b("div"),n=b("div"),a&&a.c(),r=G(),o=b("div"),d&&d.c(),p(n,"class","_2SXNm"),p(o,"class","_27WQU"),p(o,"data-role","popover"),p(e,"class",l="_2LTIc "+t[0])},m(_,m){I(_,e,m),h(e,n),a&&a.m(n,null),h(e,r),h(e,o),d&&d.m(o,null),t[8](e),s=!0,c||(i=[z(n,"click",function(){Fe(t[1]&&t[7])&&(t[1]&&t[7]).apply(this,arguments)}),tt(Yr.call(null,e))],c=!0)},p(_,[m]){t=_,a&&a.p&&(!s||m&32)&&We(a,u,t,t[5],s?Ke(u,t[5],m,null):Ye(t[5]),null),d&&d.p&&(!s||m&32)&&We(d,f,t,t[5],s?Ke(f,t[5],m,Zr):Ye(t[5]),Ut),(!s||m&1&&l!==(l="_2LTIc "+t[0]))&&p(e,"class",l)},i(_){s||(w(a,_),w(d,_),s=!0)},o(_){$(a,_),$(d,_),s=!1},d(_){_&&C(e),a&&a.d(_),d&&d.d(_),t[8](null),c=!1,ee(i)}}}function xr(t,e,n){let{$$slots:r={},$$scope:o}=e,l,{class:s=void 0}=e,{clickToggle:c=!0}=e;function i(){l.toggleAttribute("data-opened",!1)}function u(){l.toggleAttribute("data-opened",!0)}const a=()=>{l.toggleAttribute("data-opened")};function f(d){Z[d?"unshift":"push"](()=>{l=d,n(2,l)})}return t.$$set=d=>{"class"in d&&n(0,s=d.class),"clickToggle"in d&&n(1,c=d.clickToggle),"$$scope"in d&&n(5,o=d.$$scope)},[s,c,l,i,u,o,r,a,f]}class Wn extends X{constructor(e){super(),J(this,e,xr,Qr,H,{class:0,clickToggle:1,close:3,show:4})}get close(){return this.$$.ctx[3]}get show(){return this.$$.ctx[4]}}function Ft(t,e,n){const r=t.slice();return r[3]=e[n],r}function eo(t){let e,n=t[3].title+"",r;return{c(){e=b("span"),r=M(n),p(e,"class","_2YoB_")},m(o,l){I(o,e,l),h(e,r)},p(o,l){l&1&&n!==(n=o[3].title+"")&&U(r,n)},d(o){o&&C(e)}}}function to(t){let e,n=t[3].title+"",r,o,l,s;return{c(){e=b("a"),r=M(n),p(e,"class","_2blFf"),p(e,"href",o=t[3].to),p(e,"draggable",!1)},m(c,i){I(c,e,i),h(e,r),l||(s=tt(kt.call(null,e)),l=!0)},p(c,i){i&1&&n!==(n=c[3].title+"")&&U(r,n),i&1&&o!==(o=c[3].to)&&p(e,"href",o)},d(c){c&&C(e),l=!1,s()}}}function Ht(t,e){let n,r,o,l,s;function c(a,f){return a[3].to?to:eo}let i=c(e),u=i(e);return{key:t,first:null,c(){n=b("li"),u.c(),r=G(),p(n,"class","_161ne"),p(n,"data-id",o=e[3].id),this.first=n},m(a,f){I(a,n,f),u.m(n,null),h(n,r),l||(s=z(n,"click",e[2]),l=!0)},p(a,f){e=a,i===(i=c(e))&&u?u.p(e,f):(u.d(1),u=i(e),u&&(u.c(),u.m(n,r))),f&1&&o!==(o=e[3].id)&&p(n,"data-id",o)},d(a){a&&C(n),u.d(),l=!1,s()}}}function no(t){let e,n=[],r=new Map,o=K(t[0]);const l=s=>s[3].id;for(let s=0;s<o.length;s+=1){let c=Ft(t,o,s),i=l(c);r.set(i,n[s]=Ht(i,c))}return{c(){e=b("ul");for(let s=0;s<n.length;s+=1)n[s].c();p(e,"class","_4OB04")},m(s,c){I(s,e,c);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,[c]){c&3&&(o=K(s[0]),n=ge(n,c,l,1,s,o,r,e,Be,Ht,null,Ft))},i:k,o:k,d(s){s&&C(e);for(let c=0;c<n.length;c+=1)n[c].d()}}}function ro(t,e,n){let{items:r=[]}=e;const o=Se(),l=s=>{o("menu",{id:s.currentTarget.dataset.id})};return t.$$set=s=>{"items"in s&&n(0,r=s.items)},[r,o,l]}class oo extends X{constructor(e){super(),J(this,e,ro,no,H,{items:0})}}function lo(t){let e,n,r;return{c(){e=ae("svg"),n=ae("line"),r=ae("polyline"),p(n,"x1","19"),p(n,"y1","12"),p(n,"x2","5"),p(n,"y2","12"),p(r,"points","12 19 5 12 12 5"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"width",t[0]),p(e,"height",t[0]),p(e,"viewBox","0 0 24 24"),p(e,"fill","none"),p(e,"stroke","currentColor"),p(e,"stroke-width","2"),p(e,"stroke-linecap","round"),p(e,"stroke-linejoin","round"),p(e,"class","feather feather-arrow-left")},m(o,l){I(o,e,l),h(e,n),h(e,r)},p(o,[l]){l&1&&p(e,"width",o[0]),l&1&&p(e,"height",o[0])},i:k,o:k,d(o){o&&C(e)}}}function so(t,e,n){let{size:r=24}=e;return t.$$set=o=>{"size"in o&&n(0,r=o.size)},[r]}class co extends X{constructor(e){super(),J(this,e,so,lo,H,{size:0})}}function io(t){let e,n,r;return{c(){e=ae("svg"),n=ae("line"),r=ae("line"),p(n,"x1","12"),p(n,"y1","5"),p(n,"x2","12"),p(n,"y2","19"),p(r,"x1","5"),p(r,"y1","12"),p(r,"x2","19"),p(r,"y2","12"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"width",t[0]),p(e,"height",t[0]),p(e,"viewBox","0 0 24 24"),p(e,"fill","none"),p(e,"stroke","currentColor"),p(e,"stroke-width","2"),p(e,"stroke-linecap","round"),p(e,"stroke-linejoin","round"),p(e,"class","feather feather-plus")},m(o,l){I(o,e,l),h(e,n),h(e,r)},p(o,[l]){l&1&&p(e,"width",o[0]),l&1&&p(e,"height",o[0])},i:k,o:k,d(o){o&&C(e)}}}function uo(t,e,n){let{size:r=24}=e;return t.$$set=o=>{"size"in o&&n(0,r=o.size)},[r]}class ao extends X{constructor(e){super(),J(this,e,uo,io,H,{size:0})}}function fo(t){let e,n,r,o;return{c(){e=ae("svg"),n=ae("line"),r=ae("line"),o=ae("line"),p(n,"x1","3"),p(n,"y1","12"),p(n,"x2","21"),p(n,"y2","12"),p(r,"x1","3"),p(r,"y1","6"),p(r,"x2","21"),p(r,"y2","6"),p(o,"x1","3"),p(o,"y1","18"),p(o,"x2","21"),p(o,"y2","18"),p(e,"xmlns","http://www.w3.org/2000/svg"),p(e,"width",t[0]),p(e,"height",t[0]),p(e,"viewBox","0 0 24 24"),p(e,"fill","none"),p(e,"stroke","currentColor"),p(e,"stroke-width","2"),p(e,"stroke-linecap","round"),p(e,"stroke-linejoin","round"),p(e,"class","feather feather-menu")},m(l,s){I(l,e,s),h(e,n),h(e,r),h(e,o)},p(l,[s]){s&1&&p(e,"width",l[0]),s&1&&p(e,"height",l[0])},i:k,o:k,d(l){l&&C(e)}}}function _o(t,e,n){let{size:r=24}=e;return t.$$set=o=>{"size"in o&&n(0,r=o.size)},[r]}class po extends X{constructor(e){super(),J(this,e,_o,fo,H,{size:0})}}function Rt(t){let e,n,r,o,l;return n=new co({}),{c(){e=b("a"),B(n.$$.fragment),p(e,"class","_3SB3X"),p(e,"href",t[1]),p(e,"draggable",!1)},m(s,c){I(s,e,c),N(n,e,null),r=!0,o||(l=tt(kt.call(null,e)),o=!0)},p(s,c){(!r||c&2)&&p(e,"href",s[1])},i(s){r||(w(n.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),r=!1},d(s){s&&C(e),O(n),o=!1,l()}}}function zt(t){let e,n,r,o,l;return n=new ao({}),{c(){e=b("a"),B(n.$$.fragment),p(e,"class","_3SB3X"),p(e,"href",t[2]),p(e,"draggable",!1)},m(s,c){I(s,e,c),N(n,e,null),r=!0,o||(l=tt(kt.call(null,e)),o=!0)},p(s,c){(!r||c&4)&&p(e,"href",s[2])},i(s){r||(w(n.$$.fragment,s),r=!0)},o(s){$(n.$$.fragment,s),r=!1},d(s){s&&C(e),O(n),o=!1,l()}}}function Jt(t){let e,n,r={class:"_1qXOD",$$slots:{content:[mo],default:[ho]},$$scope:{ctx:t}};return e=new Wn({props:r}),t[7](e),{c(){B(e.$$.fragment)},m(o,l){N(e,o,l),n=!0},p(o,l){const s={};l&280&&(s.$$scope={dirty:l,ctx:o}),e.$set(s)},i(o){n||(w(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){t[7](null),O(e,o)}}}function ho(t){let e,n;return e=new po({}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function mo(t){let e,n;return e=new oo({props:{slot:"content",items:t[3]}}),e.$on("menu",t[6]),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){const l={};o&8&&(l.items=r[3]),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function go(t){let e,n,r,o,l,s,c,i,u,a=t[1]&&Rt(t),f=t[2]&&zt(t),d=t[3]&&Jt(t);return{c(){e=b("header"),n=b("div"),a&&a.c(),r=G(),o=b("h1"),l=M(t[0]),s=G(),c=b("div"),f&&f.c(),i=G(),d&&d.c(),p(n,"class","_1J780"),p(o,"class","_17FA5"),p(c,"class","_3ifcR"),p(e,"class","_2Jb6S")},m(_,m){I(_,e,m),h(e,n),a&&a.m(n,null),h(e,r),h(e,o),h(o,l),h(e,s),h(e,c),f&&f.m(c,null),h(c,i),d&&d.m(c,null),u=!0},p(_,[m]){_[1]?a?(a.p(_,m),m&2&&w(a,1)):(a=Rt(_),a.c(),w(a,1),a.m(n,null)):a&&(se(),$(a,1,1,()=>{a=null}),ce()),(!u||m&1)&&U(l,_[0]),_[2]?f?(f.p(_,m),m&4&&w(f,1)):(f=zt(_),f.c(),w(f,1),f.m(c,i)):f&&(se(),$(f,1,1,()=>{f=null}),ce()),_[3]?d?(d.p(_,m),m&8&&w(d,1)):(d=Jt(_),d.c(),w(d,1),d.m(c,null)):d&&(se(),$(d,1,1,()=>{d=null}),ce())},i(_){u||(w(a),w(f),w(d),u=!0)},o(_){$(a),$(f),$(d),u=!1},d(_){_&&C(e),a&&a.d(),f&&f.d(),d&&d.d()}}}function bo(t,e,n){let{title:r}=e,{returnPath:o=void 0}=e,{addPath:l=void 0}=e,{menuItems:s=null}=e,c=null;const i=Se(),u=f=>{c.close(),i("menu",{id:f.detail.id})};function a(f){Z[f?"unshift":"push"](()=>{c=f,n(4,c)})}return t.$$set=f=>{"title"in f&&n(0,r=f.title),"returnPath"in f&&n(1,o=f.returnPath),"addPath"in f&&n(2,l=f.addPath),"menuItems"in f&&n(3,s=f.menuItems)},[r,o,l,s,c,i,u,a]}class ie extends X{constructor(e){super(),J(this,e,bo,go,H,{title:0,returnPath:1,addPath:2,menuItems:3})}}const yo=t=>({}),Xt=t=>({});function wo(t){let e,n,r;const o=t[1].header,l=qe(o,t,t[0],Xt),s=t[1].default,c=qe(s,t,t[0],null);return{c(){e=b("main"),l&&l.c(),n=G(),c&&c.c(),p(e,"class","_2HUC4")},m(i,u){I(i,e,u),l&&l.m(e,null),h(e,n),c&&c.m(e,null),r=!0},p(i,[u]){l&&l.p&&(!r||u&1)&&We(l,o,i,i[0],r?Ke(o,i[0],u,yo):Ye(i[0]),Xt),c&&c.p&&(!r||u&1)&&We(c,s,i,i[0],r?Ke(s,i[0],u,null):Ye(i[0]),null)},i(i){r||(w(l,i),w(c,i),r=!0)},o(i){$(l,i),$(c,i),r=!1},d(i){i&&C(e),l&&l.d(i),c&&c.d(i)}}}function $o(t,e,n){let{$$slots:r={},$$scope:o}=e;return t.$$set=l=>{"$$scope"in l&&n(0,o=l.$$scope)},[o,r]}class ue extends X{constructor(e){super(),J(this,e,$o,wo,H,{})}}const Vt=[{value:he.Expense,title:"Expense"},{value:he.Transfer,title:"Transfer"},{value:he.Income,title:"Income"}],qt=4.78,Kt=461.43,Wt=96.62,Yt={KZT:{RUB:1/qt,USD:1/Kt},RUB:{USD:1/Wt,KZT:qt},USD:{KZT:Kt,RUB:Wt}},bt="baseCurrencyCode",vo=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function ko(t){const e=t.getTimezoneOffset()*6e4,n=new Date(t.getTime()-e),r=n.getFullYear(),o=String(n.getUTCMonth()+1).padStart(2,"0"),l=String(n.getUTCDate()).padStart(2,"0"),s=String(n.getUTCHours()).padStart(2,"0"),c=String(n.getUTCMinutes()).padStart(2,"0");return`${r}-${o}-${l}T${s}:${c}`}function Yn(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),o=r.getFullYear(),l=String(r.getUTCMonth()+1).padStart(2,"0"),s=String(r.getUTCDate()).padStart(2,"0"),c=String(r.getUTCHours()).padStart(2,"0"),i=String(r.getUTCMinutes()).padStart(2,"0");return`${o}-${l}-${s} ${c}:${i}`}function So(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),o=r.getFullYear(),l=String(r.getUTCMonth()+1).padStart(2,"0"),s=String(r.getUTCDate()).padStart(2,"0"),c=vo[e.getUTCDay()];return`${o}-${l}-${s} ${c}`}function Zt(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),o=String(r.getUTCHours()).padStart(2,"0"),l=String(r.getUTCMinutes()).padStart(2,"0");return`${o}:${l}`}function et(t){return/^[1-9]\d*([.,]\d{2})?$/.test(t)}function _t(t){return/[.,]/.test(t)?parseInt(t.replace(/[,.]/,"")):parseInt(t)*100}function le(t,e,n){t=Math.round(t);const r=t<0?Math.ceil(t/100):Math.floor(t/100),o=Math.abs(t%100);return(n&&t>0?"+":"")+`${e?Co(r):r}.${String(o).padStart(2,"0")}`}function Zn(t,e){var n,r;return(n=Yt[t])!=null&&n[e]?(r=Yt[t])==null?void 0:r[e]:NaN}function Co(t,e=" "){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)}function Io(t,e){return t.reduce((n,r)=>(r.currencyCode===e?n+=r.balance:n+=r.balance*Zn(r.currencyCode,e),n),0)}function Eo(t,e){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download=e,o.click(),URL.revokeObjectURL(r)}function Ao(t){const e=document.createElement("input");e.type="file",e.accept="application/json",e.multiple=!1,e.onchange=()=>{const n=e.files[0];if(n){const r=new FileReader;r.onload=function(){t(r.result)},r.readAsText(n)}},e.click()}function Do(t){try{return JSON.parse(t)}catch{return console.warn("JSON parsing failed."),null}}async function To(){const[t,e,n,r,o,l]=await Promise.all([lt(),rt(),Ae(),ot(),F.getAll("transactions"),F.getAll("entries")]);return{ver:Yn(Date.now()),currencies:t,accountGroups:e,accounts:n,categories:r,transactions:o,entries:l}}async function Po(t){if(!confirm("All the data will be overwritten. Are you sure you want to continue?"))return!1;if(jo(t)){const e=F.transaction(["currencies","accountGroups","accounts","categories","transactions","entries"],"readwrite");await Promise.all([e.objectStore("currencies").clear(),e.objectStore("accountGroups").clear(),e.objectStore("accounts").clear(),e.objectStore("categories").clear(),e.objectStore("transactions").clear(),e.objectStore("entries").clear()]);for(const n of t.currencies)await e.objectStore("currencies").put(n);for(const n of t.accountGroups)await e.objectStore("accountGroups").put(n);for(const n of t.accounts)await e.objectStore("accounts").put(n);for(const n of t.categories)await e.objectStore("categories").put(n);for(const n of t.transactions)await e.objectStore("transactions").put(n);for(const n of t.entries)await e.objectStore("entries").put(n);return await e.done,!0}else return alert("Invalid snapshot format."),!1}function jo(t){return!(!t.ver||!t.currencies||!t.accountGroups||!t.categories||!t.categories||!t.transactions||!t.entries)}function Lo(t){let e,n,r,o=t[0].title+"",l,s,c,i=le(t[0].balance,!0)+"",u,a,f=t[0].currencyCode+"",d,_,m;return{c(){e=b("div"),n=b("div"),r=b("span"),l=M(o),s=G(),c=b("span"),u=M(i),a=G(),d=M(f),p(r,"class","_1Pq8u"),p(n,"class","_1wAoL"),p(e,"class","_2R8pY"),p(e,"data-role","account")},m(y,g){I(y,e,g),h(e,n),h(n,r),h(r,l),h(n,s),h(n,c),h(c,u),h(c,a),h(c,d),_||(m=z(e,"click",t[3]),_=!0)},p(y,[g]){g&1&&o!==(o=y[0].title+"")&&U(l,o),g&1&&i!==(i=le(y[0].balance,!0)+"")&&U(u,i),g&1&&f!==(f=y[0].currencyCode+"")&&U(d,f)},i:k,o:k,d(y){y&&C(e),_=!1,m()}}}function No(t,e,n){let{account:r}=e,{editing:o=!1}=e;const l=Se(),s=()=>{o||l("account",{id:r.id})};return t.$$set=c=>{"account"in c&&n(0,r=c.account),"editing"in c&&n(1,o=c.editing)},[r,o,l,s]}class Oo extends X{constructor(e){super(),J(this,e,No,Lo,H,{account:0,editing:1})}}function Qt(t,e,n){const r=t.slice();return r[5]=e[n],r}function xt(t,e){let n,r,o;return r=new Oo({props:{account:e[5]}}),r.$on("account",e[4]),{key:t,first:null,c(){n=te(),B(r.$$.fragment),this.first=n},m(l,s){I(l,n,s),N(r,l,s),o=!0},p(l,s){e=l;const c={};s&2&&(c.account=e[5]),r.$set(c)},i(l){o||(w(r.$$.fragment,l),o=!0)},o(l){$(r.$$.fragment,l),o=!1},d(l){l&&C(n),O(r,l)}}}function Mo(t){let e,n,r,o=t[0].title+"",l,s,c,i=le(t[2],!0)+"",u,a,f=t[0].currencyCode+"",d,_,m=[],y=new Map,g,E=K(t[1]);const S=j=>j[5].id;for(let j=0;j<E.length;j+=1){let v=Qt(t,E,j),D=S(v);y.set(D,m[j]=xt(D,v))}return{c(){e=b("div"),n=b("div"),r=b("span"),l=M(o),s=G(),c=b("span"),u=M(i),a=G(),d=M(f),_=G();for(let j=0;j<m.length;j+=1)m[j].c();p(r,"class","_5RrCD"),p(n,"class","_3gZXT")},m(j,v){I(j,e,v),h(e,n),h(n,r),h(r,l),h(n,s),h(n,c),h(c,u),h(c,a),h(c,d),h(e,_);for(let D=0;D<m.length;D+=1)m[D]&&m[D].m(e,null);g=!0},p(j,[v]){(!g||v&1)&&o!==(o=j[0].title+"")&&U(l,o),(!g||v&4)&&i!==(i=le(j[2],!0)+"")&&U(u,i),(!g||v&1)&&f!==(f=j[0].currencyCode+"")&&U(d,f),v&2&&(E=K(j[1]),se(),m=ge(m,v,S,1,j,E,y,e,Fn,xt,null,Qt),ce())},i(j){if(!g){for(let v=0;v<E.length;v+=1)w(m[v]);g=!0}},o(j){for(let v=0;v<m.length;v+=1)$(m[v]);g=!1},d(j){j&&C(e);for(let v=0;v<m.length;v+=1)m[v].d()}}}function Bo(t,e,n){let r,o,l;W(t,re,i=>n(3,l=i));let{accountGroup:s}=e;const c=i=>{Q(`/accounts/${i.detail.id}`)};return t.$$set=i=>{"accountGroup"in i&&n(0,s=i.accountGroup)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=l.filter(i=>i.groupId===s.id)),t.$$.dirty&3&&n(2,o=Io(r,s.currencyCode))},[s,r,o,l,c]}class Go extends X{constructor(e){super(),J(this,e,Bo,Mo,H,{accountGroup:0})}}function en(t,e,n){const r=t.slice();return r[8]=e[n],r}function tn(t){let e,n;return e=new Go({props:{accountGroup:t[8]}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){const l={};o&4&&(l.accountGroup=r[8]),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Uo(t){let e,n,r,o,l,s=le(t[1],!0)+"",c,i,u=(t[0]||"")+"",a,f,d=K(t[2]),_=[];for(let y=0;y<d.length;y+=1)_[y]=tn(en(t,d,y));const m=y=>$(_[y],1,1,()=>{_[y]=null});return{c(){for(let y=0;y<_.length;y+=1)_[y].c();e=G(),n=b("div"),r=b("div"),r.textContent="Total",o=G(),l=b("div"),c=M(s),i=G(),a=M(u),p(l,"class","_2Os0c"),p(n,"class","_1rK1Z")},m(y,g){for(let E=0;E<_.length;E+=1)_[E]&&_[E].m(y,g);I(y,e,g),I(y,n,g),h(n,r),h(n,o),h(n,l),h(l,c),h(l,i),h(l,a),f=!0},p(y,g){if(g&4){d=K(y[2]);let E;for(E=0;E<d.length;E+=1){const S=en(y,d,E);_[E]?(_[E].p(S,g),w(_[E],1)):(_[E]=tn(S),_[E].c(),w(_[E],1),_[E].m(e.parentNode,e))}for(se(),E=d.length;E<_.length;E+=1)m(E);ce()}(!f||g&2)&&s!==(s=le(y[1],!0)+"")&&U(c,s),(!f||g&1)&&u!==(u=(y[0]||"")+"")&&U(a,u)},i(y){if(!f){for(let g=0;g<d.length;g+=1)w(_[g]);f=!0}},o(y){_=_.filter(Boolean);for(let g=0;g<_.length;g+=1)$(_[g]);f=!1},d(y){y&&(C(e),C(n)),Oe(_,y)}}}function Fo(t){let e,n;return e=new ie({props:{slot:"header",title:"Accounts",addPath:"/accounts/new",menuItems:t[3]}}),e.$on("menu",t[7]),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Ho(t){let e,n;return e=new ue({props:{$$slots:{header:[Fo],default:[Uo]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&2055&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Ro(t,e,n){let r,o,l,s,c,i;W(t,re,f=>n(4,l=f)),W(t,Ee,f=>n(5,s=f)),W(t,nt,f=>n(6,c=f)),W(t,be,f=>n(2,i=f));const u=[{id:"groups",title:"Account Groups",to:"/groups"},{id:"category",title:"Categories",to:"/categories"},{id:"currency",title:"Currencies",to:"/currencies"},{id:"backup",title:"Backup"},{id:"restore",title:"Restore"},{id:"settings",title:"Settings",to:"/settings"}],a=f=>{switch(f.detail.id){case"backup":To().then(d=>{Eo(d,`${Yn(Date.now())}.json`)});break;case"restore":Ao(d=>{const _=Do(d);_&&Po(_).then(m=>{m&&Kn()})});break}};return t.$$.update=()=>{var f,d;t.$$.dirty&96&&n(0,r=((f=c.find(_=>_.name===bt))==null?void 0:f.value)||((d=s[0])==null?void 0:d.code)),t.$$.dirty&17&&n(1,o=l.reduce((_,m)=>(m.currencyCode===r?_+=m.balance:_+=m.balance*Zn(m.currencyCode,r),_),0))},[r,o,i,u,l,s,c,a]}class zo extends X{constructor(e){super(),J(this,e,Ro,Ho,H,{})}}function nn(t,e,n){const r=t.slice();return r[2]=e[n],r}function rn(t,e){let n,r=e[2].title+"",o,l,s,c,i;return{key:t,first:null,c(){n=b("div"),o=M(r),l=G(),p(n,"class","_3JK5K"),p(n,"data-id",s=e[2].id),this.first=n},m(u,a){I(u,n,a),h(n,o),h(n,l),c||(i=z(n,"click",e[1]),c=!0)},p(u,a){e=u,a&1&&r!==(r=e[2].title+"")&&U(o,r),a&1&&s!==(s=e[2].id)&&p(n,"data-id",s)},d(u){u&&C(n),c=!1,i()}}}function Jo(t){let e=[],n=new Map,r,o=K(t[0]);const l=s=>s[2].id;for(let s=0;s<o.length;s+=1){let c=nn(t,o,s),i=l(c);n.set(i,e[s]=rn(i,c))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=te()},m(s,c){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(s,c);I(s,r,c)},p(s,c){c&3&&(o=K(s[0]),e=ge(e,c,l,1,s,o,n,r.parentNode,Be,rn,r,nn))},d(s){s&&C(r);for(let c=0;c<e.length;c+=1)e[c].d(s)}}}function Xo(t){let e,n;return e=new ie({props:{slot:"header",title:"Account Groups",returnPath:"/",addPath:"/groups/new"}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Vo(t){let e,n;return e=new ue({props:{$$slots:{header:[Xo],default:[Jo]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&33&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function qo(t,e,n){let r;W(t,be,l=>n(0,r=l));function o(l){l.target instanceof HTMLElement&&l.target.dataset.id&&Q(`/groups/${l.target.dataset.id}`)}return[r,o]}class Ko extends X{constructor(e){super(),J(this,e,qo,Vo,H,{})}}function on(t,e,n){const r=t.slice();return r[4]=e[n].code,r[5]=e[n].title,r}function ln(t,e){let n,r,o=e[4]+"",l,s,c=e[5]+"",i,u,a;return{key:t,first:null,c(){n=M(`}
    `),r=b("option"),l=M(o),s=G(),i=M(c),u=G(),r.__value=a=e[4],R(r,r.__value),this.first=n},m(f,d){I(f,n,d),I(f,r,d),h(r,l),h(r,s),h(r,i),h(r,u)},p(f,d){e=f,d&4&&o!==(o=e[4]+"")&&U(l,o),d&4&&c!==(c=e[5]+"")&&U(i,c),d&4&&a!==(a=e[4])&&(r.__value=a,R(r,r.__value))},d(f){f&&(C(n),C(r))}}}function Wo(t){let e,n,r,o=[],l=new Map,s,c,i=K(t[2]);const u=a=>a[4];for(let a=0;a<i.length;a+=1){let f=on(t,i,a),d=u(f);l.set(d,o[a]=ln(d,f))}return{c(){e=b("select"),n=b("option"),r=M(t[1]);for(let a=0;a<o.length;a+=1)o[a].c();n.__value="",R(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,p(e,"class","_1kHx0"),e.required=!0,t[0]===void 0&&Ne(()=>t[3].call(e))},m(a,f){I(a,e,f),h(e,n),h(n,r);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);Le(e,t[0],!0),s||(c=z(e,"change",t[3]),s=!0)},p(a,[f]){f&2&&U(r,a[1]),f&4&&(i=K(a[2]),o=ge(o,f,u,1,a,i,l,e,Be,ln,null,on)),f&5&&Le(e,a[0])},i:k,o:k,d(a){a&&C(e);for(let f=0;f<o.length;f+=1)o[f].d();s=!1,c()}}}function Yo(t,e,n){let r;W(t,Ee,c=>n(2,r=c));let{currencyCode:o}=e,{placeholder:l="Currency"}=e;function s(){o=wt(this),n(0,o)}return t.$$set=c=>{"currencyCode"in c&&n(0,o=c.currencyCode),"placeholder"in c&&n(1,l=c.placeholder)},[o,l,r,s]}class Ct extends X{constructor(e){super(),J(this,e,Yo,Wo,H,{currencyCode:0,placeholder:1})}}function Zo(t){let e,n,r,o,l,s,c,i,u,a,f=t[4]?"Save":"Create",d,_,m,y;function g(S){t[7](S)}let E={};return t[1]!==void 0&&(E.currencyCode=t[1]),r=new Ct({props:E}),Z.push(()=>ke(r,"currencyCode",g)),{c(){e=b("form"),n=b("div"),B(r.$$.fragment),l=G(),s=b("div"),c=b("input"),i=G(),u=b("div"),a=b("button"),d=M(f),p(c,"class","_3xyX_"),p(c,"type","text"),c.disabled=t[3],p(c,"placeholder","Title"),p(a,"class","_2G9AC"),p(a,"type","submit"),a.disabled=t[3],p(e,"class","_3RSQr")},m(S,j){I(S,e,j),h(e,n),N(r,n,null),h(e,l),h(e,s),h(s,c),t[8](c),R(c,t[0]),h(e,i),h(e,u),h(u,a),h(a,d),_=!0,m||(y=[z(c,"input",t[9]),z(e,"submit",Me(t[5]))],m=!0)},p(S,j){const v={};!o&&j&2&&(o=!0,v.currencyCode=S[1],ve(()=>o=!1)),r.$set(v),(!_||j&8)&&(c.disabled=S[3]),j&1&&c.value!==S[0]&&R(c,S[0]),(!_||j&8)&&(a.disabled=S[3])},i(S){_||(w(r.$$.fragment,S),_=!0)},o(S){$(r.$$.fragment,S),_=!1},d(S){S&&C(e),O(r),t[8](null),m=!1,ee(y)}}}function Qo(t){let e,n;return e=new ie({props:{slot:"header",title:t[4]?"Account Group":"New Account Group",returnPath:"/groups"}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function xo(t){let e,n;return e=new ue({props:{$$slots:{header:[Qo],default:[Zo]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&4111&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function el(t,e,n){let r;W(t,be,y=>n(10,r=y));let{params:o={}}=e;const{id:l}=o;let s=l?r.find(y=>y.id===l):null,c=s?s.title:"",i=s?s.currencyCode:void 0,u,a=!1;Re(()=>{u.focus()});function f(){c.trim()&&i?(n(3,a=!0),s?Fr({...s,title:c.trim(),currencyCode:i}).then(()=>{Q("/groups")}).finally(()=>{n(3,a=!1)}):Ur(c,i).then(()=>{Q("/groups")}).finally(()=>{n(3,a=!1)})):alert("All fields must be specified.")}function d(y){i=y,n(1,i)}function _(y){Z[y?"unshift":"push"](()=>{u=y,n(2,u)})}function m(){c=this.value,n(0,c)}return t.$$set=y=>{"params"in y&&n(6,o=y.params)},[c,i,u,a,s,f,o,d,_,m]}class sn extends X{constructor(e){super(),J(this,e,el,xo,H,{params:6})}}function cn(t,e,n){const r=t.slice();return r[3]=e[n],r}function un(t){let e,n=t[3].title+"",r,o,l;return{c(){e=b("option"),r=M(n),o=G(),e.__value=l=t[3].id,R(e,e.__value)},m(s,c){I(s,e,c),h(e,r),h(e,o)},p(s,c){c&2&&n!==(n=s[3].title+"")&&U(r,n),c&2&&l!==(l=s[3].id)&&(e.__value=l,R(e,e.__value))},d(s){s&&C(e)}}}function tl(t){let e,n,r,o,l=K(t[1]),s=[];for(let c=0;c<l.length;c+=1)s[c]=un(cn(t,l,c));return{c(){e=b("select"),n=b("option"),n.textContent="Account Group";for(let c=0;c<s.length;c+=1)s[c].c();p(n,"class","placeholder"),n.__value="",R(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,p(e,"class","_2Ge4O"),e.required=!0,t[0]===void 0&&Ne(()=>t[2].call(e))},m(c,i){I(c,e,i),h(e,n);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);Le(e,t[0],!0),r||(o=z(e,"change",t[2]),r=!0)},p(c,[i]){if(i&2){l=K(c[1]);let u;for(u=0;u<l.length;u+=1){const a=cn(c,l,u);s[u]?s[u].p(a,i):(s[u]=un(a),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=l.length}i&3&&Le(e,c[0])},i:k,o:k,d(c){c&&C(e),Oe(s,c),r=!1,o()}}}function nl(t,e,n){let r;W(t,be,s=>n(1,r=s));let{groupId:o}=e;function l(){o=wt(this),n(0,o)}return t.$$set=s=>{"groupId"in s&&n(0,o=s.groupId)},[o,r,l]}class rl extends X{constructor(e){super(),J(this,e,nl,tl,H,{groupId:0})}}function ol(t){let e,n,r,o,l,s,c,i,u,a,f,d,_,m,y=t[0]?"Save":"Create",g,E,S,j,v;function D(A){t[8](A)}let P={};t[2]!==void 0&&(P.groupId=t[2]),r=new rl({props:P}),Z.push(()=>ke(r,"groupId",D));function T(A){t[9](A)}let L={};return t[3]!==void 0&&(L.currencyCode=t[3]),c=new Ct({props:L}),Z.push(()=>ke(c,"currencyCode",T)),{c(){e=b("form"),n=b("div"),B(r.$$.fragment),l=G(),s=b("div"),B(c.$$.fragment),u=G(),a=b("div"),f=b("input"),d=G(),_=b("div"),m=b("button"),g=M(y),p(f,"class","_3hIGg"),p(f,"type","text"),p(f,"placeholder","Title"),f.disabled=t[5],p(m,"class","J-mxG"),p(m,"type","submit"),m.disabled=t[5],p(e,"class",E="_2Na6L "+t[1])},m(A,Y){I(A,e,Y),h(e,n),N(r,n,null),h(e,l),h(e,s),N(c,s,null),h(e,u),h(e,a),h(a,f),R(f,t[4]),t[11](f),h(e,d),h(e,_),h(_,m),h(m,g),S=!0,j||(v=[z(f,"input",t[10]),z(e,"submit",Me(t[7]))],j=!0)},p(A,[Y]){const de={};!o&&Y&4&&(o=!0,de.groupId=A[2],ve(()=>o=!1)),r.$set(de);const oe={};!i&&Y&8&&(i=!0,oe.currencyCode=A[3],ve(()=>i=!1)),c.$set(oe),(!S||Y&32)&&(f.disabled=A[5]),Y&16&&f.value!==A[4]&&R(f,A[4]),(!S||Y&1)&&y!==(y=A[0]?"Save":"Create")&&U(g,y),(!S||Y&32)&&(m.disabled=A[5]),(!S||Y&2&&E!==(E="_2Na6L "+A[1]))&&p(e,"class",E)},i(A){S||(w(r.$$.fragment,A),w(c.$$.fragment,A),S=!0)},o(A){$(r.$$.fragment,A),$(c.$$.fragment,A),S=!1},d(A){A&&C(e),O(r),O(c),t[11](null),j=!1,ee(v)}}}function ll(t,e,n){let{accountDoc:r=null}=e,{class:o=void 0}=e,{groupId:l,currencyCode:s,title:c=""}=r||{},i=!1,u;const a=Se();function f(){c.trim()&&l&&s?(n(5,i=!0),a("save",{groupId:l,currencyCode:s,title:c})):alert("Must fill all fields.")}Re(()=>{u&&u.focus()});function d(g){l=g,n(2,l)}function _(g){s=g,n(3,s)}function m(){c=this.value,n(4,c)}function y(g){Z[g?"unshift":"push"](()=>{u=g,n(6,u)})}return t.$$set=g=>{"accountDoc"in g&&n(0,r=g.accountDoc),"class"in g&&n(1,o=g.class)},[r,o,l,s,c,i,u,f,d,_,m,y]}class Qn extends X{constructor(e){super(),J(this,e,ll,ol,H,{accountDoc:0,class:1})}}function sl(t){let e,n;return e=new Qn({props:{class:"_1tO9D"}}),e.$on("save",t[2]),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function cl(t){let e,n;return e=new Qn({props:{class:"_1tO9D",accountDoc:t[1]}}),e.$on("save",t[2]),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function il(t){let e,n,r,o;const l=[cl,sl],s=[];function c(i,u){return i[0]?0:1}return e=c(t),n=s[e]=l[e](t),{c(){n.c(),r=te()},m(i,u){s[e].m(i,u),I(i,r,u),o=!0},p(i,u){n.p(i,u)},i(i){o||(w(n),o=!0)},o(i){$(n),o=!1},d(i){i&&C(r),s[e].d(i)}}}function ul(t){var r;let e,n;return e=new ie({props:{slot:"header",title:t[0]?(r=t[1])==null?void 0:r.title:"New Account",returnPath:"/"}}),{c(){B(e.$$.fragment)},m(o,l){N(e,o,l),n=!0},p:k,i(o){n||(w(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){O(e,o)}}}function al(t){let e,n;return e=new ue({props:{$$slots:{header:[ul],default:[il]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&32&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function fl(t,e,n){let r;W(t,re,i=>n(4,r=i));let{params:o={}}=e;const{id:l}=o;let s=l?r.find(i=>i.id===l):null;function c(i){const{title:u,groupId:a,currencyCode:f}=i.detail;l?Or({...s,title:u,groupId:a,currencyCode:f}).then(()=>{Q("/")}):Hr(u,a,f).then(()=>{Q("/")})}return t.$$set=i=>{"params"in i&&n(3,o=i.params)},[l,s,c,o]}class an extends X{constructor(e){super(),J(this,e,fl,al,H,{params:3})}}function fn(t){let e,n=t[1].title+"",r,o=t[1].subtitle?`:${t[1].subtitle}`:"",l;return{c(){e=b("span"),r=M(n),l=M(o),p(e,"class","_322dv")},m(s,c){I(s,e,c),h(e,r),h(e,l)},p(s,c){c&2&&n!==(n=s[1].title+"")&&U(r,n),c&2&&o!==(o=s[1].subtitle?`:${s[1].subtitle}`:"")&&U(l,o)},d(s){s&&C(e)}}}function dl(t){let e,n,r,o,l=t[0].comment+"",s,c,i,u,a=le(t[0].amount,!0,!0)+"",f,d,_,m,y=Zt(t[0].timestamp)+"",g,E,S,j=le(t[0].total,!0)+"",v,D,P,T=t[1]&&fn(t);return{c(){e=b("div"),n=b("div"),r=b("div"),o=b("span"),s=M(l),c=G(),T&&T.c(),i=G(),u=b("div"),f=M(a),d=G(),_=b("div"),m=b("div"),g=M(y),E=G(),S=b("div"),v=M(j),p(o,"class","_2kX3c"),p(r,"class","_1OurC"),p(u,"class","_26PI4"),me(u,"_3DGXJ",t[0].amount>0),p(n,"class","_2FZ7Z"),p(m,"class","w2k25"),p(S,"class","XyJeD"),p(_,"class","tBvyS"),p(e,"class","Xkc2I")},m(L,A){I(L,e,A),h(e,n),h(n,r),h(r,o),h(o,s),h(r,c),T&&T.m(r,null),h(n,i),h(n,u),h(u,f),h(e,d),h(e,_),h(_,m),h(m,g),h(_,E),h(_,S),h(S,v),D||(P=z(e,"click",t[4]),D=!0)},p(L,[A]){A&1&&l!==(l=L[0].comment+"")&&U(s,l),L[1]?T?T.p(L,A):(T=fn(L),T.c(),T.m(r,null)):T&&(T.d(1),T=null),A&1&&a!==(a=le(L[0].amount,!0,!0)+"")&&U(f,a),A&1&&me(u,"_3DGXJ",L[0].amount>0),A&1&&y!==(y=Zt(L[0].timestamp)+"")&&U(g,y),A&1&&j!==(j=le(L[0].total,!0)+"")&&U(v,j)},i:k,o:k,d(L){L&&C(e),T&&T.d(),D=!1,P()}}}function _l(t,e,n){let r,o;W(t,Ie,i=>n(3,o=i));let{entry:l}=e;const s=Se(),c=()=>{s("transaction",{id:l.transactionId})};return t.$$set=i=>{"entry"in i&&n(0,l=i.entry)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=l.categoryId?o.find(i=>i.id===l.categoryId):null)},[l,r,s,o,c]}class pl extends X{constructor(e){super(),J(this,e,_l,dl,H,{entry:0})}}function dn(t,e,n){const r=t.slice();return r[7]=e[n],r}function _n(t,e,n){const r=t.slice();return r[10]=e[n],r}function pn(t,e){let n,r,o;return r=new pl({props:{entry:e[10]}}),r.$on("transaction",e[6]),{key:t,first:null,c(){n=te(),B(r.$$.fragment),this.first=n},m(l,s){I(l,n,s),N(r,l,s),o=!0},p(l,s){e=l;const c={};s&1&&(c.entry=e[10]),r.$set(c)},i(l){o||(w(r.$$.fragment,l),o=!0)},o(l){$(r.$$.fragment,l),o=!1},d(l){l&&C(n),O(r,l)}}}function hn(t){let e,n=t[7]+"",r,o,l=[],s=new Map,c,i,u=K(t[0][t[7]]);const a=f=>f[10].id;for(let f=0;f<u.length;f+=1){let d=_n(t,u,f),_=a(d);s.set(_,l[f]=pn(_,d))}return{c(){e=b("div"),r=M(n),o=G();for(let f=0;f<l.length;f+=1)l[f].c();c=te(),p(e,"class","_14m25")},m(f,d){I(f,e,d),h(e,r),I(f,o,d);for(let _=0;_<l.length;_+=1)l[_]&&l[_].m(f,d);I(f,c,d),i=!0},p(f,d){(!i||d&1)&&n!==(n=f[7]+"")&&U(r,n),d&5&&(u=K(f[0][f[7]]),se(),l=ge(l,d,a,1,f,u,s,c.parentNode,Fn,pn,c,_n),ce())},i(f){if(!i){for(let d=0;d<u.length;d+=1)w(l[d]);i=!0}},o(f){for(let d=0;d<l.length;d+=1)$(l[d]);i=!1},d(f){f&&(C(e),C(o),C(c));for(let d=0;d<l.length;d+=1)l[d].d(f)}}}function hl(t){let e,n,r=K(Object.keys(t[0])),o=[];for(let s=0;s<r.length;s+=1)o[s]=hn(dn(t,r,s));const l=s=>$(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=te()},m(s,c){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(s,c);I(s,e,c),n=!0},p(s,c){if(c&5){r=K(Object.keys(s[0]));let i;for(i=0;i<r.length;i+=1){const u=dn(s,r,i);o[i]?(o[i].p(u,c),w(o[i],1)):(o[i]=hn(u),o[i].c(),w(o[i],1),o[i].m(e.parentNode,e))}for(se(),i=r.length;i<o.length;i+=1)l(i);ce()}},i(s){if(!n){for(let c=0;c<r.length;c+=1)w(o[c]);n=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)$(o[c]);n=!1},d(s){s&&C(e),Oe(o,s)}}}function ml(t){let e,n;return e=new ie({props:{slot:"header",title:t[1]?`${t[1].title}`:"Not Found",returnPath:"/",addPath:`/accounts/${t[2]}/transactions/new`,menuItems:t[3]}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){const l={};o&2&&(l.title=r[1]?`${r[1].title}`:"Not Found"),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function gl(t){let e,n;return e=new ue({props:{$$slots:{header:[ml],default:[hl]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&8195&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function bl(t,e,n){let r,o;W(t,re,a=>n(5,o=a));let{params:l}=e;const{id:s}=l;let c={};Vn(s).then(a=>{n(0,c=a.reduce((f,d)=>{const _=So(d.timestamp);return f[_]?f[_].push(d):f[_]=[d],f},{}))});const i=[{id:"edit",title:"Edit",to:`/accounts/${s}/edit`}],u=a=>{Q(`/accounts/${s}/transactions/${a.detail.id}`)};return t.$$set=a=>{"params"in a&&n(4,l=a.params)},t.$$.update=()=>{t.$$.dirty&32&&n(1,r=o.find(a=>a.id===s))},[c,r,s,i,l,o,u]}class yl extends X{constructor(e){super(),J(this,e,bl,gl,H,{params:4})}}function mn(t,e,n){const r=t.slice();return r[2]=e[n],r}function gn(t,e){let n,r=e[2].title+"",o,l=e[2].subtitle?`:${e[2].subtitle}`:"",s,c,i,u,a;return{key:t,first:null,c(){n=b("div"),o=M(r),s=M(l),c=G(),p(n,"class","_6UwqU"),p(n,"data-id",i=e[2].id),this.first=n},m(f,d){I(f,n,d),h(n,o),h(n,s),h(n,c),u||(a=z(n,"click",e[1]),u=!0)},p(f,d){e=f,d&1&&r!==(r=e[2].title+"")&&U(o,r),d&1&&l!==(l=e[2].subtitle?`:${e[2].subtitle}`:"")&&U(s,l),d&1&&i!==(i=e[2].id)&&p(n,"data-id",i)},d(f){f&&C(n),u=!1,a()}}}function wl(t){let e=[],n=new Map,r,o=K(t[0]);const l=s=>s[2].id;for(let s=0;s<o.length;s+=1){let c=mn(t,o,s),i=l(c);n.set(i,e[s]=gn(i,c))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=te()},m(s,c){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(s,c);I(s,r,c)},p(s,c){c&3&&(o=K(s[0]),e=ge(e,c,l,1,s,o,n,r.parentNode,Be,gn,r,mn))},d(s){s&&C(r);for(let c=0;c<e.length;c+=1)e[c].d(s)}}}function $l(t){let e,n;return e=new ie({props:{slot:"header",title:"Categories",returnPath:"/",addPath:"/categories/new"}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function vl(t){let e,n;return e=new ue({props:{$$slots:{header:[$l],default:[wl]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&33&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function kl(t,e,n){let r;W(t,Ie,l=>n(0,r=l));function o(l){if(l.target.dataset.id){const s=l.target.dataset.id;Q(`/categories/${s}`)}}return[r,o]}class Sl extends X{constructor(e){super(),J(this,e,kl,vl,H,{})}}function Cl(t){let e,n,r,o,l,s,c,i,u,a;function f(_){t[2](_)}let d={placeholder:"Base Currency"};return t[0]!==void 0&&(d.currencyCode=t[0]),o=new Ct({props:d}),Z.push(()=>ke(o,"currencyCode",f)),{c(){e=b("form"),n=b("div"),r=M(`Base currency:
      `),B(o.$$.fragment),s=G(),c=b("div"),c.innerHTML='<button type="submit" class="_19-gA">Save</button>',p(e,"class","_1JFP_")},m(_,m){I(_,e,m),h(e,n),h(n,r),N(o,n,null),h(e,s),h(e,c),i=!0,u||(a=z(e,"submit",Me(t[1])),u=!0)},p(_,m){const y={};!l&&m&1&&(l=!0,y.currencyCode=_[0],ve(()=>l=!1)),o.$set(y)},i(_){i||(w(o.$$.fragment,_),i=!0)},o(_){$(o.$$.fragment,_),i=!1},d(_){_&&C(e),O(o),u=!1,a()}}}function Il(t){let e,n;return e=new ie({props:{slot:"header",title:"Settings",returnPath:"/"}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function El(t){let e,n;return e=new ue({props:{$$slots:{header:[Il],default:[Cl]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&17&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Al(t,e,n){var c;let r;W(t,nt,i=>n(3,r=i));let o=(c=r.find(i=>i.name===bt))==null?void 0:c.value;function l(){zr({name:bt,value:o}).then(()=>{Q("/")})}function s(i){o=i,n(0,o)}return[o,l,s]}class Dl extends X{constructor(e){super(),J(this,e,Al,El,H,{})}}function bn(t,e,n){const r=t.slice();return r[2]=e[n],r}function yn(t,e){let n,r,o=e[2].code+"",l,s,c,i=e[2].title+"",u,a,f,d,_;return{key:t,first:null,c(){n=b("div"),r=b("div"),l=M(o),s=G(),c=b("div"),u=M(i),a=G(),p(r,"class","_9tmh3"),p(c,"class","lB3BI"),p(n,"class","_3DaGu"),p(n,"data-role","item"),p(n,"data-code",f=e[2].code),this.first=n},m(m,y){I(m,n,y),h(n,r),h(r,l),h(n,s),h(n,c),h(c,u),h(n,a),d||(_=z(n,"click",e[1]),d=!0)},p(m,y){e=m,y&1&&o!==(o=e[2].code+"")&&U(l,o),y&1&&i!==(i=e[2].title+"")&&U(u,i),y&1&&f!==(f=e[2].code)&&p(n,"data-code",f)},d(m){m&&C(n),d=!1,_()}}}function Tl(t){let e=[],n=new Map,r,o=K(t[0]);const l=s=>s[2].code;for(let s=0;s<o.length;s+=1){let c=bn(t,o,s),i=l(c);n.set(i,e[s]=yn(i,c))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=te()},m(s,c){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(s,c);I(s,r,c)},p(s,c){c&3&&(o=K(s[0]),e=ge(e,c,l,1,s,o,n,r.parentNode,Be,yn,r,bn))},d(s){s&&C(r);for(let c=0;c<e.length;c+=1)e[c].d(s)}}}function Pl(t){let e,n;return e=new ie({props:{slot:"header",title:"Currencies",returnPath:"/",addPath:"/currencies/new"}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function jl(t){let e,n;return e=new ue({props:{$$slots:{header:[Pl],default:[Tl]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&33&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Ll(t,e,n){let r;W(t,Ee,l=>n(0,r=l));function o(l){if(l.target instanceof HTMLElement){const s=l.target.closest('[data-role="item"]');s instanceof HTMLElement&&s.dataset.code&&Q(`/currencies/${s.dataset.code}`)}}return[r,o]}class Nl extends X{constructor(e){super(),J(this,e,Ll,jl,H,{})}}function Ol(t){let e,n,r,o,l,s,c,i,u,a,f;return{c(){e=b("form"),n=b("div"),r=b("input"),o=G(),l=b("div"),s=b("input"),c=G(),i=b("div"),u=b("button"),u.textContent=`${t[3]?"Save":"Create"}`,p(r,"type","text"),p(r,"placeholder","Title"),p(n,"class","_1F3oU"),p(s,"type","text"),p(s,"placeholder","Subtitle (optional)"),p(l,"class","_1F3oU"),p(u,"type","submit"),p(i,"class","_1F3oU"),p(e,"class","_2sHk9")},m(d,_){I(d,e,_),h(e,n),h(n,r),R(r,t[0]),t[7](r),h(e,o),h(e,l),h(l,s),R(s,t[1]),h(e,c),h(e,i),h(i,u),a||(f=[z(r,"input",t[6]),z(s,"input",t[8]),z(e,"submit",Me(t[4]))],a=!0)},p(d,_){_&1&&r.value!==d[0]&&R(r,d[0]),_&2&&s.value!==d[1]&&R(s,d[1])},d(d){d&&C(e),t[7](null),a=!1,ee(f)}}}function Ml(t){let e,n;return e=new ie({props:{slot:"header",title:t[3]?"Category":"New Category",returnPath:"/categories"}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Bl(t){let e,n;return e=new ue({props:{$$slots:{header:[Ml],default:[Ol]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&2055&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Gl(t,e,n){let r;W(t,Ie,m=>n(9,r=m));let{params:o={}}=e;const{id:l}=o;let s=l?r.find(m=>m.id===l):null,c=s?s.title:"",i=s?s.subtitle:"",u;Re(()=>{u&&u.focus()});function a(){c.trim()?s?Jr({...s,title:c.trim(),subtitle:i.trim()}).then(()=>{Q("/categories")}):Rr(c.trim(),i.trim()).then(()=>{Q("/categories")}):alert("The title must be specified.")}function f(){c=this.value,n(0,c)}function d(m){Z[m?"unshift":"push"](()=>{u=m,n(2,u)})}function _(){i=this.value,n(1,i)}return t.$$set=m=>{"params"in m&&n(5,o=m.params)},[c,i,u,s,a,o,f,d,_]}class wn extends X{constructor(e){super(),J(this,e,Gl,Bl,H,{params:5})}}function Ul(t){let e,n,r,o,l,s,c,i,u,a,f;return{c(){e=b("form"),n=b("div"),r=b("input"),o=G(),l=b("div"),s=b("input"),c=G(),i=b("div"),u=b("button"),u.textContent=`${t[4]?"Save":"Add"}`,p(r,"type","text"),p(r,"placeholder","Code"),r.disabled=t[4]!==null,p(n,"class","EbSwc"),p(s,"type","text"),p(s,"placeholder","Title"),p(l,"class","EbSwc"),p(u,"type","submit"),p(i,"class","EbSwc")},m(d,_){I(d,e,_),h(e,n),h(n,r),R(r,t[0]),t[8](r),h(e,o),h(e,l),h(l,s),R(s,t[1]),t[10](s),h(e,c),h(e,i),h(i,u),a||(f=[z(r,"input",t[7]),z(s,"input",t[9]),z(e,"submit",Me(t[5]))],a=!0)},p(d,_){_&1&&r.value!==d[0]&&R(r,d[0]),_&2&&s.value!==d[1]&&R(s,d[1])},d(d){d&&C(e),t[8](null),t[10](null),a=!1,ee(f)}}}function Fl(t){let e,n;return e=new ie({props:{slot:"header",title:t[4]?"Currency":"New Currency",returnPath:"/currencies"}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Hl(t){let e,n;return e=new ue({props:{$$slots:{header:[Fl],default:[Ul]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&8207&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function Rl(t,e,n){let r;W(t,Ee,g=>n(11,r=g));let{params:o={}}=e;const{cid:l}=o;let s=l?r.find(g=>g.code===l):null,c=s?s.code:"",i=s?s.title:"",u,a;function f(){c.trim()&&i.trim()?s?Vr({...s,title:i.trim()}).then(()=>{Q("/currencies")}):Xr(c.trim(),i.trim()).then(()=>{Q("/currencies")}):alert("Code and title must be specified.")}Re(()=>{s?a&&a.focus():u&&u.focus()});function d(){c=this.value,n(0,c)}function _(g){Z[g?"unshift":"push"](()=>{u=g,n(2,u)})}function m(){i=this.value,n(1,i)}function y(g){Z[g?"unshift":"push"](()=>{a=g,n(3,a)})}return t.$$set=g=>{"params"in g&&n(6,o=g.params)},[c,i,u,a,s,f,o,d,_,m,y]}class $n extends X{constructor(e){super(),J(this,e,Rl,Hl,H,{params:6})}}function vn(t,e,n){const r=t.slice();return r[6]=e[n],r}function kn(t,e,n){const r=t.slice();return r[9]=e[n],r}function Sn(t){let e,n=t[9].title+"",r,o;return{c(){e=b("option"),r=M(n),e.__value=o=t[9].id,R(e,e.__value)},m(l,s){I(l,e,s),h(e,r)},p(l,s){s&4&&n!==(n=l[9].title+"")&&U(r,n),s&4&&o!==(o=l[9].id)&&(e.__value=o,R(e,e.__value))},d(l){l&&C(e)}}}function Cn(t){let e,n,r=K(t[6].accounts),o=[];for(let l=0;l<r.length;l+=1)o[l]=Sn(kn(t,r,l));return{c(){e=b("optgroup");for(let l=0;l<o.length;l+=1)o[l].c();p(e,"label",n=t[6].title)},m(l,s){I(l,e,s);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null)},p(l,s){if(s&4){r=K(l[6].accounts);let c;for(c=0;c<r.length;c+=1){const i=kn(l,r,c);o[c]?o[c].p(i,s):(o[c]=Sn(i),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}s&4&&n!==(n=l[6].title)&&p(e,"label",n)},d(l){l&&C(e),Oe(o,l)}}}function zl(t){let e,n,r,o,l,s=K(t[2]),c=[];for(let i=0;i<s.length;i+=1)c[i]=Cn(vn(t,s,i));return{c(){e=b("select"),n=b("option"),r=M(t[1]);for(let i=0;i<c.length;i+=1)c[i].c();n.__value="",R(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,p(e,"class","_1vWtV"),e.required=!0,t[0]===void 0&&Ne(()=>t[5].call(e))},m(i,u){I(i,e,u),h(e,n),h(n,r);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(e,null);Le(e,t[0],!0),o||(l=z(e,"change",t[5]),o=!0)},p(i,[u]){if(u&2&&U(r,i[1]),u&4){s=K(i[2]);let a;for(a=0;a<s.length;a+=1){const f=vn(i,s,a);c[a]?c[a].p(f,u):(c[a]=Cn(f),c[a].c(),c[a].m(e,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=s.length}u&5&&Le(e,i[0])},i:k,o:k,d(i){i&&C(e),Oe(c,i),o=!1,l()}}}function Jl(t,e,n){let r,o,l;W(t,re,u=>n(3,o=u)),W(t,be,u=>n(4,l=u));let{accountId:s}=e,{placeholder:c="Account"}=e;function i(){s=wt(this),n(0,s),n(2,r),n(4,l),n(3,o)}return t.$$set=u=>{"accountId"in u&&n(0,s=u.accountId),"placeholder"in u&&n(1,c=u.placeholder)},t.$$.update=()=>{t.$$.dirty&24&&n(2,r=l.reduce((u,a)=>{const f={title:a.title,accounts:o.filter(d=>d.groupId===a.id)};return u.push(f),u},[]))},[s,c,r,o,l,i]}class Xl extends X{constructor(e){super(),J(this,e,Jl,zl,H,{accountId:0,placeholder:1})}}function In(t,e,n){const r=t.slice();return r[2]=e[n],r}function En(t){let e,n,r;return{c(){e=b("span"),e.textContent=`${t[2].title} `,p(e,"data-value",t[2].value),me(e,"_1zm3o",t[2].value===t[0])},m(o,l){I(o,e,l),n||(r=z(e,"pointerdown",t[1]),n=!0)},p(o,l){l&1&&me(e,"_1zm3o",o[2].value===o[0])},d(o){o&&C(e),n=!1,r()}}}function Vl(t){let e,n=K(Vt),r=[];for(let o=0;o<n.length;o+=1)r[o]=En(In(t,n,o));return{c(){e=b("div");for(let o=0;o<r.length;o+=1)r[o].c();p(e,"class","_2dieg")},m(o,l){I(o,e,l);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(o,[l]){if(l&3){n=K(Vt);let s;for(s=0;s<n.length;s+=1){const c=In(o,n,s);r[s]?r[s].p(c,l):(r[s]=En(c),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:k,o:k,d(o){o&&C(e),Oe(r,o)}}}function ql(t,e,n){let{kind:r}=e;function o(l){l.target instanceof HTMLSpanElement&&(console.log("kind:",l.target.dataset.value),n(0,r=l.target.dataset.value))}return t.$$set=l=>{"kind"in l&&n(0,r=l.kind)},[r,o]}class Kl extends X{constructor(e){super(),J(this,e,ql,Vl,H,{kind:0})}}function An(t,e,n){const r=t.slice();return r[7]=e[n],r}function Wl(t){let e,n,r;return{c(){e=b("input"),p(e,"class","_1LWF4"),p(e,"type","text"),p(e,"placeholder","Category")},m(o,l){I(o,e,l),t[10](e),R(e,t[3]),n||(r=[z(e,"input",t[11]),z(e,"input",t[6])],n=!0)},p(o,l){l&8&&e.value!==o[3]&&R(e,o[3])},d(o){o&&C(e),t[10](null),n=!1,ee(r)}}}function Dn(t){let e;return{c(){e=b("li"),e.textContent="Empty",p(e,"class","_1FJls")},m(n,r){I(n,e,r)},p:k,d(n){n&&C(e)}}}function Tn(t,e){let n,r=e[7].title+"",o,l=e[7].subtitle?`:${e[7].subtitle}`:"",s,c,i;return{key:t,first:null,c(){n=b("li"),o=M(r),s=M(l),c=G(),p(n,"data-id",i=e[7].id),me(n,"_2P4tM",e[7].id===e[0]),this.first=n},m(u,a){I(u,n,a),h(n,o),h(n,s),h(n,c)},p(u,a){e=u,a&25&&r!==(r=e[7].title+"")&&U(o,r),a&25&&l!==(l=e[7].subtitle?`:${e[7].subtitle}`:"")&&U(s,l),a&25&&i!==(i=e[7].id)&&p(n,"data-id",i),a&25&&me(n,"_2P4tM",e[7].id===e[0])},d(u){u&&C(n)}}}function Yl(t){let e,n=[],r=new Map,o,l,s=K(t[0]?t[4]:t[4].filter(t[9]));const c=u=>u[7].id;for(let u=0;u<s.length;u+=1){let a=An(t,s,u),f=c(a);r.set(f,n[u]=Tn(f,a))}let i=null;return s.length||(i=Dn()),{c(){e=b("ul");for(let u=0;u<n.length;u+=1)n[u].c();i&&i.c(),p(e,"class","_2VAoI"),p(e,"slot","content")},m(u,a){I(u,e,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);i&&i.m(e,null),o||(l=z(e,"click",t[5]),o=!0)},p(u,a){a&25&&(s=K(u[0]?u[4]:u[4].filter(u[9])),n=ge(n,a,c,1,u,s,r,e,Be,Tn,null,An),!s.length&&i?i.p(u,a):s.length?i&&(i.d(1),i=null):(i=Dn(),i.c(),i.m(e,null)))},d(u){u&&C(e);for(let a=0;a<n.length;a+=1)n[a].d();i&&i.d(),o=!1,l()}}}function Zl(t){let e,n,r={class:"_3pEZc",clickToggle:!0,$$slots:{content:[Yl],default:[Wl]},$$scope:{ctx:t}};return e=new Wn({props:r}),t[12](e),{c(){B(e.$$.fragment)},m(o,l){N(e,o,l),n=!0},p(o,[l]){const s={};l&32797&&(s.$$scope={dirty:l,ctx:o}),e.$set(s)},i(o){n||(w(e.$$.fragment,o),n=!0)},o(o){$(e.$$.fragment,o),n=!1},d(o){t[12](null),O(e,o)}}}function Xe(t){return`${t.title}${t.subtitle?`:${t.subtitle}`:""}`}function Ql(t,e,n){let r;W(t,Ie,g=>n(4,r=g));let{categoryId:o}=e,l,s;function c(){n(0,o=""),n(3,u="")}let i=o?r.find(g=>g.id===o):null,u=i?Xe(i):"";function a(g){if(g.target instanceof HTMLLIElement){n(0,o=g.target.dataset.id),l.close();const E=r.find(S=>S.id===o);E&&n(3,u=Xe(E))}}function f(){const g=r.find(E=>s.value.trim().toLocaleLowerCase()===Xe(E).toLocaleLowerCase());g?(n(0,o=g.id),n(2,s.value=Xe(g),s)):n(0,o="")}const d=g=>`${g.title}:${g.subtitle}`.toLowerCase().includes(u.trim().toLowerCase());function _(g){Z[g?"unshift":"push"](()=>{s=g,n(2,s)})}function m(){u=this.value,n(3,u)}function y(g){Z[g?"unshift":"push"](()=>{l=g,n(1,l)})}return t.$$set=g=>{"categoryId"in g&&n(0,o=g.categoryId)},[o,l,s,u,r,a,f,i,c,d,_,m,y]}class xl extends X{constructor(e){super(),J(this,e,Ql,Zl,H,{categoryId:0,clear:8})}get clear(){return this.$$.ctx[8]}}function es(t){let e,n,r,o,l,s,c,i,u,a;function f(_){t[21](_)}let d={};return t[7]!==void 0&&(d.categoryId=t[7]),n=new xl({props:d}),Z.push(()=>ke(n,"categoryId",f)),t[22](n),{c(){e=b("div"),B(n.$$.fragment),o=G(),l=b("button"),s=M("Clear"),p(l,"type","button"),l.disabled=c=!t[7],p(e,"class","_16hSm")},m(_,m){I(_,e,m),N(n,e,null),h(e,o),h(e,l),h(l,s),i=!0,u||(a=z(l,"click",or(t[14])),u=!0)},p(_,m){const y={};!r&&m&128&&(r=!0,y.categoryId=_[7],ve(()=>r=!1)),n.$set(y),(!i||m&128&&c!==(c=!_[7]))&&(l.disabled=c)},i(_){i||(w(n.$$.fragment,_),i=!0)},o(_){$(n.$$.fragment,_),i=!1},d(_){_&&C(e),t[22](null),O(n),u=!1,a()}}}function ts(t){let e,n,r;function o(s){t[20](s)}let l={placeholder:"To"};return t[1]!==void 0&&(l.accountId=t[1]),e=new Xl({props:l}),Z.push(()=>ke(e,"accountId",o)),{c(){B(e.$$.fragment)},m(s,c){N(e,s,c),r=!0},p(s,c){const i={};!n&&c&2&&(n=!0,i.accountId=s[1],ve(()=>n=!1)),e.$set(i)},i(s){r||(w(e.$$.fragment,s),r=!0)},o(s){$(e.$$.fragment,s),r=!1},d(s){O(e,s)}}}function Pn(t){var u;let e,n,r=((u=t[2])==null?void 0:u.currencyCode)+"",o,l,s,c,i;return{c(){e=b("div"),n=M("Amount, "),o=M(r),l=M(`:
      `),s=b("input"),p(s,"class","_2kxJf"),p(s,"type","string")},m(a,f){I(a,e,f),h(e,n),h(e,o),h(e,l),h(e,s),R(s,t[11]),c||(i=z(s,"input",t[25]),c=!0)},p(a,f){var d;f&4&&r!==(r=((d=a[2])==null?void 0:d.currencyCode)+"")&&U(o,r),f&2048&&R(s,a[11])},d(a){a&&C(e),c=!1,i()}}}function ns(t){var Et;let e,n,r,o,l,s,c,i,u,a,f,d,_,m,y=((Et=t[3])==null?void 0:Et.currencyCode)+"",g,E,S,j,v,D,P,T,L,A,Y=t[0]?"Save":"Create",de,oe,Ge,ze;function st(q){t[18](q)}let V={};t[6]!==void 0&&(V.kind=t[6]),r=new Kl({props:V}),Z.push(()=>ke(r,"kind",st));const Je=[ts,es],_e=[];function It(q,ne){return q[6]===he.Transfer?0:1}a=It(t),f=_e[a]=Je[a](t);let x=t[12]&&Pn(t);return{c(){e=b("form"),n=b("div"),B(r.$$.fragment),l=G(),s=b("div"),c=b("input"),i=G(),u=b("div"),f.c(),d=G(),_=b("div"),m=M("Amount, "),g=M(y),E=M(`:
    `),S=b("input"),j=G(),x&&x.c(),v=G(),D=b("div"),P=b("input"),T=G(),L=b("div"),A=b("button"),de=M(Y),p(c,"class","_2kxJf"),p(c,"type","datetime-local"),p(S,"class","_2kxJf"),p(S,"type","text"),me(S,"_3Oh7b",!et(t[10])),p(P,"class","_2kxJf"),p(P,"type","text"),p(P,"placeholder","Comment"),p(A,"class","bF1pO"),p(A,"type","submit"),p(e,"class","_1izLJ")},m(q,ne){I(q,e,ne),h(e,n),N(r,n,null),h(e,l),h(e,s),h(s,c),R(c,t[9]),h(e,i),h(e,u),_e[a].m(u,null),h(e,d),h(e,_),h(_,m),h(_,g),h(_,E),h(_,S),R(S,t[10]),t[24](S),h(e,j),x&&x.m(e,null),h(e,v),h(e,D),h(D,P),R(P,t[8]),h(e,T),h(e,L),h(L,A),h(A,de),oe=!0,Ge||(ze=[z(c,"input",t[19]),z(S,"input",t[23]),z(P,"input",t[26]),z(e,"submit",Me(t[13]))],Ge=!0)},p(q,[ne]){var Dt;const At={};!o&&ne&64&&(o=!0,At.kind=q[6],ve(()=>o=!1)),r.$set(At),ne&512&&R(c,q[9]);let ct=a;a=It(q),a===ct?_e[a].p(q,ne):(se(),$(_e[ct],1,1,()=>{_e[ct]=null}),ce(),f=_e[a],f?f.p(q,ne):(f=_e[a]=Je[a](q),f.c()),w(f,1),f.m(u,null)),(!oe||ne&8)&&y!==(y=((Dt=q[3])==null?void 0:Dt.currencyCode)+"")&&U(g,y),ne&1024&&S.value!==q[10]&&R(S,q[10]),(!oe||ne&1024)&&me(S,"_3Oh7b",!et(q[10])),q[12]?x?x.p(q,ne):(x=Pn(q),x.c(),x.m(e,v)):x&&(x.d(1),x=null),ne&256&&P.value!==q[8]&&R(P,q[8]),(!oe||ne&1)&&Y!==(Y=q[0]?"Save":"Create")&&U(de,Y)},i(q){oe||(w(r.$$.fragment,q),w(f),oe=!0)},o(q){$(r.$$.fragment,q),$(f),oe=!1},d(q){q&&C(e),O(r),_e[a].d(),t[24](null),x&&x.d(),Ge=!1,ee(ze)}}}function rs(t,e,n){let r,o,l,s,c;W(t,re,V=>n(17,c=V));let{accountId:i}=e,{transactionDoc:u=null}=e,a,f;Re(()=>{f&&f.focus()});let{kind:d=he.Expense,categoryId:_,secondAccountId:m,comment:y=""}=u||{},g=ko(new Date((u==null?void 0:u.timestamp)||Date.now())),E=u?le(u.amount):"",S=u?le(u.secondAmount):"";const j=Se();function v(){const V=D();if(V){alert(V);return}const Je=d===he.Transfer?{kind:d,timestamp:new Date(g).getTime(),accountId:i,secondAccountId:m,...s?{secondAmount:_t(S)}:{},amount:_t(E),comment:y.trim()}:{kind:d,timestamp:new Date(g).getTime(),accountId:i,categoryId:_||null,amount:_t(E),comment:y.trim()};j("save",{params:Je})}function D(){if(!et(E))return"Invalid amount";if(d===he.Transfer){if(!m)return"Must choose the second account";if(m===i)return"Cannot transfer to the same account";if(s&&!et(S))return"Invalid second amount"}return""}function P(){a.clear()}function T(V){d=V,n(6,d)}function L(){g=this.value,n(9,g)}function A(V){m=V,n(1,m)}function Y(V){_=V,n(7,_)}function de(V){Z[V?"unshift":"push"](()=>{a=V,n(4,a)})}function oe(){E=this.value,n(10,E)}function Ge(V){Z[V?"unshift":"push"](()=>{f=V,n(5,f)})}function ze(){S=this.value,n(11,S)}function st(){y=this.value,n(8,y)}return t.$$set=V=>{"accountId"in V&&n(15,i=V.accountId),"transactionDoc"in V&&n(0,u=V.transactionDoc)},t.$$.update=()=>{t.$$.dirty&163840&&n(3,r=c.find(V=>V.id===i)),t.$$.dirty&8&&n(16,o=r==null?void 0:r.currencyCode),t.$$.dirty&131074&&n(2,l=m?c.find(V=>V.id===m):null),t.$$.dirty&65540&&n(12,s=l&&o?l.currencyCode!==o:!1)},[u,m,l,r,a,f,d,_,y,g,E,S,s,v,P,i,o,c,T,L,A,Y,de,oe,Ge,ze,st]}class xn extends X{constructor(e){super(),J(this,e,rs,ns,H,{accountId:15,transactionDoc:0})}}function os(t){let e,n;return e=new xn({props:{accountId:t[2]}}),e.$on("save",t[6]),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p:k,i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function ls(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:is,then:cs,catch:ss,blocks:[,,,]};return Un(t[5](t[3]),r),{c(){e=te(),r.block.c()},m(o,l){I(o,e,l),r.block.m(o,r.anchor=l),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(o,l){t=o,fr(r,t,l)},i(o){n||(w(r.block),n=!0)},o(o){for(let l=0;l<3;l+=1){const s=r.blocks[l];$(s)}n=!1},d(o){o&&C(e),r.block.d(o),r.token=null,r=null}}}function ss(t){return{c:k,m:k,p:k,i:k,o:k,d:k}}function cs(t){let e,n;return e=new xn({props:{accountId:t[2],transactionDoc:t[0]}}),e.$on("save",t[6]),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){const l={};o&1&&(l.transactionDoc=r[0]),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function is(t){return{c:k,m:k,p:k,i:k,o:k,d:k}}function us(t){let e,n,r,o;const l=[ls,os],s=[];function c(i,u){return i[3]?0:1}return e=c(t),n=s[e]=l[e](t),{c(){n.c(),r=te()},m(i,u){s[e].m(i,u),I(i,r,u),o=!0},p(i,u){n.p(i,u)},i(i){o||(w(n),o=!0)},o(i){$(n),o=!1},d(i){i&&C(r),s[e].d(i)}}}function as(t){let e,n;return e=new ie({props:{slot:"header",title:t[1]?`${t[1].title}: Transaction`:"Transaction",returnPath:`/accounts/${t[2]}`,menuItems:t[4]}}),e.$on("menu",t[9]),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,o){const l={};o&2&&(l.title=r[1]?`${r[1].title}: Transaction`:"Transaction"),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function fs(t){let e,n;return e=new ue({props:{$$slots:{header:[as],default:[us]},$$scope:{ctx:t}}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},p(r,[o]){const l={};o&1027&&(l.$$scope={dirty:o,ctx:r}),e.$set(l)},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function ds(t,e,n){let r,o;W(t,re,_=>n(8,o=_));let{params:l}=e;const{id:s,tid:c}=l;let i;const u=c?[{id:"delete",title:"Delete"}]:null;async function a(_){n(0,i=await Gr(_))}function f(_){c?Br(i,_.detail.params).then(()=>{Q(`/accounts/${s}`)}):qr(_.detail.params).then(()=>{Q(`/accounts/${s}`)})}const d=_=>{switch(_.detail.id){case"delete":if(!confirm("Delete transaction?"))return!1;c&&Mr(c).then(()=>{Q(`/accounts/${s}`)});break}};return t.$$set=_=>{"params"in _&&n(7,l=_.params)},t.$$.update=()=>{t.$$.dirty&256&&n(1,r=o.find(_=>_.id===s))},[i,r,s,c,u,a,f,l,o,d]}class jn extends X{constructor(e){super(),J(this,e,ds,fs,H,{params:7})}}function _s(t){let e,n,r=t[0].wild+"",o;return{c(){e=b("div"),n=M("Page Not Found: /"),o=M(r)},m(l,s){I(l,e,s),h(e,n),h(e,o)},p(l,[s]){s&1&&r!==(r=l[0].wild+"")&&U(o,r)},i:k,o:k,d(l){l&&C(e)}}}function ps(t,e,n){let{params:r={}}=e;return t.$$set=o=>{"params"in o&&n(0,r=o.params)},[r]}class hs extends X{constructor(e){super(),J(this,e,ps,_s,H,{params:0})}}const ms={"/":zo,"/groups":Ko,"/groups/new":sn,"/groups/:id":sn,"/accounts/new":an,"/accounts/:id/edit":an,"/accounts/:id":yl,"/accounts/:id/transactions/new":jn,"/accounts/:id/transactions/:tid":jn,"/categories":Sl,"/categories/new":wn,"/categories/:id":wn,"/currencies":Nl,"/currencies/new":$n,"/currencies/:cid":$n,"/settings":Dl,"*":hs};function gs(t){return{c:k,m:k,i:k,o:k,d:k}}function bs(t){let e,n;return e=new $r({props:{routes:ms}}),{c(){B(e.$$.fragment)},m(r,o){N(e,r,o),n=!0},i(r){n||(w(e.$$.fragment,r),n=!0)},o(r){$(e.$$.fragment,r),n=!1},d(r){O(e,r)}}}function ys(t){return{c:k,m:k,i:k,o:k,d:k}}function ws(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:ys,then:bs,catch:gs,blocks:[,,,]};return Un(Wr,r),{c(){e=te(),r.block.c()},m(o,l){I(o,e,l),r.block.m(o,r.anchor=l),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(o,[l]){t=o},i(o){n||(w(r.block),n=!0)},o(o){for(let l=0;l<3;l+=1){const s=r.blocks[l];$(s)}n=!1},d(o){o&&C(e),r.block.d(o),r.token=null,r=null}}}class $s extends X{constructor(e){super(),J(this,e,null,ws,H,{})}}new $s({target:document.getElementById("app")});
