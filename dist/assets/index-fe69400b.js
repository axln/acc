var vr=Object.defineProperty;var kr=(t,e,n)=>e in t?vr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ht=(t,e,n)=>(kr(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function A(){}function Tt(t,e){for(const n in e)t[n]=e[n];return t}function Cr(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function tr(t){return t()}function Vt(){return Object.create(null)}function re(t){t.forEach(tr)}function Ke(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Sr(t){return Object.keys(t).length===0}function Dt(t,...e){if(t==null){for(const r of e)r(void 0);return A}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function qt(t){let e;return Dt(t,n=>e=n)(),e}function J(t,e,n){t.$$.on_destroy.push(Dt(e,n))}function xe(t,e,n,r){if(t){const l=nr(t,e,n,r);return t[0](l)}}function nr(t,e,n,r){return t[1]&&r?Tt(n.ctx.slice(),t[1](r(e))):n.ctx}function et(t,e,n,r){if(t[2]&&r){const l=t[2](r(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const o=[],s=Math.max(e.dirty.length,l.length);for(let i=0;i<s;i+=1)o[i]=e.dirty[i]|l[i];return o}return e.dirty|l}return e.dirty}function tt(t,e,n,r,l,o){if(l){const s=nr(e,n,r,o);t.p(s,l)}}function nt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Ir(t,e,n){return t.set(n),e}function ut(t){return t&&Ke(t.destroy)?t.destroy:A}function p(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function _e(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function ce(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function D(t){return document.createTextNode(t)}function T(){return D(" ")}function ee(){return D("")}function F(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function ye(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Er(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ar(t){return Array.from(t.childNodes)}function R(t,e){e=""+e,t.data!==e&&(t.data=e)}function Y(t,e){t.value=e??""}function Ge(t,e,n){for(let r=0;r<t.options.length;r+=1){const l=t.options[r];if(l.__value===e){l.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function jt(t){const e=t.querySelector(":checked");return e&&e.__value}function oe(t,e,n){t.classList.toggle(e,!!n)}function Tr(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function rt(t,e){return new t(e)}let Ve;function de(t){Ve=t}function Xe(){if(!Ve)throw new Error("Function called outside component initialization");return Ve}function Je(t){Xe().$$.on_mount.push(t)}function Dr(t){Xe().$$.after_update.push(t)}function jr(t){Xe().$$.on_destroy.push(t)}function De(){const t=Xe();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=Tr(e,n,{cancelable:r});return l.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function vt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Oe=[],Z=[];let Be=[];const kt=[],rr=Promise.resolve();let Ct=!1;function lr(){Ct||(Ct=!0,rr.then(Pt))}function sr(){return lr(),rr}function Re(t){Be.push(t)}function be(t){kt.push(t)}const gt=new Set;let Me=0;function Pt(){if(Me!==0)return;const t=Ve;do{try{for(;Me<Oe.length;){const e=Oe[Me];Me++,de(e),Pr(e.$$)}}catch(e){throw Oe.length=0,Me=0,e}for(de(null),Oe.length=0,Me=0;Z.length;)Z.pop()();for(let e=0;e<Be.length;e+=1){const n=Be[e];gt.has(n)||(gt.add(n),n())}Be.length=0}while(Oe.length);for(;kt.length;)kt.pop()();Ct=!1,gt.clear(),de(t)}function Pr(t){if(t.fragment!==null){t.update(),re(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Re)}}function Lr(t){const e=[],n=[];Be.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Be=e}const Ze=new Set;let Ee;function te(){Ee={r:0,c:[],p:Ee}}function ne(){Ee.r||re(Ee.c),Ee=Ee.p}function v(t,e){t&&t.i&&(Ze.delete(t),t.i(e))}function k(t,e,n,r){if(t&&t.o){if(Ze.has(t))return;Ze.add(t),Ee.c.push(()=>{Ze.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function or(t,e){const n=e.token={};function r(l,o,s,i){if(e.token!==n)return;e.resolved=i;let c=e.ctx;s!==void 0&&(c=c.slice(),c[s]=i);const u=l&&(e.current=l)(c);let a=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==o&&f&&(te(),k(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),ne())}):e.block.d(1),u.c(),v(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[o]=u),a&&Pt()}if(Cr(t)){const l=Xe();if(t.then(o=>{de(l),r(e.then,1,e.value,o),de(null)},o=>{if(de(l),r(e.catch,2,e.error,o),de(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function Mr(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function K(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function He(t,e){t.d(1),e.delete(t.key)}function ir(t,e){k(t,1,1,()=>{e.delete(t.key)})}function we(t,e,n,r,l,o,s,i,c,u,a,f){let d=t.length,_=o.length,g=d;const b={};for(;g--;)b[t[g].key]=g;const h=[],y=new Map,w=new Map,E=[];for(g=_;g--;){const O=f(l,o,g),G=n(O);let j=s.get(G);j?r&&E.push(()=>j.p(O,e)):(j=u(G,O),j.c()),y.set(G,h[g]=j),G in b&&w.set(G,Math.abs(g-b[G]))}const I=new Set,M=new Set;function B(O){v(O,1),O.m(i,a),s.set(O.key,O),a=O.first,_--}for(;d&&_;){const O=h[_-1],G=t[d-1],j=O.key,W=G.key;O===G?(a=O.first,d--,_--):y.has(W)?!s.has(j)||I.has(j)?B(O):M.has(W)?d--:w.get(j)>w.get(W)?(M.add(j),B(O)):(I.add(W),d--):(c(G,s),d--)}for(;d--;){const O=t[d];y.has(O.key)||c(O,s)}for(;_;)B(h[_-1]);return re(E),h}function lt(t,e){const n={},r={},l={$$scope:1};let o=t.length;for(;o--;){const s=t[o],i=e[o];if(i){for(const c in s)c in i||(r[c]=1);for(const c in i)l[c]||(n[c]=i[c],l[c]=1);t[o]=i}else for(const c in s)l[c]=1}for(const s in r)s in n||(n[s]=void 0);return n}function st(t){return typeof t=="object"&&t!==null?t:{}}function $e(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function N(t){t&&t.c()}function P(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),Re(()=>{const o=t.$$.on_mount.map(tr).filter(Ke);t.$$.on_destroy?t.$$.on_destroy.push(...o):re(o),t.$$.on_mount=[]}),l.forEach(Re)}function L(t,e){const n=t.$$;n.fragment!==null&&(Lr(n.after_update),re(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Nr(t,e){t.$$.dirty[0]===-1&&(Oe.push(t),lr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function V(t,e,n,r,l,o,s=null,i=[-1]){const c=Ve;de(t);const u=t.$$={fragment:null,ctx:[],props:o,update:A,not_equal:l,bound:Vt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Vt(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};s&&s(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(f,d,..._)=>{const g=_.length?_[0]:d;return u.ctx&&l(u.ctx[f],u.ctx[f]=g)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](g),a&&Nr(t,f)),d}):[],u.update(),a=!0,re(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=Ar(e.target);u.fragment&&u.fragment.l(f),f.forEach(C)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),P(t,e.target,e.anchor),Pt()}de(c)}class q{constructor(){ht(this,"$$");ht(this,"$$set")}$destroy(){L(this,1),this.$destroy=A}$on(e,n){if(!Ke(n))return A;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!Sr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Or="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Or);const Ne=[];function cr(t,e){return{subscribe:pe(t,e).subscribe}}function pe(t,e=A){let n;const r=new Set;function l(i){if(z(t,i)&&(t=i,n)){const c=!Ne.length;for(const u of r)u[1](),Ne.push(u,t);if(c){for(let u=0;u<Ne.length;u+=2)Ne[u][0](Ne[u+1]);Ne.length=0}}}function o(i){l(i(t))}function s(i,c=A){const u=[i,c];return r.add(u),r.size===1&&(n=e(l,o)||A),i(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:s}}function ur(t,e,n){const r=!Array.isArray(t),l=r?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return cr(n,(s,i)=>{let c=!1;const u=[];let a=0,f=A;const d=()=>{if(a)return;f();const g=e(r?u[0]:u,s,i);o?s(g):f=Ke(g)?g:A},_=l.map((g,b)=>Dt(g,h=>{u[b]=h,a&=~(1<<b),c&&d()},()=>{a|=1<<b}));return c=!0,d(),function(){re(_),f(),c=!1}})}function Br(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,l,o,s=[],i="",c=t.split("/");for(c[0]||c.shift();l=c.shift();)n=l[0],n==="*"?(s.push("wild"),i+="/(.*)"):n===":"?(r=l.indexOf("?",1),o=l.indexOf(".",1),s.push(l.substring(1,~r?r:~o?o:l.length)),i+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(i+=(~r?"?":"")+"\\"+l.substring(o))):i+="/"+l;return{keys:s,pattern:new RegExp("^"+i+(e?"(?=$|/)":"/?$"),"i")}}function Gr(t){let e,n,r;const l=[t[2]];var o=t[0];function s(i,c){let u={};if(c!==void 0&&c&4)u=lt(l,[st(i[2])]);else for(let a=0;a<l.length;a+=1)u=Tt(u,l[a]);return{props:u}}return o&&(e=rt(o,s(t)),e.$on("routeEvent",t[7])),{c(){e&&N(e.$$.fragment),n=ee()},m(i,c){e&&P(e,i,c),S(i,n,c),r=!0},p(i,c){if(c&1&&o!==(o=i[0])){if(e){te();const u=e;k(u.$$.fragment,1,0,()=>{L(u,1)}),ne()}o?(e=rt(o,s(i,c)),e.$on("routeEvent",i[7]),N(e.$$.fragment),v(e.$$.fragment,1),P(e,n.parentNode,n)):e=null}else if(o){const u=c&4?lt(l,[st(i[2])]):{};e.$set(u)}},i(i){r||(e&&v(e.$$.fragment,i),r=!0)},o(i){e&&k(e.$$.fragment,i),r=!1},d(i){i&&C(n),e&&L(e,i)}}}function Rr(t){let e,n,r;const l=[{params:t[1]},t[2]];var o=t[0];function s(i,c){let u={};if(c!==void 0&&c&6)u=lt(l,[c&2&&{params:i[1]},c&4&&st(i[2])]);else for(let a=0;a<l.length;a+=1)u=Tt(u,l[a]);return{props:u}}return o&&(e=rt(o,s(t)),e.$on("routeEvent",t[6])),{c(){e&&N(e.$$.fragment),n=ee()},m(i,c){e&&P(e,i,c),S(i,n,c),r=!0},p(i,c){if(c&1&&o!==(o=i[0])){if(e){te();const u=e;k(u.$$.fragment,1,0,()=>{L(u,1)}),ne()}o?(e=rt(o,s(i,c)),e.$on("routeEvent",i[6]),N(e.$$.fragment),v(e.$$.fragment,1),P(e,n.parentNode,n)):e=null}else if(o){const u=c&6?lt(l,[c&2&&{params:i[1]},c&4&&st(i[2])]):{};e.$set(u)}},i(i){r||(e&&v(e.$$.fragment,i),r=!0)},o(i){e&&k(e.$$.fragment,i),r=!1},d(i){i&&C(n),e&&L(e,i)}}}function Hr(t){let e,n,r,l;const o=[Rr,Gr],s=[];function i(c,u){return c[1]?0:1}return e=i(t),n=s[e]=o[e](t),{c(){n.c(),r=ee()},m(c,u){s[e].m(c,u),S(c,r,u),l=!0},p(c,[u]){let a=e;e=i(c),e===a?s[e].p(c,u):(te(),k(s[a],1,1,()=>{s[a]=null}),ne(),n=s[e],n?n.p(c,u):(n=s[e]=o[e](c),n.c()),v(n,1),n.m(r.parentNode,r))},i(c){l||(v(n),l=!0)},o(c){k(n),l=!1},d(c){c&&C(r),s[e].d(c)}}}function Yt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const Lt=cr(null,function(e){e(Yt());const n=()=>{e(Yt())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});ur(Lt,t=>t.location);ur(Lt,t=>t.querystring);const Kt=pe(void 0);async function x(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await sr(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}function Mt(t,e){if(e=Jt(e),!t||!t.tagName||t.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Xt(t,e),{update(n){n=Jt(n),Xt(t,n)}}}function Fr(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Xt(t,e){let n=e.href||t.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);t.setAttribute("href",n),t.addEventListener("click",r=>{r.preventDefault(),e.disabled||zr(r.currentTarget.getAttribute("href"))})}function Jt(t){return t&&typeof t=="string"?{href:t}:t||{}}function zr(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=t}function Ur(t,e,n){let{routes:r={}}=e,{prefix:l=""}=e,{restoreScrollState:o=!1}=e;class s{constructor(M,B){if(!B||typeof B!="function"&&(typeof B!="object"||B._sveltesparouter!==!0))throw Error("Invalid component object");if(!M||typeof M=="string"&&(M.length<1||M.charAt(0)!="/"&&M.charAt(0)!="*")||typeof M=="object"&&!(M instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:O,keys:G}=Br(M);this.path=M,typeof B=="object"&&B._sveltesparouter===!0?(this.component=B.component,this.conditions=B.conditions||[],this.userData=B.userData,this.props=B.props||{}):(this.component=()=>Promise.resolve(B),this.conditions=[],this.props={}),this._pattern=O,this._keys=G}match(M){if(l){if(typeof l=="string")if(M.startsWith(l))M=M.substr(l.length)||"/";else return null;else if(l instanceof RegExp){const j=M.match(l);if(j&&j[0])M=M.substr(j[0].length)||"/";else return null}}const B=this._pattern.exec(M);if(B===null)return null;if(this._keys===!1)return B;const O={};let G=0;for(;G<this._keys.length;){try{O[this._keys[G]]=decodeURIComponent(B[G+1]||"")||null}catch{O[this._keys[G]]=null}G++}return O}async checkConditions(M){for(let B=0;B<this.conditions.length;B++)if(!await this.conditions[B](M))return!1;return!0}}const i=[];r instanceof Map?r.forEach((I,M)=>{i.push(new s(M,I))}):Object.keys(r).forEach(I=>{i.push(new s(I,r[I]))});let c=null,u=null,a={};const f=De();async function d(I,M){await sr(),f(I,M)}let _=null,g=null;o&&(g=I=>{I.state&&(I.state.__svelte_spa_router_scrollY||I.state.__svelte_spa_router_scrollX)?_=I.state:_=null},window.addEventListener("popstate",g),Dr(()=>{Fr(_)}));let b=null,h=null;const y=Lt.subscribe(async I=>{b=I;let M=0;for(;M<i.length;){const B=i[M].match(I.location);if(!B){M++;continue}const O={route:i[M].path,location:I.location,querystring:I.querystring,userData:i[M].userData,params:B&&typeof B=="object"&&Object.keys(B).length?B:null};if(!await i[M].checkConditions(O)){n(0,c=null),h=null,d("conditionsFailed",O);return}d("routeLoading",Object.assign({},O));const G=i[M].component;if(h!=G){G.loading?(n(0,c=G.loading),h=G,n(1,u=G.loadingParams),n(2,a={}),d("routeLoaded",Object.assign({},O,{component:c,name:c.name,params:u}))):(n(0,c=null),h=null);const j=await G();if(I!=b)return;n(0,c=j&&j.default||j),h=G}B&&typeof B=="object"&&Object.keys(B).length?n(1,u=B):n(1,u=null),n(2,a=i[M].props),d("routeLoaded",Object.assign({},O,{component:c,name:c.name,params:u})).then(()=>{Kt.set(u)});return}n(0,c=null),h=null,Kt.set(void 0)});jr(()=>{y(),g&&window.removeEventListener("popstate",g)});function w(I){vt.call(this,t,I)}function E(I){vt.call(this,t,I)}return t.$$set=I=>{"routes"in I&&n(3,r=I.routes),"prefix"in I&&n(4,l=I.prefix),"restoreScrollState"in I&&n(5,o=I.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=o?"manual":"auto")},[c,u,a,r,l,o,w,E]}class Vr extends q{constructor(e){super(),V(this,e,Ur,Hr,z,{routes:3,prefix:4,restoreScrollState:5})}}const qr=(t,e)=>e.some(n=>t instanceof n);let Wt,Qt;function Yr(){return Wt||(Wt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kr(){return Qt||(Qt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ar=new WeakMap,St=new WeakMap,fr=new WeakMap,bt=new WeakMap,Nt=new WeakMap;function Xr(t){const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(ge(t.result)),l()},s=()=>{r(t.error),l()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&ar.set(n,t)}).catch(()=>{}),Nt.set(e,t),e}function Jr(t){if(St.has(t))return;const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),l()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});St.set(t,e)}let It={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return St.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fr.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ge(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Wr(t){It=t(It)}function Qr(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call($t(this),e,...n);return fr.set(r,e.sort?e.sort():[e]),ge(r)}:Kr().includes(t)?function(...e){return t.apply($t(this),e),ge(ar.get(this))}:function(...e){return ge(t.apply($t(this),e))}}function Zr(t){return typeof t=="function"?Qr(t):(t instanceof IDBTransaction&&Jr(t),qr(t,Yr())?new Proxy(t,It):t)}function ge(t){if(t instanceof IDBRequest)return Xr(t);if(bt.has(t))return bt.get(t);const e=Zr(t);return e!==t&&(bt.set(t,e),Nt.set(e,t)),e}const $t=t=>Nt.get(t);function xr(t,e,{blocked:n,upgrade:r,blocking:l,terminated:o}={}){const s=indexedDB.open(t,e),i=ge(s);return r&&s.addEventListener("upgradeneeded",c=>{r(ge(s.result),c.oldVersion,c.newVersion,ge(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),i.then(c=>{o&&c.addEventListener("close",()=>o()),l&&c.addEventListener("versionchange",u=>l(u.oldVersion,u.newVersion,u))}).catch(()=>{}),i}const el=["get","getKey","getAll","getAllKeys","count"],tl=["put","add","delete","clear"],yt=new Map;function Zt(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yt.get(e))return yt.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=tl.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||el.includes(n)))return;const o=async function(s,...i){const c=this.transaction(s,l?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(i.shift())),(await Promise.all([u[n](...i),l&&c.done]))[0]};return yt.set(e,o),o}Wr(t=>({...t,get:(e,n,r)=>Zt(e,n)||t.get(e,n,r),has:(e,n)=>!!Zt(e,n)||t.has(e,n)}));let Ae=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");var ie=(t=>(t.Expense="EXPENSE",t.Income="INCOME",t.Transfer="TRANSFER",t))(ie||{});const ue=pe([]),ve=pe([]),ke=pe([]),je=pe([]),dr=pe([]),qe=pe(""),at=pe({}),xt=[{value:ie.Expense,title:"Expense"},{value:ie.Transfer,title:"Transfer"},{value:ie.Income,title:"Income"}],ot="baseCurrencyCode";let H;const nl=xr("acc",3,{upgrade(t,e,n,r){if(t.objectStoreNames.contains("accountGroups")||t.createObjectStore("accountGroups",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("accounts")||t.createObjectStore("accounts",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("currencies")||t.createObjectStore("currencies",{keyPath:"code"}),t.objectStoreNames.contains("categories")||t.createObjectStore("categories",{keyPath:"id"}).createIndex("title",["title","subtitle"]),t.objectStoreNames.contains("entries")||t.createObjectStore("entries",{keyPath:"id"}).createIndex("accountId","accountId"),!t.objectStoreNames.contains("transactions"))t.createObjectStore("transactions",{keyPath:"id"}).createIndex("timestamp","timestamp");else{const l=r.objectStore("transactions");console.log("store already exists, creating index"),l.createIndex("timestamp","timestamp")}t.objectStoreNames.contains("settings")||t.createObjectStore("settings",{keyPath:"name"}),t.objectStoreNames.contains("rates")||t.createObjectStore("rates",{keyPath:"code"})}}).then(t=>{H=t});function Pe(){return H.getAllFromIndex("accounts","title")}function rl(t){return H.get("accounts",t)}async function ll(t){await H.put("accounts",t),ue.set(await Pe())}async function sl(t){const e=await H.get("transactions",t);await Promise.all([H.delete("transactions",t),H.delete("entries",e.entryId),e.secondEntryId?H.delete("entries",e.secondEntryId):null]),await Promise.all([Te(e.accountId),e.secondAccountId?Te(e.secondAccountId):null]),ue.set(await Pe())}async function ol(t,e){const[n,r]=await Promise.all([H.get("entries",t.entryId),t.secondEntryId?H.get("entries",t.secondEntryId):null]),[l,o,s]=mr(e,t.id,n.id,r?r.id:Ae(5));await Promise.all([H.put("transactions",l),H.put("entries",o),s?r?H.put("entries",s):H.add("entries",s):r?H.delete("entries",r.id):null]);const[i,c]=await Promise.all([Te(l.accountId),l.secondAccountId?Te(l.secondAccountId):null,t.secondAccountId&&t.secondAccountId!==e.secondAccountId?Te(t.secondAccountId):null]);(i||c)&&ue.set(await Pe())}function ft(){return H.getAllFromIndex("accountGroups","title")}function dt(){return H.getAllFromIndex("categories","title")}function _t(){return H.getAll("currencies")}function il(){return H.getAll("settings")}async function cl(){return(await H.getAll("rates")).reduce((e,n)=>(e[n.code]=n.rate,e),{})}async function _r(t,e=!0){return(await H.getAllFromIndex("entries","accountId",t)).sort((r,l)=>r.timestamp<l.timestamp?e?1:-1:r.timestamp>l.timestamp?e?-1:1:0)}async function ul(t,e){return await H.getAllFromIndex("transactions","timestamp",IDBKeyRange.bound(t,e,!1,!0))}function al(t){return H.get("transactions",t)}async function fl(t,e){await H.put("accountGroups",{id:Ae(5),currencyCode:e,title:t}),ve.set(await ft())}async function dl(t){await H.put("accountGroups",t),ve.set(await ft())}async function _l(t,e,n){await H.put("accounts",{id:Ae(5),title:t,groupId:e,currencyCode:n,balance:0}),ue.set(await Pe())}async function pl(t,e){await H.put("categories",{id:Ae(5),title:t,subtitle:e}),ke.set(await dt())}async function pr(t){await H.put("settings",t)}async function ml(t,e){const n={};await H.delete("rates",e),await Promise.all(t.map(r=>(n[r.code]=r.rate,H.put("rates",r)))),at.set(n)}async function hl(t){await H.put("categories",t),ke.set(await dt())}async function gl(t,e){await H.put("currencies",{code:t,title:e}),je.set(await _t())}async function bl(t){await H.put("currencies",t),je.set(await _t())}function mr({kind:t,accountId:e,timestamp:n,categoryId:r,secondAccountId:l,secondAmount:o,amount:s,comment:i,reconciled:c},u,a,f){const d={id:a,timestamp:n,accountId:e,...r?{categoryId:r}:{},transactionId:u,comment:i,amount:t===ie.Income?s:-s,total:0,...c?{reconciled:c}:{}};if(t===ie.Transfer){const _={id:f,timestamp:n,accountId:l,transactionId:u,comment:i,amount:o||s,total:0,...c?{reconciled:c}:{}};return[{id:u,kind:t,timestamp:n,accountId:e,secondAccountId:l,amount:s,...o?{secondAmount:o}:{},comment:i,entryId:d.id,secondEntryId:_.id,...c?{reconciled:c}:{}},d,_]}else return[{id:u,kind:t,timestamp:n,accountId:e,...r?{categoryId:r}:{},amount:s,comment:i,entryId:d.id,...c?{reconciled:c}:{}},d]}async function Te(t){const e=await _r(t,!1);let n=0;for(const l of e)n+=l.amount,l.total!==n&&await H.put("entries",{...l,total:n});const r=await rl(t);return r.balance!==n?(await H.put("accounts",{...r,balance:n}),!0):!1}async function $l(t){const e=H.transaction(["entries","transactions"],"readwrite"),n=e.objectStore("entries"),r=e.objectStore("transactions"),[l,o,s]=mr(t,Ae(5),Ae(5),Ae(5));await Promise.all([r.add(l),n.add(o),...s?[n.add(s)]:[],e.done]);const[i,c]=await Promise.all([Te(l.accountId),l.secondAccountId?Te(l.secondAccountId):!1]);(i||c)&&ue.set(await Pe())}async function hr(){const[t,e,n,r,l,o]=await Promise.all([Pe(),ft(),dt(),_t(),il(),cl()]);je.set(r),ve.set(e),ue.set(t),ke.set(n),dr.set(l);const s=yl(l);qe.set(s),delete o[s],at.set(o)}function yl(t){for(const e of t)if(e.name===ot)return e.value;return""}async function wl(){await nl,await hr()}const vl=wl();function kl(t){function e(r){r.target instanceof Node&&t.hasAttribute("data-opened")&&(t.contains(r.target)||t.removeAttribute("data-opened"))}function n(r){r.code==="Escape"&&t.hasAttribute("data-opened")&&t.removeAttribute("data-opened")}return document.addEventListener("click",e),document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n),document.removeEventListener("click",e)}}}const Cl=t=>({}),en=t=>({});function Sl(t){let e,n,r,l,o,s,i,c;const u=t[6].default,a=xe(u,t,t[5],null),f=t[6].content,d=xe(f,t,t[5],en);return{c(){e=$("div"),n=$("div"),a&&a.c(),r=T(),l=$("div"),d&&d.c(),m(n,"class","_2SXNm"),m(l,"class","_27WQU"),m(l,"data-role","popover"),m(e,"class",o="_2LTIc "+t[0])},m(_,g){S(_,e,g),p(e,n),a&&a.m(n,null),p(e,r),p(e,l),d&&d.m(l,null),t[8](e),s=!0,i||(c=[F(n,"click",function(){Ke(t[1]&&t[7])&&(t[1]&&t[7]).apply(this,arguments)}),ut(kl.call(null,e))],i=!0)},p(_,[g]){t=_,a&&a.p&&(!s||g&32)&&tt(a,u,t,t[5],s?et(u,t[5],g,null):nt(t[5]),null),d&&d.p&&(!s||g&32)&&tt(d,f,t,t[5],s?et(f,t[5],g,Cl):nt(t[5]),en),(!s||g&1&&o!==(o="_2LTIc "+t[0]))&&m(e,"class",o)},i(_){s||(v(a,_),v(d,_),s=!0)},o(_){k(a,_),k(d,_),s=!1},d(_){_&&C(e),a&&a.d(_),d&&d.d(_),t[8](null),i=!1,re(c)}}}function Il(t,e,n){let{$$slots:r={},$$scope:l}=e,o,{class:s=void 0}=e,{clickToggle:i=!0}=e;function c(){o.toggleAttribute("data-opened",!1)}function u(){o.toggleAttribute("data-opened",!0)}const a=()=>{o.toggleAttribute("data-opened")};function f(d){Z[d?"unshift":"push"](()=>{o=d,n(2,o)})}return t.$$set=d=>{"class"in d&&n(0,s=d.class),"clickToggle"in d&&n(1,i=d.clickToggle),"$$scope"in d&&n(5,l=d.$$scope)},[s,i,o,c,u,l,r,a,f]}class gr extends q{constructor(e){super(),V(this,e,Il,Sl,z,{class:0,clickToggle:1,close:3,show:4})}get close(){return this.$$.ctx[3]}get show(){return this.$$.ctx[4]}}function tn(t,e,n){const r=t.slice();return r[3]=e[n],r}function El(t){let e,n=t[3].title+"",r;return{c(){e=$("span"),r=D(n),m(e,"class","_2YoB_")},m(l,o){S(l,e,o),p(e,r)},p(l,o){o&1&&n!==(n=l[3].title+"")&&R(r,n)},d(l){l&&C(e)}}}function Al(t){let e,n=t[3].title+"",r,l,o,s;return{c(){e=$("a"),r=D(n),m(e,"class","_2blFf"),m(e,"href",l=t[3].to),m(e,"draggable",!1)},m(i,c){S(i,e,c),p(e,r),o||(s=ut(Mt.call(null,e)),o=!0)},p(i,c){c&1&&n!==(n=i[3].title+"")&&R(r,n),c&1&&l!==(l=i[3].to)&&m(e,"href",l)},d(i){i&&C(e),o=!1,s()}}}function nn(t,e){let n,r,l,o,s;function i(a,f){return a[3].to?Al:El}let c=i(e),u=c(e);return{key:t,first:null,c(){n=$("li"),u.c(),r=T(),m(n,"class","_161ne"),m(n,"data-id",l=e[3].id),this.first=n},m(a,f){S(a,n,f),u.m(n,null),p(n,r),o||(s=F(n,"click",e[2]),o=!0)},p(a,f){e=a,c===(c=i(e))&&u?u.p(e,f):(u.d(1),u=c(e),u&&(u.c(),u.m(n,r))),f&1&&l!==(l=e[3].id)&&m(n,"data-id",l)},d(a){a&&C(n),u.d(),o=!1,s()}}}function Tl(t){let e,n=[],r=new Map,l=K(t[0]);const o=s=>s[3].id;for(let s=0;s<l.length;s+=1){let i=tn(t,l,s),c=o(i);r.set(c,n[s]=nn(c,i))}return{c(){e=$("ul");for(let s=0;s<n.length;s+=1)n[s].c();m(e,"class","_4OB04")},m(s,i){S(s,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null)},p(s,[i]){i&3&&(l=K(s[0]),n=we(n,i,o,1,s,l,r,e,He,nn,null,tn))},i:A,o:A,d(s){s&&C(e);for(let i=0;i<n.length;i+=1)n[i].d()}}}function Dl(t,e,n){let{items:r=[]}=e;const l=De(),o=s=>{l("menu",{id:s.currentTarget.dataset.id})};return t.$$set=s=>{"items"in s&&n(0,r=s.items)},[r,l,o]}class jl extends q{constructor(e){super(),V(this,e,Dl,Tl,z,{items:0})}}function Pl(t){let e,n,r;return{c(){e=ce("svg"),n=ce("line"),r=ce("polyline"),m(n,"x1","19"),m(n,"y1","12"),m(n,"x2","5"),m(n,"y2","12"),m(r,"points","12 19 5 12 12 5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-arrow-left")},m(l,o){S(l,e,o),p(e,n),p(e,r)},p(l,[o]){o&1&&m(e,"width",l[0]),o&1&&m(e,"height",l[0])},i:A,o:A,d(l){l&&C(e)}}}function Ll(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Ml extends q{constructor(e){super(),V(this,e,Ll,Pl,z,{size:0})}}function Nl(t){let e,n,r;return{c(){e=ce("svg"),n=ce("line"),r=ce("line"),m(n,"x1","12"),m(n,"y1","5"),m(n,"x2","12"),m(n,"y2","19"),m(r,"x1","5"),m(r,"y1","12"),m(r,"x2","19"),m(r,"y2","12"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-plus")},m(l,o){S(l,e,o),p(e,n),p(e,r)},p(l,[o]){o&1&&m(e,"width",l[0]),o&1&&m(e,"height",l[0])},i:A,o:A,d(l){l&&C(e)}}}function Ol(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Bl extends q{constructor(e){super(),V(this,e,Ol,Nl,z,{size:0})}}function Gl(t){let e,n,r,l;return{c(){e=ce("svg"),n=ce("line"),r=ce("line"),l=ce("line"),m(n,"x1","3"),m(n,"y1","12"),m(n,"x2","21"),m(n,"y2","12"),m(r,"x1","3"),m(r,"y1","6"),m(r,"x2","21"),m(r,"y2","6"),m(l,"x1","3"),m(l,"y1","18"),m(l,"x2","21"),m(l,"y2","18"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-menu")},m(o,s){S(o,e,s),p(e,n),p(e,r),p(e,l)},p(o,[s]){s&1&&m(e,"width",o[0]),s&1&&m(e,"height",o[0])},i:A,o:A,d(o){o&&C(e)}}}function Rl(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Hl extends q{constructor(e){super(),V(this,e,Rl,Gl,z,{size:0})}}function rn(t){let e,n,r,l,o;return n=new Ml({}),{c(){e=$("a"),N(n.$$.fragment),m(e,"class","_3SB3X"),m(e,"href",t[1]),m(e,"draggable",!1)},m(s,i){S(s,e,i),P(n,e,null),r=!0,l||(o=ut(Mt.call(null,e)),l=!0)},p(s,i){(!r||i&2)&&m(e,"href",s[1])},i(s){r||(v(n.$$.fragment,s),r=!0)},o(s){k(n.$$.fragment,s),r=!1},d(s){s&&C(e),L(n),l=!1,o()}}}function ln(t){let e,n,r,l,o;return n=new Bl({}),{c(){e=$("a"),N(n.$$.fragment),m(e,"class","_3SB3X"),m(e,"href",t[2]),m(e,"draggable",!1)},m(s,i){S(s,e,i),P(n,e,null),r=!0,l||(o=ut(Mt.call(null,e)),l=!0)},p(s,i){(!r||i&4)&&m(e,"href",s[2])},i(s){r||(v(n.$$.fragment,s),r=!0)},o(s){k(n.$$.fragment,s),r=!1},d(s){s&&C(e),L(n),l=!1,o()}}}function sn(t){let e,n,r={class:"_1qXOD",$$slots:{content:[zl],default:[Fl]},$$scope:{ctx:t}};return e=new gr({props:r}),t[7](e),{c(){N(e.$$.fragment)},m(l,o){P(e,l,o),n=!0},p(l,o){const s={};o&280&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){t[7](null),L(e,l)}}}function Fl(t){let e,n;return e=new Hl({}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function zl(t){let e,n;return e=new jl({props:{slot:"content",items:t[3]}}),e.$on("menu",t[6]),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,l){const o={};l&8&&(o.items=r[3]),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Ul(t){let e,n,r,l,o,s,i,c,u,a=t[1]&&rn(t),f=t[2]&&ln(t),d=t[3]&&sn(t);return{c(){e=$("header"),n=$("div"),a&&a.c(),r=T(),l=$("h1"),o=D(t[0]),s=T(),i=$("div"),f&&f.c(),c=T(),d&&d.c(),m(n,"class","_1J780"),m(l,"class","_17FA5"),m(i,"class","_3ifcR"),m(e,"class","_2Jb6S")},m(_,g){S(_,e,g),p(e,n),a&&a.m(n,null),p(e,r),p(e,l),p(l,o),p(e,s),p(e,i),f&&f.m(i,null),p(i,c),d&&d.m(i,null),u=!0},p(_,[g]){_[1]?a?(a.p(_,g),g&2&&v(a,1)):(a=rn(_),a.c(),v(a,1),a.m(n,null)):a&&(te(),k(a,1,1,()=>{a=null}),ne()),(!u||g&1)&&R(o,_[0]),_[2]?f?(f.p(_,g),g&4&&v(f,1)):(f=ln(_),f.c(),v(f,1),f.m(i,c)):f&&(te(),k(f,1,1,()=>{f=null}),ne()),_[3]?d?(d.p(_,g),g&8&&v(d,1)):(d=sn(_),d.c(),v(d,1),d.m(i,null)):d&&(te(),k(d,1,1,()=>{d=null}),ne())},i(_){u||(v(a),v(f),v(d),u=!0)},o(_){k(a),k(f),k(d),u=!1},d(_){_&&C(e),a&&a.d(),f&&f.d(),d&&d.d()}}}function Vl(t,e,n){let{title:r}=e,{returnPath:l=void 0}=e,{addPath:o=void 0}=e,{menuItems:s=null}=e,i=null;const c=De(),u=f=>{i.close(),c("menu",{id:f.detail.id})};function a(f){Z[f?"unshift":"push"](()=>{i=f,n(4,i)})}return t.$$set=f=>{"title"in f&&n(0,r=f.title),"returnPath"in f&&n(1,l=f.returnPath),"addPath"in f&&n(2,o=f.addPath),"menuItems"in f&&n(3,s=f.menuItems)},[r,l,o,s,i,c,u,a]}class ae extends q{constructor(e){super(),V(this,e,Vl,Ul,z,{title:0,returnPath:1,addPath:2,menuItems:3})}}const ql=t=>({}),on=t=>({});function Yl(t){let e,n,r;const l=t[1].header,o=xe(l,t,t[0],on),s=t[1].default,i=xe(s,t,t[0],null);return{c(){e=$("main"),o&&o.c(),n=T(),i&&i.c(),m(e,"class","_2HUC4")},m(c,u){S(c,e,u),o&&o.m(e,null),p(e,n),i&&i.m(e,null),r=!0},p(c,[u]){o&&o.p&&(!r||u&1)&&tt(o,l,c,c[0],r?et(l,c[0],u,ql):nt(c[0]),on),i&&i.p&&(!r||u&1)&&tt(i,s,c,c[0],r?et(s,c[0],u,null):nt(c[0]),null)},i(c){r||(v(o,c),v(i,c),r=!0)},o(c){k(o,c),k(i,c),r=!1},d(c){c&&C(e),o&&o.d(c),i&&i.d(c)}}}function Kl(t,e,n){let{$$slots:r={},$$scope:l}=e;return t.$$set=o=>{"$$scope"in o&&n(0,l=o.$$scope)},[l,r]}class fe extends q{constructor(e){super(),V(this,e,Kl,Yl,z,{})}}const Xl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Jl(t){const e=t.getTimezoneOffset()*6e4,n=new Date(t.getTime()-e),r=n.getFullYear(),l=String(n.getUTCMonth()+1).padStart(2,"0"),o=String(n.getUTCDate()).padStart(2,"0"),s=String(n.getUTCHours()).padStart(2,"0"),i=String(n.getUTCMinutes()).padStart(2,"0");return`${r}-${l}-${o}T${s}:${i}`}function it(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=r.getFullYear(),o=String(r.getUTCMonth()+1).padStart(2,"0"),s=String(r.getUTCDate()).padStart(2,"0"),i=String(r.getUTCHours()).padStart(2,"0"),c=String(r.getUTCMinutes()).padStart(2,"0");return`${l}-${o}-${s} ${i}:${c}`}function Wl(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=r.getUTCFullYear(),o=String(r.getUTCMonth()+1).padStart(2,"0"),s=String(r.getUTCDate()).padStart(2,"0"),i=Xl[r.getUTCDay()];return`${l}-${o}-${s} ${i}`}function cn(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=String(r.getUTCHours()).padStart(2,"0"),o=String(r.getUTCMinutes()).padStart(2,"0");return`${l}:${o}`}function ct(t){return/^[1-9]\d*([.,](\d{1,2})?)?$/.test(t)}function wt(t){if(/[.,]/.test(t)){let[e,n]=t.split(/[.,]/);return n.trim()===""?parseInt(e)*100:(n.length===1&&(n=n+"0"),parseInt(e+n))}else return parseInt(t)*100}function Q(t,e,n){t=Math.round(t);const r=t<0?Math.ceil(t/100):Math.floor(t/100),l=Math.abs(t%100);return(n&&t>0?"+":"")+`${e?Ql(r):r}.${String(l).padStart(2,"0")}`}function br(t,e){const n=qt(at),r=qt(qe),l=n[t]?n[t]:1;return e===r?l:n[e]?l/n[e]:1}function Ql(t,e=" "){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)}function Zl(t,e){return t.reduce((n,r)=>(r.currencyCode===e?n+=r.balance:n+=r.balance*br(r.currencyCode,e),n),0)}function xl(t,e){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=e,l.click(),URL.revokeObjectURL(r)}function es(t){const e=document.createElement("input");e.type="file",e.accept="application/json",e.multiple=!1,e.onchange=()=>{const n=e.files[0];if(n){const r=new FileReader;r.onload=function(){t(r.result)},r.readAsText(n)}},e.click()}function ts(t){try{return JSON.parse(t)}catch{return console.warn("JSON parsing failed."),null}}async function ns(){const[t,e,n,r,l,o,s,i]=await Promise.all([_t(),ft(),Pe(),dt(),H.getAll("transactions"),H.getAll("entries"),H.getAll("settings"),H.getAll("rates")]);return{ver:it(Date.now()),currencies:t,accountGroups:e,accounts:n,categories:r,transactions:l,entries:o,settings:s,rates:i}}async function rs(t){if(!confirm("All the data will be overwritten. Are you sure you want to continue?"))return!1;if(ls(t)){const e=H.transaction(["currencies","accountGroups","accounts","categories","transactions","entries","settings","rates"],"readwrite");await Promise.all([e.objectStore("currencies").clear(),e.objectStore("accountGroups").clear(),e.objectStore("accounts").clear(),e.objectStore("categories").clear(),e.objectStore("transactions").clear(),e.objectStore("entries").clear(),e.objectStore("settings").clear(),e.objectStore("rates").clear()]);for(const n of t.currencies)await e.objectStore("currencies").put(n);for(const n of t.accountGroups)await e.objectStore("accountGroups").put(n);for(const n of t.accounts)await e.objectStore("accounts").put(n);for(const n of t.categories)await e.objectStore("categories").put(n);for(const n of t.transactions)await e.objectStore("transactions").put(n);for(const n of t.entries)await e.objectStore("entries").put(n);for(const n of t.settings)await e.objectStore("settings").put(n);for(const n of t.rates)await e.objectStore("rates").put(n);return await e.done,!0}else return alert("Invalid snapshot format."),!1}function ls(t){return!(!t.ver||!t.currencies||!t.accountGroups||!t.categories||!t.categories||!t.transactions||!t.entries)}function ss(t){let e,n,r,l=t[0].title+"",o,s,i,c=Q(t[0].balance,!0)+"",u,a,f=t[0].currencyCode+"",d,_,g;return{c(){e=$("div"),n=$("div"),r=$("span"),o=D(l),s=T(),i=$("span"),u=D(c),a=T(),d=D(f),m(r,"class","_3HVLl"),m(n,"class","_1gfEY"),m(e,"class","_2kBg8"),m(e,"data-role","account")},m(b,h){S(b,e,h),p(e,n),p(n,r),p(r,o),p(n,s),p(n,i),p(i,u),p(i,a),p(i,d),_||(g=F(e,"click",t[3]),_=!0)},p(b,[h]){h&1&&l!==(l=b[0].title+"")&&R(o,l),h&1&&c!==(c=Q(b[0].balance,!0)+"")&&R(u,c),h&1&&f!==(f=b[0].currencyCode+"")&&R(d,f)},i:A,o:A,d(b){b&&C(e),_=!1,g()}}}function os(t,e,n){let{account:r}=e,{editing:l=!1}=e;const o=De(),s=()=>{l||o("account",{id:r.id})};return t.$$set=i=>{"account"in i&&n(0,r=i.account),"editing"in i&&n(1,l=i.editing)},[r,l,o,s]}class is extends q{constructor(e){super(),V(this,e,os,ss,z,{account:0,editing:1})}}function un(t,e,n){const r=t.slice();return r[5]=e[n],r}function an(t,e){let n,r,l;return r=new is({props:{account:e[5]}}),r.$on("account",e[4]),{key:t,first:null,c(){n=ee(),N(r.$$.fragment),this.first=n},m(o,s){S(o,n,s),P(r,o,s),l=!0},p(o,s){e=o;const i={};s&2&&(i.account=e[5]),r.$set(i)},i(o){l||(v(r.$$.fragment,o),l=!0)},o(o){k(r.$$.fragment,o),l=!1},d(o){o&&C(n),L(r,o)}}}function cs(t){let e,n,r,l=t[0].title+"",o,s,i,c=Q(t[2],!0)+"",u,a,f=t[0].currencyCode+"",d,_,g=[],b=new Map,h,y=K(t[1]);const w=E=>E[5].id;for(let E=0;E<y.length;E+=1){let I=un(t,y,E),M=w(I);b.set(M,g[E]=an(M,I))}return{c(){e=$("div"),n=$("div"),r=$("span"),o=D(l),s=T(),i=$("span"),u=D(c),a=T(),d=D(f),_=T();for(let E=0;E<g.length;E+=1)g[E].c();m(r,"class","_2RwqA"),m(n,"class","FmXIb")},m(E,I){S(E,e,I),p(e,n),p(n,r),p(r,o),p(n,s),p(n,i),p(i,u),p(i,a),p(i,d),p(e,_);for(let M=0;M<g.length;M+=1)g[M]&&g[M].m(e,null);h=!0},p(E,[I]){(!h||I&1)&&l!==(l=E[0].title+"")&&R(o,l),(!h||I&4)&&c!==(c=Q(E[2],!0)+"")&&R(u,c),(!h||I&1)&&f!==(f=E[0].currencyCode+"")&&R(d,f),I&2&&(y=K(E[1]),te(),g=we(g,I,w,1,E,y,b,e,ir,an,null,un),ne())},i(E){if(!h){for(let I=0;I<y.length;I+=1)v(g[I]);h=!0}},o(E){for(let I=0;I<g.length;I+=1)k(g[I]);h=!1},d(E){E&&C(e);for(let I=0;I<g.length;I+=1)g[I].d()}}}function us(t,e,n){let r,l,o;J(t,ue,c=>n(3,o=c));let{accountGroup:s}=e;const i=c=>{x(`/accounts/${c.detail.id}`)};return t.$$set=c=>{"accountGroup"in c&&n(0,s=c.accountGroup)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=o.filter(c=>c.groupId===s.id)),t.$$.dirty&3&&n(2,l=Zl(r,s.currencyCode))},[s,r,l,o,i]}class as extends q{constructor(e){super(),V(this,e,us,cs,z,{accountGroup:0})}}function fn(t,e,n){const r=t.slice();return r[6]=e[n],r}function dn(t){let e,n;return e=new as({props:{accountGroup:t[6]}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,l){const o={};l&4&&(o.accountGroup=r[6]),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function fs(t){let e,n,r,l,o,s=Q(t[1],!0)+"",i,c,u=(t[0]||"")+"",a,f,d=K(t[2]),_=[];for(let b=0;b<d.length;b+=1)_[b]=dn(fn(t,d,b));const g=b=>k(_[b],1,1,()=>{_[b]=null});return{c(){for(let b=0;b<_.length;b+=1)_[b].c();e=T(),n=$("div"),r=$("div"),r.textContent="Total",l=T(),o=$("div"),i=D(s),c=T(),a=D(u),m(o,"class","_2wBv"),m(n,"class","_3c4Tf")},m(b,h){for(let y=0;y<_.length;y+=1)_[y]&&_[y].m(b,h);S(b,e,h),S(b,n,h),p(n,r),p(n,l),p(n,o),p(o,i),p(o,c),p(o,a),f=!0},p(b,h){if(h&4){d=K(b[2]);let y;for(y=0;y<d.length;y+=1){const w=fn(b,d,y);_[y]?(_[y].p(w,h),v(_[y],1)):(_[y]=dn(w),_[y].c(),v(_[y],1),_[y].m(e.parentNode,e))}for(te(),y=d.length;y<_.length;y+=1)g(y);ne()}(!f||h&2)&&s!==(s=Q(b[1],!0)+"")&&R(i,s),(!f||h&1)&&u!==(u=(b[0]||"")+"")&&R(a,u)},i(b){if(!f){for(let h=0;h<d.length;h+=1)v(_[h]);f=!0}},o(b){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)k(_[h]);f=!1},d(b){b&&(C(e),C(n)),_e(_,b)}}}function ds(t){let e,n;return e=new ae({props:{slot:"header",title:"Accounts",addPath:"/accounts/new",menuItems:t[3]}}),e.$on("menu",t[5]),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function _s(t){let e,n;return e=new fe({props:{$$slots:{header:[ds],default:[fs]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&519&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function ps(t,e,n){let r,l,o,s;J(t,qe,u=>n(0,l=u)),J(t,ue,u=>n(4,o=u)),J(t,ve,u=>n(2,s=u));const i=[{id:"groups",title:"Account Groups",to:"/groups"},{id:"category",title:"Categories",to:"/categories"},{id:"report",title:"Report",to:"/report"},{id:"currency",title:"Currencies",to:"/currencies"},{id:"rates",title:"Rates",to:"/rates"},{id:"backup",title:"Backup"},{id:"restore",title:"Restore"}],c=u=>{switch(u.detail.id){case"backup":ns().then(a=>{xl(a,`${it(Date.now())}.json`)});break;case"restore":es(a=>{const f=ts(a);f&&rs(f).then(d=>{d&&hr()})});break}};return t.$$.update=()=>{t.$$.dirty&17&&n(1,r=o.reduce((u,a)=>(a.currencyCode===l?u+=a.balance:u+=a.balance*br(a.currencyCode,l),u),0))},[l,r,s,i,o,c]}class ms extends q{constructor(e){super(),V(this,e,ps,_s,z,{})}}function _n(t,e,n){const r=t.slice();return r[2]=e[n],r}function pn(t,e){let n,r=e[2].title+"",l,o,s,i,c;return{key:t,first:null,c(){n=$("div"),l=D(r),o=T(),m(n,"class","_3JK5K"),m(n,"data-id",s=e[2].id),this.first=n},m(u,a){S(u,n,a),p(n,l),p(n,o),i||(c=F(n,"click",e[1]),i=!0)},p(u,a){e=u,a&1&&r!==(r=e[2].title+"")&&R(l,r),a&1&&s!==(s=e[2].id)&&m(n,"data-id",s)},d(u){u&&C(n),i=!1,c()}}}function hs(t){let e=[],n=new Map,r,l=K(t[0]);const o=s=>s[2].id;for(let s=0;s<l.length;s+=1){let i=_n(t,l,s),c=o(i);n.set(c,e[s]=pn(c,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=ee()},m(s,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(s,i);S(s,r,i)},p(s,i){i&3&&(l=K(s[0]),e=we(e,i,o,1,s,l,n,r.parentNode,He,pn,r,_n))},d(s){s&&C(r);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function gs(t){let e,n;return e=new ae({props:{slot:"header",title:"Account Groups",returnPath:"/",addPath:"/groups/new"}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function bs(t){let e,n;return e=new fe({props:{$$slots:{header:[gs],default:[hs]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function $s(t,e,n){let r;J(t,ve,o=>n(0,r=o));function l(o){o.target instanceof HTMLElement&&o.target.dataset.id&&x(`/groups/${o.target.dataset.id}`)}return[r,l]}class ys extends q{constructor(e){super(),V(this,e,$s,bs,z,{})}}function mn(t,e,n){const r=t.slice();return r[4]=e[n].code,r[5]=e[n].title,r}function hn(t,e){let n,r,l=e[4]+"",o,s,i=e[5]+"",c,u,a;return{key:t,first:null,c(){n=D(`}
    `),r=$("option"),o=D(l),s=T(),c=D(i),u=T(),r.__value=a=e[4],Y(r,r.__value),this.first=n},m(f,d){S(f,n,d),S(f,r,d),p(r,o),p(r,s),p(r,c),p(r,u)},p(f,d){e=f,d&4&&l!==(l=e[4]+"")&&R(o,l),d&4&&i!==(i=e[5]+"")&&R(c,i),d&4&&a!==(a=e[4])&&(r.__value=a,Y(r,r.__value))},d(f){f&&(C(n),C(r))}}}function ws(t){let e,n,r,l=[],o=new Map,s,i,c=K(t[2]);const u=a=>a[4];for(let a=0;a<c.length;a+=1){let f=mn(t,c,a),d=u(f);o.set(d,l[a]=hn(d,f))}return{c(){e=$("select"),n=$("option"),r=D(t[1]);for(let a=0;a<l.length;a+=1)l[a].c();n.__value="",Y(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_1kHx0"),e.required=!0,t[0]===void 0&&Re(()=>t[3].call(e))},m(a,f){S(a,e,f),p(e,n),p(n,r);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);Ge(e,t[0],!0),s||(i=F(e,"change",t[3]),s=!0)},p(a,[f]){f&2&&R(r,a[1]),f&4&&(c=K(a[2]),l=we(l,f,u,1,a,c,o,e,He,hn,null,mn)),f&5&&Ge(e,a[0])},i:A,o:A,d(a){a&&C(e);for(let f=0;f<l.length;f+=1)l[f].d();s=!1,i()}}}function vs(t,e,n){let r;J(t,je,i=>n(2,r=i));let{currencyCode:l}=e,{placeholder:o="Currency"}=e;function s(){l=jt(this),n(0,l)}return t.$$set=i=>{"currencyCode"in i&&n(0,l=i.currencyCode),"placeholder"in i&&n(1,o=i.placeholder)},[l,o,r,s]}class pt extends q{constructor(e){super(),V(this,e,vs,ws,z,{currencyCode:0,placeholder:1})}}function ks(t){let e,n,r,l,o,s,i,c,u,a,f=t[4]?"Save":"Create",d,_,g,b;function h(w){t[7](w)}let y={};return t[1]!==void 0&&(y.currencyCode=t[1]),r=new pt({props:y}),Z.push(()=>$e(r,"currencyCode",h)),{c(){e=$("form"),n=$("div"),N(r.$$.fragment),o=T(),s=$("div"),i=$("input"),c=T(),u=$("div"),a=$("button"),d=D(f),m(i,"class","_3xyX_"),m(i,"type","text"),i.disabled=t[3],m(i,"placeholder","Title"),m(a,"class","_2G9AC"),m(a,"type","submit"),a.disabled=t[3],m(e,"class","_3RSQr")},m(w,E){S(w,e,E),p(e,n),P(r,n,null),p(e,o),p(e,s),p(s,i),t[8](i),Y(i,t[0]),p(e,c),p(e,u),p(u,a),p(a,d),_=!0,g||(b=[F(i,"input",t[9]),F(e,"submit",ye(t[5]))],g=!0)},p(w,E){const I={};!l&&E&2&&(l=!0,I.currencyCode=w[1],be(()=>l=!1)),r.$set(I),(!_||E&8)&&(i.disabled=w[3]),E&1&&i.value!==w[0]&&Y(i,w[0]),(!_||E&8)&&(a.disabled=w[3])},i(w){_||(v(r.$$.fragment,w),_=!0)},o(w){k(r.$$.fragment,w),_=!1},d(w){w&&C(e),L(r),t[8](null),g=!1,re(b)}}}function Cs(t){let e,n;return e=new ae({props:{slot:"header",title:t[4]?"Account Group":"New Account Group",returnPath:"/groups"}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Ss(t){let e,n;return e=new fe({props:{$$slots:{header:[Cs],default:[ks]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&4111&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Is(t,e,n){let r;J(t,ve,b=>n(10,r=b));let{params:l={}}=e;const{id:o}=l;let s=o?r.find(b=>b.id===o):null,i=s?s.title:"",c=s?s.currencyCode:void 0,u,a=!1;Je(()=>{u.focus()});function f(){i.trim()&&c?(n(3,a=!0),s?dl({...s,title:i.trim(),currencyCode:c}).then(()=>{x("/groups")}).finally(()=>{n(3,a=!1)}):fl(i,c).then(()=>{x("/groups")}).finally(()=>{n(3,a=!1)})):alert("All fields must be specified.")}function d(b){c=b,n(1,c)}function _(b){Z[b?"unshift":"push"](()=>{u=b,n(2,u)})}function g(){i=this.value,n(0,i)}return t.$$set=b=>{"params"in b&&n(6,l=b.params)},[i,c,u,a,s,f,l,d,_,g]}class gn extends q{constructor(e){super(),V(this,e,Is,Ss,z,{params:6})}}function bn(t,e,n){const r=t.slice();return r[3]=e[n],r}function $n(t){let e,n=t[3].title+"",r,l,o;return{c(){e=$("option"),r=D(n),l=T(),e.__value=o=t[3].id,Y(e,e.__value)},m(s,i){S(s,e,i),p(e,r),p(e,l)},p(s,i){i&2&&n!==(n=s[3].title+"")&&R(r,n),i&2&&o!==(o=s[3].id)&&(e.__value=o,Y(e,e.__value))},d(s){s&&C(e)}}}function Es(t){let e,n,r,l,o=K(t[1]),s=[];for(let i=0;i<o.length;i+=1)s[i]=$n(bn(t,o,i));return{c(){e=$("select"),n=$("option"),n.textContent="Account Group";for(let i=0;i<s.length;i+=1)s[i].c();m(n,"class","placeholder"),n.__value="",Y(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_2Ge4O"),e.required=!0,t[0]===void 0&&Re(()=>t[2].call(e))},m(i,c){S(i,e,c),p(e,n);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);Ge(e,t[0],!0),r||(l=F(e,"change",t[2]),r=!0)},p(i,[c]){if(c&2){o=K(i[1]);let u;for(u=0;u<o.length;u+=1){const a=bn(i,o,u);s[u]?s[u].p(a,c):(s[u]=$n(a),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=o.length}c&3&&Ge(e,i[0])},i:A,o:A,d(i){i&&C(e),_e(s,i),r=!1,l()}}}function As(t,e,n){let r;J(t,ve,s=>n(1,r=s));let{groupId:l}=e;function o(){l=jt(this),n(0,l)}return t.$$set=s=>{"groupId"in s&&n(0,l=s.groupId)},[l,r,o]}class Ts extends q{constructor(e){super(),V(this,e,As,Es,z,{groupId:0})}}function Ds(t){let e,n,r,l,o,s,i,c,u,a,f,d,_,g,b=t[0]?"Save":"Create",h,y,w,E,I;function M(j){t[8](j)}let B={};t[2]!==void 0&&(B.groupId=t[2]),r=new Ts({props:B}),Z.push(()=>$e(r,"groupId",M));function O(j){t[9](j)}let G={};return t[3]!==void 0&&(G.currencyCode=t[3]),i=new pt({props:G}),Z.push(()=>$e(i,"currencyCode",O)),{c(){e=$("form"),n=$("div"),N(r.$$.fragment),o=T(),s=$("div"),N(i.$$.fragment),u=T(),a=$("div"),f=$("input"),d=T(),_=$("div"),g=$("button"),h=D(b),m(f,"class","_3hIGg"),m(f,"type","text"),m(f,"placeholder","Title"),f.disabled=t[5],m(g,"class","J-mxG"),m(g,"type","submit"),g.disabled=t[5],m(e,"class",y="_2Na6L "+t[1])},m(j,W){S(j,e,W),p(e,n),P(r,n,null),p(e,o),p(e,s),P(i,s,null),p(e,u),p(e,a),p(a,f),Y(f,t[4]),t[11](f),p(e,d),p(e,_),p(_,g),p(g,h),w=!0,E||(I=[F(f,"input",t[10]),F(e,"submit",ye(t[7]))],E=!0)},p(j,[W]){const Ce={};!l&&W&4&&(l=!0,Ce.groupId=j[2],be(()=>l=!1)),r.$set(Ce);const Se={};!c&&W&8&&(c=!0,Se.currencyCode=j[3],be(()=>c=!1)),i.$set(Se),(!w||W&32)&&(f.disabled=j[5]),W&16&&f.value!==j[4]&&Y(f,j[4]),(!w||W&1)&&b!==(b=j[0]?"Save":"Create")&&R(h,b),(!w||W&32)&&(g.disabled=j[5]),(!w||W&2&&y!==(y="_2Na6L "+j[1]))&&m(e,"class",y)},i(j){w||(v(r.$$.fragment,j),v(i.$$.fragment,j),w=!0)},o(j){k(r.$$.fragment,j),k(i.$$.fragment,j),w=!1},d(j){j&&C(e),L(r),L(i),t[11](null),E=!1,re(I)}}}function js(t,e,n){let{accountDoc:r=null}=e,{class:l=void 0}=e,{groupId:o,currencyCode:s,title:i=""}=r||{},c=!1,u;const a=De();function f(){i.trim()&&o&&s?(n(5,c=!0),a("save",{groupId:o,currencyCode:s,title:i})):alert("Must fill all fields.")}Je(()=>{u&&u.focus()});function d(h){o=h,n(2,o)}function _(h){s=h,n(3,s)}function g(){i=this.value,n(4,i)}function b(h){Z[h?"unshift":"push"](()=>{u=h,n(6,u)})}return t.$$set=h=>{"accountDoc"in h&&n(0,r=h.accountDoc),"class"in h&&n(1,l=h.class)},[r,l,o,s,i,c,u,f,d,_,g,b]}class $r extends q{constructor(e){super(),V(this,e,js,Ds,z,{accountDoc:0,class:1})}}function Ps(t){let e,n;return e=new $r({props:{class:"_1tO9D"}}),e.$on("save",t[2]),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Ls(t){let e,n;return e=new $r({props:{class:"_1tO9D",accountDoc:t[1]}}),e.$on("save",t[2]),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Ms(t){let e,n,r,l;const o=[Ls,Ps],s=[];function i(c,u){return c[0]?0:1}return e=i(t),n=s[e]=o[e](t),{c(){n.c(),r=ee()},m(c,u){s[e].m(c,u),S(c,r,u),l=!0},p(c,u){n.p(c,u)},i(c){l||(v(n),l=!0)},o(c){k(n),l=!1},d(c){c&&C(r),s[e].d(c)}}}function Ns(t){var r;let e,n;return e=new ae({props:{slot:"header",title:t[0]?(r=t[1])==null?void 0:r.title:"New Account",returnPath:"/"}}),{c(){N(e.$$.fragment)},m(l,o){P(e,l,o),n=!0},p:A,i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){L(e,l)}}}function Os(t){let e,n;return e=new fe({props:{$$slots:{header:[Ns],default:[Ms]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&32&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Bs(t,e,n){let r;J(t,ue,c=>n(4,r=c));let{params:l={}}=e;const{id:o}=l;let s=o?r.find(c=>c.id===o):null;function i(c){const{title:u,groupId:a,currencyCode:f}=c.detail;o?ll({...s,title:u,groupId:a,currencyCode:f}).then(()=>{x("/")}):_l(u,a,f).then(()=>{x("/")})}return t.$$set=c=>{"params"in c&&n(3,l=c.params)},[o,s,i,l]}class yn extends q{constructor(e){super(),V(this,e,Bs,Os,z,{params:3})}}function wn(t){let e,n=t[1].title+"",r,l=t[1].subtitle?`:${t[1].subtitle}`:"",o;return{c(){e=$("span"),r=D(n),o=D(l),m(e,"class","_12oY6")},m(s,i){S(s,e,i),p(e,r),p(e,o)},p(s,i){i&2&&n!==(n=s[1].title+"")&&R(r,n),i&2&&l!==(l=s[1].subtitle?`:${s[1].subtitle}`:"")&&R(o,l)},d(s){s&&C(e)}}}function Gs(t){let e,n,r,l,o=t[0].comment+"",s,i,c,u,a=Q(t[0].amount,!0,!0)+"",f,d,_,g,b=cn(t[0].timestamp)+"",h,y,w,E=Q(t[0].total,!0)+"",I,M,B,O=t[1]&&wn(t);return{c(){e=$("div"),n=$("div"),r=$("div"),l=$("span"),s=D(o),i=T(),O&&O.c(),c=T(),u=$("div"),f=D(a),d=T(),_=$("div"),g=$("div"),h=D(b),y=T(),w=$("div"),I=D(E),m(l,"class","BRMlm"),m(r,"class","_3ibZX"),m(u,"class","_2uKiq"),oe(u,"_2TC9s",t[0].amount>0),m(n,"class","_1RLk7"),m(g,"class","mm7AA"),m(w,"class","_1e2eL"),m(_,"class","_3_MwA"),m(e,"class","_3ieFT"),oe(e,"GILTz",t[0].reconciled)},m(G,j){S(G,e,j),p(e,n),p(n,r),p(r,l),p(l,s),p(r,i),O&&O.m(r,null),p(n,c),p(n,u),p(u,f),p(e,d),p(e,_),p(_,g),p(g,h),p(_,y),p(_,w),p(w,I),M||(B=F(e,"click",t[4]),M=!0)},p(G,[j]){j&1&&o!==(o=G[0].comment+"")&&R(s,o),G[1]?O?O.p(G,j):(O=wn(G),O.c(),O.m(r,null)):O&&(O.d(1),O=null),j&1&&a!==(a=Q(G[0].amount,!0,!0)+"")&&R(f,a),j&1&&oe(u,"_2TC9s",G[0].amount>0),j&1&&b!==(b=cn(G[0].timestamp)+"")&&R(h,b),j&1&&E!==(E=Q(G[0].total,!0)+"")&&R(I,E),j&1&&oe(e,"GILTz",G[0].reconciled)},i:A,o:A,d(G){G&&C(e),O&&O.d(),M=!1,B()}}}function Rs(t,e,n){let r,l;J(t,ke,c=>n(3,l=c));let{entry:o}=e;const s=De(),i=()=>{s("transaction",{id:o.transactionId})};return t.$$set=c=>{"entry"in c&&n(0,o=c.entry)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=o.categoryId?l.find(c=>c.id===o.categoryId):null)},[o,r,s,l,i]}class Hs extends q{constructor(e){super(),V(this,e,Rs,Gs,z,{entry:0})}}function vn(t,e,n){const r=t.slice();return r[7]=e[n],r}function kn(t,e,n){const r=t.slice();return r[10]=e[n],r}function Cn(t,e){let n,r,l;return r=new Hs({props:{entry:e[10]}}),r.$on("transaction",e[6]),{key:t,first:null,c(){n=ee(),N(r.$$.fragment),this.first=n},m(o,s){S(o,n,s),P(r,o,s),l=!0},p(o,s){e=o;const i={};s&1&&(i.entry=e[10]),r.$set(i)},i(o){l||(v(r.$$.fragment,o),l=!0)},o(o){k(r.$$.fragment,o),l=!1},d(o){o&&C(n),L(r,o)}}}function Sn(t){let e,n,r=t[7]+"",l,o,s,i=Q(t[0][t[7]].total,!0,!0)+"",c,u,a=[],f=new Map,d,_,g=K(t[0][t[7]].entries);const b=h=>h[10].id;for(let h=0;h<g.length;h+=1){let y=kn(t,g,h),w=b(y);f.set(w,a[h]=Cn(w,y))}return{c(){e=$("div"),n=$("span"),l=D(r),o=T(),s=$("span"),c=D(i),u=T();for(let h=0;h<a.length;h+=1)a[h].c();d=ee(),m(n,"class","AOdh"),m(s,"class","KP4vf"),m(e,"class","_1DJNy")},m(h,y){S(h,e,y),p(e,n),p(n,l),p(e,o),p(e,s),p(s,c),S(h,u,y);for(let w=0;w<a.length;w+=1)a[w]&&a[w].m(h,y);S(h,d,y),_=!0},p(h,y){(!_||y&1)&&r!==(r=h[7]+"")&&R(l,r),(!_||y&1)&&i!==(i=Q(h[0][h[7]].total,!0,!0)+"")&&R(c,i),y&5&&(g=K(h[0][h[7]].entries),te(),a=we(a,y,b,1,h,g,f,d.parentNode,ir,Cn,d,kn),ne())},i(h){if(!_){for(let y=0;y<g.length;y+=1)v(a[y]);_=!0}},o(h){for(let y=0;y<a.length;y+=1)k(a[y]);_=!1},d(h){h&&(C(e),C(u),C(d));for(let y=0;y<a.length;y+=1)a[y].d(h)}}}function Fs(t){let e,n,r=K(Object.keys(t[0])),l=[];for(let s=0;s<r.length;s+=1)l[s]=Sn(vn(t,r,s));const o=s=>k(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=ee()},m(s,i){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(s,i);S(s,e,i),n=!0},p(s,i){if(i&5){r=K(Object.keys(s[0]));let c;for(c=0;c<r.length;c+=1){const u=vn(s,r,c);l[c]?(l[c].p(u,i),v(l[c],1)):(l[c]=Sn(u),l[c].c(),v(l[c],1),l[c].m(e.parentNode,e))}for(te(),c=r.length;c<l.length;c+=1)o(c);ne()}},i(s){if(!n){for(let i=0;i<r.length;i+=1)v(l[i]);n=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)k(l[i]);n=!1},d(s){s&&C(e),_e(l,s)}}}function zs(t){let e,n;return e=new ae({props:{slot:"header",title:t[1]?`${t[1].title}`:"Not Found",returnPath:"/",addPath:`/accounts/${t[2]}/transactions/new`,menuItems:t[3]}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,l){const o={};l&2&&(o.title=r[1]?`${r[1].title}`:"Not Found"),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Us(t){let e,n;return e=new fe({props:{$$slots:{header:[zs],default:[Fs]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&8195&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Vs(t,e,n){let r,l;J(t,ue,a=>n(5,l=a));let{params:o}=e;const{id:s}=o;let i={};_r(s).then(a=>{n(0,i=a.reduce((f,d)=>{const _=Wl(d.timestamp);return f[_]?f[_].entries.push(d):f[_]={entries:[d],total:0},f},{}));for(const f of Object.values(i))f.total=f.entries.reduce((d,_)=>(d+=_.amount,d),0)});const c=[{id:"edit",title:"Edit",to:`/accounts/${s}/edit`}],u=a=>{x(`/accounts/${s}/transactions/${a.detail.id}`)};return t.$$set=a=>{"params"in a&&n(4,o=a.params)},t.$$.update=()=>{t.$$.dirty&32&&n(1,r=l.find(a=>a.id===s))},[i,r,s,c,o,l,u]}class qs extends q{constructor(e){super(),V(this,e,Vs,Us,z,{params:4})}}function In(t,e,n){const r=t.slice();return r[2]=e[n],r}function En(t,e){let n,r=e[2].title+"",l,o=e[2].subtitle?`:${e[2].subtitle}`:"",s,i,c,u,a;return{key:t,first:null,c(){n=$("div"),l=D(r),s=D(o),i=T(),m(n,"class","_1Hdo"),m(n,"data-id",c=e[2].id),this.first=n},m(f,d){S(f,n,d),p(n,l),p(n,s),p(n,i),u||(a=F(n,"click",e[1]),u=!0)},p(f,d){e=f,d&1&&r!==(r=e[2].title+"")&&R(l,r),d&1&&o!==(o=e[2].subtitle?`:${e[2].subtitle}`:"")&&R(s,o),d&1&&c!==(c=e[2].id)&&m(n,"data-id",c)},d(f){f&&C(n),u=!1,a()}}}function Ys(t){let e=[],n=new Map,r,l=K(t[0]);const o=s=>s[2].id;for(let s=0;s<l.length;s+=1){let i=In(t,l,s),c=o(i);n.set(c,e[s]=En(c,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=ee()},m(s,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(s,i);S(s,r,i)},p(s,i){i&3&&(l=K(s[0]),e=we(e,i,o,1,s,l,n,r.parentNode,He,En,r,In))},d(s){s&&C(r);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function Ks(t){let e,n;return e=new ae({props:{slot:"header",title:"Categories",returnPath:"/",addPath:"/categories/new"}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Xs(t){let e,n;return e=new fe({props:{$$slots:{header:[Ks],default:[Ys]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Js(t,e,n){let r;J(t,ke,o=>n(0,r=o));function l(o){if(o.target.dataset.id){const s=o.target.dataset.id;x(`/categories/${s}`)}}return[r,l]}class Ws extends q{constructor(e){super(),V(this,e,Js,Xs,z,{})}}function Qs(t){let e,n,r,l,o,s,i,c,u,a;function f(_){t[2](_)}let d={placeholder:"Base Currency"};return t[0]!==void 0&&(d.currencyCode=t[0]),l=new pt({props:d}),Z.push(()=>$e(l,"currencyCode",f)),{c(){e=$("form"),n=$("div"),r=D(`Base currency:
      `),N(l.$$.fragment),s=T(),i=$("div"),i.innerHTML='<button class="_19-gA" type="submit">Save</button>',m(e,"class","_1JFP_")},m(_,g){S(_,e,g),p(e,n),p(n,r),P(l,n,null),p(e,s),p(e,i),c=!0,u||(a=F(e,"submit",ye(t[1])),u=!0)},p(_,g){const b={};!o&&g&1&&(o=!0,b.currencyCode=_[0],be(()=>o=!1)),l.$set(b)},i(_){c||(v(l.$$.fragment,_),c=!0)},o(_){k(l.$$.fragment,_),c=!1},d(_){_&&C(e),L(l),u=!1,a()}}}function Zs(t){let e,n;return e=new ae({props:{slot:"header",title:"Settings",returnPath:"/"}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function xs(t){let e,n;return e=new fe({props:{$$slots:{header:[Zs],default:[Qs]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&17&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function eo(t,e,n){var i;let r;J(t,dr,c=>n(3,r=c));let l=(i=r.find(c=>c.name===ot))==null?void 0:i.value;function o(){pr({name:ot,value:l}).then(()=>{x("/")})}function s(c){l=c,n(0,l)}return[l,o,s]}class to extends q{constructor(e){super(),V(this,e,eo,xs,z,{})}}function An(t,e,n){const r=t.slice();return r[2]=e[n],r}function Tn(t,e){let n,r,l=e[2].code+"",o,s,i,c=e[2].title+"",u,a,f,d,_;return{key:t,first:null,c(){n=$("div"),r=$("div"),o=D(l),s=T(),i=$("div"),u=D(c),a=T(),m(r,"class","_4jwya"),m(i,"class","_1GjZM"),m(n,"class","_3HmHC"),m(n,"data-role","item"),m(n,"data-code",f=e[2].code),this.first=n},m(g,b){S(g,n,b),p(n,r),p(r,o),p(n,s),p(n,i),p(i,u),p(n,a),d||(_=F(n,"click",e[1]),d=!0)},p(g,b){e=g,b&1&&l!==(l=e[2].code+"")&&R(o,l),b&1&&c!==(c=e[2].title+"")&&R(u,c),b&1&&f!==(f=e[2].code)&&m(n,"data-code",f)},d(g){g&&C(n),d=!1,_()}}}function no(t){let e=[],n=new Map,r,l=K(t[0]);const o=s=>s[2].code;for(let s=0;s<l.length;s+=1){let i=An(t,l,s),c=o(i);n.set(c,e[s]=Tn(c,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=ee()},m(s,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(s,i);S(s,r,i)},p(s,i){i&3&&(l=K(s[0]),e=we(e,i,o,1,s,l,n,r.parentNode,He,Tn,r,An))},d(s){s&&C(r);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function ro(t){let e,n;return e=new ae({props:{slot:"header",title:"Currencies",returnPath:"/",addPath:"/currencies/new"}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function lo(t){let e,n;return e=new fe({props:{$$slots:{header:[ro],default:[no]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function so(t,e,n){let r;J(t,je,o=>n(0,r=o));function l(o){if(o.target instanceof HTMLElement){const s=o.target.closest('[data-role="item"]');s instanceof HTMLElement&&s.dataset.code&&x(`/currencies/${s.dataset.code}`)}}return[r,l]}class oo extends q{constructor(e){super(),V(this,e,so,lo,z,{})}}function Dn(t,e,n){const r=t.slice();return r[11]=e[n].code,r[12]=e,r[13]=n,r}function jn(t){let e,n,r=t[11]+"",l,o,s,i,c,u,a,f,d,_,g;function b(){t[7].call(c,t[11])}return{c(){e=$("div"),n=$("div"),l=D(r),o=D(":"),s=T(),i=$("div"),c=$("input"),a=T(),f=$("span"),d=D(t[1]),m(c,"id",u=t[11]),m(c,"class","_234LA"),m(c,"type","text"),oe(c,"_2j9gN",!Ye(t[2][t[11]])),m(i,"class","gqdmv")},m(h,y){S(h,e,y),p(e,n),p(n,l),p(n,o),p(e,s),p(e,i),p(i,c),Y(c,t[2][t[11]]),p(i,a),p(i,f),p(f,d),_||(g=F(c,"input",b),_=!0)},p(h,y){t=h,y&8&&r!==(r=t[11]+"")&&R(l,r),y&8&&u!==(u=t[11])&&m(c,"id",u),y&12&&c.value!==t[2][t[11]]&&Y(c,t[2][t[11]]),y&13&&oe(c,"_2j9gN",!Ye(t[2][t[11]])),y&2&&R(d,t[1])},d(h){h&&C(e),_=!1,g()}}}function Pn(t){let e,n=t[11]!==t[1]&&jn(t);return{c(){n&&n.c(),e=ee()},m(r,l){n&&n.m(r,l),S(r,e,l)},p(r,l){r[11]!==r[1]?n?n.p(r,l):(n=jn(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&C(e),n&&n.d(r)}}}function io(t){let e,n,r,l,o,s,i,c,u,a,f;function d(h){t[6](h)}let _={placeholder:"Base Currency"};t[1]!==void 0&&(_.currencyCode=t[1]),l=new pt({props:_}),Z.push(()=>$e(l,"currencyCode",d));let g=K(t[3]),b=[];for(let h=0;h<g.length;h+=1)b[h]=Pn(Dn(t,g,h));return{c(){e=$("form"),n=$("div"),r=D(`Base currency:
      `),N(l.$$.fragment),s=T();for(let h=0;h<b.length;h+=1)b[h].c();i=T(),c=$("div"),c.innerHTML='<button class="_3vC8G" type="submit">Save</button>',m(e,"class","_1SqME")},m(h,y){S(h,e,y),p(e,n),p(n,r),P(l,n,null),p(e,s);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(e,null);p(e,i),p(e,c),u=!0,a||(f=F(e,"submit",ye(t[4])),a=!0)},p(h,y){const w={};if(!o&&y&2&&(o=!0,w.currencyCode=h[1],be(()=>o=!1)),l.$set(w),y&15){g=K(h[3]);let E;for(E=0;E<g.length;E+=1){const I=Dn(h,g,E);b[E]?b[E].p(I,y):(b[E]=Pn(I),b[E].c(),b[E].m(e,i))}for(;E<b.length;E+=1)b[E].d(1);b.length=g.length}},i(h){u||(v(l.$$.fragment,h),u=!0)},o(h){k(l.$$.fragment,h),u=!1},d(h){h&&C(e),L(l),_e(b,h),a=!1,f()}}}function co(t){let e,n;return e=new ae({props:{slot:"header",title:"Rates",returnPath:"/"}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function uo(t){let e,n;return e=new fe({props:{$$slots:{header:[co],default:[io]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&16398&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Ye(t){return/^([1-9]\d*|[0])([.,]\d+)?$/.test(t)}function Et(t){return parseFloat(t.replace(",","."))}function ao(t,e,n){let r,l,o;J(t,qe,d=>n(8,r=d)),J(t,je,d=>n(3,l=d)),J(t,at,d=>n(9,o=d));let s=r,i=l.reduce((d,{code:_})=>(d[_]=String(o[_]||1),d),{});function c(){const d=u();if(d){alert(d);return}const _=l.filter(({code:g})=>g!==s).map(({code:g})=>({code:g,rate:Et(i[g])}));pr({name:ot,value:s}).then(()=>(Ir(qe,r=s,r),ml(_,s))).then(()=>{x("/")})}function u(){for(const[d,_]of Object.entries(i))if(!Ye(_)){const g=document.getElementById(d);return g&&g.focus(),`Invalid rate for ${d}`}return""}function a(d){s=d,n(1,s)}function f(d){i[d]=this.value,n(2,i)}return[Ye,s,i,l,c,Et,a,f]}class fo extends q{constructor(e){super(),V(this,e,ao,uo,z,{validateRate:0,parseRate:5})}get validateRate(){return Ye}get parseRate(){return Et}}function Ln(t,e,n){const r=t.slice();return r[4]=e[n],r}function Mn(t){let e,n;return e=new Ot({props:{cat:t[4],nested:!0,ondocs:t[2]}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.cat=r[4]),l&4&&(o.ondocs=r[2]),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Nn(t){let e,n,r=t[4].title+"",l,o,s,i=Q(t[4].total,!0)+"",c,u,a,f,d,_;function g(){return t[3](t[4])}let b=t[4].sorted&&Mn(t);return{c(){e=$("div"),n=$("span"),l=D(r),o=T(),s=$("span"),c=D(i),u=T(),b&&b.c(),a=ee(),m(n,"class","_31Wp_"),m(e,"class","_1rD4x"),oe(e,"_3eEr8",t[1])},m(h,y){S(h,e,y),p(e,n),p(n,l),p(e,o),p(e,s),p(s,c),S(h,u,y),b&&b.m(h,y),S(h,a,y),f=!0,d||(_=F(e,"click",g),d=!0)},p(h,y){t=h,(!f||y&1)&&r!==(r=t[4].title+"")&&R(l,r),(!f||y&1)&&i!==(i=Q(t[4].total,!0)+"")&&R(c,i),(!f||y&2)&&oe(e,"_3eEr8",t[1]),t[4].sorted?b?(b.p(t,y),y&1&&v(b,1)):(b=Mn(t),b.c(),v(b,1),b.m(a.parentNode,a)):b&&(te(),k(b,1,1,()=>{b=null}),ne())},i(h){f||(v(b),f=!0)},o(h){k(b),f=!1},d(h){h&&(C(e),C(u),C(a)),b&&b.d(h),d=!1,_()}}}function _o(t){let e,n,r=K(t[0].sorted),l=[];for(let s=0;s<r.length;s+=1)l[s]=Nn(Ln(t,r,s));const o=s=>k(l[s],1,1,()=>{l[s]=null});return{c(){e=$("div");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,i){S(s,e,i);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);n=!0},p(s,[i]){if(i&7){r=K(s[0].sorted);let c;for(c=0;c<r.length;c+=1){const u=Ln(s,r,c);l[c]?(l[c].p(u,i),v(l[c],1)):(l[c]=Nn(u),l[c].c(),v(l[c],1),l[c].m(e,null))}for(te(),c=r.length;c<l.length;c+=1)o(c);ne()}},i(s){if(!n){for(let i=0;i<r.length;i+=1)v(l[i]);n=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)k(l[i]);n=!1},d(s){s&&C(e),_e(l,s)}}}function po(t,e,n){let{cat:r}=e,{nested:l=!1}=e,{ondocs:o=void 0}=e;const s=i=>{o==null||o(i.docs)};return t.$$set=i=>{"cat"in i&&n(0,r=i.cat),"nested"in i&&n(1,l=i.nested),"ondocs"in i&&n(2,o=i.ondocs)},[r,l,o,s]}class Ot extends q{constructor(e){super(),V(this,e,po,_o,z,{cat:0,nested:1,ondocs:2})}}function On(t,e,n){const r=t.slice();return r[12]=e[n],r}function Bn(t){let e,n,r,l,o=Q(t[1].total,!0)+"",s,i,c,u;return c=new Ot({props:{cat:t[1],ondocs:t[5]}}),{c(){e=$("div"),n=$("span"),n.textContent="Income",r=T(),l=$("span"),s=D(o),i=T(),N(c.$$.fragment),m(n,"class","_35JQ9"),m(e,"class","_2chuP")},m(a,f){S(a,e,f),p(e,n),p(e,r),p(e,l),p(l,s),S(a,i,f),P(c,a,f),u=!0},p(a,f){(!u||f&2)&&o!==(o=Q(a[1].total,!0)+"")&&R(s,o);const d={};f&2&&(d.cat=a[1]),c.$set(d)},i(a){u||(v(c.$$.fragment,a),u=!0)},o(a){k(c.$$.fragment,a),u=!1},d(a){a&&(C(e),C(i)),L(c,a)}}}function Gn(t){let e,n,r,l,o=Q(t[2].total,!0)+"",s,i,c,u;return c=new Ot({props:{cat:t[2],ondocs:t[5]}}),{c(){e=$("div"),n=$("span"),n.textContent="Expenses",r=T(),l=$("span"),s=D(o),i=T(),N(c.$$.fragment),m(n,"class","_35JQ9"),m(e,"class","_2chuP")},m(a,f){S(a,e,f),p(e,n),p(e,r),p(e,l),p(l,s),S(a,i,f),P(c,a,f),u=!0},p(a,f){(!u||f&4)&&o!==(o=Q(a[2].total,!0)+"")&&R(s,o);const d={};f&4&&(d.cat=a[2]),c.$set(d)},i(a){u||(v(c.$$.fragment,a),u=!0)},o(a){k(c.$$.fragment,a),u=!1},d(a){a&&(C(e),C(i)),L(c,a)}}}function Rn(t){let e,n,r,l,o,s,i,c,u,a=K(t[3]),f=[];for(let d=0;d<a.length;d+=1)f[d]=Fn(On(t,a,d));return{c(){e=$("div"),n=$("div"),r=$("div"),l=$("h2"),l.textContent="Transactions",o=T(),s=$("button"),s.textContent="X",i=T();for(let d=0;d<f.length;d+=1)f[d].c();m(s,"class","_3QV7L"),m(r,"class","_2chuP"),m(n,"class","_22pjw"),m(e,"class","_26Y_Y")},m(d,_){S(d,e,_),p(e,n),p(n,r),p(r,l),p(r,o),p(r,s),p(n,i);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(n,null);c||(u=F(s,"click",t[7]),c=!0)},p(d,_){if(_&24){a=K(d[3]);let g;for(g=0;g<a.length;g+=1){const b=On(d,a,g);f[g]?f[g].p(b,_):(f[g]=Fn(b),f[g].c(),f[g].m(n,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=a.length}},d(d){d&&C(e),_e(f,d),c=!1,u()}}}function Hn(t){let e,n=`${t[4][t[12].categoryId].title}${t[4][t[12].categoryId].subtitle?`:${t[4][t[12].categoryId].subtitle}`:""}`,r;return{c(){e=$("span"),r=D(n),m(e,"class","_2Gqbp")},m(l,o){S(l,e,o),p(e,r)},p(l,o){o&8&&n!==(n=`${l[4][l[12].categoryId].title}${l[4][l[12].categoryId].subtitle?`:${l[4][l[12].categoryId].subtitle}`:""}`)&&R(r,n)},d(l){l&&C(e)}}}function Fn(t){let e,n,r,l=t[12].comment+"",o,s,i,c=Q(t[12].kind===ie.Expense?-t[12].amount:t[12].amount,!0,!0)+"",u,a,f,d,_,g=it(t[12].timestamp)+"",b,h,y=t[4][t[12].categoryId]&&Hn(t);return{c(){e=$("div"),n=$("div"),r=$("span"),o=D(l),s=T(),i=$("span"),u=D(c),a=T(),f=$("div"),y&&y.c(),d=T(),_=$("span"),b=D(g),h=T(),m(r,"class","comment"),m(i,"class","_1gpV9"),m(n,"class","_29Cj"),m(_,"class","_3X8v9"),m(f,"class","_3t2EQ"),m(e,"class","psxOu")},m(w,E){S(w,e,E),p(e,n),p(n,r),p(r,o),p(n,s),p(n,i),p(i,u),p(e,a),p(e,f),y&&y.m(f,null),p(f,d),p(f,_),p(_,b),p(e,h)},p(w,E){E&8&&l!==(l=w[12].comment+"")&&R(o,l),E&8&&c!==(c=Q(w[12].kind===ie.Expense?-w[12].amount:w[12].amount,!0,!0)+"")&&R(u,c),w[4][w[12].categoryId]?y?y.p(w,E):(y=Hn(w),y.c(),y.m(f,d)):y&&(y.d(1),y=null),E&8&&g!==(g=it(w[12].timestamp)+"")&&R(b,g)},d(w){w&&C(e),y&&y.d()}}}function mo(t){let e,n,r,l,o,s,i,c,u,a=t[1]&&Bn(t),f=t[2]&&Gn(t),d=t[3]&&Rn(t);return{c(){e=$("div"),n=$("input"),r=T(),a&&a.c(),l=T(),f&&f.c(),o=T(),d&&d.c(),s=ee(),m(n,"class","_1SJbN"),m(n,"type","month"),m(e,"class","_1wsjW")},m(_,g){S(_,e,g),p(e,n),Y(n,t[0]),S(_,r,g),a&&a.m(_,g),S(_,l,g),f&&f.m(_,g),S(_,o,g),d&&d.m(_,g),S(_,s,g),i=!0,c||(u=F(n,"input",t[6]),c=!0)},p(_,g){g&1&&Y(n,_[0]),_[1]?a?(a.p(_,g),g&2&&v(a,1)):(a=Bn(_),a.c(),v(a,1),a.m(l.parentNode,l)):a&&(te(),k(a,1,1,()=>{a=null}),ne()),_[2]?f?(f.p(_,g),g&4&&v(f,1)):(f=Gn(_),f.c(),v(f,1),f.m(o.parentNode,o)):f&&(te(),k(f,1,1,()=>{f=null}),ne()),_[3]?d?d.p(_,g):(d=Rn(_),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null)},i(_){i||(v(a),v(f),i=!0)},o(_){k(a),k(f),i=!1},d(_){_&&(C(e),C(r),C(l),C(o),C(s)),a&&a.d(_),f&&f.d(_),d&&d.d(_),c=!1,u()}}}function ho(t){let e,n;return e=new ae({props:{slot:"header",title:"Report",returnPath:"/"}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function go(t){let e,n;return e=new fe({props:{$$slots:{header:[ho],default:[mo]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&32783&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function At(t){t.cats&&(t.sorted=Object.values(t.cats).sort((e,n)=>n.total-e.total),t.sorted.forEach(e=>{e.cats&&At(e)}))}function bo(t,e,n){let r;J(t,ke,b=>n(8,r=b));const l=new Date;let o=`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}`,s=null,i=null,c=null;const u=r.reduce((b,h)=>(b[h.id]=h,b),{});function a(b){const[h,y]=b.split("-"),w=new Date(parseInt(h),parseInt(y)-1,1).getTime(),E=new Date(parseInt(h),parseInt(y),1).getTime();ul(w,E).then(I=>{const M=I.filter(O=>O.kind===ie.Income),B=I.filter(O=>O.kind===ie.Expense);n(1,s=f(M)),n(2,i=f(B)),At(s),At(i)})}function f(b){return b.reduce((h,y)=>{const w=u[y.categoryId];return w&&(h.cats[w.title]||(h.cats[w.title]={title:w.title,cats:{},docs:[],total:0}),h.cats[w.title].total+=y.amount,h.cats[w.title].docs.push(y),w.subtitle&&(h.cats[w.title].cats[w.subtitle]||(h.cats[w.title].cats[w.subtitle]={title:w.subtitle,docs:[],total:0}),h.cats[w.title].cats[w.subtitle].total+=y.amount,h.cats[w.title].cats[w.subtitle].docs.push(y))),h.total+=y.amount,h},{cats:{},docs:[],total:0})}function d(b){n(3,c=b),document.documentElement.style.setProperty("overflow","hidden")}function _(){o=this.value,n(0,o)}const g=b=>{n(3,c=null),document.documentElement.style.removeProperty("overflow")};return t.$$.update=()=>{t.$$.dirty&1&&a(o)},[o,s,i,c,u,d,_,g]}class $o extends q{constructor(e){super(),V(this,e,bo,go,z,{})}}function yo(t){let e,n,r,l,o,s,i,c,u,a,f;return{c(){e=$("form"),n=$("div"),r=$("input"),l=T(),o=$("div"),s=$("input"),i=T(),c=$("div"),u=$("button"),u.textContent=`${t[3]?"Save":"Create"}`,m(r,"type","text"),m(r,"placeholder","Title"),m(n,"class","_1F3oU"),m(s,"type","text"),m(s,"placeholder","Subtitle (optional)"),m(o,"class","_1F3oU"),m(u,"type","submit"),m(c,"class","_1F3oU"),m(e,"class","_2sHk9")},m(d,_){S(d,e,_),p(e,n),p(n,r),Y(r,t[0]),t[7](r),p(e,l),p(e,o),p(o,s),Y(s,t[1]),p(e,i),p(e,c),p(c,u),a||(f=[F(r,"input",t[6]),F(s,"input",t[8]),F(e,"submit",ye(t[4]))],a=!0)},p(d,_){_&1&&r.value!==d[0]&&Y(r,d[0]),_&2&&s.value!==d[1]&&Y(s,d[1])},d(d){d&&C(e),t[7](null),a=!1,re(f)}}}function wo(t){let e,n;return e=new ae({props:{slot:"header",title:t[3]?"Category":"New Category",returnPath:"/categories"}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function vo(t){let e,n;return e=new fe({props:{$$slots:{header:[wo],default:[yo]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&2055&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function ko(t,e,n){let r;J(t,ke,g=>n(9,r=g));let{params:l={}}=e;const{id:o}=l;let s=o?r.find(g=>g.id===o):null,i=s?s.title:"",c=s?s.subtitle:"",u;Je(()=>{u&&u.focus()});function a(){i.trim()?s?hl({...s,title:i.trim(),subtitle:c.trim()}).then(()=>{x("/categories")}):pl(i.trim(),c.trim()).then(()=>{x("/categories")}):alert("The title must be specified.")}function f(){i=this.value,n(0,i)}function d(g){Z[g?"unshift":"push"](()=>{u=g,n(2,u)})}function _(){c=this.value,n(1,c)}return t.$$set=g=>{"params"in g&&n(5,l=g.params)},[i,c,u,s,a,l,f,d,_]}class zn extends q{constructor(e){super(),V(this,e,ko,vo,z,{params:5})}}function Co(t){let e,n,r,l,o,s,i,c,u,a,f;return{c(){e=$("form"),n=$("div"),r=$("input"),l=T(),o=$("div"),s=$("input"),i=T(),c=$("div"),u=$("button"),u.textContent=`${t[4]?"Save":"Add"}`,m(r,"type","text"),m(r,"placeholder","Code"),r.disabled=t[4]!==null,m(n,"class","EbSwc"),m(s,"type","text"),m(s,"placeholder","Title"),m(o,"class","EbSwc"),m(u,"type","submit"),m(c,"class","EbSwc")},m(d,_){S(d,e,_),p(e,n),p(n,r),Y(r,t[0]),t[8](r),p(e,l),p(e,o),p(o,s),Y(s,t[1]),t[10](s),p(e,i),p(e,c),p(c,u),a||(f=[F(r,"input",t[7]),F(s,"input",t[9]),F(e,"submit",ye(t[5]))],a=!0)},p(d,_){_&1&&r.value!==d[0]&&Y(r,d[0]),_&2&&s.value!==d[1]&&Y(s,d[1])},d(d){d&&C(e),t[8](null),t[10](null),a=!1,re(f)}}}function So(t){let e,n;return e=new ae({props:{slot:"header",title:t[4]?"Currency":"New Currency",returnPath:"/currencies"}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Io(t){let e,n;return e=new fe({props:{$$slots:{header:[So],default:[Co]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&8207&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Eo(t,e,n){let r;J(t,je,h=>n(11,r=h));let{params:l={}}=e;const{cid:o}=l;let s=o?r.find(h=>h.code===o):null,i=s?s.code:"",c=s?s.title:"",u,a;function f(){i.trim()&&c.trim()?s?bl({...s,title:c.trim()}).then(()=>{x("/currencies")}):gl(i.trim(),c.trim()).then(()=>{x("/currencies")}):alert("Code and title must be specified.")}Je(()=>{s?a&&a.focus():u&&u.focus()});function d(){i=this.value,n(0,i)}function _(h){Z[h?"unshift":"push"](()=>{u=h,n(2,u)})}function g(){c=this.value,n(1,c)}function b(h){Z[h?"unshift":"push"](()=>{a=h,n(3,a)})}return t.$$set=h=>{"params"in h&&n(6,l=h.params)},[i,c,u,a,s,f,l,d,_,g,b]}class Un extends q{constructor(e){super(),V(this,e,Eo,Io,z,{params:6})}}function Vn(t,e,n){const r=t.slice();return r[6]=e[n],r}function qn(t,e,n){const r=t.slice();return r[9]=e[n],r}function Yn(t){let e,n=t[9].title+"",r,l;return{c(){e=$("option"),r=D(n),e.__value=l=t[9].id,Y(e,e.__value)},m(o,s){S(o,e,s),p(e,r)},p(o,s){s&4&&n!==(n=o[9].title+"")&&R(r,n),s&4&&l!==(l=o[9].id)&&(e.__value=l,Y(e,e.__value))},d(o){o&&C(e)}}}function Kn(t){let e,n,r=K(t[6].accounts),l=[];for(let o=0;o<r.length;o+=1)l[o]=Yn(qn(t,r,o));return{c(){e=$("optgroup");for(let o=0;o<l.length;o+=1)l[o].c();m(e,"label",n=t[6].title)},m(o,s){S(o,e,s);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(o,s){if(s&4){r=K(o[6].accounts);let i;for(i=0;i<r.length;i+=1){const c=qn(o,r,i);l[i]?l[i].p(c,s):(l[i]=Yn(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=r.length}s&4&&n!==(n=o[6].title)&&m(e,"label",n)},d(o){o&&C(e),_e(l,o)}}}function Ao(t){let e,n,r,l,o,s=K(t[2]),i=[];for(let c=0;c<s.length;c+=1)i[c]=Kn(Vn(t,s,c));return{c(){e=$("select"),n=$("option"),r=D(t[1]);for(let c=0;c<i.length;c+=1)i[c].c();n.__value="",Y(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_1vWtV"),e.required=!0,t[0]===void 0&&Re(()=>t[5].call(e))},m(c,u){S(c,e,u),p(e,n),p(n,r);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);Ge(e,t[0],!0),l||(o=F(e,"change",t[5]),l=!0)},p(c,[u]){if(u&2&&R(r,c[1]),u&4){s=K(c[2]);let a;for(a=0;a<s.length;a+=1){const f=Vn(c,s,a);i[a]?i[a].p(f,u):(i[a]=Kn(f),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=s.length}u&5&&Ge(e,c[0])},i:A,o:A,d(c){c&&C(e),_e(i,c),l=!1,o()}}}function To(t,e,n){let r,l,o;J(t,ue,u=>n(3,l=u)),J(t,ve,u=>n(4,o=u));let{accountId:s}=e,{placeholder:i="Account"}=e;function c(){s=jt(this),n(0,s),n(2,r),n(4,o),n(3,l)}return t.$$set=u=>{"accountId"in u&&n(0,s=u.accountId),"placeholder"in u&&n(1,i=u.placeholder)},t.$$.update=()=>{t.$$.dirty&24&&n(2,r=o.reduce((u,a)=>{const f={title:a.title,accounts:l.filter(d=>d.groupId===a.id)};return u.push(f),u},[]))},[s,i,r,l,o,c]}class Do extends q{constructor(e){super(),V(this,e,To,Ao,z,{accountId:0,placeholder:1})}}function Xn(t,e,n){const r=t.slice();return r[2]=e[n],r}function Jn(t){let e,n,r;return{c(){e=$("span"),e.textContent=`${t[2].title} `,m(e,"data-value",t[2].value),oe(e,"_1zm3o",t[2].value===t[0])},m(l,o){S(l,e,o),n||(r=F(e,"pointerdown",t[1]),n=!0)},p(l,o){o&1&&oe(e,"_1zm3o",l[2].value===l[0])},d(l){l&&C(e),n=!1,r()}}}function jo(t){let e,n=K(xt),r=[];for(let l=0;l<n.length;l+=1)r[l]=Jn(Xn(t,n,l));return{c(){e=$("div");for(let l=0;l<r.length;l+=1)r[l].c();m(e,"class","_2dieg")},m(l,o){S(l,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(l,[o]){if(o&3){n=K(xt);let s;for(s=0;s<n.length;s+=1){const i=Xn(l,n,s);r[s]?r[s].p(i,o):(r[s]=Jn(i),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:A,o:A,d(l){l&&C(e),_e(r,l)}}}function Po(t,e,n){let{kind:r}=e;function l(o){o.target instanceof HTMLSpanElement&&(console.log("kind:",o.target.dataset.value),n(0,r=o.target.dataset.value))}return t.$$set=o=>{"kind"in o&&n(0,r=o.kind)},[r,l]}class Lo extends q{constructor(e){super(),V(this,e,Po,jo,z,{kind:0})}}function Wn(t,e,n){const r=t.slice();return r[7]=e[n],r}function Mo(t){let e,n,r;return{c(){e=$("input"),m(e,"class","_1LWF4"),m(e,"type","text"),m(e,"placeholder","Category")},m(l,o){S(l,e,o),t[10](e),Y(e,t[3]),n||(r=[F(e,"input",t[11]),F(e,"input",t[6])],n=!0)},p(l,o){o&8&&e.value!==l[3]&&Y(e,l[3])},d(l){l&&C(e),t[10](null),n=!1,re(r)}}}function Qn(t){let e;return{c(){e=$("li"),e.textContent="Empty",m(e,"class","_1FJls")},m(n,r){S(n,e,r)},p:A,d(n){n&&C(e)}}}function Zn(t,e){let n,r=e[7].title+"",l,o=e[7].subtitle?`:${e[7].subtitle}`:"",s,i,c;return{key:t,first:null,c(){n=$("li"),l=D(r),s=D(o),i=T(),m(n,"data-id",c=e[7].id),oe(n,"_2P4tM",e[7].id===e[0]),this.first=n},m(u,a){S(u,n,a),p(n,l),p(n,s),p(n,i)},p(u,a){e=u,a&25&&r!==(r=e[7].title+"")&&R(l,r),a&25&&o!==(o=e[7].subtitle?`:${e[7].subtitle}`:"")&&R(s,o),a&25&&c!==(c=e[7].id)&&m(n,"data-id",c),a&25&&oe(n,"_2P4tM",e[7].id===e[0])},d(u){u&&C(n)}}}function No(t){let e,n=[],r=new Map,l,o,s=K(t[0]?t[4]:t[4].filter(t[9]));const i=u=>u[7].id;for(let u=0;u<s.length;u+=1){let a=Wn(t,s,u),f=i(a);r.set(f,n[u]=Zn(f,a))}let c=null;return s.length||(c=Qn()),{c(){e=$("ul");for(let u=0;u<n.length;u+=1)n[u].c();c&&c.c(),m(e,"class","_2VAoI"),m(e,"slot","content")},m(u,a){S(u,e,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);c&&c.m(e,null),l||(o=F(e,"click",t[5]),l=!0)},p(u,a){a&25&&(s=K(u[0]?u[4]:u[4].filter(u[9])),n=we(n,a,i,1,u,s,r,e,He,Zn,null,Wn),!s.length&&c?c.p(u,a):s.length?c&&(c.d(1),c=null):(c=Qn(),c.c(),c.m(e,null)))},d(u){u&&C(e);for(let a=0;a<n.length;a+=1)n[a].d();c&&c.d(),l=!1,o()}}}function Oo(t){let e,n,r={class:"_3pEZc",clickToggle:!0,$$slots:{content:[No],default:[Mo]},$$scope:{ctx:t}};return e=new gr({props:r}),t[12](e),{c(){N(e.$$.fragment)},m(l,o){P(e,l,o),n=!0},p(l,[o]){const s={};o&32797&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){t[12](null),L(e,l)}}}function Qe(t){return`${t.title}${t.subtitle?`:${t.subtitle}`:""}`}function Bo(t,e,n){let r;J(t,ke,h=>n(4,r=h));let{categoryId:l}=e,o,s;function i(){n(0,l=""),n(3,u="")}let c=l?r.find(h=>h.id===l):null,u=c?Qe(c):"";function a(h){if(h.target instanceof HTMLLIElement){n(0,l=h.target.dataset.id),o.close();const y=r.find(w=>w.id===l);y&&n(3,u=Qe(y))}}function f(){const h=r.find(y=>s.value.trim().toLocaleLowerCase()===Qe(y).toLocaleLowerCase());h?(n(0,l=h.id),n(2,s.value=Qe(h),s)):n(0,l="")}const d=h=>`${h.title}:${h.subtitle}`.toLowerCase().includes(u.trim().toLowerCase());function _(h){Z[h?"unshift":"push"](()=>{s=h,n(2,s)})}function g(){u=this.value,n(3,u)}function b(h){Z[h?"unshift":"push"](()=>{o=h,n(1,o)})}return t.$$set=h=>{"categoryId"in h&&n(0,l=h.categoryId)},[l,o,s,u,r,a,f,c,i,d,_,g,b]}class Go extends q{constructor(e){super(),V(this,e,Bo,Oo,z,{categoryId:0,clear:8})}get clear(){return this.$$.ctx[8]}}function Ro(t){let e,n,r;return{c(){e=ce("svg"),n=ce("path"),r=ce("path"),m(n,"d","M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z"),m(r,"d","M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"fill","currentColor"),m(e,"viewBox","0 0 16 16")},m(l,o){S(l,e,o),p(e,n),p(e,r)},p(l,[o]){o&1&&m(e,"width",l[0]),o&1&&m(e,"height",l[0])},i:A,o:A,d(l){l&&C(e)}}}function Ho(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Fo extends q{constructor(e){super(),V(this,e,Ho,Ro,z,{size:0})}}function zo(t){let e,n,r,l,o,s,i,c,u,a,f,d,_,g,b,h,y;return a=new Fo({props:{size:24}}),{c(){e=$("div"),n=$("div"),n.innerHTML='<span data-key="1">1</span> <span data-key="2">2</span> <span data-key="3">3</span>',r=T(),l=$("div"),l.innerHTML='<span data-key="4">4</span> <span data-key="5">5</span> <span data-key="6">6</span>',o=T(),s=$("div"),s.innerHTML='<span data-key="7">7</span> <span data-key="8">8</span> <span data-key="9">9</span>',i=T(),c=$("div"),u=$("span"),N(a.$$.fragment),f=T(),d=$("span"),d.textContent="0",_=T(),g=$("span"),g.textContent=".",m(u,"data-key","<"),m(d,"data-key","0"),m(g,"data-key","."),m(e,"class","_3QCzM")},m(w,E){S(w,e,E),p(e,n),p(e,r),p(e,l),p(e,o),p(e,s),p(e,i),p(e,c),p(c,u),P(a,u,null),p(c,f),p(c,d),p(c,_),p(c,g),b=!0,h||(y=[F(e,"pointerdown",ye(t[2])),F(e,"pointerup",t[0])],h=!0)},p:A,i(w){b||(v(a.$$.fragment,w),b=!0)},o(w){k(a.$$.fragment,w),b=!1},d(w){w&&C(e),L(a),h=!1,re(y)}}}function Uo(t,e,n){let{onkey:r}=e;function l(s){s.target instanceof HTMLSpanElement&&s.target.dataset.key&&r(s.target.dataset.key)}function o(s){vt.call(this,t,s)}return t.$$set=s=>{"onkey"in s&&n(1,r=s.onkey)},[l,r,o]}class Vo extends q{constructor(e){super(),V(this,e,Uo,zo,z,{onkey:1})}}function qo(t){let e,n,r,l,o,s,i,c,u,a;function f(_){t[23](_)}let d={};return t[7]!==void 0&&(d.categoryId=t[7]),n=new Go({props:d}),Z.push(()=>$e(n,"categoryId",f)),t[24](n),{c(){e=$("div"),N(n.$$.fragment),l=T(),o=$("button"),s=D("Clear"),m(o,"type","button"),o.disabled=i=!t[7],m(e,"class","_36ncL")},m(_,g){S(_,e,g),P(n,e,null),p(e,l),p(e,o),p(o,s),c=!0,u||(a=F(o,"click",Er(t[15])),u=!0)},p(_,g){const b={};!r&&g[0]&128&&(r=!0,b.categoryId=_[7],be(()=>r=!1)),n.$set(b),(!c||g[0]&128&&i!==(i=!_[7]))&&(o.disabled=i)},i(_){c||(v(n.$$.fragment,_),c=!0)},o(_){k(n.$$.fragment,_),c=!1},d(_){_&&C(e),t[24](null),L(n),u=!1,a()}}}function Yo(t){let e,n,r;function l(s){t[22](s)}let o={placeholder:"To"};return t[1]!==void 0&&(o.accountId=t[1]),e=new Do({props:o}),Z.push(()=>$e(e,"accountId",l)),{c(){N(e.$$.fragment)},m(s,i){P(e,s,i),r=!0},p(s,i){const c={};!n&&i[0]&2&&(n=!0,c.accountId=s[1],be(()=>n=!1)),e.$set(c)},i(s){r||(v(e.$$.fragment,s),r=!0)},o(s){k(e.$$.fragment,s),r=!1},d(s){L(e,s)}}}function xn(t){var u;let e,n,r=((u=t[2])==null?void 0:u.currencyCode)+"",l,o,s,i,c;return{c(){e=$("div"),n=D("Amount, "),l=D(r),o=D(`:
      `),s=$("input"),m(s,"class","_3qKgQ"),m(s,"type","text")},m(a,f){S(a,e,f),p(e,n),p(e,l),p(e,o),p(e,s),Y(s,t[12]),i||(c=F(s,"input",t[27]),i=!0)},p(a,f){var d;f[0]&4&&r!==(r=((d=a[2])==null?void 0:d.currencyCode)+"")&&R(l,r),f[0]&4096&&s.value!==a[12]&&Y(s,a[12])},d(a){a&&C(e),i=!1,c()}}}function Ko(t){var Ft;let e,n,r,l,o,s,i,c,u,a,f,d,_,g,b=((Ft=t[3])==null?void 0:Ft.currencyCode)+"",h,y,w,E,I,M,B,O,G,j,W,Ce,Se,me,We,Fe,Ie,Le=t[0]?"Save":"Create",ze,U,Ue,Bt;function wr(X){t[20](X)}let Gt={};t[6]!==void 0&&(Gt.kind=t[6]),r=new Lo({props:Gt}),Z.push(()=>$e(r,"kind",wr));const Rt=[Yo,qo],he=[];function Ht(X,se){return X[6]===ie.Transfer?0:1}a=Ht(t),f=he[a]=Rt[a](t);let le=t[13]&&xn(t);return me=new Vo({props:{onkey:t[16]}}),{c(){e=$("form"),n=$("div"),N(r.$$.fragment),o=T(),s=$("div"),i=$("input"),c=T(),u=$("div"),f.c(),d=T(),_=$("div"),g=D("Amount, "),h=D(b),y=D(`:
    `),w=$("input"),E=T(),le&&le.c(),I=T(),M=$("div"),B=$("input"),O=T(),G=$("div"),j=$("label"),W=$("input"),Ce=D(`
      Reconciled`),Se=T(),N(me.$$.fragment),We=T(),Fe=$("div"),Ie=$("button"),ze=D(Le),m(i,"class","_3qKgQ"),m(i,"type","datetime-local"),m(w,"class","_3qKgQ"),m(w,"type","text"),oe(w,"_2YSkZ",!ct(t[11])),m(B,"class","_3qKgQ"),m(B,"type","text"),m(B,"placeholder","Comment"),m(W,"type","checkbox"),m(j,"class","xwEhV"),m(Ie,"class","_36-gn _-wwrS"),m(Ie,"type","submit"),m(e,"class","_1rZU2")},m(X,se){S(X,e,se),p(e,n),P(r,n,null),p(e,o),p(e,s),p(s,i),Y(i,t[10]),p(e,c),p(e,u),he[a].m(u,null),p(e,d),p(e,_),p(_,g),p(_,h),p(_,y),p(_,w),Y(w,t[11]),t[26](w),p(e,E),le&&le.m(e,null),p(e,I),p(e,M),p(M,B),Y(B,t[8]),p(e,O),p(e,G),p(G,j),p(j,W),W.checked=t[9],p(j,Ce),p(e,Se),P(me,e,null),p(e,We),p(e,Fe),p(Fe,Ie),p(Ie,ze),U=!0,Ue||(Bt=[F(i,"input",t[21]),F(w,"input",t[25]),F(B,"input",t[28]),F(W,"change",t[29]),F(e,"submit",ye(t[14]))],Ue=!0)},p(X,se){var Ut;const zt={};!l&&se[0]&64&&(l=!0,zt.kind=X[6],be(()=>l=!1)),r.$set(zt),se[0]&1024&&Y(i,X[10]);let mt=a;a=Ht(X),a===mt?he[a].p(X,se):(te(),k(he[mt],1,1,()=>{he[mt]=null}),ne(),f=he[a],f?f.p(X,se):(f=he[a]=Rt[a](X),f.c()),v(f,1),f.m(u,null)),(!U||se[0]&8)&&b!==(b=((Ut=X[3])==null?void 0:Ut.currencyCode)+"")&&R(h,b),se[0]&2048&&w.value!==X[11]&&Y(w,X[11]),(!U||se[0]&2048)&&oe(w,"_2YSkZ",!ct(X[11])),X[13]?le?le.p(X,se):(le=xn(X),le.c(),le.m(e,I)):le&&(le.d(1),le=null),se[0]&256&&B.value!==X[8]&&Y(B,X[8]),se[0]&512&&(W.checked=X[9]),(!U||se[0]&1)&&Le!==(Le=X[0]?"Save":"Create")&&R(ze,Le)},i(X){U||(v(r.$$.fragment,X),v(f),v(me.$$.fragment,X),U=!0)},o(X){k(r.$$.fragment,X),k(f),k(me.$$.fragment,X),U=!1},d(X){X&&C(e),L(r),he[a].d(),t[26](null),le&&le.d(),L(me),Ue=!1,re(Bt)}}}function Xo(t,e,n){let r,l,o,s,i;J(t,ue,U=>n(19,i=U));let{accountId:c}=e,{transactionDoc:u=null}=e,a,f;Je(()=>{});let{kind:d=ie.Expense,categoryId:_,secondAccountId:g,comment:b="",reconciled:h=!1}=u||{},y=Jl(new Date((u==null?void 0:u.timestamp)||Date.now())),w=u?Q(u.amount):"",E=u?Q(u.secondAmount):"";const I=De();function M(){const U=B();if(U){alert(U);return}const Ue=d===ie.Transfer?{kind:d,timestamp:new Date(y).getTime(),accountId:c,secondAccountId:g,...s?{secondAmount:wt(E)}:{},amount:wt(w),comment:b.trim(),...h?{reconciled:!0}:{}}:{kind:d,timestamp:new Date(y).getTime(),accountId:c,categoryId:_||null,amount:wt(w),comment:b.trim(),...h?{reconciled:!0}:{}};I("save",{params:Ue})}function B(){if(!ct(w))return"Invalid amount";if(d===ie.Transfer){if(!g)return"Must choose the second account";if(g===c)return"Cannot transfer to the same account";if(s&&!ct(E))return"Invalid second amount"}return""}function O(){a.clear()}function G(U){U==="<"?n(11,w=w.substring(0,w.length-1)):n(11,w+=U)}function j(U){d=U,n(6,d)}function W(){y=this.value,n(10,y)}function Ce(U){g=U,n(1,g)}function Se(U){_=U,n(7,_)}function me(U){Z[U?"unshift":"push"](()=>{a=U,n(4,a)})}function We(){w=this.value,n(11,w)}function Fe(U){Z[U?"unshift":"push"](()=>{f=U,n(5,f)})}function Ie(){E=this.value,n(12,E)}function Le(){b=this.value,n(8,b)}function ze(){h=this.checked,n(9,h)}return t.$$set=U=>{"accountId"in U&&n(17,c=U.accountId),"transactionDoc"in U&&n(0,u=U.transactionDoc)},t.$$.update=()=>{t.$$.dirty[0]&655360&&n(3,r=i.find(U=>U.id===c)),t.$$.dirty[0]&8&&n(18,l=r==null?void 0:r.currencyCode),t.$$.dirty[0]&524290&&n(2,o=g?i.find(U=>U.id===g):null),t.$$.dirty[0]&262148&&n(13,s=o&&l?o.currencyCode!==l:!1)},[u,g,o,r,a,f,d,_,b,h,y,w,E,s,M,O,G,c,l,i,j,W,Ce,Se,me,We,Fe,Ie,Le,ze]}class yr extends q{constructor(e){super(),V(this,e,Xo,Ko,z,{accountId:17,transactionDoc:0},null,[-1,-1])}}function Jo(t){let e,n;return e=new yr({props:{accountId:t[2]}}),e.$on("save",t[6]),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function Wo(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:xo,then:Zo,catch:Qo,blocks:[,,,]};return or(t[5](t[3]),r),{c(){e=ee(),r.block.c()},m(l,o){S(l,e,o),r.block.m(l,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(l,o){t=l,Mr(r,t,o)},i(l){n||(v(r.block),n=!0)},o(l){for(let o=0;o<3;o+=1){const s=r.blocks[o];k(s)}n=!1},d(l){l&&C(e),r.block.d(l),r.token=null,r=null}}}function Qo(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function Zo(t){let e,n;return e=new yr({props:{accountId:t[2],transactionDoc:t[0]}}),e.$on("save",t[6]),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.transactionDoc=r[0]),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function xo(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function ei(t){let e,n,r,l;const o=[Wo,Jo],s=[];function i(c,u){return c[3]?0:1}return e=i(t),n=s[e]=o[e](t),{c(){n.c(),r=ee()},m(c,u){s[e].m(c,u),S(c,r,u),l=!0},p(c,u){n.p(c,u)},i(c){l||(v(n),l=!0)},o(c){k(n),l=!1},d(c){c&&C(r),s[e].d(c)}}}function ti(t){let e,n;return e=new ae({props:{slot:"header",title:t[1]?`${t[1].title}: Transaction`:"Transaction",returnPath:`/accounts/${t[2]}`,menuItems:t[4]}}),e.$on("menu",t[9]),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,l){const o={};l&2&&(o.title=r[1]?`${r[1].title}: Transaction`:"Transaction"),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function ni(t){let e,n;return e=new fe({props:{$$slots:{header:[ti],default:[ei]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},p(r,[l]){const o={};l&1027&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function ri(t,e,n){let r,l;J(t,ue,_=>n(8,l=_));let{params:o}=e;const{id:s,tid:i}=o;let c;const u=i?[{id:"delete",title:"Delete"}]:null;async function a(_){n(0,c=await al(_))}function f(_){i?ol(c,_.detail.params).then(()=>{x(`/accounts/${s}`)}):$l(_.detail.params).then(()=>{x(`/accounts/${s}`)})}const d=_=>{switch(_.detail.id){case"delete":if(!confirm("Delete transaction?"))return!1;i&&sl(i).then(()=>{x(`/accounts/${s}`)});break}};return t.$$set=_=>{"params"in _&&n(7,o=_.params)},t.$$.update=()=>{t.$$.dirty&256&&n(1,r=l.find(_=>_.id===s))},[c,r,s,i,u,a,f,o,l,d]}class er extends q{constructor(e){super(),V(this,e,ri,ni,z,{params:7})}}function li(t){let e,n,r=t[0].wild+"",l;return{c(){e=$("div"),n=D("Page Not Found: /"),l=D(r)},m(o,s){S(o,e,s),p(e,n),p(e,l)},p(o,[s]){s&1&&r!==(r=o[0].wild+"")&&R(l,r)},i:A,o:A,d(o){o&&C(e)}}}function si(t,e,n){let{params:r={}}=e;return t.$$set=l=>{"params"in l&&n(0,r=l.params)},[r]}class oi extends q{constructor(e){super(),V(this,e,si,li,z,{params:0})}}const ii={"/":ms,"/groups":ys,"/groups/new":gn,"/groups/:id":gn,"/accounts/new":yn,"/accounts/:id/edit":yn,"/accounts/:id":qs,"/accounts/:id/transactions/new":er,"/accounts/:id/transactions/:tid":er,"/categories":Ws,"/categories/new":zn,"/categories/:id":zn,"/currencies":oo,"/rates":fo,"/report":$o,"/currencies/new":Un,"/currencies/:cid":Un,"/settings":to,"*":oi};function ci(t){return{c:A,m:A,i:A,o:A,d:A}}function ui(t){let e,n;return e=new Vr({props:{routes:ii}}),{c(){N(e.$$.fragment)},m(r,l){P(e,r,l),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){L(e,r)}}}function ai(t){return{c:A,m:A,i:A,o:A,d:A}}function fi(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:ai,then:ui,catch:ci,blocks:[,,,]};return or(vl,r),{c(){e=ee(),r.block.c()},m(l,o){S(l,e,o),r.block.m(l,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(l,[o]){t=l},i(l){n||(v(r.block),n=!0)},o(l){for(let o=0;o<3;o+=1){const s=r.blocks[o];k(s)}n=!1},d(l){l&&C(e),r.block.d(l),r.token=null,r=null}}}class di extends q{constructor(e){super(),V(this,e,null,fi,z,{})}}new di({target:document.getElementById("app")});
