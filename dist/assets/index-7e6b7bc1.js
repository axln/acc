var kr=Object.defineProperty;var Cr=(t,e,n)=>e in t?kr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var wt=(t,e,n)=>(Cr(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function A(){}function Mt(t,e){for(const n in e)t[n]=e[n];return t}function Sr(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function nr(t){return t()}function qt(){return Object.create(null)}function se(t){t.forEach(nr)}function Je(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ir(t){return Object.keys(t).length===0}function Nt(t,...e){if(t==null){for(const r of e)r(void 0);return A}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Yt(t){let e;return Nt(t,n=>e=n)(),e}function J(t,e,n){t.$$.on_destroy.push(Nt(e,n))}function rt(t,e,n,r){if(t){const l=rr(t,e,n,r);return t[0](l)}}function rr(t,e,n,r){return t[1]&&r?Mt(n.ctx.slice(),t[1](r(e))):n.ctx}function lt(t,e,n,r){if(t[2]&&r){const l=t[2](r(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const o=[],s=Math.max(e.dirty.length,l.length);for(let i=0;i<s;i+=1)o[i]=e.dirty[i]|l[i];return o}return e.dirty|l}return e.dirty}function st(t,e,n,r,l,o){if(l){const s=rr(e,n,r,o);t.p(s,l)}}function ot(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Er(t,e,n){return t.set(n),e}function _t(t){return t&&Je(t.destroy)?t.destroy:A}function p(t,e){t.appendChild(e)}function I(t,e,n){t.insertBefore(e,n||null)}function S(t){t.parentNode&&t.parentNode.removeChild(t)}function ge(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function ce(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function j(t){return document.createTextNode(t)}function T(){return j(" ")}function te(){return j("")}function F(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function ve(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Ar(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tr(t){return Array.from(t.childNodes)}function G(t,e){e=""+e,t.data!==e&&(t.data=e)}function q(t,e){t.value=e??""}function Ge(t,e,n){for(let r=0;r<t.options.length;r+=1){const l=t.options[r];if(l.__value===e){l.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ot(t){const e=t.querySelector(":checked");return e&&e.__value}function ie(t,e,n){t.classList.toggle(e,!!n)}function Dr(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function it(t,e){return new t(e)}let Ye;function pe(t){Ye=t}function We(){if(!Ye)throw new Error("Function called outside component initialization");return Ye}function Qe(t){We().$$.on_mount.push(t)}function jr(t){We().$$.after_update.push(t)}function Pr(t){We().$$.on_destroy.push(t)}function je(){const t=We();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const o=Dr(e,n,{cancelable:r});return l.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function Et(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Be=[],Z=[];let Re=[];const At=[],lr=Promise.resolve();let Tt=!1;function sr(){Tt||(Tt=!0,lr.then(Bt))}function or(){return sr(),lr}function He(t){Re.push(t)}function me(t){At.push(t)}const vt=new Set;let Ne=0;function Bt(){if(Ne!==0)return;const t=Ye;do{try{for(;Ne<Be.length;){const e=Be[Ne];Ne++,pe(e),Lr(e.$$)}}catch(e){throw Be.length=0,Ne=0,e}for(pe(null),Be.length=0,Ne=0;Z.length;)Z.pop()();for(let e=0;e<Re.length;e+=1){const n=Re[e];vt.has(n)||(vt.add(n),n())}Re.length=0}while(Be.length);for(;At.length;)At.pop()();Tt=!1,vt.clear(),pe(t)}function Lr(t){if(t.fragment!==null){t.update(),se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(He)}}function Mr(t){const e=[],n=[];Re.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Re=e}const nt=new Set;let Ae;function ne(){Ae={r:0,c:[],p:Ae}}function re(){Ae.r||se(Ae.c),Ae=Ae.p}function v(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function k(t,e,n,r){if(t&&t.o){if(nt.has(t))return;nt.add(t),Ae.c.push(()=>{nt.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function ir(t,e){const n=e.token={};function r(l,o,s,i){if(e.token!==n)return;e.resolved=i;let c=e.ctx;s!==void 0&&(c=c.slice(),c[s]=i);const u=l&&(e.current=l)(c);let a=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==o&&f&&(ne(),k(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),re())}):e.block.d(1),u.c(),v(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[o]=u),a&&Bt()}if(Sr(t)){const l=We();if(t.then(o=>{pe(l),r(e.then,1,e.value,o),pe(null)},o=>{if(pe(l),r(e.catch,2,e.error,o),pe(null),!e.hasCatch)throw o}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function Nr(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function K(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Fe(t,e){t.d(1),e.delete(t.key)}function cr(t,e){k(t,1,1,()=>{e.delete(t.key)})}function ke(t,e,n,r,l,o,s,i,c,u,a,f){let d=t.length,_=o.length,g=d;const b={};for(;g--;)b[t[g].key]=g;const h=[],y=new Map,w=new Map,E=[];for(g=_;g--;){const O=f(l,o,g),R=n(O);let P=s.get(R);P?r&&E.push(()=>P.p(O,e)):(P=u(R,O),P.c()),y.set(R,h[g]=P),R in b&&w.set(R,Math.abs(g-b[R]))}const C=new Set,D=new Set;function B(O){v(O,1),O.m(i,a),s.set(O.key,O),a=O.first,_--}for(;d&&_;){const O=h[_-1],R=t[d-1],P=O.key,W=R.key;O===R?(a=O.first,d--,_--):y.has(W)?!s.has(P)||C.has(P)?B(O):D.has(W)?d--:w.get(P)>w.get(W)?(D.add(P),B(O)):(C.add(W),d--):(c(R,s),d--)}for(;d--;){const O=t[d];y.has(O.key)||c(O,s)}for(;_;)B(h[_-1]);return se(E),h}function ct(t,e){const n={},r={},l={$$scope:1};let o=t.length;for(;o--;){const s=t[o],i=e[o];if(i){for(const c in s)c in i||(r[c]=1);for(const c in i)l[c]||(n[c]=i[c],l[c]=1);t[o]=i}else for(const c in s)l[c]=1}for(const s in r)s in n||(n[s]=void 0);return n}function ut(t){return typeof t=="object"&&t!==null?t:{}}function he(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function N(t){t&&t.c()}function L(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),He(()=>{const o=t.$$.on_mount.map(nr).filter(Je);t.$$.on_destroy?t.$$.on_destroy.push(...o):se(o),t.$$.on_mount=[]}),l.forEach(He)}function M(t,e){const n=t.$$;n.fragment!==null&&(Mr(n.after_update),se(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Or(t,e){t.$$.dirty[0]===-1&&(Be.push(t),sr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,r,l,o,s=null,i=[-1]){const c=Ye;pe(t);const u=t.$$={fragment:null,ctx:[],props:o,update:A,not_equal:l,bound:qt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:qt(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};s&&s(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(f,d,..._)=>{const g=_.length?_[0]:d;return u.ctx&&l(u.ctx[f],u.ctx[f]=g)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](g),a&&Or(t,f)),d}):[],u.update(),a=!0,se(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=Tr(e.target);u.fragment&&u.fragment.l(f),f.forEach(S)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),L(t,e.target,e.anchor),Bt()}pe(c)}class V{constructor(){wt(this,"$$");wt(this,"$$set")}$destroy(){M(this,1),this.$destroy=A}$on(e,n){if(!Je(n))return A;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!Ir(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Br="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Br);const Oe=[];function ur(t,e){return{subscribe:be(t,e).subscribe}}function be(t,e=A){let n;const r=new Set;function l(i){if(z(t,i)&&(t=i,n)){const c=!Oe.length;for(const u of r)u[1](),Oe.push(u,t);if(c){for(let u=0;u<Oe.length;u+=2)Oe[u][0](Oe[u+1]);Oe.length=0}}}function o(i){l(i(t))}function s(i,c=A){const u=[i,c];return r.add(u),r.size===1&&(n=e(l,o)||A),i(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:l,update:o,subscribe:s}}function ar(t,e,n){const r=!Array.isArray(t),l=r?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return ur(n,(s,i)=>{let c=!1;const u=[];let a=0,f=A;const d=()=>{if(a)return;f();const g=e(r?u[0]:u,s,i);o?s(g):f=Je(g)?g:A},_=l.map((g,b)=>Nt(g,h=>{u[b]=h,a&=~(1<<b),c&&d()},()=>{a|=1<<b}));return c=!0,d(),function(){se(_),f(),c=!1}})}function Rr(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,l,o,s=[],i="",c=t.split("/");for(c[0]||c.shift();l=c.shift();)n=l[0],n==="*"?(s.push("wild"),i+="/(.*)"):n===":"?(r=l.indexOf("?",1),o=l.indexOf(".",1),s.push(l.substring(1,~r?r:~o?o:l.length)),i+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(i+=(~r?"?":"")+"\\"+l.substring(o))):i+="/"+l;return{keys:s,pattern:new RegExp("^"+i+(e?"(?=$|/)":"/?$"),"i")}}function Gr(t){let e,n,r;const l=[t[2]];var o=t[0];function s(i,c){let u={};if(c!==void 0&&c&4)u=ct(l,[ut(i[2])]);else for(let a=0;a<l.length;a+=1)u=Mt(u,l[a]);return{props:u}}return o&&(e=it(o,s(t)),e.$on("routeEvent",t[7])),{c(){e&&N(e.$$.fragment),n=te()},m(i,c){e&&L(e,i,c),I(i,n,c),r=!0},p(i,c){if(c&1&&o!==(o=i[0])){if(e){ne();const u=e;k(u.$$.fragment,1,0,()=>{M(u,1)}),re()}o?(e=it(o,s(i,c)),e.$on("routeEvent",i[7]),N(e.$$.fragment),v(e.$$.fragment,1),L(e,n.parentNode,n)):e=null}else if(o){const u=c&4?ct(l,[ut(i[2])]):{};e.$set(u)}},i(i){r||(e&&v(e.$$.fragment,i),r=!0)},o(i){e&&k(e.$$.fragment,i),r=!1},d(i){i&&S(n),e&&M(e,i)}}}function Hr(t){let e,n,r;const l=[{params:t[1]},t[2]];var o=t[0];function s(i,c){let u={};if(c!==void 0&&c&6)u=ct(l,[c&2&&{params:i[1]},c&4&&ut(i[2])]);else for(let a=0;a<l.length;a+=1)u=Mt(u,l[a]);return{props:u}}return o&&(e=it(o,s(t)),e.$on("routeEvent",t[6])),{c(){e&&N(e.$$.fragment),n=te()},m(i,c){e&&L(e,i,c),I(i,n,c),r=!0},p(i,c){if(c&1&&o!==(o=i[0])){if(e){ne();const u=e;k(u.$$.fragment,1,0,()=>{M(u,1)}),re()}o?(e=it(o,s(i,c)),e.$on("routeEvent",i[6]),N(e.$$.fragment),v(e.$$.fragment,1),L(e,n.parentNode,n)):e=null}else if(o){const u=c&6?ct(l,[c&2&&{params:i[1]},c&4&&ut(i[2])]):{};e.$set(u)}},i(i){r||(e&&v(e.$$.fragment,i),r=!0)},o(i){e&&k(e.$$.fragment,i),r=!1},d(i){i&&S(n),e&&M(e,i)}}}function Fr(t){let e,n,r,l;const o=[Hr,Gr],s=[];function i(c,u){return c[1]?0:1}return e=i(t),n=s[e]=o[e](t),{c(){n.c(),r=te()},m(c,u){s[e].m(c,u),I(c,r,u),l=!0},p(c,[u]){let a=e;e=i(c),e===a?s[e].p(c,u):(ne(),k(s[a],1,1,()=>{s[a]=null}),re(),n=s[e],n?n.p(c,u):(n=s[e]=o[e](c),n.c()),v(n,1),n.m(r.parentNode,r))},i(c){l||(v(n),l=!0)},o(c){k(n),l=!1},d(c){c&&S(r),s[e].d(c)}}}function Kt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const Rt=ur(null,function(e){e(Kt());const n=()=>{e(Kt())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});ar(Rt,t=>t.location);ar(Rt,t=>t.querystring);const Xt=be(void 0);async function ee(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await or(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}function Gt(t,e){if(e=Wt(e),!t||!t.tagName||t.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Jt(t,e),{update(n){n=Wt(n),Jt(t,n)}}}function zr(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Jt(t,e){let n=e.href||t.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);t.setAttribute("href",n),t.addEventListener("click",r=>{r.preventDefault(),e.disabled||Ur(r.currentTarget.getAttribute("href"))})}function Wt(t){return t&&typeof t=="string"?{href:t}:t||{}}function Ur(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=t}function Vr(t,e,n){let{routes:r={}}=e,{prefix:l=""}=e,{restoreScrollState:o=!1}=e;class s{constructor(D,B){if(!B||typeof B!="function"&&(typeof B!="object"||B._sveltesparouter!==!0))throw Error("Invalid component object");if(!D||typeof D=="string"&&(D.length<1||D.charAt(0)!="/"&&D.charAt(0)!="*")||typeof D=="object"&&!(D instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:O,keys:R}=Rr(D);this.path=D,typeof B=="object"&&B._sveltesparouter===!0?(this.component=B.component,this.conditions=B.conditions||[],this.userData=B.userData,this.props=B.props||{}):(this.component=()=>Promise.resolve(B),this.conditions=[],this.props={}),this._pattern=O,this._keys=R}match(D){if(l){if(typeof l=="string")if(D.startsWith(l))D=D.substr(l.length)||"/";else return null;else if(l instanceof RegExp){const P=D.match(l);if(P&&P[0])D=D.substr(P[0].length)||"/";else return null}}const B=this._pattern.exec(D);if(B===null)return null;if(this._keys===!1)return B;const O={};let R=0;for(;R<this._keys.length;){try{O[this._keys[R]]=decodeURIComponent(B[R+1]||"")||null}catch{O[this._keys[R]]=null}R++}return O}async checkConditions(D){for(let B=0;B<this.conditions.length;B++)if(!await this.conditions[B](D))return!1;return!0}}const i=[];r instanceof Map?r.forEach((C,D)=>{i.push(new s(D,C))}):Object.keys(r).forEach(C=>{i.push(new s(C,r[C]))});let c=null,u=null,a={};const f=je();async function d(C,D){await or(),f(C,D)}let _=null,g=null;o&&(g=C=>{C.state&&(C.state.__svelte_spa_router_scrollY||C.state.__svelte_spa_router_scrollX)?_=C.state:_=null},window.addEventListener("popstate",g),jr(()=>{zr(_)}));let b=null,h=null;const y=Rt.subscribe(async C=>{b=C;let D=0;for(;D<i.length;){const B=i[D].match(C.location);if(!B){D++;continue}const O={route:i[D].path,location:C.location,querystring:C.querystring,userData:i[D].userData,params:B&&typeof B=="object"&&Object.keys(B).length?B:null};if(!await i[D].checkConditions(O)){n(0,c=null),h=null,d("conditionsFailed",O);return}d("routeLoading",Object.assign({},O));const R=i[D].component;if(h!=R){R.loading?(n(0,c=R.loading),h=R,n(1,u=R.loadingParams),n(2,a={}),d("routeLoaded",Object.assign({},O,{component:c,name:c.name,params:u}))):(n(0,c=null),h=null);const P=await R();if(C!=b)return;n(0,c=P&&P.default||P),h=R}B&&typeof B=="object"&&Object.keys(B).length?n(1,u=B):n(1,u=null),n(2,a=i[D].props),d("routeLoaded",Object.assign({},O,{component:c,name:c.name,params:u})).then(()=>{Xt.set(u)});return}n(0,c=null),h=null,Xt.set(void 0)});Pr(()=>{y(),g&&window.removeEventListener("popstate",g)});function w(C){Et.call(this,t,C)}function E(C){Et.call(this,t,C)}return t.$$set=C=>{"routes"in C&&n(3,r=C.routes),"prefix"in C&&n(4,l=C.prefix),"restoreScrollState"in C&&n(5,o=C.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=o?"manual":"auto")},[c,u,a,r,l,o,w,E]}class qr extends V{constructor(e){super(),U(this,e,Vr,Fr,z,{routes:3,prefix:4,restoreScrollState:5})}}const Yr=(t,e)=>e.some(n=>t instanceof n);let Qt,Zt;function Kr(){return Qt||(Qt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xr(){return Zt||(Zt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fr=new WeakMap,Dt=new WeakMap,dr=new WeakMap,kt=new WeakMap,Ht=new WeakMap;function Jr(t){const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(we(t.result)),l()},s=()=>{r(t.error),l()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&fr.set(n,t)}).catch(()=>{}),Ht.set(e,t),e}function Wr(t){if(Dt.has(t))return;const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),l()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Dt.set(t,e)}let jt={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dt.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dr.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return we(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Qr(t){jt=t(jt)}function Zr(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ct(this),e,...n);return dr.set(r,e.sort?e.sort():[e]),we(r)}:Xr().includes(t)?function(...e){return t.apply(Ct(this),e),we(fr.get(this))}:function(...e){return we(t.apply(Ct(this),e))}}function xr(t){return typeof t=="function"?Zr(t):(t instanceof IDBTransaction&&Wr(t),Yr(t,Kr())?new Proxy(t,jt):t)}function we(t){if(t instanceof IDBRequest)return Jr(t);if(kt.has(t))return kt.get(t);const e=xr(t);return e!==t&&(kt.set(t,e),Ht.set(e,t)),e}const Ct=t=>Ht.get(t);function el(t,e,{blocked:n,upgrade:r,blocking:l,terminated:o}={}){const s=indexedDB.open(t,e),i=we(s);return r&&s.addEventListener("upgradeneeded",c=>{r(we(s.result),c.oldVersion,c.newVersion,we(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),i.then(c=>{o&&c.addEventListener("close",()=>o()),l&&c.addEventListener("versionchange",u=>l(u.oldVersion,u.newVersion,u))}).catch(()=>{}),i}const tl=["get","getKey","getAll","getAllKeys","count"],nl=["put","add","delete","clear"],St=new Map;function xt(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(St.get(e))return St.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=nl.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||tl.includes(n)))return;const o=async function(s,...i){const c=this.transaction(s,l?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(i.shift())),(await Promise.all([u[n](...i),l&&c.done]))[0]};return St.set(e,o),o}Qr(t=>({...t,get:(e,n,r)=>xt(e,n)||t.get(e,n,r),has:(e,n)=>!!xt(e,n)||t.has(e,n)}));let Te=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");var le=(t=>(t.Expense="EXPENSE",t.Income="INCOME",t.Transfer="TRANSFER",t))(le||{});const ue=be([]),Ce=be([]),$e=be([]),Pe=be([]),_r=be([]),Ke=be(""),pt=be({}),en=[{value:le.Expense,title:"Expense"},{value:le.Transfer,title:"Transfer"},{value:le.Income,title:"Income"}],at="baseCurrencyCode";let H;const rl=el("acc",3,{upgrade(t,e,n,r){if(t.objectStoreNames.contains("accountGroups")||t.createObjectStore("accountGroups",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("accounts")||t.createObjectStore("accounts",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("currencies")||t.createObjectStore("currencies",{keyPath:"code"}),t.objectStoreNames.contains("categories")||t.createObjectStore("categories",{keyPath:"id"}).createIndex("title",["title","subtitle"]),t.objectStoreNames.contains("entries")||t.createObjectStore("entries",{keyPath:"id"}).createIndex("accountId","accountId"),!t.objectStoreNames.contains("transactions"))t.createObjectStore("transactions",{keyPath:"id"}).createIndex("timestamp","timestamp");else{const l=r.objectStore("transactions");console.log("store already exists, creating index"),l.createIndex("timestamp","timestamp")}t.objectStoreNames.contains("settings")||t.createObjectStore("settings",{keyPath:"name"}),t.objectStoreNames.contains("rates")||t.createObjectStore("rates",{keyPath:"code"})}}).then(t=>{H=t});function Le(){return H.getAllFromIndex("accounts","title")}function ll(t){return H.get("accounts",t)}async function sl(t){await H.put("accounts",t),ue.set(await Le())}async function ol(t){const e=await H.get("transactions",t);await Promise.all([H.delete("transactions",t),H.delete("entries",e.entryId),e.secondEntryId?H.delete("entries",e.secondEntryId):null]),await Promise.all([De(e.accountId),e.secondAccountId?De(e.secondAccountId):null]),ue.set(await Le())}async function il(t,e){const[n,r]=await Promise.all([H.get("entries",t.entryId),t.secondEntryId?H.get("entries",t.secondEntryId):null]),[l,o,s]=gr(e,t.id,n.id,r?r.id:Te(5));await Promise.all([H.put("transactions",l),H.put("entries",o),s?r?H.put("entries",s):H.add("entries",s):r?H.delete("entries",r.id):null]);const[i,c]=await Promise.all([De(l.accountId),l.secondAccountId?De(l.secondAccountId):null,t.secondAccountId&&t.secondAccountId!==e.secondAccountId?De(t.secondAccountId):null]);(i||c)&&ue.set(await Le())}function mt(){return H.getAllFromIndex("accountGroups","title")}function ht(){return H.getAllFromIndex("categories","title")}function gt(){return H.getAll("currencies")}function cl(){return H.getAll("settings")}async function ul(){return(await H.getAll("rates")).reduce((e,n)=>(e[n.code]=n.rate,e),{})}async function pr(t,e=!0){return(await H.getAllFromIndex("entries","accountId",t)).sort((r,l)=>r.timestamp<l.timestamp?e?1:-1:r.timestamp>l.timestamp?e?-1:1:0)}async function al(t,e){return await H.getAllFromIndex("transactions","timestamp",IDBKeyRange.bound(t,e,!1,!0))}function fl(t){return H.get("transactions",t)}async function dl(t,e){await H.put("accountGroups",{id:Te(5),currencyCode:e,title:t}),Ce.set(await mt())}async function _l(t){await H.put("accountGroups",t),Ce.set(await mt())}async function pl(t,e,n){await H.put("accounts",{id:Te(5),title:t,groupId:e,currencyCode:n,balance:0}),ue.set(await Le())}async function mr(t,e){const n={id:Te(5),title:t,subtitle:e};return await H.put("categories",n),$e.set(await ht()),n}async function hr(t){await H.put("settings",t)}async function ml(t,e){const n={};await H.delete("rates",e),await Promise.all(t.map(r=>(n[r.code]=r.rate,H.put("rates",r)))),pt.set(n)}async function hl(t){await H.put("categories",t),$e.set(await ht())}async function gl(t,e){await H.put("currencies",{code:t,title:e}),Pe.set(await gt())}async function bl(t){await H.put("currencies",t),Pe.set(await gt())}function gr({kind:t,accountId:e,timestamp:n,categoryId:r,secondAccountId:l,secondAmount:o,amount:s,comment:i,reconciled:c},u,a,f){const d={id:a,timestamp:n,accountId:e,...r?{categoryId:r}:{},transactionId:u,comment:i,amount:t===le.Income?s:-s,total:0,...c?{reconciled:c}:{}};if(t===le.Transfer){const _={id:f,timestamp:n,accountId:l,transactionId:u,comment:i,amount:o||s,total:0,...c?{reconciled:c}:{}};return[{id:u,kind:t,timestamp:n,accountId:e,secondAccountId:l,amount:s,...o?{secondAmount:o}:{},comment:i,entryId:d.id,secondEntryId:_.id,...c?{reconciled:c}:{}},d,_]}else return[{id:u,kind:t,timestamp:n,accountId:e,...r?{categoryId:r}:{},amount:s,comment:i,entryId:d.id,...c?{reconciled:c}:{}},d]}async function De(t){const e=await pr(t,!1);let n=0;for(const l of e)n+=l.amount,l.total!==n&&await H.put("entries",{...l,total:n});const r=await ll(t);return r.balance!==n?(await H.put("accounts",{...r,balance:n}),!0):!1}async function $l(t){const e=H.transaction(["entries","transactions"],"readwrite"),n=e.objectStore("entries"),r=e.objectStore("transactions"),[l,o,s]=gr(t,Te(5),Te(5),Te(5));await Promise.all([r.add(l),n.add(o),...s?[n.add(s)]:[],e.done]);const[i,c]=await Promise.all([De(l.accountId),l.secondAccountId?De(l.secondAccountId):!1]);(i||c)&&ue.set(await Le())}async function br(){const[t,e,n,r,l,o]=await Promise.all([Le(),mt(),ht(),gt(),cl(),ul()]);Pe.set(r),Ce.set(e),ue.set(t),$e.set(n),_r.set(l);const s=yl(l);Ke.set(s),delete o[s],pt.set(o)}function yl(t){for(const e of t)if(e.name===at)return e.value;return""}async function wl(){await rl,await br()}const vl=wl();function kl(t){function e(r){r.target instanceof Node&&t.hasAttribute("data-opened")&&(t.contains(r.target)||t.removeAttribute("data-opened"))}function n(r){r.code==="Escape"&&t.hasAttribute("data-opened")&&t.removeAttribute("data-opened")}return document.addEventListener("click",e),document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n),document.removeEventListener("click",e)}}}const Cl=t=>({}),tn=t=>({});function Sl(t){let e,n,r,l,o,s,i,c;const u=t[6].default,a=rt(u,t,t[5],null),f=t[6].content,d=rt(f,t,t[5],tn);return{c(){e=$("div"),n=$("div"),a&&a.c(),r=T(),l=$("div"),d&&d.c(),m(n,"class","_2SXNm"),m(l,"class","_27WQU"),m(l,"data-role","popover"),m(e,"class",o="_2LTIc "+t[0])},m(_,g){I(_,e,g),p(e,n),a&&a.m(n,null),p(e,r),p(e,l),d&&d.m(l,null),t[8](e),s=!0,i||(c=[F(n,"click",function(){Je(t[1]&&t[7])&&(t[1]&&t[7]).apply(this,arguments)}),_t(kl.call(null,e))],i=!0)},p(_,[g]){t=_,a&&a.p&&(!s||g&32)&&st(a,u,t,t[5],s?lt(u,t[5],g,null):ot(t[5]),null),d&&d.p&&(!s||g&32)&&st(d,f,t,t[5],s?lt(f,t[5],g,Cl):ot(t[5]),tn),(!s||g&1&&o!==(o="_2LTIc "+t[0]))&&m(e,"class",o)},i(_){s||(v(a,_),v(d,_),s=!0)},o(_){k(a,_),k(d,_),s=!1},d(_){_&&S(e),a&&a.d(_),d&&d.d(_),t[8](null),i=!1,se(c)}}}function Il(t,e,n){let{$$slots:r={},$$scope:l}=e,o,{class:s=void 0}=e,{clickToggle:i=!0}=e;function c(){o.toggleAttribute("data-opened",!1)}function u(){o.toggleAttribute("data-opened",!0)}const a=()=>{o.toggleAttribute("data-opened")};function f(d){Z[d?"unshift":"push"](()=>{o=d,n(2,o)})}return t.$$set=d=>{"class"in d&&n(0,s=d.class),"clickToggle"in d&&n(1,i=d.clickToggle),"$$scope"in d&&n(5,l=d.$$scope)},[s,i,o,c,u,l,r,a,f]}class $r extends V{constructor(e){super(),U(this,e,Il,Sl,z,{class:0,clickToggle:1,close:3,show:4})}get close(){return this.$$.ctx[3]}get show(){return this.$$.ctx[4]}}function nn(t,e,n){const r=t.slice();return r[3]=e[n],r}function El(t){let e,n=t[3].title+"",r;return{c(){e=$("span"),r=j(n),m(e,"class","_2YoB_")},m(l,o){I(l,e,o),p(e,r)},p(l,o){o&1&&n!==(n=l[3].title+"")&&G(r,n)},d(l){l&&S(e)}}}function Al(t){let e,n=t[3].title+"",r,l,o,s;return{c(){e=$("a"),r=j(n),m(e,"class","_2blFf"),m(e,"href",l=t[3].to),m(e,"draggable",!1)},m(i,c){I(i,e,c),p(e,r),o||(s=_t(Gt.call(null,e)),o=!0)},p(i,c){c&1&&n!==(n=i[3].title+"")&&G(r,n),c&1&&l!==(l=i[3].to)&&m(e,"href",l)},d(i){i&&S(e),o=!1,s()}}}function rn(t,e){let n,r,l,o,s;function i(a,f){return a[3].to?Al:El}let c=i(e),u=c(e);return{key:t,first:null,c(){n=$("li"),u.c(),r=T(),m(n,"class","_161ne"),m(n,"data-id",l=e[3].id),this.first=n},m(a,f){I(a,n,f),u.m(n,null),p(n,r),o||(s=F(n,"click",e[2]),o=!0)},p(a,f){e=a,c===(c=i(e))&&u?u.p(e,f):(u.d(1),u=c(e),u&&(u.c(),u.m(n,r))),f&1&&l!==(l=e[3].id)&&m(n,"data-id",l)},d(a){a&&S(n),u.d(),o=!1,s()}}}function Tl(t){let e,n=[],r=new Map,l=K(t[0]);const o=s=>s[3].id;for(let s=0;s<l.length;s+=1){let i=nn(t,l,s),c=o(i);r.set(c,n[s]=rn(c,i))}return{c(){e=$("ul");for(let s=0;s<n.length;s+=1)n[s].c();m(e,"class","_4OB04")},m(s,i){I(s,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null)},p(s,[i]){i&3&&(l=K(s[0]),n=ke(n,i,o,1,s,l,r,e,Fe,rn,null,nn))},i:A,o:A,d(s){s&&S(e);for(let i=0;i<n.length;i+=1)n[i].d()}}}function Dl(t,e,n){let{items:r=[]}=e;const l=je(),o=s=>{l("menu",{id:s.currentTarget.dataset.id})};return t.$$set=s=>{"items"in s&&n(0,r=s.items)},[r,l,o]}class jl extends V{constructor(e){super(),U(this,e,Dl,Tl,z,{items:0})}}function Pl(t){let e,n,r;return{c(){e=ce("svg"),n=ce("line"),r=ce("polyline"),m(n,"x1","19"),m(n,"y1","12"),m(n,"x2","5"),m(n,"y2","12"),m(r,"points","12 19 5 12 12 5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-arrow-left")},m(l,o){I(l,e,o),p(e,n),p(e,r)},p(l,[o]){o&1&&m(e,"width",l[0]),o&1&&m(e,"height",l[0])},i:A,o:A,d(l){l&&S(e)}}}function Ll(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Ml extends V{constructor(e){super(),U(this,e,Ll,Pl,z,{size:0})}}function Nl(t){let e,n,r;return{c(){e=ce("svg"),n=ce("line"),r=ce("line"),m(n,"x1","12"),m(n,"y1","5"),m(n,"x2","12"),m(n,"y2","19"),m(r,"x1","5"),m(r,"y1","12"),m(r,"x2","19"),m(r,"y2","12"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-plus")},m(l,o){I(l,e,o),p(e,n),p(e,r)},p(l,[o]){o&1&&m(e,"width",l[0]),o&1&&m(e,"height",l[0])},i:A,o:A,d(l){l&&S(e)}}}function Ol(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Bl extends V{constructor(e){super(),U(this,e,Ol,Nl,z,{size:0})}}function Rl(t){let e,n,r,l;return{c(){e=ce("svg"),n=ce("line"),r=ce("line"),l=ce("line"),m(n,"x1","3"),m(n,"y1","12"),m(n,"x2","21"),m(n,"y2","12"),m(r,"x1","3"),m(r,"y1","6"),m(r,"x2","21"),m(r,"y2","6"),m(l,"x1","3"),m(l,"y1","18"),m(l,"x2","21"),m(l,"y2","18"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-menu")},m(o,s){I(o,e,s),p(e,n),p(e,r),p(e,l)},p(o,[s]){s&1&&m(e,"width",o[0]),s&1&&m(e,"height",o[0])},i:A,o:A,d(o){o&&S(e)}}}function Gl(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Hl extends V{constructor(e){super(),U(this,e,Gl,Rl,z,{size:0})}}function ln(t){let e,n,r,l,o;return n=new Ml({}),{c(){e=$("a"),N(n.$$.fragment),m(e,"class","_3SB3X"),m(e,"href",t[1]),m(e,"draggable",!1)},m(s,i){I(s,e,i),L(n,e,null),r=!0,l||(o=_t(Gt.call(null,e)),l=!0)},p(s,i){(!r||i&2)&&m(e,"href",s[1])},i(s){r||(v(n.$$.fragment,s),r=!0)},o(s){k(n.$$.fragment,s),r=!1},d(s){s&&S(e),M(n),l=!1,o()}}}function sn(t){let e,n,r,l,o;return n=new Bl({}),{c(){e=$("a"),N(n.$$.fragment),m(e,"class","_3SB3X"),m(e,"href",t[2]),m(e,"draggable",!1)},m(s,i){I(s,e,i),L(n,e,null),r=!0,l||(o=_t(Gt.call(null,e)),l=!0)},p(s,i){(!r||i&4)&&m(e,"href",s[2])},i(s){r||(v(n.$$.fragment,s),r=!0)},o(s){k(n.$$.fragment,s),r=!1},d(s){s&&S(e),M(n),l=!1,o()}}}function on(t){let e,n,r={class:"_1qXOD",$$slots:{content:[zl],default:[Fl]},$$scope:{ctx:t}};return e=new $r({props:r}),t[7](e),{c(){N(e.$$.fragment)},m(l,o){L(e,l,o),n=!0},p(l,o){const s={};o&280&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){t[7](null),M(e,l)}}}function Fl(t){let e,n;return e=new Hl({}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function zl(t){let e,n;return e=new jl({props:{slot:"content",items:t[3]}}),e.$on("menu",t[6]),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const o={};l&8&&(o.items=r[3]),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Ul(t){let e,n,r,l,o,s,i,c,u,a=t[1]&&ln(t),f=t[2]&&sn(t),d=t[3]&&on(t);return{c(){e=$("header"),n=$("div"),a&&a.c(),r=T(),l=$("h1"),o=j(t[0]),s=T(),i=$("div"),f&&f.c(),c=T(),d&&d.c(),m(n,"class","_1J780"),m(l,"class","_17FA5"),m(i,"class","_3ifcR"),m(e,"class","_2Jb6S")},m(_,g){I(_,e,g),p(e,n),a&&a.m(n,null),p(e,r),p(e,l),p(l,o),p(e,s),p(e,i),f&&f.m(i,null),p(i,c),d&&d.m(i,null),u=!0},p(_,[g]){_[1]?a?(a.p(_,g),g&2&&v(a,1)):(a=ln(_),a.c(),v(a,1),a.m(n,null)):a&&(ne(),k(a,1,1,()=>{a=null}),re()),(!u||g&1)&&G(o,_[0]),_[2]?f?(f.p(_,g),g&4&&v(f,1)):(f=sn(_),f.c(),v(f,1),f.m(i,c)):f&&(ne(),k(f,1,1,()=>{f=null}),re()),_[3]?d?(d.p(_,g),g&8&&v(d,1)):(d=on(_),d.c(),v(d,1),d.m(i,null)):d&&(ne(),k(d,1,1,()=>{d=null}),re())},i(_){u||(v(a),v(f),v(d),u=!0)},o(_){k(a),k(f),k(d),u=!1},d(_){_&&S(e),a&&a.d(),f&&f.d(),d&&d.d()}}}function Vl(t,e,n){let{title:r}=e,{returnPath:l=void 0}=e,{addPath:o=void 0}=e,{menuItems:s=null}=e,i=null;const c=je(),u=f=>{i.close(),c("menu",{id:f.detail.id})};function a(f){Z[f?"unshift":"push"](()=>{i=f,n(4,i)})}return t.$$set=f=>{"title"in f&&n(0,r=f.title),"returnPath"in f&&n(1,l=f.returnPath),"addPath"in f&&n(2,o=f.addPath),"menuItems"in f&&n(3,s=f.menuItems)},[r,l,o,s,i,c,u,a]}class ae extends V{constructor(e){super(),U(this,e,Vl,Ul,z,{title:0,returnPath:1,addPath:2,menuItems:3})}}const ql=t=>({}),cn=t=>({});function Yl(t){let e,n,r;const l=t[1].header,o=rt(l,t,t[0],cn),s=t[1].default,i=rt(s,t,t[0],null);return{c(){e=$("main"),o&&o.c(),n=T(),i&&i.c(),m(e,"class","_2HUC4")},m(c,u){I(c,e,u),o&&o.m(e,null),p(e,n),i&&i.m(e,null),r=!0},p(c,[u]){o&&o.p&&(!r||u&1)&&st(o,l,c,c[0],r?lt(l,c[0],u,ql):ot(c[0]),cn),i&&i.p&&(!r||u&1)&&st(i,s,c,c[0],r?lt(s,c[0],u,null):ot(c[0]),null)},i(c){r||(v(o,c),v(i,c),r=!0)},o(c){k(o,c),k(i,c),r=!1},d(c){c&&S(e),o&&o.d(c),i&&i.d(c)}}}function Kl(t,e,n){let{$$slots:r={},$$scope:l}=e;return t.$$set=o=>{"$$scope"in o&&n(0,l=o.$$scope)},[l,r]}class fe extends V{constructor(e){super(),U(this,e,Kl,Yl,z,{})}}const Xl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Jl(t){const e=t.getTimezoneOffset()*6e4,n=new Date(t.getTime()-e),r=n.getFullYear(),l=String(n.getUTCMonth()+1).padStart(2,"0"),o=String(n.getUTCDate()).padStart(2,"0"),s=String(n.getUTCHours()).padStart(2,"0"),i=String(n.getUTCMinutes()).padStart(2,"0");return`${r}-${l}-${o}T${s}:${i}`}function ft(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=r.getFullYear(),o=String(r.getUTCMonth()+1).padStart(2,"0"),s=String(r.getUTCDate()).padStart(2,"0"),i=String(r.getUTCHours()).padStart(2,"0"),c=String(r.getUTCMinutes()).padStart(2,"0");return`${l}-${o}-${s} ${i}:${c}`}function Wl(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=r.getUTCFullYear(),o=String(r.getUTCMonth()+1).padStart(2,"0"),s=String(r.getUTCDate()).padStart(2,"0"),i=Xl[r.getUTCDay()];return`${l}-${o}-${s} ${i}`}function un(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=String(r.getUTCHours()).padStart(2,"0"),o=String(r.getUTCMinutes()).padStart(2,"0");return`${l}:${o}`}function dt(t){return/^[1-9]\d*([.,](\d{1,2})?)?$/.test(t)}function It(t){if(/[.,]/.test(t)){let[e,n]=t.split(/[.,]/);return n.trim()===""?parseInt(e)*100:(n.length===1&&(n=n+"0"),parseInt(e+n))}else return parseInt(t)*100}function Q(t,e,n){t=Math.round(t);const r=t<0?Math.ceil(t/100):Math.floor(t/100),l=Math.abs(t%100);return(n&&t>0?"+":"")+`${e?Ql(r):r}.${String(l).padStart(2,"0")}`}function yr(t,e){const n=Yt(pt),r=Yt(Ke),l=n[t]?n[t]:1;return e===r?l:n[e]?l/n[e]:1}function Ql(t,e=" "){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)}function Zl(t,e){return t.reduce((n,r)=>(r.currencyCode===e?n+=r.balance:n+=r.balance*yr(r.currencyCode,e),n),0)}function xl(t,e){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=e,l.click(),URL.revokeObjectURL(r)}function es(t){const e=document.createElement("input");e.type="file",e.accept="application/json",e.multiple=!1,e.onchange=()=>{const n=e.files[0];if(n){const r=new FileReader;r.onload=function(){t(r.result)},r.readAsText(n)}},e.click()}function ts(t){try{return JSON.parse(t)}catch{return console.warn("JSON parsing failed."),null}}async function ns(){const[t,e,n,r,l,o,s,i]=await Promise.all([gt(),mt(),Le(),ht(),H.getAll("transactions"),H.getAll("entries"),H.getAll("settings"),H.getAll("rates")]);return{ver:ft(Date.now()),currencies:t,accountGroups:e,accounts:n,categories:r,transactions:l,entries:o,settings:s,rates:i}}async function rs(t){if(!confirm("All the data will be overwritten. Are you sure you want to continue?"))return!1;if(ls(t)){const e=H.transaction(["currencies","accountGroups","accounts","categories","transactions","entries","settings","rates"],"readwrite");await Promise.all([e.objectStore("currencies").clear(),e.objectStore("accountGroups").clear(),e.objectStore("accounts").clear(),e.objectStore("categories").clear(),e.objectStore("transactions").clear(),e.objectStore("entries").clear(),e.objectStore("settings").clear(),e.objectStore("rates").clear()]);for(const n of t.currencies)await e.objectStore("currencies").put(n);for(const n of t.accountGroups)await e.objectStore("accountGroups").put(n);for(const n of t.accounts)await e.objectStore("accounts").put(n);for(const n of t.categories)await e.objectStore("categories").put(n);for(const n of t.transactions)await e.objectStore("transactions").put(n);for(const n of t.entries)await e.objectStore("entries").put(n);for(const n of t.settings)await e.objectStore("settings").put(n);for(const n of t.rates)await e.objectStore("rates").put(n);return await e.done,!0}else return alert("Invalid snapshot format."),!1}function ls(t){return!(!t.ver||!t.currencies||!t.accountGroups||!t.categories||!t.categories||!t.transactions||!t.entries)}function ss(t){let e,n,r,l=t[0].title+"",o,s,i,c=Q(t[0].balance,!0)+"",u,a,f=t[0].currencyCode+"",d,_,g;return{c(){e=$("div"),n=$("div"),r=$("span"),o=j(l),s=T(),i=$("span"),u=j(c),a=T(),d=j(f),m(r,"class","_3HVLl"),m(n,"class","_1gfEY"),m(e,"class","_2kBg8"),m(e,"data-role","account")},m(b,h){I(b,e,h),p(e,n),p(n,r),p(r,o),p(n,s),p(n,i),p(i,u),p(i,a),p(i,d),_||(g=F(e,"click",t[3]),_=!0)},p(b,[h]){h&1&&l!==(l=b[0].title+"")&&G(o,l),h&1&&c!==(c=Q(b[0].balance,!0)+"")&&G(u,c),h&1&&f!==(f=b[0].currencyCode+"")&&G(d,f)},i:A,o:A,d(b){b&&S(e),_=!1,g()}}}function os(t,e,n){let{account:r}=e,{editing:l=!1}=e;const o=je(),s=()=>{l||o("account",{id:r.id})};return t.$$set=i=>{"account"in i&&n(0,r=i.account),"editing"in i&&n(1,l=i.editing)},[r,l,o,s]}class is extends V{constructor(e){super(),U(this,e,os,ss,z,{account:0,editing:1})}}function an(t,e,n){const r=t.slice();return r[5]=e[n],r}function fn(t,e){let n,r,l;return r=new is({props:{account:e[5]}}),r.$on("account",e[4]),{key:t,first:null,c(){n=te(),N(r.$$.fragment),this.first=n},m(o,s){I(o,n,s),L(r,o,s),l=!0},p(o,s){e=o;const i={};s&2&&(i.account=e[5]),r.$set(i)},i(o){l||(v(r.$$.fragment,o),l=!0)},o(o){k(r.$$.fragment,o),l=!1},d(o){o&&S(n),M(r,o)}}}function cs(t){let e,n,r,l=t[0].title+"",o,s,i,c=Q(t[2],!0)+"",u,a,f=t[0].currencyCode+"",d,_,g=[],b=new Map,h,y=K(t[1]);const w=E=>E[5].id;for(let E=0;E<y.length;E+=1){let C=an(t,y,E),D=w(C);b.set(D,g[E]=fn(D,C))}return{c(){e=$("div"),n=$("div"),r=$("span"),o=j(l),s=T(),i=$("span"),u=j(c),a=T(),d=j(f),_=T();for(let E=0;E<g.length;E+=1)g[E].c();m(r,"class","_2RwqA"),m(n,"class","FmXIb")},m(E,C){I(E,e,C),p(e,n),p(n,r),p(r,o),p(n,s),p(n,i),p(i,u),p(i,a),p(i,d),p(e,_);for(let D=0;D<g.length;D+=1)g[D]&&g[D].m(e,null);h=!0},p(E,[C]){(!h||C&1)&&l!==(l=E[0].title+"")&&G(o,l),(!h||C&4)&&c!==(c=Q(E[2],!0)+"")&&G(u,c),(!h||C&1)&&f!==(f=E[0].currencyCode+"")&&G(d,f),C&2&&(y=K(E[1]),ne(),g=ke(g,C,w,1,E,y,b,e,cr,fn,null,an),re())},i(E){if(!h){for(let C=0;C<y.length;C+=1)v(g[C]);h=!0}},o(E){for(let C=0;C<g.length;C+=1)k(g[C]);h=!1},d(E){E&&S(e);for(let C=0;C<g.length;C+=1)g[C].d()}}}function us(t,e,n){let r,l,o;J(t,ue,c=>n(3,o=c));let{accountGroup:s}=e;const i=c=>{ee(`/accounts/${c.detail.id}`)};return t.$$set=c=>{"accountGroup"in c&&n(0,s=c.accountGroup)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=o.filter(c=>c.groupId===s.id)),t.$$.dirty&3&&n(2,l=Zl(r,s.currencyCode))},[s,r,l,o,i]}class as extends V{constructor(e){super(),U(this,e,us,cs,z,{accountGroup:0})}}function dn(t,e,n){const r=t.slice();return r[6]=e[n],r}function _n(t){let e,n;return e=new as({props:{accountGroup:t[6]}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const o={};l&4&&(o.accountGroup=r[6]),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function fs(t){let e,n,r,l,o,s=Q(t[1],!0)+"",i,c,u=(t[0]||"")+"",a,f,d=K(t[2]),_=[];for(let b=0;b<d.length;b+=1)_[b]=_n(dn(t,d,b));const g=b=>k(_[b],1,1,()=>{_[b]=null});return{c(){for(let b=0;b<_.length;b+=1)_[b].c();e=T(),n=$("div"),r=$("div"),r.textContent="Total",l=T(),o=$("div"),i=j(s),c=T(),a=j(u),m(o,"class","_2wBv"),m(n,"class","_3c4Tf")},m(b,h){for(let y=0;y<_.length;y+=1)_[y]&&_[y].m(b,h);I(b,e,h),I(b,n,h),p(n,r),p(n,l),p(n,o),p(o,i),p(o,c),p(o,a),f=!0},p(b,h){if(h&4){d=K(b[2]);let y;for(y=0;y<d.length;y+=1){const w=dn(b,d,y);_[y]?(_[y].p(w,h),v(_[y],1)):(_[y]=_n(w),_[y].c(),v(_[y],1),_[y].m(e.parentNode,e))}for(ne(),y=d.length;y<_.length;y+=1)g(y);re()}(!f||h&2)&&s!==(s=Q(b[1],!0)+"")&&G(i,s),(!f||h&1)&&u!==(u=(b[0]||"")+"")&&G(a,u)},i(b){if(!f){for(let h=0;h<d.length;h+=1)v(_[h]);f=!0}},o(b){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)k(_[h]);f=!1},d(b){b&&(S(e),S(n)),ge(_,b)}}}function ds(t){let e,n;return e=new ae({props:{slot:"header",title:"Accounts",addPath:"/accounts/new",menuItems:t[3]}}),e.$on("menu",t[5]),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function _s(t){let e,n;return e=new fe({props:{$$slots:{header:[ds],default:[fs]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&519&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function ps(t,e,n){let r,l,o,s;J(t,Ke,u=>n(0,l=u)),J(t,ue,u=>n(4,o=u)),J(t,Ce,u=>n(2,s=u));const i=[{id:"groups",title:"Account Groups",to:"/groups"},{id:"category",title:"Categories",to:"/categories"},{id:"report",title:"Report",to:"/report"},{id:"currency",title:"Currencies",to:"/currencies"},{id:"rates",title:"Rates",to:"/rates"},{id:"backup",title:"Backup"},{id:"restore",title:"Restore"}],c=u=>{switch(u.detail.id){case"backup":ns().then(a=>{xl(a,`${ft(Date.now())}.json`)});break;case"restore":es(a=>{const f=ts(a);f&&rs(f).then(d=>{d&&br()})});break}};return t.$$.update=()=>{t.$$.dirty&17&&n(1,r=o.reduce((u,a)=>(a.currencyCode===l?u+=a.balance:u+=a.balance*yr(a.currencyCode,l),u),0))},[l,r,s,i,o,c]}class ms extends V{constructor(e){super(),U(this,e,ps,_s,z,{})}}function pn(t,e,n){const r=t.slice();return r[2]=e[n],r}function mn(t,e){let n,r=e[2].title+"",l,o,s,i,c;return{key:t,first:null,c(){n=$("div"),l=j(r),o=T(),m(n,"class","_3JK5K"),m(n,"data-id",s=e[2].id),this.first=n},m(u,a){I(u,n,a),p(n,l),p(n,o),i||(c=F(n,"click",e[1]),i=!0)},p(u,a){e=u,a&1&&r!==(r=e[2].title+"")&&G(l,r),a&1&&s!==(s=e[2].id)&&m(n,"data-id",s)},d(u){u&&S(n),i=!1,c()}}}function hs(t){let e=[],n=new Map,r,l=K(t[0]);const o=s=>s[2].id;for(let s=0;s<l.length;s+=1){let i=pn(t,l,s),c=o(i);n.set(c,e[s]=mn(c,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=te()},m(s,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(s,i);I(s,r,i)},p(s,i){i&3&&(l=K(s[0]),e=ke(e,i,o,1,s,l,n,r.parentNode,Fe,mn,r,pn))},d(s){s&&S(r);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function gs(t){let e,n;return e=new ae({props:{slot:"header",title:"Account Groups",returnPath:"/",addPath:"/groups/new"}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function bs(t){let e,n;return e=new fe({props:{$$slots:{header:[gs],default:[hs]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function $s(t,e,n){let r;J(t,Ce,o=>n(0,r=o));function l(o){o.target instanceof HTMLElement&&o.target.dataset.id&&ee(`/groups/${o.target.dataset.id}`)}return[r,l]}class ys extends V{constructor(e){super(),U(this,e,$s,bs,z,{})}}function hn(t,e,n){const r=t.slice();return r[4]=e[n].code,r[5]=e[n].title,r}function gn(t,e){let n,r,l=e[4]+"",o,s,i=e[5]+"",c,u,a;return{key:t,first:null,c(){n=j(`}
    `),r=$("option"),o=j(l),s=T(),c=j(i),u=T(),r.__value=a=e[4],q(r,r.__value),this.first=n},m(f,d){I(f,n,d),I(f,r,d),p(r,o),p(r,s),p(r,c),p(r,u)},p(f,d){e=f,d&4&&l!==(l=e[4]+"")&&G(o,l),d&4&&i!==(i=e[5]+"")&&G(c,i),d&4&&a!==(a=e[4])&&(r.__value=a,q(r,r.__value))},d(f){f&&(S(n),S(r))}}}function ws(t){let e,n,r,l=[],o=new Map,s,i,c=K(t[2]);const u=a=>a[4];for(let a=0;a<c.length;a+=1){let f=hn(t,c,a),d=u(f);o.set(d,l[a]=gn(d,f))}return{c(){e=$("select"),n=$("option"),r=j(t[1]);for(let a=0;a<l.length;a+=1)l[a].c();n.__value="",q(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_1kHx0"),e.required=!0,t[0]===void 0&&He(()=>t[3].call(e))},m(a,f){I(a,e,f),p(e,n),p(n,r);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);Ge(e,t[0],!0),s||(i=F(e,"change",t[3]),s=!0)},p(a,[f]){f&2&&G(r,a[1]),f&4&&(c=K(a[2]),l=ke(l,f,u,1,a,c,o,e,Fe,gn,null,hn)),f&5&&Ge(e,a[0])},i:A,o:A,d(a){a&&S(e);for(let f=0;f<l.length;f+=1)l[f].d();s=!1,i()}}}function vs(t,e,n){let r;J(t,Pe,i=>n(2,r=i));let{currencyCode:l}=e,{placeholder:o="Currency"}=e;function s(){l=Ot(this),n(0,l)}return t.$$set=i=>{"currencyCode"in i&&n(0,l=i.currencyCode),"placeholder"in i&&n(1,o=i.placeholder)},[l,o,r,s]}class bt extends V{constructor(e){super(),U(this,e,vs,ws,z,{currencyCode:0,placeholder:1})}}function ks(t){let e,n,r,l,o,s,i,c,u,a,f=t[4]?"Save":"Create",d,_,g,b;function h(w){t[7](w)}let y={};return t[1]!==void 0&&(y.currencyCode=t[1]),r=new bt({props:y}),Z.push(()=>he(r,"currencyCode",h)),{c(){e=$("form"),n=$("div"),N(r.$$.fragment),o=T(),s=$("div"),i=$("input"),c=T(),u=$("div"),a=$("button"),d=j(f),m(i,"class","_3xyX_"),m(i,"type","text"),i.disabled=t[3],m(i,"placeholder","Title"),m(a,"class","_2G9AC"),m(a,"type","submit"),a.disabled=t[3],m(e,"class","_3RSQr")},m(w,E){I(w,e,E),p(e,n),L(r,n,null),p(e,o),p(e,s),p(s,i),t[8](i),q(i,t[0]),p(e,c),p(e,u),p(u,a),p(a,d),_=!0,g||(b=[F(i,"input",t[9]),F(e,"submit",ve(t[5]))],g=!0)},p(w,E){const C={};!l&&E&2&&(l=!0,C.currencyCode=w[1],me(()=>l=!1)),r.$set(C),(!_||E&8)&&(i.disabled=w[3]),E&1&&i.value!==w[0]&&q(i,w[0]),(!_||E&8)&&(a.disabled=w[3])},i(w){_||(v(r.$$.fragment,w),_=!0)},o(w){k(r.$$.fragment,w),_=!1},d(w){w&&S(e),M(r),t[8](null),g=!1,se(b)}}}function Cs(t){let e,n;return e=new ae({props:{slot:"header",title:t[4]?"Account Group":"New Account Group",returnPath:"/groups"}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Ss(t){let e,n;return e=new fe({props:{$$slots:{header:[Cs],default:[ks]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&4111&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Is(t,e,n){let r;J(t,Ce,b=>n(10,r=b));let{params:l={}}=e;const{id:o}=l;let s=o?r.find(b=>b.id===o):null,i=s?s.title:"",c=s?s.currencyCode:void 0,u,a=!1;Qe(()=>{u.focus()});function f(){i.trim()&&c?(n(3,a=!0),s?_l({...s,title:i.trim(),currencyCode:c}).then(()=>{ee("/groups")}).finally(()=>{n(3,a=!1)}):dl(i,c).then(()=>{ee("/groups")}).finally(()=>{n(3,a=!1)})):alert("All fields must be specified.")}function d(b){c=b,n(1,c)}function _(b){Z[b?"unshift":"push"](()=>{u=b,n(2,u)})}function g(){i=this.value,n(0,i)}return t.$$set=b=>{"params"in b&&n(6,l=b.params)},[i,c,u,a,s,f,l,d,_,g]}class bn extends V{constructor(e){super(),U(this,e,Is,Ss,z,{params:6})}}function $n(t,e,n){const r=t.slice();return r[3]=e[n],r}function yn(t){let e,n=t[3].title+"",r,l,o;return{c(){e=$("option"),r=j(n),l=T(),e.__value=o=t[3].id,q(e,e.__value)},m(s,i){I(s,e,i),p(e,r),p(e,l)},p(s,i){i&2&&n!==(n=s[3].title+"")&&G(r,n),i&2&&o!==(o=s[3].id)&&(e.__value=o,q(e,e.__value))},d(s){s&&S(e)}}}function Es(t){let e,n,r,l,o=K(t[1]),s=[];for(let i=0;i<o.length;i+=1)s[i]=yn($n(t,o,i));return{c(){e=$("select"),n=$("option"),n.textContent="Account Group";for(let i=0;i<s.length;i+=1)s[i].c();m(n,"class","placeholder"),n.__value="",q(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_2Ge4O"),e.required=!0,t[0]===void 0&&He(()=>t[2].call(e))},m(i,c){I(i,e,c),p(e,n);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);Ge(e,t[0],!0),r||(l=F(e,"change",t[2]),r=!0)},p(i,[c]){if(c&2){o=K(i[1]);let u;for(u=0;u<o.length;u+=1){const a=$n(i,o,u);s[u]?s[u].p(a,c):(s[u]=yn(a),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=o.length}c&3&&Ge(e,i[0])},i:A,o:A,d(i){i&&S(e),ge(s,i),r=!1,l()}}}function As(t,e,n){let r;J(t,Ce,s=>n(1,r=s));let{groupId:l}=e;function o(){l=Ot(this),n(0,l)}return t.$$set=s=>{"groupId"in s&&n(0,l=s.groupId)},[l,r,o]}class Ts extends V{constructor(e){super(),U(this,e,As,Es,z,{groupId:0})}}function Ds(t){let e,n,r,l,o,s,i,c,u,a,f,d,_,g,b=t[0]?"Save":"Create",h,y,w,E,C;function D(P){t[8](P)}let B={};t[2]!==void 0&&(B.groupId=t[2]),r=new Ts({props:B}),Z.push(()=>he(r,"groupId",D));function O(P){t[9](P)}let R={};return t[3]!==void 0&&(R.currencyCode=t[3]),i=new bt({props:R}),Z.push(()=>he(i,"currencyCode",O)),{c(){e=$("form"),n=$("div"),N(r.$$.fragment),o=T(),s=$("div"),N(i.$$.fragment),u=T(),a=$("div"),f=$("input"),d=T(),_=$("div"),g=$("button"),h=j(b),m(f,"class","_3hIGg"),m(f,"type","text"),m(f,"placeholder","Title"),f.disabled=t[5],m(g,"class","J-mxG"),m(g,"type","submit"),g.disabled=t[5],m(e,"class",y="_2Na6L "+t[1])},m(P,W){I(P,e,W),p(e,n),L(r,n,null),p(e,o),p(e,s),L(i,s,null),p(e,u),p(e,a),p(a,f),q(f,t[4]),t[11](f),p(e,d),p(e,_),p(_,g),p(g,h),w=!0,E||(C=[F(f,"input",t[10]),F(e,"submit",ve(t[7]))],E=!0)},p(P,[W]){const Se={};!l&&W&4&&(l=!0,Se.groupId=P[2],me(()=>l=!1)),r.$set(Se);const Ie={};!c&&W&8&&(c=!0,Ie.currencyCode=P[3],me(()=>c=!1)),i.$set(Ie),(!w||W&32)&&(f.disabled=P[5]),W&16&&f.value!==P[4]&&q(f,P[4]),(!w||W&1)&&b!==(b=P[0]?"Save":"Create")&&G(h,b),(!w||W&32)&&(g.disabled=P[5]),(!w||W&2&&y!==(y="_2Na6L "+P[1]))&&m(e,"class",y)},i(P){w||(v(r.$$.fragment,P),v(i.$$.fragment,P),w=!0)},o(P){k(r.$$.fragment,P),k(i.$$.fragment,P),w=!1},d(P){P&&S(e),M(r),M(i),t[11](null),E=!1,se(C)}}}function js(t,e,n){let{accountDoc:r=null}=e,{class:l=void 0}=e,{groupId:o,currencyCode:s,title:i=""}=r||{},c=!1,u;const a=je();function f(){i.trim()&&o&&s?(n(5,c=!0),a("save",{groupId:o,currencyCode:s,title:i})):alert("Must fill all fields.")}Qe(()=>{u&&u.focus()});function d(h){o=h,n(2,o)}function _(h){s=h,n(3,s)}function g(){i=this.value,n(4,i)}function b(h){Z[h?"unshift":"push"](()=>{u=h,n(6,u)})}return t.$$set=h=>{"accountDoc"in h&&n(0,r=h.accountDoc),"class"in h&&n(1,l=h.class)},[r,l,o,s,i,c,u,f,d,_,g,b]}class wr extends V{constructor(e){super(),U(this,e,js,Ds,z,{accountDoc:0,class:1})}}function Ps(t){let e,n;return e=new wr({props:{class:"_1tO9D"}}),e.$on("save",t[2]),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Ls(t){let e,n;return e=new wr({props:{class:"_1tO9D",accountDoc:t[1]}}),e.$on("save",t[2]),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Ms(t){let e,n,r,l;const o=[Ls,Ps],s=[];function i(c,u){return c[0]?0:1}return e=i(t),n=s[e]=o[e](t),{c(){n.c(),r=te()},m(c,u){s[e].m(c,u),I(c,r,u),l=!0},p(c,u){n.p(c,u)},i(c){l||(v(n),l=!0)},o(c){k(n),l=!1},d(c){c&&S(r),s[e].d(c)}}}function Ns(t){var r;let e,n;return e=new ae({props:{slot:"header",title:t[0]?(r=t[1])==null?void 0:r.title:"New Account",returnPath:"/"}}),{c(){N(e.$$.fragment)},m(l,o){L(e,l,o),n=!0},p:A,i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){M(e,l)}}}function Os(t){let e,n;return e=new fe({props:{$$slots:{header:[Ns],default:[Ms]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&32&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Bs(t,e,n){let r;J(t,ue,c=>n(4,r=c));let{params:l={}}=e;const{id:o}=l;let s=o?r.find(c=>c.id===o):null;function i(c){const{title:u,groupId:a,currencyCode:f}=c.detail;o?sl({...s,title:u,groupId:a,currencyCode:f}).then(()=>{ee("/")}):pl(u,a,f).then(()=>{ee("/")})}return t.$$set=c=>{"params"in c&&n(3,l=c.params)},[o,s,i,l]}class wn extends V{constructor(e){super(),U(this,e,Bs,Os,z,{params:3})}}function vn(t){let e,n=t[1].title+"",r,l=t[1].subtitle?`:${t[1].subtitle}`:"",o;return{c(){e=$("span"),r=j(n),o=j(l),m(e,"class","_12oY6")},m(s,i){I(s,e,i),p(e,r),p(e,o)},p(s,i){i&2&&n!==(n=s[1].title+"")&&G(r,n),i&2&&l!==(l=s[1].subtitle?`:${s[1].subtitle}`:"")&&G(o,l)},d(s){s&&S(e)}}}function Rs(t){let e,n,r,l,o=t[0].comment+"",s,i,c,u,a=Q(t[0].amount,!0,!0)+"",f,d,_,g,b=un(t[0].timestamp)+"",h,y,w,E=Q(t[0].total,!0)+"",C,D,B,O=t[1]&&vn(t);return{c(){e=$("div"),n=$("div"),r=$("div"),l=$("span"),s=j(o),i=T(),O&&O.c(),c=T(),u=$("div"),f=j(a),d=T(),_=$("div"),g=$("div"),h=j(b),y=T(),w=$("div"),C=j(E),m(l,"class","BRMlm"),m(r,"class","_3ibZX"),m(u,"class","_2uKiq"),ie(u,"_2TC9s",t[0].amount>0),m(n,"class","_1RLk7"),m(g,"class","mm7AA"),m(w,"class","_1e2eL"),m(_,"class","_3_MwA"),m(e,"class","_3ieFT"),ie(e,"GILTz",t[0].reconciled)},m(R,P){I(R,e,P),p(e,n),p(n,r),p(r,l),p(l,s),p(r,i),O&&O.m(r,null),p(n,c),p(n,u),p(u,f),p(e,d),p(e,_),p(_,g),p(g,h),p(_,y),p(_,w),p(w,C),D||(B=F(e,"click",t[4]),D=!0)},p(R,[P]){P&1&&o!==(o=R[0].comment+"")&&G(s,o),R[1]?O?O.p(R,P):(O=vn(R),O.c(),O.m(r,null)):O&&(O.d(1),O=null),P&1&&a!==(a=Q(R[0].amount,!0,!0)+"")&&G(f,a),P&1&&ie(u,"_2TC9s",R[0].amount>0),P&1&&b!==(b=un(R[0].timestamp)+"")&&G(h,b),P&1&&E!==(E=Q(R[0].total,!0)+"")&&G(C,E),P&1&&ie(e,"GILTz",R[0].reconciled)},i:A,o:A,d(R){R&&S(e),O&&O.d(),D=!1,B()}}}function Gs(t,e,n){let r,l;J(t,$e,c=>n(3,l=c));let{entry:o}=e;const s=je(),i=()=>{s("transaction",{id:o.transactionId})};return t.$$set=c=>{"entry"in c&&n(0,o=c.entry)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=o.categoryId?l.find(c=>c.id===o.categoryId):null)},[o,r,s,l,i]}class Hs extends V{constructor(e){super(),U(this,e,Gs,Rs,z,{entry:0})}}function kn(t,e,n){const r=t.slice();return r[7]=e[n],r}function Cn(t,e,n){const r=t.slice();return r[10]=e[n],r}function Sn(t,e){let n,r,l;return r=new Hs({props:{entry:e[10]}}),r.$on("transaction",e[6]),{key:t,first:null,c(){n=te(),N(r.$$.fragment),this.first=n},m(o,s){I(o,n,s),L(r,o,s),l=!0},p(o,s){e=o;const i={};s&1&&(i.entry=e[10]),r.$set(i)},i(o){l||(v(r.$$.fragment,o),l=!0)},o(o){k(r.$$.fragment,o),l=!1},d(o){o&&S(n),M(r,o)}}}function In(t){let e,n,r=t[7]+"",l,o,s,i=Q(t[0][t[7]].total,!0,!0)+"",c,u,a=[],f=new Map,d,_,g=K(t[0][t[7]].entries);const b=h=>h[10].id;for(let h=0;h<g.length;h+=1){let y=Cn(t,g,h),w=b(y);f.set(w,a[h]=Sn(w,y))}return{c(){e=$("div"),n=$("span"),l=j(r),o=T(),s=$("span"),c=j(i),u=T();for(let h=0;h<a.length;h+=1)a[h].c();d=te(),m(n,"class","AOdh"),m(s,"class","KP4vf"),m(e,"class","_1DJNy")},m(h,y){I(h,e,y),p(e,n),p(n,l),p(e,o),p(e,s),p(s,c),I(h,u,y);for(let w=0;w<a.length;w+=1)a[w]&&a[w].m(h,y);I(h,d,y),_=!0},p(h,y){(!_||y&1)&&r!==(r=h[7]+"")&&G(l,r),(!_||y&1)&&i!==(i=Q(h[0][h[7]].total,!0,!0)+"")&&G(c,i),y&5&&(g=K(h[0][h[7]].entries),ne(),a=ke(a,y,b,1,h,g,f,d.parentNode,cr,Sn,d,Cn),re())},i(h){if(!_){for(let y=0;y<g.length;y+=1)v(a[y]);_=!0}},o(h){for(let y=0;y<a.length;y+=1)k(a[y]);_=!1},d(h){h&&(S(e),S(u),S(d));for(let y=0;y<a.length;y+=1)a[y].d(h)}}}function Fs(t){let e,n,r=K(Object.keys(t[0])),l=[];for(let s=0;s<r.length;s+=1)l[s]=In(kn(t,r,s));const o=s=>k(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=te()},m(s,i){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(s,i);I(s,e,i),n=!0},p(s,i){if(i&5){r=K(Object.keys(s[0]));let c;for(c=0;c<r.length;c+=1){const u=kn(s,r,c);l[c]?(l[c].p(u,i),v(l[c],1)):(l[c]=In(u),l[c].c(),v(l[c],1),l[c].m(e.parentNode,e))}for(ne(),c=r.length;c<l.length;c+=1)o(c);re()}},i(s){if(!n){for(let i=0;i<r.length;i+=1)v(l[i]);n=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)k(l[i]);n=!1},d(s){s&&S(e),ge(l,s)}}}function zs(t){let e,n;return e=new ae({props:{slot:"header",title:t[1]?`${t[1].title}`:"Not Found",returnPath:"/",addPath:`/accounts/${t[2]}/transactions/new`,menuItems:t[3]}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const o={};l&2&&(o.title=r[1]?`${r[1].title}`:"Not Found"),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Us(t){let e,n;return e=new fe({props:{$$slots:{header:[zs],default:[Fs]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&8195&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Vs(t,e,n){let r,l;J(t,ue,a=>n(5,l=a));let{params:o}=e;const{id:s}=o;let i={};pr(s).then(a=>{n(0,i=a.reduce((f,d)=>{const _=Wl(d.timestamp);return f[_]?f[_].entries.push(d):f[_]={entries:[d],total:0},f},{}));for(const f of Object.values(i))f.total=f.entries.reduce((d,_)=>(d+=_.amount,d),0)});const c=[{id:"edit",title:"Edit",to:`/accounts/${s}/edit`}],u=a=>{ee(`/accounts/${s}/transactions/${a.detail.id}`)};return t.$$set=a=>{"params"in a&&n(4,o=a.params)},t.$$.update=()=>{t.$$.dirty&32&&n(1,r=l.find(a=>a.id===s))},[i,r,s,c,o,l,u]}class qs extends V{constructor(e){super(),U(this,e,Vs,Us,z,{params:4})}}function En(t,e,n){const r=t.slice();return r[2]=e[n],r}function An(t,e){let n,r=e[2].title+"",l,o=e[2].subtitle?`:${e[2].subtitle}`:"",s,i,c,u,a;return{key:t,first:null,c(){n=$("div"),l=j(r),s=j(o),i=T(),m(n,"class","_1Hdo"),m(n,"data-id",c=e[2].id),this.first=n},m(f,d){I(f,n,d),p(n,l),p(n,s),p(n,i),u||(a=F(n,"click",e[1]),u=!0)},p(f,d){e=f,d&1&&r!==(r=e[2].title+"")&&G(l,r),d&1&&o!==(o=e[2].subtitle?`:${e[2].subtitle}`:"")&&G(s,o),d&1&&c!==(c=e[2].id)&&m(n,"data-id",c)},d(f){f&&S(n),u=!1,a()}}}function Ys(t){let e=[],n=new Map,r,l=K(t[0]);const o=s=>s[2].id;for(let s=0;s<l.length;s+=1){let i=En(t,l,s),c=o(i);n.set(c,e[s]=An(c,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=te()},m(s,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(s,i);I(s,r,i)},p(s,i){i&3&&(l=K(s[0]),e=ke(e,i,o,1,s,l,n,r.parentNode,Fe,An,r,En))},d(s){s&&S(r);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function Ks(t){let e,n;return e=new ae({props:{slot:"header",title:"Categories",returnPath:"/",addPath:"/categories/new"}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Xs(t){let e,n;return e=new fe({props:{$$slots:{header:[Ks],default:[Ys]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Js(t,e,n){let r;J(t,$e,o=>n(0,r=o));function l(o){if(o.target.dataset.id){const s=o.target.dataset.id;ee(`/categories/${s}`)}}return[r,l]}class Ws extends V{constructor(e){super(),U(this,e,Js,Xs,z,{})}}function Qs(t){let e,n,r,l,o,s,i,c,u,a;function f(_){t[2](_)}let d={placeholder:"Base Currency"};return t[0]!==void 0&&(d.currencyCode=t[0]),l=new bt({props:d}),Z.push(()=>he(l,"currencyCode",f)),{c(){e=$("form"),n=$("div"),r=j(`Base currency:
      `),N(l.$$.fragment),s=T(),i=$("div"),i.innerHTML='<button class="_19-gA" type="submit">Save</button>',m(e,"class","_1JFP_")},m(_,g){I(_,e,g),p(e,n),p(n,r),L(l,n,null),p(e,s),p(e,i),c=!0,u||(a=F(e,"submit",ve(t[1])),u=!0)},p(_,g){const b={};!o&&g&1&&(o=!0,b.currencyCode=_[0],me(()=>o=!1)),l.$set(b)},i(_){c||(v(l.$$.fragment,_),c=!0)},o(_){k(l.$$.fragment,_),c=!1},d(_){_&&S(e),M(l),u=!1,a()}}}function Zs(t){let e,n;return e=new ae({props:{slot:"header",title:"Settings",returnPath:"/"}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function xs(t){let e,n;return e=new fe({props:{$$slots:{header:[Zs],default:[Qs]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&17&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function eo(t,e,n){var i;let r;J(t,_r,c=>n(3,r=c));let l=(i=r.find(c=>c.name===at))==null?void 0:i.value;function o(){hr({name:at,value:l}).then(()=>{ee("/")})}function s(c){l=c,n(0,l)}return[l,o,s]}class to extends V{constructor(e){super(),U(this,e,eo,xs,z,{})}}function Tn(t,e,n){const r=t.slice();return r[2]=e[n],r}function Dn(t,e){let n,r,l=e[2].code+"",o,s,i,c=e[2].title+"",u,a,f,d,_;return{key:t,first:null,c(){n=$("div"),r=$("div"),o=j(l),s=T(),i=$("div"),u=j(c),a=T(),m(r,"class","_4jwya"),m(i,"class","_1GjZM"),m(n,"class","_3HmHC"),m(n,"data-role","item"),m(n,"data-code",f=e[2].code),this.first=n},m(g,b){I(g,n,b),p(n,r),p(r,o),p(n,s),p(n,i),p(i,u),p(n,a),d||(_=F(n,"click",e[1]),d=!0)},p(g,b){e=g,b&1&&l!==(l=e[2].code+"")&&G(o,l),b&1&&c!==(c=e[2].title+"")&&G(u,c),b&1&&f!==(f=e[2].code)&&m(n,"data-code",f)},d(g){g&&S(n),d=!1,_()}}}function no(t){let e=[],n=new Map,r,l=K(t[0]);const o=s=>s[2].code;for(let s=0;s<l.length;s+=1){let i=Tn(t,l,s),c=o(i);n.set(c,e[s]=Dn(c,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=te()},m(s,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(s,i);I(s,r,i)},p(s,i){i&3&&(l=K(s[0]),e=ke(e,i,o,1,s,l,n,r.parentNode,Fe,Dn,r,Tn))},d(s){s&&S(r);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function ro(t){let e,n;return e=new ae({props:{slot:"header",title:"Currencies",returnPath:"/",addPath:"/currencies/new"}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function lo(t){let e,n;return e=new fe({props:{$$slots:{header:[ro],default:[no]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function so(t,e,n){let r;J(t,Pe,o=>n(0,r=o));function l(o){if(o.target instanceof HTMLElement){const s=o.target.closest('[data-role="item"]');s instanceof HTMLElement&&s.dataset.code&&ee(`/currencies/${s.dataset.code}`)}}return[r,l]}class oo extends V{constructor(e){super(),U(this,e,so,lo,z,{})}}function jn(t,e,n){const r=t.slice();return r[11]=e[n].code,r[12]=e,r[13]=n,r}function Pn(t){let e,n,r=t[11]+"",l,o,s,i,c,u,a,f,d,_,g;function b(){t[7].call(c,t[11])}return{c(){e=$("div"),n=$("div"),l=j(r),o=j(":"),s=T(),i=$("div"),c=$("input"),a=T(),f=$("span"),d=j(t[1]),m(c,"id",u=t[11]),m(c,"class","_234LA"),m(c,"type","text"),ie(c,"_2j9gN",!Xe(t[2][t[11]])),m(i,"class","gqdmv")},m(h,y){I(h,e,y),p(e,n),p(n,l),p(n,o),p(e,s),p(e,i),p(i,c),q(c,t[2][t[11]]),p(i,a),p(i,f),p(f,d),_||(g=F(c,"input",b),_=!0)},p(h,y){t=h,y&8&&r!==(r=t[11]+"")&&G(l,r),y&8&&u!==(u=t[11])&&m(c,"id",u),y&12&&c.value!==t[2][t[11]]&&q(c,t[2][t[11]]),y&13&&ie(c,"_2j9gN",!Xe(t[2][t[11]])),y&2&&G(d,t[1])},d(h){h&&S(e),_=!1,g()}}}function Ln(t){let e,n=t[11]!==t[1]&&Pn(t);return{c(){n&&n.c(),e=te()},m(r,l){n&&n.m(r,l),I(r,e,l)},p(r,l){r[11]!==r[1]?n?n.p(r,l):(n=Pn(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&S(e),n&&n.d(r)}}}function io(t){let e,n,r,l,o,s,i,c,u,a,f;function d(h){t[6](h)}let _={placeholder:"Base Currency"};t[1]!==void 0&&(_.currencyCode=t[1]),l=new bt({props:_}),Z.push(()=>he(l,"currencyCode",d));let g=K(t[3]),b=[];for(let h=0;h<g.length;h+=1)b[h]=Ln(jn(t,g,h));return{c(){e=$("form"),n=$("div"),r=j(`Base currency:
      `),N(l.$$.fragment),s=T();for(let h=0;h<b.length;h+=1)b[h].c();i=T(),c=$("div"),c.innerHTML='<button class="_3vC8G" type="submit">Save</button>',m(e,"class","_1SqME")},m(h,y){I(h,e,y),p(e,n),p(n,r),L(l,n,null),p(e,s);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(e,null);p(e,i),p(e,c),u=!0,a||(f=F(e,"submit",ve(t[4])),a=!0)},p(h,y){const w={};if(!o&&y&2&&(o=!0,w.currencyCode=h[1],me(()=>o=!1)),l.$set(w),y&15){g=K(h[3]);let E;for(E=0;E<g.length;E+=1){const C=jn(h,g,E);b[E]?b[E].p(C,y):(b[E]=Ln(C),b[E].c(),b[E].m(e,i))}for(;E<b.length;E+=1)b[E].d(1);b.length=g.length}},i(h){u||(v(l.$$.fragment,h),u=!0)},o(h){k(l.$$.fragment,h),u=!1},d(h){h&&S(e),M(l),ge(b,h),a=!1,f()}}}function co(t){let e,n;return e=new ae({props:{slot:"header",title:"Rates",returnPath:"/"}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function uo(t){let e,n;return e=new fe({props:{$$slots:{header:[co],default:[io]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&16398&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Xe(t){return/^([1-9]\d*|[0])([.,]\d+)?$/.test(t)}function Pt(t){return parseFloat(t.replace(",","."))}function ao(t,e,n){let r,l,o;J(t,Ke,d=>n(8,r=d)),J(t,Pe,d=>n(3,l=d)),J(t,pt,d=>n(9,o=d));let s=r,i=l.reduce((d,{code:_})=>(d[_]=String(o[_]||1),d),{});function c(){const d=u();if(d){alert(d);return}const _=l.filter(({code:g})=>g!==s).map(({code:g})=>({code:g,rate:Pt(i[g])}));hr({name:at,value:s}).then(()=>(Er(Ke,r=s,r),ml(_,s))).then(()=>{ee("/")})}function u(){for(const[d,_]of Object.entries(i))if(!Xe(_)){const g=document.getElementById(d);return g&&g.focus(),`Invalid rate for ${d}`}return""}function a(d){s=d,n(1,s)}function f(d){i[d]=this.value,n(2,i)}return[Xe,s,i,l,c,Pt,a,f]}class fo extends V{constructor(e){super(),U(this,e,ao,uo,z,{validateRate:0,parseRate:5})}get validateRate(){return Xe}get parseRate(){return Pt}}function Mn(t,e,n){const r=t.slice();return r[4]=e[n],r}function Nn(t){let e,n;return e=new Ft({props:{cat:t[4],nested:!0,ondocs:t[2]}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.cat=r[4]),l&4&&(o.ondocs=r[2]),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function On(t){let e,n,r=t[4].title+"",l,o,s,i=Q(t[4].total,!0)+"",c,u,a,f,d,_;function g(){return t[3](t[4])}let b=t[4].sorted&&Nn(t);return{c(){e=$("div"),n=$("span"),l=j(r),o=T(),s=$("span"),c=j(i),u=T(),b&&b.c(),a=te(),m(n,"class","_31Wp_"),m(e,"class","_1rD4x"),ie(e,"_3eEr8",t[1])},m(h,y){I(h,e,y),p(e,n),p(n,l),p(e,o),p(e,s),p(s,c),I(h,u,y),b&&b.m(h,y),I(h,a,y),f=!0,d||(_=F(e,"click",g),d=!0)},p(h,y){t=h,(!f||y&1)&&r!==(r=t[4].title+"")&&G(l,r),(!f||y&1)&&i!==(i=Q(t[4].total,!0)+"")&&G(c,i),(!f||y&2)&&ie(e,"_3eEr8",t[1]),t[4].sorted?b?(b.p(t,y),y&1&&v(b,1)):(b=Nn(t),b.c(),v(b,1),b.m(a.parentNode,a)):b&&(ne(),k(b,1,1,()=>{b=null}),re())},i(h){f||(v(b),f=!0)},o(h){k(b),f=!1},d(h){h&&(S(e),S(u),S(a)),b&&b.d(h),d=!1,_()}}}function _o(t){let e,n,r=K(t[0].sorted),l=[];for(let s=0;s<r.length;s+=1)l[s]=On(Mn(t,r,s));const o=s=>k(l[s],1,1,()=>{l[s]=null});return{c(){e=$("div");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,i){I(s,e,i);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);n=!0},p(s,[i]){if(i&7){r=K(s[0].sorted);let c;for(c=0;c<r.length;c+=1){const u=Mn(s,r,c);l[c]?(l[c].p(u,i),v(l[c],1)):(l[c]=On(u),l[c].c(),v(l[c],1),l[c].m(e,null))}for(ne(),c=r.length;c<l.length;c+=1)o(c);re()}},i(s){if(!n){for(let i=0;i<r.length;i+=1)v(l[i]);n=!0}},o(s){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)k(l[i]);n=!1},d(s){s&&S(e),ge(l,s)}}}function po(t,e,n){let{cat:r}=e,{nested:l=!1}=e,{ondocs:o=void 0}=e;const s=i=>{o==null||o(i.docs)};return t.$$set=i=>{"cat"in i&&n(0,r=i.cat),"nested"in i&&n(1,l=i.nested),"ondocs"in i&&n(2,o=i.ondocs)},[r,l,o,s]}class Ft extends V{constructor(e){super(),U(this,e,po,_o,z,{cat:0,nested:1,ondocs:2})}}function Bn(t,e,n){const r=t.slice();return r[12]=e[n],r}function Rn(t){let e,n,r,l,o=Q(t[1].total,!0)+"",s,i,c,u;return c=new Ft({props:{cat:t[1],ondocs:t[5]}}),{c(){e=$("div"),n=$("span"),n.textContent="Income",r=T(),l=$("span"),s=j(o),i=T(),N(c.$$.fragment),m(n,"class","_1w7Yp"),m(e,"class","_3fR1c")},m(a,f){I(a,e,f),p(e,n),p(e,r),p(e,l),p(l,s),I(a,i,f),L(c,a,f),u=!0},p(a,f){(!u||f&2)&&o!==(o=Q(a[1].total,!0)+"")&&G(s,o);const d={};f&2&&(d.cat=a[1]),c.$set(d)},i(a){u||(v(c.$$.fragment,a),u=!0)},o(a){k(c.$$.fragment,a),u=!1},d(a){a&&(S(e),S(i)),M(c,a)}}}function Gn(t){let e,n,r,l,o=Q(t[2].total,!0)+"",s,i,c,u;return c=new Ft({props:{cat:t[2],ondocs:t[5]}}),{c(){e=$("div"),n=$("span"),n.textContent="Expenses",r=T(),l=$("span"),s=j(o),i=T(),N(c.$$.fragment),m(n,"class","_1w7Yp"),m(e,"class","_3fR1c")},m(a,f){I(a,e,f),p(e,n),p(e,r),p(e,l),p(l,s),I(a,i,f),L(c,a,f),u=!0},p(a,f){(!u||f&4)&&o!==(o=Q(a[2].total,!0)+"")&&G(s,o);const d={};f&4&&(d.cat=a[2]),c.$set(d)},i(a){u||(v(c.$$.fragment,a),u=!0)},o(a){k(c.$$.fragment,a),u=!1},d(a){a&&(S(e),S(i)),M(c,a)}}}function Hn(t){let e,n,r,l,o,s,i,c,u,a=K(t[3]),f=[];for(let d=0;d<a.length;d+=1)f[d]=zn(Bn(t,a,d));return{c(){e=$("div"),n=$("div"),r=$("div"),l=$("h2"),l.textContent="Transactions",o=T(),s=$("button"),s.textContent="X",i=T();for(let d=0;d<f.length;d+=1)f[d].c();m(s,"class","_1vDoy"),m(r,"class","_3fR1c"),m(n,"class","_20g6"),m(e,"class","_2rfJl")},m(d,_){I(d,e,_),p(e,n),p(n,r),p(r,l),p(r,o),p(r,s),p(n,i);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(n,null);c||(u=F(s,"click",t[7]),c=!0)},p(d,_){if(_&24){a=K(d[3]);let g;for(g=0;g<a.length;g+=1){const b=Bn(d,a,g);f[g]?f[g].p(b,_):(f[g]=zn(b),f[g].c(),f[g].m(n,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=a.length}},d(d){d&&S(e),ge(f,d),c=!1,u()}}}function Fn(t){let e,n=`${t[4][t[12].categoryId].title}${t[4][t[12].categoryId].subtitle?`:${t[4][t[12].categoryId].subtitle}`:""}`,r;return{c(){e=$("span"),r=j(n),m(e,"class","_2udZu")},m(l,o){I(l,e,o),p(e,r)},p(l,o){o&8&&n!==(n=`${l[4][l[12].categoryId].title}${l[4][l[12].categoryId].subtitle?`:${l[4][l[12].categoryId].subtitle}`:""}`)&&G(r,n)},d(l){l&&S(e)}}}function zn(t){let e,n,r,l=t[12].comment+"",o,s,i,c=Q(t[12].kind===le.Expense?-t[12].amount:t[12].amount,!0,!0)+"",u,a,f,d,_,g=ft(t[12].timestamp)+"",b,h,y=t[4][t[12].categoryId]&&Fn(t);return{c(){e=$("div"),n=$("div"),r=$("span"),o=j(l),s=T(),i=$("span"),u=j(c),a=T(),f=$("div"),y&&y.c(),d=T(),_=$("span"),b=j(g),h=T(),m(r,"class","comment"),m(i,"class","Cuy75"),m(n,"class","_2ugfg"),m(_,"class","_1u25y"),m(f,"class","_2tCf7"),m(e,"class","_2p4A6")},m(w,E){I(w,e,E),p(e,n),p(n,r),p(r,o),p(n,s),p(n,i),p(i,u),p(e,a),p(e,f),y&&y.m(f,null),p(f,d),p(f,_),p(_,b),p(e,h)},p(w,E){E&8&&l!==(l=w[12].comment+"")&&G(o,l),E&8&&c!==(c=Q(w[12].kind===le.Expense?-w[12].amount:w[12].amount,!0,!0)+"")&&G(u,c),w[4][w[12].categoryId]?y?y.p(w,E):(y=Fn(w),y.c(),y.m(f,d)):y&&(y.d(1),y=null),E&8&&g!==(g=ft(w[12].timestamp)+"")&&G(b,g)},d(w){w&&S(e),y&&y.d()}}}function mo(t){let e,n,r,l,o,s,i,c,u,a=t[1]&&Rn(t),f=t[2]&&Gn(t),d=t[3]&&Hn(t);return{c(){e=$("div"),n=$("input"),r=T(),a&&a.c(),l=T(),f&&f.c(),o=T(),d&&d.c(),s=te(),m(n,"class","_35Y9x"),m(n,"type","month"),m(e,"class","af3Ku")},m(_,g){I(_,e,g),p(e,n),q(n,t[0]),I(_,r,g),a&&a.m(_,g),I(_,l,g),f&&f.m(_,g),I(_,o,g),d&&d.m(_,g),I(_,s,g),i=!0,c||(u=F(n,"input",t[6]),c=!0)},p(_,g){g&1&&q(n,_[0]),_[1]?a?(a.p(_,g),g&2&&v(a,1)):(a=Rn(_),a.c(),v(a,1),a.m(l.parentNode,l)):a&&(ne(),k(a,1,1,()=>{a=null}),re()),_[2]?f?(f.p(_,g),g&4&&v(f,1)):(f=Gn(_),f.c(),v(f,1),f.m(o.parentNode,o)):f&&(ne(),k(f,1,1,()=>{f=null}),re()),_[3]?d?d.p(_,g):(d=Hn(_),d.c(),d.m(s.parentNode,s)):d&&(d.d(1),d=null)},i(_){i||(v(a),v(f),i=!0)},o(_){k(a),k(f),i=!1},d(_){_&&(S(e),S(r),S(l),S(o),S(s)),a&&a.d(_),f&&f.d(_),d&&d.d(_),c=!1,u()}}}function ho(t){let e,n;return e=new ae({props:{slot:"header",title:"Report",returnPath:"/"}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function go(t){let e,n;return e=new fe({props:{$$slots:{header:[ho],default:[mo]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&32783&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Lt(t){t.cats&&(t.sorted=Object.values(t.cats).sort((e,n)=>n.total-e.total),t.sorted.forEach(e=>{e.cats&&Lt(e)}))}function bo(t,e,n){let r;J(t,$e,b=>n(8,r=b));const l=new Date;let o=`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}`,s=null,i=null,c=null;const u=r.reduce((b,h)=>(b[h.id]=h,b),{});function a(b){const[h,y]=b.split("-"),w=new Date(parseInt(h),parseInt(y)-1,1).getTime(),E=new Date(parseInt(h),parseInt(y),1).getTime();al(w,E).then(C=>{const D=C.filter(O=>O.kind===le.Income),B=C.filter(O=>O.kind===le.Expense);n(1,s=f(D)),n(2,i=f(B)),Lt(s),Lt(i)})}function f(b){return b.reduce((h,y)=>{const w=u[y.categoryId];return w&&(h.cats[w.title]||(h.cats[w.title]={title:w.title,cats:{},docs:[],total:0}),h.cats[w.title].total+=y.amount,h.cats[w.title].docs.push(y),w.subtitle&&(h.cats[w.title].cats[w.subtitle]||(h.cats[w.title].cats[w.subtitle]={title:w.subtitle,docs:[],total:0}),h.cats[w.title].cats[w.subtitle].total+=y.amount,h.cats[w.title].cats[w.subtitle].docs.push(y))),h.total+=y.amount,h},{cats:{},docs:[],total:0})}function d(b){n(3,c=b),document.documentElement.style.setProperty("overflow","hidden")}function _(){o=this.value,n(0,o)}const g=b=>{n(3,c=null),document.documentElement.style.removeProperty("overflow")};return t.$$.update=()=>{t.$$.dirty&1&&a(o)},[o,s,i,c,u,d,_,g]}class $o extends V{constructor(e){super(),U(this,e,bo,go,z,{})}}function yo(t){let e,n,r,l,o,s,i,c,u,a,f;return{c(){e=$("form"),n=$("div"),r=$("input"),l=T(),o=$("div"),s=$("input"),i=T(),c=$("div"),u=$("button"),u.textContent=`${t[3]?"Save":"Create"}`,m(r,"type","text"),m(r,"placeholder","Title"),m(n,"class","_1F3oU"),m(s,"type","text"),m(s,"placeholder","Subtitle (optional)"),m(o,"class","_1F3oU"),m(u,"type","submit"),m(c,"class","_1F3oU"),m(e,"class","_2sHk9")},m(d,_){I(d,e,_),p(e,n),p(n,r),q(r,t[0]),t[7](r),p(e,l),p(e,o),p(o,s),q(s,t[1]),p(e,i),p(e,c),p(c,u),a||(f=[F(r,"input",t[6]),F(s,"input",t[8]),F(e,"submit",ve(t[4]))],a=!0)},p(d,_){_&1&&r.value!==d[0]&&q(r,d[0]),_&2&&s.value!==d[1]&&q(s,d[1])},d(d){d&&S(e),t[7](null),a=!1,se(f)}}}function wo(t){let e,n;return e=new ae({props:{slot:"header",title:t[3]?"Category":"New Category",returnPath:"/categories"}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function vo(t){let e,n;return e=new fe({props:{$$slots:{header:[wo],default:[yo]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&2055&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function ko(t,e,n){let r;J(t,$e,g=>n(9,r=g));let{params:l={}}=e;const{id:o}=l;let s=o?r.find(g=>g.id===o):null,i=s?s.title:"",c=s?s.subtitle:"",u;Qe(()=>{u&&u.focus()});function a(){i.trim()?s?hl({...s,title:i.trim(),subtitle:c.trim()}).then(()=>{ee("/categories")}):mr(i.trim(),c.trim()).then(()=>{ee("/categories")}):alert("The title must be specified.")}function f(){i=this.value,n(0,i)}function d(g){Z[g?"unshift":"push"](()=>{u=g,n(2,u)})}function _(){c=this.value,n(1,c)}return t.$$set=g=>{"params"in g&&n(5,l=g.params)},[i,c,u,s,a,l,f,d,_]}class Un extends V{constructor(e){super(),U(this,e,ko,vo,z,{params:5})}}function Co(t){let e,n,r,l,o,s,i,c,u,a,f;return{c(){e=$("form"),n=$("div"),r=$("input"),l=T(),o=$("div"),s=$("input"),i=T(),c=$("div"),u=$("button"),u.textContent=`${t[4]?"Save":"Add"}`,m(r,"type","text"),m(r,"placeholder","Code"),r.disabled=t[4]!==null,m(n,"class","EbSwc"),m(s,"type","text"),m(s,"placeholder","Title"),m(o,"class","EbSwc"),m(u,"type","submit"),m(c,"class","EbSwc")},m(d,_){I(d,e,_),p(e,n),p(n,r),q(r,t[0]),t[8](r),p(e,l),p(e,o),p(o,s),q(s,t[1]),t[10](s),p(e,i),p(e,c),p(c,u),a||(f=[F(r,"input",t[7]),F(s,"input",t[9]),F(e,"submit",ve(t[5]))],a=!0)},p(d,_){_&1&&r.value!==d[0]&&q(r,d[0]),_&2&&s.value!==d[1]&&q(s,d[1])},d(d){d&&S(e),t[8](null),t[10](null),a=!1,se(f)}}}function So(t){let e,n;return e=new ae({props:{slot:"header",title:t[4]?"Currency":"New Currency",returnPath:"/currencies"}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Io(t){let e,n;return e=new fe({props:{$$slots:{header:[So],default:[Co]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&8207&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Eo(t,e,n){let r;J(t,Pe,h=>n(11,r=h));let{params:l={}}=e;const{cid:o}=l;let s=o?r.find(h=>h.code===o):null,i=s?s.code:"",c=s?s.title:"",u,a;function f(){i.trim()&&c.trim()?s?bl({...s,title:c.trim()}).then(()=>{ee("/currencies")}):gl(i.trim(),c.trim()).then(()=>{ee("/currencies")}):alert("Code and title must be specified.")}Qe(()=>{s?a&&a.focus():u&&u.focus()});function d(){i=this.value,n(0,i)}function _(h){Z[h?"unshift":"push"](()=>{u=h,n(2,u)})}function g(){c=this.value,n(1,c)}function b(h){Z[h?"unshift":"push"](()=>{a=h,n(3,a)})}return t.$$set=h=>{"params"in h&&n(6,l=h.params)},[i,c,u,a,s,f,l,d,_,g,b]}class Vn extends V{constructor(e){super(),U(this,e,Eo,Io,z,{params:6})}}function qn(t,e,n){const r=t.slice();return r[6]=e[n],r}function Yn(t,e,n){const r=t.slice();return r[9]=e[n],r}function Kn(t){let e,n=t[9].title+"",r,l;return{c(){e=$("option"),r=j(n),e.__value=l=t[9].id,q(e,e.__value)},m(o,s){I(o,e,s),p(e,r)},p(o,s){s&4&&n!==(n=o[9].title+"")&&G(r,n),s&4&&l!==(l=o[9].id)&&(e.__value=l,q(e,e.__value))},d(o){o&&S(e)}}}function Xn(t){let e,n,r=K(t[6].accounts),l=[];for(let o=0;o<r.length;o+=1)l[o]=Kn(Yn(t,r,o));return{c(){e=$("optgroup");for(let o=0;o<l.length;o+=1)l[o].c();m(e,"label",n=t[6].title)},m(o,s){I(o,e,s);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(o,s){if(s&4){r=K(o[6].accounts);let i;for(i=0;i<r.length;i+=1){const c=Yn(o,r,i);l[i]?l[i].p(c,s):(l[i]=Kn(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=r.length}s&4&&n!==(n=o[6].title)&&m(e,"label",n)},d(o){o&&S(e),ge(l,o)}}}function Ao(t){let e,n,r,l,o,s=K(t[2]),i=[];for(let c=0;c<s.length;c+=1)i[c]=Xn(qn(t,s,c));return{c(){e=$("select"),n=$("option"),r=j(t[1]);for(let c=0;c<i.length;c+=1)i[c].c();n.__value="",q(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_1vWtV"),e.required=!0,t[0]===void 0&&He(()=>t[5].call(e))},m(c,u){I(c,e,u),p(e,n),p(n,r);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);Ge(e,t[0],!0),l||(o=F(e,"change",t[5]),l=!0)},p(c,[u]){if(u&2&&G(r,c[1]),u&4){s=K(c[2]);let a;for(a=0;a<s.length;a+=1){const f=qn(c,s,a);i[a]?i[a].p(f,u):(i[a]=Xn(f),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=s.length}u&5&&Ge(e,c[0])},i:A,o:A,d(c){c&&S(e),ge(i,c),l=!1,o()}}}function To(t,e,n){let r,l,o;J(t,ue,u=>n(3,l=u)),J(t,Ce,u=>n(4,o=u));let{accountId:s}=e,{placeholder:i="Account"}=e;function c(){s=Ot(this),n(0,s),n(2,r),n(4,o),n(3,l)}return t.$$set=u=>{"accountId"in u&&n(0,s=u.accountId),"placeholder"in u&&n(1,i=u.placeholder)},t.$$.update=()=>{t.$$.dirty&24&&n(2,r=o.reduce((u,a)=>{const f={title:a.title,accounts:l.filter(d=>d.groupId===a.id)};return u.push(f),u},[]))},[s,i,r,l,o,c]}class Do extends V{constructor(e){super(),U(this,e,To,Ao,z,{accountId:0,placeholder:1})}}function Jn(t,e,n){const r=t.slice();return r[2]=e[n],r}function Wn(t){let e,n,r;return{c(){e=$("span"),e.textContent=`${t[2].title} `,m(e,"data-value",t[2].value),ie(e,"_1zm3o",t[2].value===t[0])},m(l,o){I(l,e,o),n||(r=F(e,"pointerdown",t[1]),n=!0)},p(l,o){o&1&&ie(e,"_1zm3o",l[2].value===l[0])},d(l){l&&S(e),n=!1,r()}}}function jo(t){let e,n=K(en),r=[];for(let l=0;l<n.length;l+=1)r[l]=Wn(Jn(t,n,l));return{c(){e=$("div");for(let l=0;l<r.length;l+=1)r[l].c();m(e,"class","_2dieg")},m(l,o){I(l,e,o);for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(e,null)},p(l,[o]){if(o&3){n=K(en);let s;for(s=0;s<n.length;s+=1){const i=Jn(l,n,s);r[s]?r[s].p(i,o):(r[s]=Wn(i),r[s].c(),r[s].m(e,null))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},i:A,o:A,d(l){l&&S(e),ge(r,l)}}}function Po(t,e,n){let{kind:r}=e;function l(o){o.target instanceof HTMLSpanElement&&(console.log("kind:",o.target.dataset.value),n(0,r=o.target.dataset.value))}return t.$$set=o=>{"kind"in o&&n(0,r=o.kind)},[r,l]}class Lo extends V{constructor(e){super(),U(this,e,Po,jo,z,{kind:0})}}function Qn(t,e,n){const r=t.slice();return r[7]=e[n],r}function Mo(t){let e,n,r;return{c(){e=$("input"),m(e,"class","_1LWF4"),m(e,"type","text"),m(e,"placeholder","Category")},m(l,o){I(l,e,o),t[10](e),q(e,t[1]),n||(r=[F(e,"input",t[11]),F(e,"input",t[6])],n=!0)},p(l,o){o&2&&e.value!==l[1]&&q(e,l[1])},d(l){l&&S(e),t[10](null),n=!1,se(r)}}}function Zn(t){let e;return{c(){e=$("li"),e.textContent="Empty",m(e,"class","_1FJls")},m(n,r){I(n,e,r)},p:A,d(n){n&&S(e)}}}function xn(t,e){let n,r=e[7].title+"",l,o=e[7].subtitle?`:${e[7].subtitle}`:"",s,i,c;return{key:t,first:null,c(){n=$("li"),l=j(r),s=j(o),i=T(),m(n,"data-id",c=e[7].id),ie(n,"_2P4tM",e[7].id===e[0]),this.first=n},m(u,a){I(u,n,a),p(n,l),p(n,s),p(n,i)},p(u,a){e=u,a&19&&r!==(r=e[7].title+"")&&G(l,r),a&19&&o!==(o=e[7].subtitle?`:${e[7].subtitle}`:"")&&G(s,o),a&19&&c!==(c=e[7].id)&&m(n,"data-id",c),a&19&&ie(n,"_2P4tM",e[7].id===e[0])},d(u){u&&S(n)}}}function No(t){let e,n=[],r=new Map,l,o,s=K(t[0]?t[4]:t[4].filter(t[9]));const i=u=>u[7].id;for(let u=0;u<s.length;u+=1){let a=Qn(t,s,u),f=i(a);r.set(f,n[u]=xn(f,a))}let c=null;return s.length||(c=Zn()),{c(){e=$("ul");for(let u=0;u<n.length;u+=1)n[u].c();c&&c.c(),m(e,"class","_2VAoI"),m(e,"slot","content")},m(u,a){I(u,e,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);c&&c.m(e,null),l||(o=F(e,"click",t[5]),l=!0)},p(u,a){a&19&&(s=K(u[0]?u[4]:u[4].filter(u[9])),n=ke(n,a,i,1,u,s,r,e,Fe,xn,null,Qn),!s.length&&c?c.p(u,a):s.length?c&&(c.d(1),c=null):(c=Zn(),c.c(),c.m(e,null)))},d(u){u&&S(e);for(let a=0;a<n.length;a+=1)n[a].d();c&&c.d(),l=!1,o()}}}function Oo(t){let e,n,r={class:"_3pEZc",clickToggle:!0,$$slots:{content:[No],default:[Mo]},$$scope:{ctx:t}};return e=new $r({props:r}),t[12](e),{c(){N(e.$$.fragment)},m(l,o){L(e,l,o),n=!0},p(l,[o]){const s={};o&32795&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){t[12](null),M(e,l)}}}function tt(t){return`${t.title}${t.subtitle?`:${t.subtitle}`:""}`}function Bo(t,e,n){let r;J(t,$e,h=>n(4,r=h));let{categoryId:l}=e,o,s;function i(){n(0,l=""),n(1,u="")}let c=l?r.find(h=>h.id===l):null,{value:u=c?tt(c):""}=e;function a(h){if(h.target instanceof HTMLLIElement){n(0,l=h.target.dataset.id),o.close();const y=r.find(w=>w.id===l);y&&n(1,u=tt(y))}}function f(){const h=r.find(y=>s.value.trim().toLocaleLowerCase()===tt(y).toLocaleLowerCase());h?(n(0,l=h.id),n(3,s.value=tt(h),s)):n(0,l="")}const d=h=>`${h.title}:${h.subtitle}`.toLowerCase().includes(u.trim().toLowerCase());function _(h){Z[h?"unshift":"push"](()=>{s=h,n(3,s)})}function g(){u=this.value,n(1,u)}function b(h){Z[h?"unshift":"push"](()=>{o=h,n(2,o)})}return t.$$set=h=>{"categoryId"in h&&n(0,l=h.categoryId),"value"in h&&n(1,u=h.value)},[l,u,o,s,r,a,f,c,i,d,_,g,b]}class Ro extends V{constructor(e){super(),U(this,e,Bo,Oo,z,{categoryId:0,clear:8,value:1})}get clear(){return this.$$.ctx[8]}}function Go(t){let e,n,r;return{c(){e=ce("svg"),n=ce("path"),r=ce("path"),m(n,"d","M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z"),m(r,"d","M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"fill","currentColor"),m(e,"viewBox","0 0 16 16")},m(l,o){I(l,e,o),p(e,n),p(e,r)},p(l,[o]){o&1&&m(e,"width",l[0]),o&1&&m(e,"height",l[0])},i:A,o:A,d(l){l&&S(e)}}}function Ho(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Fo extends V{constructor(e){super(),U(this,e,Ho,Go,z,{size:0})}}function zo(t){let e,n,r,l,o,s,i,c,u,a,f,d,_,g,b,h,y;return a=new Fo({props:{size:24}}),{c(){e=$("div"),n=$("div"),n.innerHTML='<span data-key="1">1</span> <span data-key="2">2</span> <span data-key="3">3</span>',r=T(),l=$("div"),l.innerHTML='<span data-key="4">4</span> <span data-key="5">5</span> <span data-key="6">6</span>',o=T(),s=$("div"),s.innerHTML='<span data-key="7">7</span> <span data-key="8">8</span> <span data-key="9">9</span>',i=T(),c=$("div"),u=$("span"),N(a.$$.fragment),f=T(),d=$("span"),d.textContent="0",_=T(),g=$("span"),g.textContent=".",m(u,"data-key","<"),m(d,"data-key","0"),m(g,"data-key","."),m(e,"class","_3QCzM")},m(w,E){I(w,e,E),p(e,n),p(e,r),p(e,l),p(e,o),p(e,s),p(e,i),p(e,c),p(c,u),L(a,u,null),p(c,f),p(c,d),p(c,_),p(c,g),b=!0,h||(y=[F(e,"pointerdown",ve(t[2])),F(e,"pointerup",t[0])],h=!0)},p:A,i(w){b||(v(a.$$.fragment,w),b=!0)},o(w){k(a.$$.fragment,w),b=!1},d(w){w&&S(e),M(a),h=!1,se(y)}}}function Uo(t,e,n){let{onkey:r}=e;function l(s){s.target instanceof HTMLSpanElement&&s.target.dataset.key&&r(s.target.dataset.key)}function o(s){Et.call(this,t,s)}return t.$$set=s=>{"onkey"in s&&n(1,r=s.onkey)},[l,r,o]}class Vo extends V{constructor(e){super(),U(this,e,Uo,zo,z,{onkey:1})}}function qo(t){let e,n,r,l,o,s,i,c,u,a,f;function d(b){t[24](b)}function _(b){t[26](b)}let g={};return t[8]!==void 0&&(g.categoryId=t[8]),t[6]!==void 0&&(g.value=t[6]),n=new Ro({props:g}),Z.push(()=>he(n,"categoryId",d)),t[25](n),Z.push(()=>he(n,"value",_)),{c(){e=$("div"),N(n.$$.fragment),o=T(),s=$("button"),i=j("Clear"),m(s,"type","button"),s.disabled=c=!t[8],m(e,"class","_36ncL")},m(b,h){I(b,e,h),L(n,e,null),p(e,o),p(e,s),p(s,i),u=!0,a||(f=F(s,"click",Ar(t[16])),a=!0)},p(b,h){const y={};!r&&h[0]&256&&(r=!0,y.categoryId=b[8],me(()=>r=!1)),!l&&h[0]&64&&(l=!0,y.value=b[6],me(()=>l=!1)),n.$set(y),(!u||h[0]&256&&c!==(c=!b[8]))&&(s.disabled=c)},i(b){u||(v(n.$$.fragment,b),u=!0)},o(b){k(n.$$.fragment,b),u=!1},d(b){b&&S(e),t[25](null),M(n),a=!1,f()}}}function Yo(t){let e,n,r;function l(s){t[23](s)}let o={placeholder:"To"};return t[1]!==void 0&&(o.accountId=t[1]),e=new Do({props:o}),Z.push(()=>he(e,"accountId",l)),{c(){N(e.$$.fragment)},m(s,i){L(e,s,i),r=!0},p(s,i){const c={};!n&&i[0]&2&&(n=!0,c.accountId=s[1],me(()=>n=!1)),e.$set(c)},i(s){r||(v(e.$$.fragment,s),r=!0)},o(s){k(e.$$.fragment,s),r=!1},d(s){M(e,s)}}}function er(t){var u;let e,n,r=((u=t[2])==null?void 0:u.currencyCode)+"",l,o,s,i,c;return{c(){e=$("div"),n=j("Amount, "),l=j(r),o=j(`:
      `),s=$("input"),m(s,"class","_3qKgQ"),m(s,"type","text")},m(a,f){I(a,e,f),p(e,n),p(e,l),p(e,o),p(e,s),q(s,t[13]),i||(c=F(s,"input",t[29]),i=!0)},p(a,f){var d;f[0]&4&&r!==(r=((d=a[2])==null?void 0:d.currencyCode)+"")&&G(l,r),f[0]&8192&&s.value!==a[13]&&q(s,a[13])},d(a){a&&S(e),i=!1,c()}}}function Ko(t){var zt;let e,n,r,l,o,s,i,c,u,a,f,d,_,g,b=((zt=t[3])==null?void 0:zt.currencyCode)+"",h,y,w,E,C,D,B,O,R,P,W,Se,Ie,ye,Ze,ze,Ee,Me=t[0]?"Save":"Create",Ue,_e,Ve,xe;function Y(X){t[21](X)}let et={};t[7]!==void 0&&(et.kind=t[7]),r=new Lo({props:et}),Z.push(()=>he(r,"kind",Y));const qe=[Yo,qo],de=[];function $t(X,oe){return X[7]===le.Transfer?0:1}a=$t(t),f=de[a]=qe[a](t);let x=t[14]&&er(t);return ye=new Vo({props:{onkey:t[17]}}),{c(){e=$("form"),n=$("div"),N(r.$$.fragment),o=T(),s=$("div"),i=$("input"),c=T(),u=$("div"),f.c(),d=T(),_=$("div"),g=j("Amount, "),h=j(b),y=j(`:
    `),w=$("input"),E=T(),x&&x.c(),C=T(),D=$("div"),B=$("input"),O=T(),R=$("div"),P=$("label"),W=$("input"),Se=j(`
      Reconciled`),Ie=T(),N(ye.$$.fragment),Ze=T(),ze=$("div"),Ee=$("button"),Ue=j(Me),m(i,"class","_3qKgQ"),m(i,"type","datetime-local"),m(w,"class","_3qKgQ"),m(w,"type","text"),ie(w,"_2YSkZ",!dt(t[12])),m(B,"class","_3qKgQ"),m(B,"type","text"),m(B,"placeholder","Comment"),m(W,"type","checkbox"),m(P,"class","xwEhV"),m(Ee,"class","_36-gn _-wwrS"),m(Ee,"type","submit"),m(e,"class","_1rZU2")},m(X,oe){I(X,e,oe),p(e,n),L(r,n,null),p(e,o),p(e,s),p(s,i),q(i,t[11]),p(e,c),p(e,u),de[a].m(u,null),p(e,d),p(e,_),p(_,g),p(_,h),p(_,y),p(_,w),q(w,t[12]),t[28](w),p(e,E),x&&x.m(e,null),p(e,C),p(e,D),p(D,B),q(B,t[9]),p(e,O),p(e,R),p(R,P),p(P,W),W.checked=t[10],p(P,Se),p(e,Ie),L(ye,e,null),p(e,Ze),p(e,ze),p(ze,Ee),p(Ee,Ue),_e=!0,Ve||(xe=[F(i,"input",t[22]),F(w,"input",t[27]),F(B,"input",t[30]),F(W,"change",t[31]),F(e,"submit",ve(t[15]))],Ve=!0)},p(X,oe){var Vt;const Ut={};!l&&oe[0]&128&&(l=!0,Ut.kind=X[7],me(()=>l=!1)),r.$set(Ut),oe[0]&2048&&q(i,X[11]);let yt=a;a=$t(X),a===yt?de[a].p(X,oe):(ne(),k(de[yt],1,1,()=>{de[yt]=null}),re(),f=de[a],f?f.p(X,oe):(f=de[a]=qe[a](X),f.c()),v(f,1),f.m(u,null)),(!_e||oe[0]&8)&&b!==(b=((Vt=X[3])==null?void 0:Vt.currencyCode)+"")&&G(h,b),oe[0]&4096&&w.value!==X[12]&&q(w,X[12]),(!_e||oe[0]&4096)&&ie(w,"_2YSkZ",!dt(X[12])),X[14]?x?x.p(X,oe):(x=er(X),x.c(),x.m(e,C)):x&&(x.d(1),x=null),oe[0]&512&&B.value!==X[9]&&q(B,X[9]),oe[0]&1024&&(W.checked=X[10]),(!_e||oe[0]&1)&&Me!==(Me=X[0]?"Save":"Create")&&G(Ue,Me)},i(X){_e||(v(r.$$.fragment,X),v(f),v(ye.$$.fragment,X),_e=!0)},o(X){k(r.$$.fragment,X),k(f),k(ye.$$.fragment,X),_e=!1},d(X){X&&S(e),M(r),de[a].d(),t[28](null),x&&x.d(),M(ye),Ve=!1,se(xe)}}}function Xo(t,e,n){let r,l,o,s,i,c;J(t,$e,Y=>n(32,i=Y)),J(t,ue,Y=>n(20,c=Y));let{accountId:u}=e,{transactionDoc:a=null}=e,f,d,_;Qe(()=>{});let{kind:g=le.Expense,categoryId:b,secondAccountId:h,comment:y="",reconciled:w=!1}=a||{},E=Jl(new Date((a==null?void 0:a.timestamp)||Date.now())),C=a?Q(a.amount):"",D=a?Q(a.secondAmount):"";const B=je();async function O(){const Y=R();if(Y){alert(Y);return}if(g!==le.Transfer&&!b&&_.trim()!==""){const[qe,de=""]=_.trim().split(":");if(!i.find(x=>x.title===qe&&x.subtitle===de)){const x=await mr(qe,de);n(8,b=x.id)}}const et=g===le.Transfer?{kind:g,timestamp:new Date(E).getTime(),accountId:u,secondAccountId:h,...s?{secondAmount:It(D)}:{},amount:It(C),comment:y.trim(),...w?{reconciled:!0}:{}}:{kind:g,timestamp:new Date(E).getTime(),accountId:u,categoryId:b||null,amount:It(C),comment:y.trim(),...w?{reconciled:!0}:{}};B("save",{params:et})}function R(){if(!dt(C))return"Invalid amount";if(g===le.Transfer){if(!h)return"Must choose the second account";if(h===u)return"Cannot transfer to the same account";if(s&&!dt(D))return"Invalid second amount"}return""}function P(){f.clear()}function W(Y){Y==="<"?n(12,C=C.substring(0,C.length-1)):n(12,C+=Y)}function Se(Y){g=Y,n(7,g)}function Ie(){E=this.value,n(11,E)}function ye(Y){h=Y,n(1,h)}function Ze(Y){b=Y,n(8,b)}function ze(Y){Z[Y?"unshift":"push"](()=>{f=Y,n(4,f)})}function Ee(Y){_=Y,n(6,_)}function Me(){C=this.value,n(12,C)}function Ue(Y){Z[Y?"unshift":"push"](()=>{d=Y,n(5,d)})}function _e(){D=this.value,n(13,D)}function Ve(){y=this.value,n(9,y)}function xe(){w=this.checked,n(10,w)}return t.$$set=Y=>{"accountId"in Y&&n(18,u=Y.accountId),"transactionDoc"in Y&&n(0,a=Y.transactionDoc)},t.$$.update=()=>{t.$$.dirty[0]&1310720&&n(3,r=c.find(Y=>Y.id===u)),t.$$.dirty[0]&8&&n(19,l=r==null?void 0:r.currencyCode),t.$$.dirty[0]&1048578&&n(2,o=h?c.find(Y=>Y.id===h):null),t.$$.dirty[0]&524292&&n(14,s=o&&l?o.currencyCode!==l:!1)},[a,h,o,r,f,d,_,g,b,y,w,E,C,D,s,O,P,W,u,l,c,Se,Ie,ye,Ze,ze,Ee,Me,Ue,_e,Ve,xe]}class vr extends V{constructor(e){super(),U(this,e,Xo,Ko,z,{accountId:18,transactionDoc:0},null,[-1,-1])}}function Jo(t){let e,n;return e=new vr({props:{accountId:t[2]}}),e.$on("save",t[6]),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function Wo(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:xo,then:Zo,catch:Qo,blocks:[,,,]};return ir(t[5](t[3]),r),{c(){e=te(),r.block.c()},m(l,o){I(l,e,o),r.block.m(l,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(l,o){t=l,Nr(r,t,o)},i(l){n||(v(r.block),n=!0)},o(l){for(let o=0;o<3;o+=1){const s=r.blocks[o];k(s)}n=!1},d(l){l&&S(e),r.block.d(l),r.token=null,r=null}}}function Qo(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function Zo(t){let e,n;return e=new vr({props:{accountId:t[2],transactionDoc:t[0]}}),e.$on("save",t[6]),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const o={};l&1&&(o.transactionDoc=r[0]),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function xo(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function ei(t){let e,n,r,l;const o=[Wo,Jo],s=[];function i(c,u){return c[3]?0:1}return e=i(t),n=s[e]=o[e](t),{c(){n.c(),r=te()},m(c,u){s[e].m(c,u),I(c,r,u),l=!0},p(c,u){n.p(c,u)},i(c){l||(v(n),l=!0)},o(c){k(n),l=!1},d(c){c&&S(r),s[e].d(c)}}}function ti(t){let e,n;return e=new ae({props:{slot:"header",title:t[1]?`${t[1].title}: Transaction`:"Transaction",returnPath:`/accounts/${t[2]}`,menuItems:t[4]}}),e.$on("menu",t[9]),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const o={};l&2&&(o.title=r[1]?`${r[1].title}: Transaction`:"Transaction"),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function ni(t){let e,n;return e=new fe({props:{$$slots:{header:[ti],default:[ei]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const o={};l&1027&&(o.$$scope={dirty:l,ctx:r}),e.$set(o)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function ri(t,e,n){let r,l;J(t,ue,_=>n(8,l=_));let{params:o}=e;const{id:s,tid:i}=o;let c;const u=i?[{id:"delete",title:"Delete"}]:null;async function a(_){n(0,c=await fl(_))}function f(_){i?il(c,_.detail.params).then(()=>{ee(`/accounts/${s}`)}):$l(_.detail.params).then(()=>{ee(`/accounts/${s}`)})}const d=_=>{switch(_.detail.id){case"delete":if(!confirm("Delete transaction?"))return!1;i&&ol(i).then(()=>{ee(`/accounts/${s}`)});break}};return t.$$set=_=>{"params"in _&&n(7,o=_.params)},t.$$.update=()=>{t.$$.dirty&256&&n(1,r=l.find(_=>_.id===s))},[c,r,s,i,u,a,f,o,l,d]}class tr extends V{constructor(e){super(),U(this,e,ri,ni,z,{params:7})}}function li(t){let e,n,r=t[0].wild+"",l;return{c(){e=$("div"),n=j("Page Not Found: /"),l=j(r)},m(o,s){I(o,e,s),p(e,n),p(e,l)},p(o,[s]){s&1&&r!==(r=o[0].wild+"")&&G(l,r)},i:A,o:A,d(o){o&&S(e)}}}function si(t,e,n){let{params:r={}}=e;return t.$$set=l=>{"params"in l&&n(0,r=l.params)},[r]}class oi extends V{constructor(e){super(),U(this,e,si,li,z,{params:0})}}const ii={"/":ms,"/groups":ys,"/groups/new":bn,"/groups/:id":bn,"/accounts/new":wn,"/accounts/:id/edit":wn,"/accounts/:id":qs,"/accounts/:id/transactions/new":tr,"/accounts/:id/transactions/:tid":tr,"/categories":Ws,"/categories/new":Un,"/categories/:id":Un,"/currencies":oo,"/rates":fo,"/report":$o,"/currencies/new":Vn,"/currencies/:cid":Vn,"/settings":to,"*":oi};function ci(t){return{c:A,m:A,i:A,o:A,d:A}}function ui(t){let e,n;return e=new qr({props:{routes:ii}}),{c(){N(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){M(e,r)}}}function ai(t){return{c:A,m:A,i:A,o:A,d:A}}function fi(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:ai,then:ui,catch:ci,blocks:[,,,]};return ir(vl,r),{c(){e=te(),r.block.c()},m(l,o){I(l,e,o),r.block.m(l,r.anchor=o),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(l,[o]){t=l},i(l){n||(v(r.block),n=!0)},o(l){for(let o=0;o<3;o+=1){const s=r.blocks[o];k(s)}n=!1},d(l){l&&S(e),r.block.d(l),r.token=null,r=null}}}class di extends V{constructor(e){super(),U(this,e,null,fi,z,{})}}new di({target:document.getElementById("app")});
