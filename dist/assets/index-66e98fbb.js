var kr=Object.defineProperty;var Cr=(t,e,n)=>e in t?kr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var wt=(t,e,n)=>(Cr(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function D(){}function Mt(t,e){for(const n in e)t[n]=e[n];return t}function Ir(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function rr(t){return t()}function Yt(){return Object.create(null)}function oe(t){t.forEach(rr)}function We(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Sr(t){return Object.keys(t).length===0}function Nt(t,...e){if(t==null){for(const r of e)r(void 0);return D}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Kt(t){let e;return Nt(t,n=>e=n)(),e}function W(t,e,n){t.$$.on_destroy.push(Nt(e,n))}function rt(t,e,n,r){if(t){const l=lr(t,e,n,r);return t[0](l)}}function lr(t,e,n,r){return t[1]&&r?Mt(n.ctx.slice(),t[1](r(e))):n.ctx}function lt(t,e,n,r){if(t[2]&&r){const l=t[2](r(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const s=[],o=Math.max(e.dirty.length,l.length);for(let i=0;i<o;i+=1)s[i]=e.dirty[i]|l[i];return s}return e.dirty|l}return e.dirty}function ot(t,e,n,r,l,s){if(l){const o=lr(e,n,r,s);t.p(o,l)}}function st(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Er(t,e,n){return t.set(n),e}function _t(t){return t&&We(t.destroy)?t.destroy:D}function p(t,e){t.appendChild(e)}function A(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function be(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function ue(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function M(t){return document.createTextNode(t)}function j(){return M(" ")}function te(){return M("")}function F(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function ke(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Ar(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Tr(t){return Array.from(t.childNodes)}function G(t,e){e=""+e,t.data!==e&&(t.data=e)}function q(t,e){t.value=e??""}function Ge(t,e,n){for(let r=0;r<t.options.length;r+=1){const l=t.options[r];if(l.__value===e){l.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ot(t){const e=t.querySelector(":checked");return e&&e.__value}function ie(t,e,n){t.classList.toggle(e,!!n)}function Dr(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function it(t,e){return new t(e)}let Ke;function me(t){Ke=t}function Je(){if(!Ke)throw new Error("Function called outside component initialization");return Ke}function Ze(t){Je().$$.on_mount.push(t)}function jr(t){Je().$$.after_update.push(t)}function Pr(t){Je().$$.on_destroy.push(t)}function je(){const t=Je();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const s=Dr(e,n,{cancelable:r});return l.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}function Et(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Be=[],Q=[];let Re=[];const At=[],or=Promise.resolve();let Tt=!1;function sr(){Tt||(Tt=!0,or.then(Bt))}function ir(){return sr(),or}function He(t){Re.push(t)}function he(t){At.push(t)}const vt=new Set;let Ne=0;function Bt(){if(Ne!==0)return;const t=Ke;do{try{for(;Ne<Be.length;){const e=Be[Ne];Ne++,me(e),Lr(e.$$)}}catch(e){throw Be.length=0,Ne=0,e}for(me(null),Be.length=0,Ne=0;Q.length;)Q.pop()();for(let e=0;e<Re.length;e+=1){const n=Re[e];vt.has(n)||(vt.add(n),n())}Re.length=0}while(Be.length);for(;At.length;)At.pop()();Tt=!1,vt.clear(),me(t)}function Lr(t){if(t.fragment!==null){t.update(),oe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(He)}}function Mr(t){const e=[],n=[];Re.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Re=e}const nt=new Set;let Ae;function ne(){Ae={r:0,c:[],p:Ae}}function re(){Ae.r||oe(Ae.c),Ae=Ae.p}function v(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function I(t,e,n,r){if(t&&t.o){if(nt.has(t))return;nt.add(t),Ae.c.push(()=>{nt.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function cr(t,e){const n=e.token={};function r(l,s,o,i){if(e.token!==n)return;e.resolved=i;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=i);const u=l&&(e.current=l)(c);let a=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==s&&f&&(ne(),I(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),re())}):e.block.d(1),u.c(),v(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[s]=u),a&&Bt()}if(Ir(t)){const l=Je();if(t.then(s=>{me(l),r(e.then,1,e.value,s),me(null)},s=>{if(me(l),r(e.catch,2,e.error,s),me(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function Nr(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function K(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ze(t,e){t.d(1),e.delete(t.key)}function ur(t,e){I(t,1,1,()=>{e.delete(t.key)})}function Ce(t,e,n,r,l,s,o,i,c,u,a,f){let d=t.length,_=s.length,g=d;const b={};for(;g--;)b[t[g].key]=g;const h=[],$=new Map,C=new Map,k=[];for(g=_;g--;){const P=f(l,s,g),N=n(P);let L=o.get(N);L?r&&k.push(()=>L.p(P,e)):(L=u(N,P),L.c()),$.set(N,h[g]=L),N in b&&C.set(N,Math.abs(g-b[N]))}const w=new Set,S=new Set;function T(P){v(P,1),P.m(i,a),o.set(P.key,P),a=P.first,_--}for(;d&&_;){const P=h[_-1],N=t[d-1],L=P.key,J=N.key;P===N?(a=P.first,d--,_--):$.has(J)?!o.has(L)||w.has(L)?T(P):S.has(J)?d--:C.get(L)>C.get(J)?(S.add(L),T(P)):(w.add(J),d--):(c(N,o),d--)}for(;d--;){const P=t[d];$.has(P.key)||c(P,o)}for(;_;)T(h[_-1]);return oe(k),h}function ct(t,e){const n={},r={},l={$$scope:1};let s=t.length;for(;s--;){const o=t[s],i=e[s];if(i){for(const c in o)c in i||(r[c]=1);for(const c in i)l[c]||(n[c]=i[c],l[c]=1);t[s]=i}else for(const c in o)l[c]=1}for(const o in r)o in n||(n[o]=void 0);return n}function ut(t){return typeof t=="object"&&t!==null?t:{}}function ge(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function R(t){t&&t.c()}function O(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),He(()=>{const s=t.$$.on_mount.map(rr).filter(We);t.$$.on_destroy?t.$$.on_destroy.push(...s):oe(s),t.$$.on_mount=[]}),l.forEach(He)}function B(t,e){const n=t.$$;n.fragment!==null&&(Mr(n.after_update),oe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Or(t,e){t.$$.dirty[0]===-1&&(Be.push(t),sr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function U(t,e,n,r,l,s,o=null,i=[-1]){const c=Ke;me(t);const u=t.$$={fragment:null,ctx:[],props:s,update:D,not_equal:l,bound:Yt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Yt(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(f,d,..._)=>{const g=_.length?_[0]:d;return u.ctx&&l(u.ctx[f],u.ctx[f]=g)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](g),a&&Or(t,f)),d}):[],u.update(),a=!0,oe(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=Tr(e.target);u.fragment&&u.fragment.l(f),f.forEach(E)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),O(t,e.target,e.anchor),Bt()}me(c)}class V{constructor(){wt(this,"$$");wt(this,"$$set")}$destroy(){B(this,1),this.$destroy=D}$on(e,n){if(!We(n))return D;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!Sr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Br="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Br);const Oe=[];function ar(t,e){return{subscribe:ye(t,e).subscribe}}function ye(t,e=D){let n;const r=new Set;function l(i){if(z(t,i)&&(t=i,n)){const c=!Oe.length;for(const u of r)u[1](),Oe.push(u,t);if(c){for(let u=0;u<Oe.length;u+=2)Oe[u][0](Oe[u+1]);Oe.length=0}}}function s(i){l(i(t))}function o(i,c=D){const u=[i,c];return r.add(u),r.size===1&&(n=e(l,s)||D),i(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:l,update:s,subscribe:o}}function fr(t,e,n){const r=!Array.isArray(t),l=r?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return ar(n,(o,i)=>{let c=!1;const u=[];let a=0,f=D;const d=()=>{if(a)return;f();const g=e(r?u[0]:u,o,i);s?o(g):f=We(g)?g:D},_=l.map((g,b)=>Nt(g,h=>{u[b]=h,a&=~(1<<b),c&&d()},()=>{a|=1<<b}));return c=!0,d(),function(){oe(_),f(),c=!1}})}function Rr(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,l,s,o=[],i="",c=t.split("/");for(c[0]||c.shift();l=c.shift();)n=l[0],n==="*"?(o.push("wild"),i+="/(.*)"):n===":"?(r=l.indexOf("?",1),s=l.indexOf(".",1),o.push(l.substring(1,~r?r:~s?s:l.length)),i+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(i+=(~r?"?":"")+"\\"+l.substring(s))):i+="/"+l;return{keys:o,pattern:new RegExp("^"+i+(e?"(?=$|/)":"/?$"),"i")}}function Gr(t){let e,n,r;const l=[t[2]];var s=t[0];function o(i,c){let u={};if(c!==void 0&&c&4)u=ct(l,[ut(i[2])]);else for(let a=0;a<l.length;a+=1)u=Mt(u,l[a]);return{props:u}}return s&&(e=it(s,o(t)),e.$on("routeEvent",t[7])),{c(){e&&R(e.$$.fragment),n=te()},m(i,c){e&&O(e,i,c),A(i,n,c),r=!0},p(i,c){if(c&1&&s!==(s=i[0])){if(e){ne();const u=e;I(u.$$.fragment,1,0,()=>{B(u,1)}),re()}s?(e=it(s,o(i,c)),e.$on("routeEvent",i[7]),R(e.$$.fragment),v(e.$$.fragment,1),O(e,n.parentNode,n)):e=null}else if(s){const u=c&4?ct(l,[ut(i[2])]):{};e.$set(u)}},i(i){r||(e&&v(e.$$.fragment,i),r=!0)},o(i){e&&I(e.$$.fragment,i),r=!1},d(i){i&&E(n),e&&B(e,i)}}}function Hr(t){let e,n,r;const l=[{params:t[1]},t[2]];var s=t[0];function o(i,c){let u={};if(c!==void 0&&c&6)u=ct(l,[c&2&&{params:i[1]},c&4&&ut(i[2])]);else for(let a=0;a<l.length;a+=1)u=Mt(u,l[a]);return{props:u}}return s&&(e=it(s,o(t)),e.$on("routeEvent",t[6])),{c(){e&&R(e.$$.fragment),n=te()},m(i,c){e&&O(e,i,c),A(i,n,c),r=!0},p(i,c){if(c&1&&s!==(s=i[0])){if(e){ne();const u=e;I(u.$$.fragment,1,0,()=>{B(u,1)}),re()}s?(e=it(s,o(i,c)),e.$on("routeEvent",i[6]),R(e.$$.fragment),v(e.$$.fragment,1),O(e,n.parentNode,n)):e=null}else if(s){const u=c&6?ct(l,[c&2&&{params:i[1]},c&4&&ut(i[2])]):{};e.$set(u)}},i(i){r||(e&&v(e.$$.fragment,i),r=!0)},o(i){e&&I(e.$$.fragment,i),r=!1},d(i){i&&E(n),e&&B(e,i)}}}function Fr(t){let e,n,r,l;const s=[Hr,Gr],o=[];function i(c,u){return c[1]?0:1}return e=i(t),n=o[e]=s[e](t),{c(){n.c(),r=te()},m(c,u){o[e].m(c,u),A(c,r,u),l=!0},p(c,[u]){let a=e;e=i(c),e===a?o[e].p(c,u):(ne(),I(o[a],1,1,()=>{o[a]=null}),re(),n=o[e],n?n.p(c,u):(n=o[e]=s[e](c),n.c()),v(n,1),n.m(r.parentNode,r))},i(c){l||(v(n),l=!0)},o(c){I(n),l=!1},d(c){c&&E(r),o[e].d(c)}}}function Xt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const Rt=ar(null,function(e){e(Xt());const n=()=>{e(Xt())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});fr(Rt,t=>t.location);fr(Rt,t=>t.querystring);const Wt=ye(void 0);async function ee(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await ir(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}function Gt(t,e){if(e=Zt(e),!t||!t.tagName||t.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Jt(t,e),{update(n){n=Zt(n),Jt(t,n)}}}function zr(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Jt(t,e){let n=e.href||t.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);t.setAttribute("href",n),t.addEventListener("click",r=>{r.preventDefault(),e.disabled||Ur(r.currentTarget.getAttribute("href"))})}function Zt(t){return t&&typeof t=="string"?{href:t}:t||{}}function Ur(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=t}function Vr(t,e,n){let{routes:r={}}=e,{prefix:l=""}=e,{restoreScrollState:s=!1}=e;class o{constructor(S,T){if(!T||typeof T!="function"&&(typeof T!="object"||T._sveltesparouter!==!0))throw Error("Invalid component object");if(!S||typeof S=="string"&&(S.length<1||S.charAt(0)!="/"&&S.charAt(0)!="*")||typeof S=="object"&&!(S instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:P,keys:N}=Rr(S);this.path=S,typeof T=="object"&&T._sveltesparouter===!0?(this.component=T.component,this.conditions=T.conditions||[],this.userData=T.userData,this.props=T.props||{}):(this.component=()=>Promise.resolve(T),this.conditions=[],this.props={}),this._pattern=P,this._keys=N}match(S){if(l){if(typeof l=="string")if(S.startsWith(l))S=S.substr(l.length)||"/";else return null;else if(l instanceof RegExp){const L=S.match(l);if(L&&L[0])S=S.substr(L[0].length)||"/";else return null}}const T=this._pattern.exec(S);if(T===null)return null;if(this._keys===!1)return T;const P={};let N=0;for(;N<this._keys.length;){try{P[this._keys[N]]=decodeURIComponent(T[N+1]||"")||null}catch{P[this._keys[N]]=null}N++}return P}async checkConditions(S){for(let T=0;T<this.conditions.length;T++)if(!await this.conditions[T](S))return!1;return!0}}const i=[];r instanceof Map?r.forEach((w,S)=>{i.push(new o(S,w))}):Object.keys(r).forEach(w=>{i.push(new o(w,r[w]))});let c=null,u=null,a={};const f=je();async function d(w,S){await ir(),f(w,S)}let _=null,g=null;s&&(g=w=>{w.state&&(w.state.__svelte_spa_router_scrollY||w.state.__svelte_spa_router_scrollX)?_=w.state:_=null},window.addEventListener("popstate",g),jr(()=>{zr(_)}));let b=null,h=null;const $=Rt.subscribe(async w=>{b=w;let S=0;for(;S<i.length;){const T=i[S].match(w.location);if(!T){S++;continue}const P={route:i[S].path,location:w.location,querystring:w.querystring,userData:i[S].userData,params:T&&typeof T=="object"&&Object.keys(T).length?T:null};if(!await i[S].checkConditions(P)){n(0,c=null),h=null,d("conditionsFailed",P);return}d("routeLoading",Object.assign({},P));const N=i[S].component;if(h!=N){N.loading?(n(0,c=N.loading),h=N,n(1,u=N.loadingParams),n(2,a={}),d("routeLoaded",Object.assign({},P,{component:c,name:c.name,params:u}))):(n(0,c=null),h=null);const L=await N();if(w!=b)return;n(0,c=L&&L.default||L),h=N}T&&typeof T=="object"&&Object.keys(T).length?n(1,u=T):n(1,u=null),n(2,a=i[S].props),d("routeLoaded",Object.assign({},P,{component:c,name:c.name,params:u})).then(()=>{Wt.set(u)});return}n(0,c=null),h=null,Wt.set(void 0)});Pr(()=>{$(),g&&window.removeEventListener("popstate",g)});function C(w){Et.call(this,t,w)}function k(w){Et.call(this,t,w)}return t.$$set=w=>{"routes"in w&&n(3,r=w.routes),"prefix"in w&&n(4,l=w.prefix),"restoreScrollState"in w&&n(5,s=w.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=s?"manual":"auto")},[c,u,a,r,l,s,C,k]}class qr extends V{constructor(e){super(),U(this,e,Vr,Fr,z,{routes:3,prefix:4,restoreScrollState:5})}}const Yr=(t,e)=>e.some(n=>t instanceof n);let Qt,xt;function Kr(){return Qt||(Qt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xr(){return xt||(xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dr=new WeakMap,Dt=new WeakMap,_r=new WeakMap,kt=new WeakMap,Ht=new WeakMap;function Wr(t){const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ve(t.result)),l()},o=()=>{r(t.error),l()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dr.set(n,t)}).catch(()=>{}),Ht.set(e,t),e}function Jr(t){if(Dt.has(t))return;const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),l()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Dt.set(t,e)}let jt={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dt.get(t);if(e==="objectStoreNames")return t.objectStoreNames||_r.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ve(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Zr(t){jt=t(jt)}function Qr(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ct(this),e,...n);return _r.set(r,e.sort?e.sort():[e]),ve(r)}:Xr().includes(t)?function(...e){return t.apply(Ct(this),e),ve(dr.get(this))}:function(...e){return ve(t.apply(Ct(this),e))}}function xr(t){return typeof t=="function"?Qr(t):(t instanceof IDBTransaction&&Jr(t),Yr(t,Kr())?new Proxy(t,jt):t)}function ve(t){if(t instanceof IDBRequest)return Wr(t);if(kt.has(t))return kt.get(t);const e=xr(t);return e!==t&&(kt.set(t,e),Ht.set(e,t)),e}const Ct=t=>Ht.get(t);function el(t,e,{blocked:n,upgrade:r,blocking:l,terminated:s}={}){const o=indexedDB.open(t,e),i=ve(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ve(o.result),c.oldVersion,c.newVersion,ve(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),i.then(c=>{s&&c.addEventListener("close",()=>s()),l&&c.addEventListener("versionchange",u=>l(u.oldVersion,u.newVersion,u))}).catch(()=>{}),i}const tl=["get","getKey","getAll","getAllKeys","count"],nl=["put","add","delete","clear"],It=new Map;function en(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(It.get(e))return It.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=nl.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||tl.includes(n)))return;const s=async function(o,...i){const c=this.transaction(o,l?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(i.shift())),(await Promise.all([u[n](...i),l&&c.done]))[0]};return It.set(e,s),s}Zr(t=>({...t,get:(e,n,r)=>en(e,n)||t.get(e,n,r),has:(e,n)=>!!en(e,n)||t.has(e,n)}));let Te=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");var le=(t=>(t.Expense="EXPENSE",t.Income="INCOME",t.Transfer="TRANSFER",t))(le||{});const ce=ye([]),Ie=ye([]),$e=ye([]),Pe=ye([]),pr=ye([]),Fe=ye(""),pt=ye({}),tn=[{value:le.Expense,title:"Expense"},{value:le.Transfer,title:"Transfer"},{value:le.Income,title:"Income"}],at="baseCurrencyCode";let H;const rl=el("acc",3,{upgrade(t,e,n,r){if(t.objectStoreNames.contains("accountGroups")||t.createObjectStore("accountGroups",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("accounts")||t.createObjectStore("accounts",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("currencies")||t.createObjectStore("currencies",{keyPath:"code"}),t.objectStoreNames.contains("categories")||t.createObjectStore("categories",{keyPath:"id"}).createIndex("title",["title","subtitle"]),t.objectStoreNames.contains("entries")||t.createObjectStore("entries",{keyPath:"id"}).createIndex("accountId","accountId"),!t.objectStoreNames.contains("transactions"))t.createObjectStore("transactions",{keyPath:"id"}).createIndex("timestamp","timestamp");else{const l=r.objectStore("transactions");console.log("store already exists, creating index"),l.createIndex("timestamp","timestamp")}t.objectStoreNames.contains("settings")||t.createObjectStore("settings",{keyPath:"name"}),t.objectStoreNames.contains("rates")||t.createObjectStore("rates",{keyPath:"code"})}}).then(t=>{H=t});function Le(){return H.getAllFromIndex("accounts","title")}function ll(t){return H.get("accounts",t)}async function ol(t){await H.put("accounts",t),ce.set(await Le())}async function sl(t){const e=await H.get("transactions",t);await Promise.all([H.delete("transactions",t),H.delete("entries",e.entryId),e.secondEntryId?H.delete("entries",e.secondEntryId):null]),await Promise.all([De(e.accountId),e.secondAccountId?De(e.secondAccountId):null]),ce.set(await Le())}async function il(t,e){const[n,r]=await Promise.all([H.get("entries",t.entryId),t.secondEntryId?H.get("entries",t.secondEntryId):null]),[l,s,o]=br(e,t.id,n.id,r?r.id:Te(5));await Promise.all([H.put("transactions",l),H.put("entries",s),o?r?H.put("entries",o):H.add("entries",o):r?H.delete("entries",r.id):null]);const[i,c]=await Promise.all([De(l.accountId),l.secondAccountId?De(l.secondAccountId):null,t.secondAccountId&&t.secondAccountId!==e.secondAccountId?De(t.secondAccountId):null]);(i||c)&&ce.set(await Le())}function mt(){return H.getAllFromIndex("accountGroups","title")}function ht(){return H.getAllFromIndex("categories","title")}function gt(){return H.getAll("currencies")}function cl(){return H.getAll("settings")}async function ul(){return(await H.getAll("rates")).reduce((e,n)=>(e[n.code]=n.rate,e),{})}async function mr(t,e=!0){return(await H.getAllFromIndex("entries","accountId",t)).sort((r,l)=>r.timestamp<l.timestamp?e?1:-1:r.timestamp>l.timestamp?e?-1:1:0)}async function al(t,e){return await H.getAllFromIndex("transactions","timestamp",IDBKeyRange.bound(t,e,!1,!0))}function fl(t){return H.get("transactions",t)}async function dl(t,e){await H.put("accountGroups",{id:Te(5),currencyCode:e,title:t}),Ie.set(await mt())}async function _l(t){await H.put("accountGroups",t),Ie.set(await mt())}async function pl(t,e,n){await H.put("accounts",{id:Te(5),title:t,groupId:e,currencyCode:n,balance:0}),ce.set(await Le())}async function hr(t,e){const n={id:Te(5),title:t,subtitle:e};return await H.put("categories",n),$e.set(await ht()),n}async function gr(t){await H.put("settings",t)}async function ml(t,e){const n={};await H.delete("rates",e),await Promise.all(t.map(r=>(n[r.code]=r.rate,H.put("rates",r)))),pt.set(n)}async function hl(t){await H.put("categories",t),$e.set(await ht())}async function gl(t,e){await H.put("currencies",{code:t,title:e}),Pe.set(await gt())}async function bl(t){await H.put("currencies",t),Pe.set(await gt())}function br({kind:t,accountId:e,timestamp:n,categoryId:r,secondAccountId:l,secondAmount:s,amount:o,comment:i,reconciled:c},u,a,f){const d={id:a,timestamp:n,accountId:e,...r?{categoryId:r}:{},transactionId:u,comment:i,amount:t===le.Income?o:-o,total:0,...c?{reconciled:c}:{}};if(t===le.Transfer){const _={id:f,timestamp:n,accountId:l,transactionId:u,comment:i,amount:s||o,total:0,...c?{reconciled:c}:{}};return[{id:u,kind:t,timestamp:n,accountId:e,secondAccountId:l,amount:o,...s?{secondAmount:s}:{},comment:i,entryId:d.id,secondEntryId:_.id,...c?{reconciled:c}:{}},d,_]}else return[{id:u,kind:t,timestamp:n,accountId:e,...r?{categoryId:r}:{},amount:o,comment:i,entryId:d.id,...c?{reconciled:c}:{}},d]}async function De(t){const e=await mr(t,!1);let n=0;for(const l of e)n+=l.amount,l.total!==n&&await H.put("entries",{...l,total:n});const r=await ll(t);return r.balance!==n?(await H.put("accounts",{...r,balance:n}),!0):!1}async function yl(t){const e=H.transaction(["entries","transactions"],"readwrite"),n=e.objectStore("entries"),r=e.objectStore("transactions"),[l,s,o]=br(t,Te(5),Te(5),Te(5));await Promise.all([r.add(l),n.add(s),...o?[n.add(o)]:[],e.done]);const[i,c]=await Promise.all([De(l.accountId),l.secondAccountId?De(l.secondAccountId):!1]);(i||c)&&ce.set(await Le())}async function yr(){const[t,e,n,r,l,s]=await Promise.all([Le(),mt(),ht(),gt(),cl(),ul()]);Pe.set(r),Ie.set(e),ce.set(t),$e.set(n),pr.set(l);const o=$l(l);Fe.set(o),delete s[o],pt.set(s)}function $l(t){for(const e of t)if(e.name===at)return e.value;return""}async function wl(){await rl,await yr()}const vl=wl();function kl(t){function e(r){r.target instanceof Node&&t.hasAttribute("data-opened")&&(t.contains(r.target)||t.removeAttribute("data-opened"))}function n(r){r.code==="Escape"&&t.hasAttribute("data-opened")&&t.removeAttribute("data-opened")}return document.addEventListener("click",e),document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n),document.removeEventListener("click",e)}}}const Cl=t=>({}),nn=t=>({});function Il(t){let e,n,r,l,s,o,i,c;const u=t[6].default,a=rt(u,t,t[5],null),f=t[6].content,d=rt(f,t,t[5],nn);return{c(){e=y("div"),n=y("div"),a&&a.c(),r=j(),l=y("div"),d&&d.c(),m(n,"class","_2SXNm"),m(l,"class","_27WQU"),m(l,"data-role","popover"),m(e,"class",s="_2LTIc "+t[0])},m(_,g){A(_,e,g),p(e,n),a&&a.m(n,null),p(e,r),p(e,l),d&&d.m(l,null),t[8](e),o=!0,i||(c=[F(n,"click",function(){We(t[1]&&t[7])&&(t[1]&&t[7]).apply(this,arguments)}),_t(kl.call(null,e))],i=!0)},p(_,[g]){t=_,a&&a.p&&(!o||g&32)&&ot(a,u,t,t[5],o?lt(u,t[5],g,null):st(t[5]),null),d&&d.p&&(!o||g&32)&&ot(d,f,t,t[5],o?lt(f,t[5],g,Cl):st(t[5]),nn),(!o||g&1&&s!==(s="_2LTIc "+t[0]))&&m(e,"class",s)},i(_){o||(v(a,_),v(d,_),o=!0)},o(_){I(a,_),I(d,_),o=!1},d(_){_&&E(e),a&&a.d(_),d&&d.d(_),t[8](null),i=!1,oe(c)}}}function Sl(t,e,n){let{$$slots:r={},$$scope:l}=e,s,{class:o=void 0}=e,{clickToggle:i=!0}=e;function c(){s.toggleAttribute("data-opened",!1)}function u(){s.toggleAttribute("data-opened",!0)}const a=()=>{s.toggleAttribute("data-opened")};function f(d){Q[d?"unshift":"push"](()=>{s=d,n(2,s)})}return t.$$set=d=>{"class"in d&&n(0,o=d.class),"clickToggle"in d&&n(1,i=d.clickToggle),"$$scope"in d&&n(5,l=d.$$scope)},[o,i,s,c,u,l,r,a,f]}class $r extends V{constructor(e){super(),U(this,e,Sl,Il,z,{class:0,clickToggle:1,close:3,show:4})}get close(){return this.$$.ctx[3]}get show(){return this.$$.ctx[4]}}function rn(t,e,n){const r=t.slice();return r[3]=e[n],r}function El(t){let e,n=t[3].title+"",r;return{c(){e=y("span"),r=M(n),m(e,"class","_2YoB_")},m(l,s){A(l,e,s),p(e,r)},p(l,s){s&1&&n!==(n=l[3].title+"")&&G(r,n)},d(l){l&&E(e)}}}function Al(t){let e,n=t[3].title+"",r,l,s,o;return{c(){e=y("a"),r=M(n),m(e,"class","_2blFf"),m(e,"href",l=t[3].to),m(e,"draggable",!1)},m(i,c){A(i,e,c),p(e,r),s||(o=_t(Gt.call(null,e)),s=!0)},p(i,c){c&1&&n!==(n=i[3].title+"")&&G(r,n),c&1&&l!==(l=i[3].to)&&m(e,"href",l)},d(i){i&&E(e),s=!1,o()}}}function ln(t,e){let n,r,l,s,o;function i(a,f){return a[3].to?Al:El}let c=i(e),u=c(e);return{key:t,first:null,c(){n=y("li"),u.c(),r=j(),m(n,"class","_161ne"),m(n,"data-id",l=e[3].id),this.first=n},m(a,f){A(a,n,f),u.m(n,null),p(n,r),s||(o=F(n,"click",e[2]),s=!0)},p(a,f){e=a,c===(c=i(e))&&u?u.p(e,f):(u.d(1),u=c(e),u&&(u.c(),u.m(n,r))),f&1&&l!==(l=e[3].id)&&m(n,"data-id",l)},d(a){a&&E(n),u.d(),s=!1,o()}}}function Tl(t){let e,n=[],r=new Map,l=K(t[0]);const s=o=>o[3].id;for(let o=0;o<l.length;o+=1){let i=rn(t,l,o),c=s(i);r.set(c,n[o]=ln(c,i))}return{c(){e=y("ul");for(let o=0;o<n.length;o+=1)n[o].c();m(e,"class","_4OB04")},m(o,i){A(o,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null)},p(o,[i]){i&3&&(l=K(o[0]),n=Ce(n,i,s,1,o,l,r,e,ze,ln,null,rn))},i:D,o:D,d(o){o&&E(e);for(let i=0;i<n.length;i+=1)n[i].d()}}}function Dl(t,e,n){let{items:r=[]}=e;const l=je(),s=o=>{l("menu",{id:o.currentTarget.dataset.id})};return t.$$set=o=>{"items"in o&&n(0,r=o.items)},[r,l,s]}class jl extends V{constructor(e){super(),U(this,e,Dl,Tl,z,{items:0})}}function Pl(t){let e,n,r;return{c(){e=ue("svg"),n=ue("line"),r=ue("polyline"),m(n,"x1","19"),m(n,"y1","12"),m(n,"x2","5"),m(n,"y2","12"),m(r,"points","12 19 5 12 12 5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-arrow-left")},m(l,s){A(l,e,s),p(e,n),p(e,r)},p(l,[s]){s&1&&m(e,"width",l[0]),s&1&&m(e,"height",l[0])},i:D,o:D,d(l){l&&E(e)}}}function Ll(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Ml extends V{constructor(e){super(),U(this,e,Ll,Pl,z,{size:0})}}function Nl(t){let e,n,r;return{c(){e=ue("svg"),n=ue("line"),r=ue("line"),m(n,"x1","12"),m(n,"y1","5"),m(n,"x2","12"),m(n,"y2","19"),m(r,"x1","5"),m(r,"y1","12"),m(r,"x2","19"),m(r,"y2","12"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-plus")},m(l,s){A(l,e,s),p(e,n),p(e,r)},p(l,[s]){s&1&&m(e,"width",l[0]),s&1&&m(e,"height",l[0])},i:D,o:D,d(l){l&&E(e)}}}function Ol(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Bl extends V{constructor(e){super(),U(this,e,Ol,Nl,z,{size:0})}}function Rl(t){let e,n,r,l;return{c(){e=ue("svg"),n=ue("line"),r=ue("line"),l=ue("line"),m(n,"x1","3"),m(n,"y1","12"),m(n,"x2","21"),m(n,"y2","12"),m(r,"x1","3"),m(r,"y1","6"),m(r,"x2","21"),m(r,"y2","6"),m(l,"x1","3"),m(l,"y1","18"),m(l,"x2","21"),m(l,"y2","18"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-menu")},m(s,o){A(s,e,o),p(e,n),p(e,r),p(e,l)},p(s,[o]){o&1&&m(e,"width",s[0]),o&1&&m(e,"height",s[0])},i:D,o:D,d(s){s&&E(e)}}}function Gl(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Hl extends V{constructor(e){super(),U(this,e,Gl,Rl,z,{size:0})}}function on(t){let e,n,r,l,s;return n=new Ml({}),{c(){e=y("a"),R(n.$$.fragment),m(e,"class","_3SB3X"),m(e,"href",t[1]),m(e,"draggable",!1)},m(o,i){A(o,e,i),O(n,e,null),r=!0,l||(s=_t(Gt.call(null,e)),l=!0)},p(o,i){(!r||i&2)&&m(e,"href",o[1])},i(o){r||(v(n.$$.fragment,o),r=!0)},o(o){I(n.$$.fragment,o),r=!1},d(o){o&&E(e),B(n),l=!1,s()}}}function sn(t){let e,n,r,l,s;return n=new Bl({}),{c(){e=y("a"),R(n.$$.fragment),m(e,"class","_3SB3X"),m(e,"href",t[2]),m(e,"draggable",!1)},m(o,i){A(o,e,i),O(n,e,null),r=!0,l||(s=_t(Gt.call(null,e)),l=!0)},p(o,i){(!r||i&4)&&m(e,"href",o[2])},i(o){r||(v(n.$$.fragment,o),r=!0)},o(o){I(n.$$.fragment,o),r=!1},d(o){o&&E(e),B(n),l=!1,s()}}}function cn(t){let e,n,r={class:"_1qXOD",$$slots:{content:[zl],default:[Fl]},$$scope:{ctx:t}};return e=new $r({props:r}),t[7](e),{c(){R(e.$$.fragment)},m(l,s){O(e,l,s),n=!0},p(l,s){const o={};s&280&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){t[7](null),B(e,l)}}}function Fl(t){let e,n;return e=new Hl({}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function zl(t){let e,n;return e=new jl({props:{slot:"content",items:t[3]}}),e.$on("menu",t[6]),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,l){const s={};l&8&&(s.items=r[3]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Ul(t){let e,n,r,l,s,o,i,c,u,a=t[1]&&on(t),f=t[2]&&sn(t),d=t[3]&&cn(t);return{c(){e=y("header"),n=y("div"),a&&a.c(),r=j(),l=y("h1"),s=M(t[0]),o=j(),i=y("div"),f&&f.c(),c=j(),d&&d.c(),m(n,"class","_1J780"),m(l,"class","_17FA5"),m(i,"class","_3ifcR"),m(e,"class","_2Jb6S")},m(_,g){A(_,e,g),p(e,n),a&&a.m(n,null),p(e,r),p(e,l),p(l,s),p(e,o),p(e,i),f&&f.m(i,null),p(i,c),d&&d.m(i,null),u=!0},p(_,[g]){_[1]?a?(a.p(_,g),g&2&&v(a,1)):(a=on(_),a.c(),v(a,1),a.m(n,null)):a&&(ne(),I(a,1,1,()=>{a=null}),re()),(!u||g&1)&&G(s,_[0]),_[2]?f?(f.p(_,g),g&4&&v(f,1)):(f=sn(_),f.c(),v(f,1),f.m(i,c)):f&&(ne(),I(f,1,1,()=>{f=null}),re()),_[3]?d?(d.p(_,g),g&8&&v(d,1)):(d=cn(_),d.c(),v(d,1),d.m(i,null)):d&&(ne(),I(d,1,1,()=>{d=null}),re())},i(_){u||(v(a),v(f),v(d),u=!0)},o(_){I(a),I(f),I(d),u=!1},d(_){_&&E(e),a&&a.d(),f&&f.d(),d&&d.d()}}}function Vl(t,e,n){let{title:r}=e,{returnPath:l=void 0}=e,{addPath:s=void 0}=e,{menuItems:o=null}=e,i=null;const c=je(),u=f=>{i.close(),c("menu",{id:f.detail.id})};function a(f){Q[f?"unshift":"push"](()=>{i=f,n(4,i)})}return t.$$set=f=>{"title"in f&&n(0,r=f.title),"returnPath"in f&&n(1,l=f.returnPath),"addPath"in f&&n(2,s=f.addPath),"menuItems"in f&&n(3,o=f.menuItems)},[r,l,s,o,i,c,u,a]}class ae extends V{constructor(e){super(),U(this,e,Vl,Ul,z,{title:0,returnPath:1,addPath:2,menuItems:3})}}const ql=t=>({}),un=t=>({});function Yl(t){let e,n,r;const l=t[1].header,s=rt(l,t,t[0],un),o=t[1].default,i=rt(o,t,t[0],null);return{c(){e=y("main"),s&&s.c(),n=j(),i&&i.c(),m(e,"class","_2HUC4")},m(c,u){A(c,e,u),s&&s.m(e,null),p(e,n),i&&i.m(e,null),r=!0},p(c,[u]){s&&s.p&&(!r||u&1)&&ot(s,l,c,c[0],r?lt(l,c[0],u,ql):st(c[0]),un),i&&i.p&&(!r||u&1)&&ot(i,o,c,c[0],r?lt(o,c[0],u,null):st(c[0]),null)},i(c){r||(v(s,c),v(i,c),r=!0)},o(c){I(s,c),I(i,c),r=!1},d(c){c&&E(e),s&&s.d(c),i&&i.d(c)}}}function Kl(t,e,n){let{$$slots:r={},$$scope:l}=e;return t.$$set=s=>{"$$scope"in s&&n(0,l=s.$$scope)},[l,r]}class fe extends V{constructor(e){super(),U(this,e,Kl,Yl,z,{})}}const Xl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Wl(t){const e=t.getTimezoneOffset()*6e4,n=new Date(t.getTime()-e),r=n.getFullYear(),l=String(n.getUTCMonth()+1).padStart(2,"0"),s=String(n.getUTCDate()).padStart(2,"0"),o=String(n.getUTCHours()).padStart(2,"0"),i=String(n.getUTCMinutes()).padStart(2,"0");return`${r}-${l}-${s}T${o}:${i}`}function ft(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=r.getFullYear(),s=String(r.getUTCMonth()+1).padStart(2,"0"),o=String(r.getUTCDate()).padStart(2,"0"),i=String(r.getUTCHours()).padStart(2,"0"),c=String(r.getUTCMinutes()).padStart(2,"0");return`${l}-${s}-${o} ${i}:${c}`}function Jl(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=r.getUTCFullYear(),s=String(r.getUTCMonth()+1).padStart(2,"0"),o=String(r.getUTCDate()).padStart(2,"0"),i=Xl[r.getUTCDay()];return`${l}-${s}-${o} ${i}`}function an(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=String(r.getUTCHours()).padStart(2,"0"),s=String(r.getUTCMinutes()).padStart(2,"0");return`${l}:${s}`}function dt(t){return/^[1-9]\d*([.,](\d{1,2})?)?$/.test(t)}function St(t){if(/[.,]/.test(t)){let[e,n]=t.split(/[.,]/);return n.trim()===""?parseInt(e)*100:(n.length===1&&(n=n+"0"),parseInt(e+n))}else return parseInt(t)*100}function Z(t,e,n){t=Math.round(t);const r=t<0?Math.ceil(t/100):Math.floor(t/100),l=Math.abs(t%100);return(n&&t>0?"+":"")+`${e?Zl(r):r}.${String(l).padStart(2,"0")}`}function Ft(t,e){const n=Kt(pt),r=Kt(Fe),l=n[t]?n[t]:1;return e===r?l:n[e]?l/n[e]:1}function Zl(t,e=" "){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)}function Ql(t,e){return t.reduce((n,r)=>(r.currencyCode===e?n+=r.balance:n+=r.balance*Ft(r.currencyCode,e),n),0)}function xl(t,e){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=e,l.click(),URL.revokeObjectURL(r)}function eo(t){const e=document.createElement("input");e.type="file",e.accept="application/json",e.multiple=!1,e.onchange=()=>{const n=e.files[0];if(n){const r=new FileReader;r.onload=function(){t(r.result)},r.readAsText(n)}},e.click()}function to(t){try{return JSON.parse(t)}catch{return console.warn("JSON parsing failed."),null}}async function no(){const[t,e,n,r,l,s,o,i]=await Promise.all([gt(),mt(),Le(),ht(),H.getAll("transactions"),H.getAll("entries"),H.getAll("settings"),H.getAll("rates")]);return{ver:ft(Date.now()),currencies:t,accountGroups:e,accounts:n,categories:r,transactions:l,entries:s,settings:o,rates:i}}async function ro(t){if(!confirm("All the data will be overwritten. Are you sure you want to continue?"))return!1;if(lo(t)){const e=H.transaction(["currencies","accountGroups","accounts","categories","transactions","entries","settings","rates"],"readwrite");await Promise.all([e.objectStore("currencies").clear(),e.objectStore("accountGroups").clear(),e.objectStore("accounts").clear(),e.objectStore("categories").clear(),e.objectStore("transactions").clear(),e.objectStore("entries").clear(),e.objectStore("settings").clear(),e.objectStore("rates").clear()]);for(const n of t.currencies)await e.objectStore("currencies").put(n);for(const n of t.accountGroups)await e.objectStore("accountGroups").put(n);for(const n of t.accounts)await e.objectStore("accounts").put(n);for(const n of t.categories)await e.objectStore("categories").put(n);for(const n of t.transactions)await e.objectStore("transactions").put(n);for(const n of t.entries)await e.objectStore("entries").put(n);for(const n of t.settings)await e.objectStore("settings").put(n);for(const n of t.rates)await e.objectStore("rates").put(n);return await e.done,!0}else return alert("Invalid snapshot format."),!1}function lo(t){return!(!t.ver||!t.currencies||!t.accountGroups||!t.categories||!t.categories||!t.transactions||!t.entries)}function oo(t){let e,n,r,l=t[0].title+"",s,o,i,c=Z(t[0].balance,!0)+"",u,a,f=t[0].currencyCode+"",d,_,g;return{c(){e=y("div"),n=y("div"),r=y("span"),s=M(l),o=j(),i=y("span"),u=M(c),a=j(),d=M(f),m(r,"class","_3HVLl"),m(n,"class","_1gfEY"),m(e,"class","_2kBg8"),m(e,"data-role","account")},m(b,h){A(b,e,h),p(e,n),p(n,r),p(r,s),p(n,o),p(n,i),p(i,u),p(i,a),p(i,d),_||(g=F(e,"click",t[3]),_=!0)},p(b,[h]){h&1&&l!==(l=b[0].title+"")&&G(s,l),h&1&&c!==(c=Z(b[0].balance,!0)+"")&&G(u,c),h&1&&f!==(f=b[0].currencyCode+"")&&G(d,f)},i:D,o:D,d(b){b&&E(e),_=!1,g()}}}function so(t,e,n){let{account:r}=e,{editing:l=!1}=e;const s=je(),o=()=>{l||s("account",{id:r.id})};return t.$$set=i=>{"account"in i&&n(0,r=i.account),"editing"in i&&n(1,l=i.editing)},[r,l,s,o]}class io extends V{constructor(e){super(),U(this,e,so,oo,z,{account:0,editing:1})}}function fn(t,e,n){const r=t.slice();return r[5]=e[n],r}function dn(t,e){let n,r,l;return r=new io({props:{account:e[5]}}),r.$on("account",e[4]),{key:t,first:null,c(){n=te(),R(r.$$.fragment),this.first=n},m(s,o){A(s,n,o),O(r,s,o),l=!0},p(s,o){e=s;const i={};o&2&&(i.account=e[5]),r.$set(i)},i(s){l||(v(r.$$.fragment,s),l=!0)},o(s){I(r.$$.fragment,s),l=!1},d(s){s&&E(n),B(r,s)}}}function co(t){let e,n,r,l=t[0].title+"",s,o,i,c=Z(t[2],!0)+"",u,a,f=t[0].currencyCode+"",d,_,g=[],b=new Map,h,$=K(t[1]);const C=k=>k[5].id;for(let k=0;k<$.length;k+=1){let w=fn(t,$,k),S=C(w);b.set(S,g[k]=dn(S,w))}return{c(){e=y("div"),n=y("div"),r=y("span"),s=M(l),o=j(),i=y("span"),u=M(c),a=j(),d=M(f),_=j();for(let k=0;k<g.length;k+=1)g[k].c();m(r,"class","_2RwqA"),m(n,"class","FmXIb")},m(k,w){A(k,e,w),p(e,n),p(n,r),p(r,s),p(n,o),p(n,i),p(i,u),p(i,a),p(i,d),p(e,_);for(let S=0;S<g.length;S+=1)g[S]&&g[S].m(e,null);h=!0},p(k,[w]){(!h||w&1)&&l!==(l=k[0].title+"")&&G(s,l),(!h||w&4)&&c!==(c=Z(k[2],!0)+"")&&G(u,c),(!h||w&1)&&f!==(f=k[0].currencyCode+"")&&G(d,f),w&2&&($=K(k[1]),ne(),g=Ce(g,w,C,1,k,$,b,e,ur,dn,null,fn),re())},i(k){if(!h){for(let w=0;w<$.length;w+=1)v(g[w]);h=!0}},o(k){for(let w=0;w<g.length;w+=1)I(g[w]);h=!1},d(k){k&&E(e);for(let w=0;w<g.length;w+=1)g[w].d()}}}function uo(t,e,n){let r,l,s;W(t,ce,c=>n(3,s=c));let{accountGroup:o}=e;const i=c=>{ee(`/accounts/${c.detail.id}`)};return t.$$set=c=>{"accountGroup"in c&&n(0,o=c.accountGroup)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=s.filter(c=>c.groupId===o.id)),t.$$.dirty&3&&n(2,l=Ql(r,o.currencyCode))},[o,r,l,s,i]}class ao extends V{constructor(e){super(),U(this,e,uo,co,z,{accountGroup:0})}}function _n(t,e,n){const r=t.slice();return r[6]=e[n],r}function pn(t){let e,n;return e=new ao({props:{accountGroup:t[6]}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,l){const s={};l&4&&(s.accountGroup=r[6]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function fo(t){let e,n,r,l,s,o=Z(t[1],!0)+"",i,c,u=(t[0]||"")+"",a,f,d=K(t[2]),_=[];for(let b=0;b<d.length;b+=1)_[b]=pn(_n(t,d,b));const g=b=>I(_[b],1,1,()=>{_[b]=null});return{c(){for(let b=0;b<_.length;b+=1)_[b].c();e=j(),n=y("div"),r=y("div"),r.textContent="Total",l=j(),s=y("div"),i=M(o),c=j(),a=M(u),m(s,"class","_2wBv"),m(n,"class","_3c4Tf")},m(b,h){for(let $=0;$<_.length;$+=1)_[$]&&_[$].m(b,h);A(b,e,h),A(b,n,h),p(n,r),p(n,l),p(n,s),p(s,i),p(s,c),p(s,a),f=!0},p(b,h){if(h&4){d=K(b[2]);let $;for($=0;$<d.length;$+=1){const C=_n(b,d,$);_[$]?(_[$].p(C,h),v(_[$],1)):(_[$]=pn(C),_[$].c(),v(_[$],1),_[$].m(e.parentNode,e))}for(ne(),$=d.length;$<_.length;$+=1)g($);re()}(!f||h&2)&&o!==(o=Z(b[1],!0)+"")&&G(i,o),(!f||h&1)&&u!==(u=(b[0]||"")+"")&&G(a,u)},i(b){if(!f){for(let h=0;h<d.length;h+=1)v(_[h]);f=!0}},o(b){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)I(_[h]);f=!1},d(b){b&&(E(e),E(n)),be(_,b)}}}function _o(t){let e,n;return e=new ae({props:{slot:"header",title:"Accounts",addPath:"/accounts/new",menuItems:t[3]}}),e.$on("menu",t[5]),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function po(t){let e,n;return e=new fe({props:{$$slots:{header:[_o],default:[fo]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&519&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function mo(t,e,n){let r,l,s,o;W(t,Fe,u=>n(0,l=u)),W(t,ce,u=>n(4,s=u)),W(t,Ie,u=>n(2,o=u));const i=[{id:"groups",title:"Account Groups",to:"/groups"},{id:"category",title:"Categories",to:"/categories"},{id:"report",title:"Report",to:"/report"},{id:"currency",title:"Currencies",to:"/currencies"},{id:"rates",title:"Rates",to:"/rates"},{id:"backup",title:"Backup"},{id:"restore",title:"Restore"}],c=u=>{switch(u.detail.id){case"backup":no().then(a=>{xl(a,`${ft(Date.now())}.json`)});break;case"restore":eo(a=>{const f=to(a);f&&ro(f).then(d=>{d&&yr()})});break}};return t.$$.update=()=>{t.$$.dirty&17&&n(1,r=s.reduce((u,a)=>(a.currencyCode===l?u+=a.balance:u+=a.balance*Ft(a.currencyCode,l),u),0))},[l,r,o,i,s,c]}class ho extends V{constructor(e){super(),U(this,e,mo,po,z,{})}}function mn(t,e,n){const r=t.slice();return r[2]=e[n],r}function hn(t,e){let n,r=e[2].title+"",l,s,o,i,c;return{key:t,first:null,c(){n=y("div"),l=M(r),s=j(),m(n,"class","_3JK5K"),m(n,"data-id",o=e[2].id),this.first=n},m(u,a){A(u,n,a),p(n,l),p(n,s),i||(c=F(n,"click",e[1]),i=!0)},p(u,a){e=u,a&1&&r!==(r=e[2].title+"")&&G(l,r),a&1&&o!==(o=e[2].id)&&m(n,"data-id",o)},d(u){u&&E(n),i=!1,c()}}}function go(t){let e=[],n=new Map,r,l=K(t[0]);const s=o=>o[2].id;for(let o=0;o<l.length;o+=1){let i=mn(t,l,o),c=s(i);n.set(c,e[o]=hn(c,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=te()},m(o,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,i);A(o,r,i)},p(o,i){i&3&&(l=K(o[0]),e=Ce(e,i,s,1,o,l,n,r.parentNode,ze,hn,r,mn))},d(o){o&&E(r);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function bo(t){let e,n;return e=new ae({props:{slot:"header",title:"Account Groups",returnPath:"/",addPath:"/groups/new"}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function yo(t){let e,n;return e=new fe({props:{$$slots:{header:[bo],default:[go]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&33&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function $o(t,e,n){let r;W(t,Ie,s=>n(0,r=s));function l(s){s.target instanceof HTMLElement&&s.target.dataset.id&&ee(`/groups/${s.target.dataset.id}`)}return[r,l]}class wo extends V{constructor(e){super(),U(this,e,$o,yo,z,{})}}function gn(t,e,n){const r=t.slice();return r[4]=e[n].code,r[5]=e[n].title,r}function bn(t,e){let n,r,l=e[4]+"",s,o,i=e[5]+"",c,u,a;return{key:t,first:null,c(){n=M(`}
    `),r=y("option"),s=M(l),o=j(),c=M(i),u=j(),r.__value=a=e[4],q(r,r.__value),this.first=n},m(f,d){A(f,n,d),A(f,r,d),p(r,s),p(r,o),p(r,c),p(r,u)},p(f,d){e=f,d&4&&l!==(l=e[4]+"")&&G(s,l),d&4&&i!==(i=e[5]+"")&&G(c,i),d&4&&a!==(a=e[4])&&(r.__value=a,q(r,r.__value))},d(f){f&&(E(n),E(r))}}}function vo(t){let e,n,r,l=[],s=new Map,o,i,c=K(t[2]);const u=a=>a[4];for(let a=0;a<c.length;a+=1){let f=gn(t,c,a),d=u(f);s.set(d,l[a]=bn(d,f))}return{c(){e=y("select"),n=y("option"),r=M(t[1]);for(let a=0;a<l.length;a+=1)l[a].c();n.__value="",q(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_1kHx0"),e.required=!0,t[0]===void 0&&He(()=>t[3].call(e))},m(a,f){A(a,e,f),p(e,n),p(n,r);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);Ge(e,t[0],!0),o||(i=F(e,"change",t[3]),o=!0)},p(a,[f]){f&2&&G(r,a[1]),f&4&&(c=K(a[2]),l=Ce(l,f,u,1,a,c,s,e,ze,bn,null,gn)),f&5&&Ge(e,a[0])},i:D,o:D,d(a){a&&E(e);for(let f=0;f<l.length;f+=1)l[f].d();o=!1,i()}}}function ko(t,e,n){let r;W(t,Pe,i=>n(2,r=i));let{currencyCode:l}=e,{placeholder:s="Currency"}=e;function o(){l=Ot(this),n(0,l)}return t.$$set=i=>{"currencyCode"in i&&n(0,l=i.currencyCode),"placeholder"in i&&n(1,s=i.placeholder)},[l,s,r,o]}class bt extends V{constructor(e){super(),U(this,e,ko,vo,z,{currencyCode:0,placeholder:1})}}function Co(t){let e,n,r,l,s,o,i,c,u,a,f=t[4]?"Save":"Create",d,_,g,b;function h(C){t[7](C)}let $={};return t[1]!==void 0&&($.currencyCode=t[1]),r=new bt({props:$}),Q.push(()=>ge(r,"currencyCode",h)),{c(){e=y("form"),n=y("div"),R(r.$$.fragment),s=j(),o=y("div"),i=y("input"),c=j(),u=y("div"),a=y("button"),d=M(f),m(i,"class","_3xyX_"),m(i,"type","text"),i.disabled=t[3],m(i,"placeholder","Title"),m(a,"class","_2G9AC"),m(a,"type","submit"),a.disabled=t[3],m(e,"class","_3RSQr")},m(C,k){A(C,e,k),p(e,n),O(r,n,null),p(e,s),p(e,o),p(o,i),t[8](i),q(i,t[0]),p(e,c),p(e,u),p(u,a),p(a,d),_=!0,g||(b=[F(i,"input",t[9]),F(e,"submit",ke(t[5]))],g=!0)},p(C,k){const w={};!l&&k&2&&(l=!0,w.currencyCode=C[1],he(()=>l=!1)),r.$set(w),(!_||k&8)&&(i.disabled=C[3]),k&1&&i.value!==C[0]&&q(i,C[0]),(!_||k&8)&&(a.disabled=C[3])},i(C){_||(v(r.$$.fragment,C),_=!0)},o(C){I(r.$$.fragment,C),_=!1},d(C){C&&E(e),B(r),t[8](null),g=!1,oe(b)}}}function Io(t){let e,n;return e=new ae({props:{slot:"header",title:t[4]?"Account Group":"New Account Group",returnPath:"/groups"}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function So(t){let e,n;return e=new fe({props:{$$slots:{header:[Io],default:[Co]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&4111&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Eo(t,e,n){let r;W(t,Ie,b=>n(10,r=b));let{params:l={}}=e;const{id:s}=l;let o=s?r.find(b=>b.id===s):null,i=o?o.title:"",c=o?o.currencyCode:void 0,u,a=!1;Ze(()=>{u.focus()});function f(){i.trim()&&c?(n(3,a=!0),o?_l({...o,title:i.trim(),currencyCode:c}).then(()=>{ee("/groups")}).finally(()=>{n(3,a=!1)}):dl(i,c).then(()=>{ee("/groups")}).finally(()=>{n(3,a=!1)})):alert("All fields must be specified.")}function d(b){c=b,n(1,c)}function _(b){Q[b?"unshift":"push"](()=>{u=b,n(2,u)})}function g(){i=this.value,n(0,i)}return t.$$set=b=>{"params"in b&&n(6,l=b.params)},[i,c,u,a,o,f,l,d,_,g]}class yn extends V{constructor(e){super(),U(this,e,Eo,So,z,{params:6})}}function $n(t,e,n){const r=t.slice();return r[3]=e[n],r}function wn(t){let e,n=t[3].title+"",r,l,s;return{c(){e=y("option"),r=M(n),l=j(),e.__value=s=t[3].id,q(e,e.__value)},m(o,i){A(o,e,i),p(e,r),p(e,l)},p(o,i){i&2&&n!==(n=o[3].title+"")&&G(r,n),i&2&&s!==(s=o[3].id)&&(e.__value=s,q(e,e.__value))},d(o){o&&E(e)}}}function Ao(t){let e,n,r,l,s=K(t[1]),o=[];for(let i=0;i<s.length;i+=1)o[i]=wn($n(t,s,i));return{c(){e=y("select"),n=y("option"),n.textContent="Account Group";for(let i=0;i<o.length;i+=1)o[i].c();m(n,"class","placeholder"),n.__value="",q(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_2Ge4O"),e.required=!0,t[0]===void 0&&He(()=>t[2].call(e))},m(i,c){A(i,e,c),p(e,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);Ge(e,t[0],!0),r||(l=F(e,"change",t[2]),r=!0)},p(i,[c]){if(c&2){s=K(i[1]);let u;for(u=0;u<s.length;u+=1){const a=$n(i,s,u);o[u]?o[u].p(a,c):(o[u]=wn(a),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=s.length}c&3&&Ge(e,i[0])},i:D,o:D,d(i){i&&E(e),be(o,i),r=!1,l()}}}function To(t,e,n){let r;W(t,Ie,o=>n(1,r=o));let{groupId:l}=e;function s(){l=Ot(this),n(0,l)}return t.$$set=o=>{"groupId"in o&&n(0,l=o.groupId)},[l,r,s]}class Do extends V{constructor(e){super(),U(this,e,To,Ao,z,{groupId:0})}}function jo(t){let e,n,r,l,s,o,i,c,u,a,f,d,_,g,b=t[0]?"Save":"Create",h,$,C,k,w;function S(L){t[8](L)}let T={};t[2]!==void 0&&(T.groupId=t[2]),r=new Do({props:T}),Q.push(()=>ge(r,"groupId",S));function P(L){t[9](L)}let N={};return t[3]!==void 0&&(N.currencyCode=t[3]),i=new bt({props:N}),Q.push(()=>ge(i,"currencyCode",P)),{c(){e=y("form"),n=y("div"),R(r.$$.fragment),s=j(),o=y("div"),R(i.$$.fragment),u=j(),a=y("div"),f=y("input"),d=j(),_=y("div"),g=y("button"),h=M(b),m(f,"class","_3hIGg"),m(f,"type","text"),m(f,"placeholder","Title"),f.disabled=t[5],m(g,"class","J-mxG"),m(g,"type","submit"),g.disabled=t[5],m(e,"class",$="_2Na6L "+t[1])},m(L,J){A(L,e,J),p(e,n),O(r,n,null),p(e,s),p(e,o),O(i,o,null),p(e,u),p(e,a),p(a,f),q(f,t[4]),t[11](f),p(e,d),p(e,_),p(_,g),p(g,h),C=!0,k||(w=[F(f,"input",t[10]),F(e,"submit",ke(t[7]))],k=!0)},p(L,[J]){const de={};!l&&J&4&&(l=!0,de.groupId=L[2],he(()=>l=!1)),r.$set(de);const Se={};!c&&J&8&&(c=!0,Se.currencyCode=L[3],he(()=>c=!1)),i.$set(Se),(!C||J&32)&&(f.disabled=L[5]),J&16&&f.value!==L[4]&&q(f,L[4]),(!C||J&1)&&b!==(b=L[0]?"Save":"Create")&&G(h,b),(!C||J&32)&&(g.disabled=L[5]),(!C||J&2&&$!==($="_2Na6L "+L[1]))&&m(e,"class",$)},i(L){C||(v(r.$$.fragment,L),v(i.$$.fragment,L),C=!0)},o(L){I(r.$$.fragment,L),I(i.$$.fragment,L),C=!1},d(L){L&&E(e),B(r),B(i),t[11](null),k=!1,oe(w)}}}function Po(t,e,n){let{accountDoc:r=null}=e,{class:l=void 0}=e,{groupId:s,currencyCode:o,title:i=""}=r||{},c=!1,u;const a=je();function f(){i.trim()&&s&&o?(n(5,c=!0),a("save",{groupId:s,currencyCode:o,title:i})):alert("Must fill all fields.")}Ze(()=>{u&&u.focus()});function d(h){s=h,n(2,s)}function _(h){o=h,n(3,o)}function g(){i=this.value,n(4,i)}function b(h){Q[h?"unshift":"push"](()=>{u=h,n(6,u)})}return t.$$set=h=>{"accountDoc"in h&&n(0,r=h.accountDoc),"class"in h&&n(1,l=h.class)},[r,l,s,o,i,c,u,f,d,_,g,b]}class wr extends V{constructor(e){super(),U(this,e,Po,jo,z,{accountDoc:0,class:1})}}function Lo(t){let e,n;return e=new wr({props:{class:"_1tO9D"}}),e.$on("save",t[2]),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Mo(t){let e,n;return e=new wr({props:{class:"_1tO9D",accountDoc:t[1]}}),e.$on("save",t[2]),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function No(t){let e,n,r,l;const s=[Mo,Lo],o=[];function i(c,u){return c[0]?0:1}return e=i(t),n=o[e]=s[e](t),{c(){n.c(),r=te()},m(c,u){o[e].m(c,u),A(c,r,u),l=!0},p(c,u){n.p(c,u)},i(c){l||(v(n),l=!0)},o(c){I(n),l=!1},d(c){c&&E(r),o[e].d(c)}}}function Oo(t){var r;let e,n;return e=new ae({props:{slot:"header",title:t[0]?(r=t[1])==null?void 0:r.title:"New Account",returnPath:"/"}}),{c(){R(e.$$.fragment)},m(l,s){O(e,l,s),n=!0},p:D,i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){B(e,l)}}}function Bo(t){let e,n;return e=new fe({props:{$$slots:{header:[Oo],default:[No]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&32&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Ro(t,e,n){let r;W(t,ce,c=>n(4,r=c));let{params:l={}}=e;const{id:s}=l;let o=s?r.find(c=>c.id===s):null;function i(c){const{title:u,groupId:a,currencyCode:f}=c.detail;s?ol({...o,title:u,groupId:a,currencyCode:f}).then(()=>{ee("/")}):pl(u,a,f).then(()=>{ee("/")})}return t.$$set=c=>{"params"in c&&n(3,l=c.params)},[s,o,i,l]}class vn extends V{constructor(e){super(),U(this,e,Ro,Bo,z,{params:3})}}function kn(t){let e,n=t[1].title+"",r,l=t[1].subtitle?`:${t[1].subtitle}`:"",s;return{c(){e=y("span"),r=M(n),s=M(l),m(e,"class","_12oY6")},m(o,i){A(o,e,i),p(e,r),p(e,s)},p(o,i){i&2&&n!==(n=o[1].title+"")&&G(r,n),i&2&&l!==(l=o[1].subtitle?`:${o[1].subtitle}`:"")&&G(s,l)},d(o){o&&E(e)}}}function Go(t){let e,n,r,l,s=t[0].comment+"",o,i,c,u,a=Z(t[0].amount,!0,!0)+"",f,d,_,g,b=an(t[0].timestamp)+"",h,$,C,k=Z(t[0].total,!0)+"",w,S,T,P=t[1]&&kn(t);return{c(){e=y("div"),n=y("div"),r=y("div"),l=y("span"),o=M(s),i=j(),P&&P.c(),c=j(),u=y("div"),f=M(a),d=j(),_=y("div"),g=y("div"),h=M(b),$=j(),C=y("div"),w=M(k),m(l,"class","BRMlm"),m(r,"class","_3ibZX"),m(u,"class","_2uKiq"),ie(u,"_2TC9s",t[0].amount>0),m(n,"class","_1RLk7"),m(g,"class","mm7AA"),m(C,"class","_1e2eL"),m(_,"class","_3_MwA"),m(e,"class","_3ieFT"),ie(e,"GILTz",t[0].reconciled)},m(N,L){A(N,e,L),p(e,n),p(n,r),p(r,l),p(l,o),p(r,i),P&&P.m(r,null),p(n,c),p(n,u),p(u,f),p(e,d),p(e,_),p(_,g),p(g,h),p(_,$),p(_,C),p(C,w),S||(T=F(e,"click",t[4]),S=!0)},p(N,[L]){L&1&&s!==(s=N[0].comment+"")&&G(o,s),N[1]?P?P.p(N,L):(P=kn(N),P.c(),P.m(r,null)):P&&(P.d(1),P=null),L&1&&a!==(a=Z(N[0].amount,!0,!0)+"")&&G(f,a),L&1&&ie(u,"_2TC9s",N[0].amount>0),L&1&&b!==(b=an(N[0].timestamp)+"")&&G(h,b),L&1&&k!==(k=Z(N[0].total,!0)+"")&&G(w,k),L&1&&ie(e,"GILTz",N[0].reconciled)},i:D,o:D,d(N){N&&E(e),P&&P.d(),S=!1,T()}}}function Ho(t,e,n){let r,l;W(t,$e,c=>n(3,l=c));let{entry:s}=e;const o=je(),i=()=>{o("transaction",{id:s.transactionId})};return t.$$set=c=>{"entry"in c&&n(0,s=c.entry)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=s.categoryId?l.find(c=>c.id===s.categoryId):null)},[s,r,o,l,i]}class Fo extends V{constructor(e){super(),U(this,e,Ho,Go,z,{entry:0})}}function Cn(t,e,n){const r=t.slice();return r[7]=e[n],r}function In(t,e,n){const r=t.slice();return r[10]=e[n],r}function Sn(t,e){let n,r,l;return r=new Fo({props:{entry:e[10]}}),r.$on("transaction",e[6]),{key:t,first:null,c(){n=te(),R(r.$$.fragment),this.first=n},m(s,o){A(s,n,o),O(r,s,o),l=!0},p(s,o){e=s;const i={};o&1&&(i.entry=e[10]),r.$set(i)},i(s){l||(v(r.$$.fragment,s),l=!0)},o(s){I(r.$$.fragment,s),l=!1},d(s){s&&E(n),B(r,s)}}}function En(t){let e,n,r=t[7]+"",l,s,o,i=Z(t[0][t[7]].total,!0,!0)+"",c,u,a=[],f=new Map,d,_,g=K(t[0][t[7]].entries);const b=h=>h[10].id;for(let h=0;h<g.length;h+=1){let $=In(t,g,h),C=b($);f.set(C,a[h]=Sn(C,$))}return{c(){e=y("div"),n=y("span"),l=M(r),s=j(),o=y("span"),c=M(i),u=j();for(let h=0;h<a.length;h+=1)a[h].c();d=te(),m(n,"class","ZZvPT"),m(o,"class","_3Hag4"),m(e,"class","_1kipO")},m(h,$){A(h,e,$),p(e,n),p(n,l),p(e,s),p(e,o),p(o,c),A(h,u,$);for(let C=0;C<a.length;C+=1)a[C]&&a[C].m(h,$);A(h,d,$),_=!0},p(h,$){(!_||$&1)&&r!==(r=h[7]+"")&&G(l,r),(!_||$&1)&&i!==(i=Z(h[0][h[7]].total,!0,!0)+"")&&G(c,i),$&5&&(g=K(h[0][h[7]].entries),ne(),a=Ce(a,$,b,1,h,g,f,d.parentNode,ur,Sn,d,In),re())},i(h){if(!_){for(let $=0;$<g.length;$+=1)v(a[$]);_=!0}},o(h){for(let $=0;$<a.length;$+=1)I(a[$]);_=!1},d(h){h&&(E(e),E(u),E(d));for(let $=0;$<a.length;$+=1)a[$].d(h)}}}function zo(t){let e,n,r=K(Object.keys(t[0])),l=[];for(let o=0;o<r.length;o+=1)l[o]=En(Cn(t,r,o));const s=o=>I(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=te()},m(o,i){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(o,i);A(o,e,i),n=!0},p(o,i){if(i&5){r=K(Object.keys(o[0]));let c;for(c=0;c<r.length;c+=1){const u=Cn(o,r,c);l[c]?(l[c].p(u,i),v(l[c],1)):(l[c]=En(u),l[c].c(),v(l[c],1),l[c].m(e.parentNode,e))}for(ne(),c=r.length;c<l.length;c+=1)s(c);re()}},i(o){if(!n){for(let i=0;i<r.length;i+=1)v(l[i]);n=!0}},o(o){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)I(l[i]);n=!1},d(o){o&&E(e),be(l,o)}}}function Uo(t){let e,n;return e=new ae({props:{slot:"header",title:t[1]?`${t[1].title}`:"Not Found",returnPath:"/",addPath:`/accounts/${t[2]}/transactions/new`,menuItems:t[3]}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,l){const s={};l&2&&(s.title=r[1]?`${r[1].title}`:"Not Found"),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Vo(t){let e,n;return e=new fe({props:{$$slots:{header:[Uo],default:[zo]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&8195&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function qo(t,e,n){let r,l;W(t,ce,a=>n(5,l=a));let{params:s}=e;const{id:o}=s;let i={};mr(o).then(a=>{n(0,i=a.reduce((f,d)=>{const _=Jl(d.timestamp);return f[_]?f[_].entries.push(d):f[_]={entries:[d],total:0},f},{}));for(const f of Object.values(i))f.total=f.entries.reduce((d,_)=>(d+=_.amount,d),0)});const c=[{id:"edit",title:"Edit",to:`/accounts/${o}/edit`}],u=a=>{ee(`/accounts/${o}/transactions/${a.detail.id}`)};return t.$$set=a=>{"params"in a&&n(4,s=a.params)},t.$$.update=()=>{t.$$.dirty&32&&n(1,r=l.find(a=>a.id===o))},[i,r,o,c,s,l,u]}class Yo extends V{constructor(e){super(),U(this,e,qo,Vo,z,{params:4})}}function An(t,e,n){const r=t.slice();return r[2]=e[n],r}function Tn(t,e){let n,r=e[2].title+"",l,s=e[2].subtitle?`:${e[2].subtitle}`:"",o,i,c,u,a;return{key:t,first:null,c(){n=y("div"),l=M(r),o=M(s),i=j(),m(n,"class","_1Hdo"),m(n,"data-id",c=e[2].id),this.first=n},m(f,d){A(f,n,d),p(n,l),p(n,o),p(n,i),u||(a=F(n,"click",e[1]),u=!0)},p(f,d){e=f,d&1&&r!==(r=e[2].title+"")&&G(l,r),d&1&&s!==(s=e[2].subtitle?`:${e[2].subtitle}`:"")&&G(o,s),d&1&&c!==(c=e[2].id)&&m(n,"data-id",c)},d(f){f&&E(n),u=!1,a()}}}function Ko(t){let e=[],n=new Map,r,l=K(t[0]);const s=o=>o[2].id;for(let o=0;o<l.length;o+=1){let i=An(t,l,o),c=s(i);n.set(c,e[o]=Tn(c,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=te()},m(o,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,i);A(o,r,i)},p(o,i){i&3&&(l=K(o[0]),e=Ce(e,i,s,1,o,l,n,r.parentNode,ze,Tn,r,An))},d(o){o&&E(r);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function Xo(t){let e,n;return e=new ae({props:{slot:"header",title:"Categories",returnPath:"/",addPath:"/categories/new"}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Wo(t){let e,n;return e=new fe({props:{$$slots:{header:[Xo],default:[Ko]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&33&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Jo(t,e,n){let r;W(t,$e,s=>n(0,r=s));function l(s){if(s.target.dataset.id){const o=s.target.dataset.id;ee(`/categories/${o}`)}}return[r,l]}class Zo extends V{constructor(e){super(),U(this,e,Jo,Wo,z,{})}}function Qo(t){let e,n,r,l,s,o,i,c,u,a;function f(_){t[2](_)}let d={placeholder:"Base Currency"};return t[0]!==void 0&&(d.currencyCode=t[0]),l=new bt({props:d}),Q.push(()=>ge(l,"currencyCode",f)),{c(){e=y("form"),n=y("div"),r=M(`Base currency:
      `),R(l.$$.fragment),o=j(),i=y("div"),i.innerHTML='<button class="_19-gA" type="submit">Save</button>',m(e,"class","_1JFP_")},m(_,g){A(_,e,g),p(e,n),p(n,r),O(l,n,null),p(e,o),p(e,i),c=!0,u||(a=F(e,"submit",ke(t[1])),u=!0)},p(_,g){const b={};!s&&g&1&&(s=!0,b.currencyCode=_[0],he(()=>s=!1)),l.$set(b)},i(_){c||(v(l.$$.fragment,_),c=!0)},o(_){I(l.$$.fragment,_),c=!1},d(_){_&&E(e),B(l),u=!1,a()}}}function xo(t){let e,n;return e=new ae({props:{slot:"header",title:"Settings",returnPath:"/"}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function es(t){let e,n;return e=new fe({props:{$$slots:{header:[xo],default:[Qo]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&17&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ts(t,e,n){var i;let r;W(t,pr,c=>n(3,r=c));let l=(i=r.find(c=>c.name===at))==null?void 0:i.value;function s(){gr({name:at,value:l}).then(()=>{ee("/")})}function o(c){l=c,n(0,l)}return[l,s,o]}class ns extends V{constructor(e){super(),U(this,e,ts,es,z,{})}}function Dn(t,e,n){const r=t.slice();return r[2]=e[n],r}function jn(t,e){let n,r,l=e[2].code+"",s,o,i,c=e[2].title+"",u,a,f,d,_;return{key:t,first:null,c(){n=y("div"),r=y("div"),s=M(l),o=j(),i=y("div"),u=M(c),a=j(),m(r,"class","_4jwya"),m(i,"class","_1GjZM"),m(n,"class","_3HmHC"),m(n,"data-role","item"),m(n,"data-code",f=e[2].code),this.first=n},m(g,b){A(g,n,b),p(n,r),p(r,s),p(n,o),p(n,i),p(i,u),p(n,a),d||(_=F(n,"click",e[1]),d=!0)},p(g,b){e=g,b&1&&l!==(l=e[2].code+"")&&G(s,l),b&1&&c!==(c=e[2].title+"")&&G(u,c),b&1&&f!==(f=e[2].code)&&m(n,"data-code",f)},d(g){g&&E(n),d=!1,_()}}}function rs(t){let e=[],n=new Map,r,l=K(t[0]);const s=o=>o[2].code;for(let o=0;o<l.length;o+=1){let i=Dn(t,l,o),c=s(i);n.set(c,e[o]=jn(c,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=te()},m(o,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,i);A(o,r,i)},p(o,i){i&3&&(l=K(o[0]),e=Ce(e,i,s,1,o,l,n,r.parentNode,ze,jn,r,Dn))},d(o){o&&E(r);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function ls(t){let e,n;return e=new ae({props:{slot:"header",title:"Currencies",returnPath:"/",addPath:"/currencies/new"}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function os(t){let e,n;return e=new fe({props:{$$slots:{header:[ls],default:[rs]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&33&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ss(t,e,n){let r;W(t,Pe,s=>n(0,r=s));function l(s){if(s.target instanceof HTMLElement){const o=s.target.closest('[data-role="item"]');o instanceof HTMLElement&&o.dataset.code&&ee(`/currencies/${o.dataset.code}`)}}return[r,l]}class is extends V{constructor(e){super(),U(this,e,ss,os,z,{})}}function Pn(t,e,n){const r=t.slice();return r[11]=e[n].code,r[12]=e,r[13]=n,r}function Ln(t){let e,n,r=t[11]+"",l,s,o,i,c,u,a,f,d,_,g;function b(){t[7].call(c,t[11])}return{c(){e=y("div"),n=y("div"),l=M(r),s=M(":"),o=j(),i=y("div"),c=y("input"),a=j(),f=y("span"),d=M(t[1]),m(c,"id",u=t[11]),m(c,"class","_234LA"),m(c,"type","text"),ie(c,"_2j9gN",!Xe(t[2][t[11]])),m(i,"class","gqdmv")},m(h,$){A(h,e,$),p(e,n),p(n,l),p(n,s),p(e,o),p(e,i),p(i,c),q(c,t[2][t[11]]),p(i,a),p(i,f),p(f,d),_||(g=F(c,"input",b),_=!0)},p(h,$){t=h,$&8&&r!==(r=t[11]+"")&&G(l,r),$&8&&u!==(u=t[11])&&m(c,"id",u),$&12&&c.value!==t[2][t[11]]&&q(c,t[2][t[11]]),$&13&&ie(c,"_2j9gN",!Xe(t[2][t[11]])),$&2&&G(d,t[1])},d(h){h&&E(e),_=!1,g()}}}function Mn(t){let e,n=t[11]!==t[1]&&Ln(t);return{c(){n&&n.c(),e=te()},m(r,l){n&&n.m(r,l),A(r,e,l)},p(r,l){r[11]!==r[1]?n?n.p(r,l):(n=Ln(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&E(e),n&&n.d(r)}}}function cs(t){let e,n,r,l,s,o,i,c,u,a,f;function d(h){t[6](h)}let _={placeholder:"Base Currency"};t[1]!==void 0&&(_.currencyCode=t[1]),l=new bt({props:_}),Q.push(()=>ge(l,"currencyCode",d));let g=K(t[3]),b=[];for(let h=0;h<g.length;h+=1)b[h]=Mn(Pn(t,g,h));return{c(){e=y("form"),n=y("div"),r=M(`Base currency:
      `),R(l.$$.fragment),o=j();for(let h=0;h<b.length;h+=1)b[h].c();i=j(),c=y("div"),c.innerHTML='<button class="_3vC8G" type="submit">Save</button>',m(e,"class","_1SqME")},m(h,$){A(h,e,$),p(e,n),p(n,r),O(l,n,null),p(e,o);for(let C=0;C<b.length;C+=1)b[C]&&b[C].m(e,null);p(e,i),p(e,c),u=!0,a||(f=F(e,"submit",ke(t[4])),a=!0)},p(h,$){const C={};if(!s&&$&2&&(s=!0,C.currencyCode=h[1],he(()=>s=!1)),l.$set(C),$&15){g=K(h[3]);let k;for(k=0;k<g.length;k+=1){const w=Pn(h,g,k);b[k]?b[k].p(w,$):(b[k]=Mn(w),b[k].c(),b[k].m(e,i))}for(;k<b.length;k+=1)b[k].d(1);b.length=g.length}},i(h){u||(v(l.$$.fragment,h),u=!0)},o(h){I(l.$$.fragment,h),u=!1},d(h){h&&E(e),B(l),be(b,h),a=!1,f()}}}function us(t){let e,n;return e=new ae({props:{slot:"header",title:"Rates",returnPath:"/"}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function as(t){let e,n;return e=new fe({props:{$$slots:{header:[us],default:[cs]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&16398&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Xe(t){return/^([1-9]\d*|[0])([.,]\d+)?$/.test(t)}function Pt(t){return parseFloat(t.replace(",","."))}function fs(t,e,n){let r,l,s;W(t,Fe,d=>n(8,r=d)),W(t,Pe,d=>n(3,l=d)),W(t,pt,d=>n(9,s=d));let o=r,i=l.reduce((d,{code:_})=>(d[_]=String(s[_]||1),d),{});function c(){const d=u();if(d){alert(d);return}const _=l.filter(({code:g})=>g!==o).map(({code:g})=>({code:g,rate:Pt(i[g])}));gr({name:at,value:o}).then(()=>(Er(Fe,r=o,r),ml(_,o))).then(()=>{ee("/")})}function u(){for(const[d,_]of Object.entries(i))if(!Xe(_)){const g=document.getElementById(d);return g&&g.focus(),`Invalid rate for ${d}`}return""}function a(d){o=d,n(1,o)}function f(d){i[d]=this.value,n(2,i)}return[Xe,o,i,l,c,Pt,a,f]}class ds extends V{constructor(e){super(),U(this,e,fs,as,z,{validateRate:0,parseRate:5})}get validateRate(){return Xe}get parseRate(){return Pt}}function Nn(t,e,n){const r=t.slice();return r[4]=e[n],r}function On(t){let e,n;return e=new zt({props:{cat:t[4],nested:!0,ondocs:t[2]}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,l){const s={};l&1&&(s.cat=r[4]),l&4&&(s.ondocs=r[2]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Bn(t){let e,n,r=t[4].title+"",l,s,o,i=Z(t[4].total,!0)+"",c,u,a,f,d,_;function g(){return t[3](t[4])}let b=t[4].sorted&&On(t);return{c(){e=y("div"),n=y("span"),l=M(r),s=j(),o=y("span"),c=M(i),u=j(),b&&b.c(),a=te(),m(n,"class","_31Wp_"),m(e,"class","_1rD4x"),ie(e,"_3eEr8",t[1])},m(h,$){A(h,e,$),p(e,n),p(n,l),p(e,s),p(e,o),p(o,c),A(h,u,$),b&&b.m(h,$),A(h,a,$),f=!0,d||(_=F(e,"click",g),d=!0)},p(h,$){t=h,(!f||$&1)&&r!==(r=t[4].title+"")&&G(l,r),(!f||$&1)&&i!==(i=Z(t[4].total,!0)+"")&&G(c,i),(!f||$&2)&&ie(e,"_3eEr8",t[1]),t[4].sorted?b?(b.p(t,$),$&1&&v(b,1)):(b=On(t),b.c(),v(b,1),b.m(a.parentNode,a)):b&&(ne(),I(b,1,1,()=>{b=null}),re())},i(h){f||(v(b),f=!0)},o(h){I(b),f=!1},d(h){h&&(E(e),E(u),E(a)),b&&b.d(h),d=!1,_()}}}function _s(t){let e,n,r=K(t[0].sorted),l=[];for(let o=0;o<r.length;o+=1)l[o]=Bn(Nn(t,r,o));const s=o=>I(l[o],1,1,()=>{l[o]=null});return{c(){e=y("div");for(let o=0;o<l.length;o+=1)l[o].c()},m(o,i){A(o,e,i);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);n=!0},p(o,[i]){if(i&7){r=K(o[0].sorted);let c;for(c=0;c<r.length;c+=1){const u=Nn(o,r,c);l[c]?(l[c].p(u,i),v(l[c],1)):(l[c]=Bn(u),l[c].c(),v(l[c],1),l[c].m(e,null))}for(ne(),c=r.length;c<l.length;c+=1)s(c);re()}},i(o){if(!n){for(let i=0;i<r.length;i+=1)v(l[i]);n=!0}},o(o){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)I(l[i]);n=!1},d(o){o&&E(e),be(l,o)}}}function ps(t,e,n){let{cat:r}=e,{nested:l=!1}=e,{ondocs:s=void 0}=e;const o=i=>{s==null||s(i.docs)};return t.$$set=i=>{"cat"in i&&n(0,r=i.cat),"nested"in i&&n(1,l=i.nested),"ondocs"in i&&n(2,s=i.ondocs)},[r,l,s,o]}class zt extends V{constructor(e){super(),U(this,e,ps,_s,z,{cat:0,nested:1,ondocs:2})}}function Rn(t,e,n){const r=t.slice();return r[16]=e[n],r}function Gn(t){let e,n,r,l,s=Z(t[1].total,!0)+"",o,i,c,u;return c=new zt({props:{cat:t[1],ondocs:t[6]}}),{c(){e=y("div"),n=y("span"),n.textContent="Income",r=j(),l=y("span"),o=M(s),i=j(),R(c.$$.fragment),m(n,"class","_1w7Yp"),m(e,"class","_3fR1c")},m(a,f){A(a,e,f),p(e,n),p(e,r),p(e,l),p(l,o),A(a,i,f),O(c,a,f),u=!0},p(a,f){(!u||f&2)&&s!==(s=Z(a[1].total,!0)+"")&&G(o,s);const d={};f&2&&(d.cat=a[1]),c.$set(d)},i(a){u||(v(c.$$.fragment,a),u=!0)},o(a){I(c.$$.fragment,a),u=!1},d(a){a&&(E(e),E(i)),B(c,a)}}}function Hn(t){let e,n,r,l,s=Z(t[2].total,!0)+"",o,i,c,u;return c=new zt({props:{cat:t[2],ondocs:t[6]}}),{c(){e=y("div"),n=y("span"),n.textContent="Expenses",r=j(),l=y("span"),o=M(s),i=j(),R(c.$$.fragment),m(n,"class","_1w7Yp"),m(e,"class","_3fR1c")},m(a,f){A(a,e,f),p(e,n),p(e,r),p(e,l),p(l,o),A(a,i,f),O(c,a,f),u=!0},p(a,f){(!u||f&4)&&s!==(s=Z(a[2].total,!0)+"")&&G(o,s);const d={};f&4&&(d.cat=a[2]),c.$set(d)},i(a){u||(v(c.$$.fragment,a),u=!0)},o(a){I(c.$$.fragment,a),u=!1},d(a){a&&(E(e),E(i)),B(c,a)}}}function Fn(t){let e,n,r,l,s,o,i,c,u,a=K(t[3]),f=[];for(let d=0;d<a.length;d+=1)f[d]=Un(Rn(t,a,d));return{c(){e=y("div"),n=y("div"),r=y("div"),l=y("h2"),l.textContent="Transactions",s=j(),o=y("button"),o.textContent="X",i=j();for(let d=0;d<f.length;d+=1)f[d].c();m(o,"class","_1vDoy"),m(r,"class","_3fR1c"),m(n,"class","_20g6"),m(e,"class","_2rfJl")},m(d,_){A(d,e,_),p(e,n),p(n,r),p(r,l),p(r,s),p(r,o),p(n,i);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(n,null);c||(u=F(o,"click",t[8]),c=!0)},p(d,_){if(_&56){a=K(d[3]);let g;for(g=0;g<a.length;g+=1){const b=Rn(d,a,g);f[g]?f[g].p(b,_):(f[g]=Un(b),f[g].c(),f[g].m(n,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=a.length}},d(d){d&&E(e),be(f,d),c=!1,u()}}}function zn(t){let e,n=`${t[4][t[16].categoryId].title}${t[4][t[16].categoryId].subtitle?`:${t[4][t[16].categoryId].subtitle}`:""}`,r;return{c(){e=y("span"),r=M(n),m(e,"class","_2udZu")},m(l,s){A(l,e,s),p(e,r)},p(l,s){s&8&&n!==(n=`${l[4][l[16].categoryId].title}${l[4][l[16].categoryId].subtitle?`:${l[4][l[16].categoryId].subtitle}`:""}`)&&G(r,n)},d(l){l&&E(e)}}}function Un(t){var T;let e,n,r,l=t[16].comment+"",s,o,i,c=Z(t[16].kind===le.Expense?-t[16].amount:t[16].amount,!0,!0)+"",u,a,f,d=((T=t[5][t[16].accountId])==null?void 0:T.currencyCode)+"",_,g,b,h,$,C=ft(t[16].timestamp)+"",k,w,S=t[4][t[16].categoryId]&&zn(t);return{c(){e=y("div"),n=y("div"),r=y("span"),s=M(l),o=j(),i=y("span"),u=M(c),a=M(`
               
              `),f=y("span"),_=M(d),g=j(),b=y("div"),S&&S.c(),h=j(),$=y("span"),k=M(C),w=j(),m(r,"class","comment"),m(i,"class","Cuy75"),m(n,"class","_2ugfg"),m($,"class","_1u25y"),m(b,"class","_2tCf7"),m(e,"class","_2p4A6")},m(P,N){A(P,e,N),p(e,n),p(n,r),p(r,s),p(n,o),p(n,i),p(i,u),p(n,a),p(n,f),p(f,_),p(e,g),p(e,b),S&&S.m(b,null),p(b,h),p(b,$),p($,k),p(e,w)},p(P,N){var L;N&8&&l!==(l=P[16].comment+"")&&G(s,l),N&8&&c!==(c=Z(P[16].kind===le.Expense?-P[16].amount:P[16].amount,!0,!0)+"")&&G(u,c),N&8&&d!==(d=((L=P[5][P[16].accountId])==null?void 0:L.currencyCode)+"")&&G(_,d),P[4][P[16].categoryId]?S?S.p(P,N):(S=zn(P),S.c(),S.m(b,h)):S&&(S.d(1),S=null),N&8&&C!==(C=ft(P[16].timestamp)+"")&&G(k,C)},d(P){P&&E(e),S&&S.d()}}}function ms(t){let e,n,r,l,s,o,i,c,u,a=t[1]&&Gn(t),f=t[2]&&Hn(t),d=t[3]&&Fn(t);return{c(){e=y("div"),n=y("input"),r=j(),a&&a.c(),l=j(),f&&f.c(),s=j(),d&&d.c(),o=te(),m(n,"class","_35Y9x"),m(n,"type","month"),m(e,"class","af3Ku")},m(_,g){A(_,e,g),p(e,n),q(n,t[0]),A(_,r,g),a&&a.m(_,g),A(_,l,g),f&&f.m(_,g),A(_,s,g),d&&d.m(_,g),A(_,o,g),i=!0,c||(u=F(n,"input",t[7]),c=!0)},p(_,g){g&1&&q(n,_[0]),_[1]?a?(a.p(_,g),g&2&&v(a,1)):(a=Gn(_),a.c(),v(a,1),a.m(l.parentNode,l)):a&&(ne(),I(a,1,1,()=>{a=null}),re()),_[2]?f?(f.p(_,g),g&4&&v(f,1)):(f=Hn(_),f.c(),v(f,1),f.m(s.parentNode,s)):f&&(ne(),I(f,1,1,()=>{f=null}),re()),_[3]?d?d.p(_,g):(d=Fn(_),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null)},i(_){i||(v(a),v(f),i=!0)},o(_){I(a),I(f),i=!1},d(_){_&&(E(e),E(r),E(l),E(s),E(o)),a&&a.d(_),f&&f.d(_),d&&d.d(_),c=!1,u()}}}function hs(t){let e,n;return e=new ae({props:{slot:"header",title:"Report",returnPath:"/"}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function gs(t){let e,n;return e=new fe({props:{$$slots:{header:[hs],default:[ms]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&524303&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Lt(t){t.cats&&(t.sorted=Object.values(t.cats).sort((e,n)=>n.total-e.total),t.sorted.forEach(e=>{e.cats&&Lt(e)}))}function bs(t,e,n){let r,l,s;W(t,Fe,k=>n(9,r=k)),W(t,ce,k=>n(10,l=k)),W(t,$e,k=>n(11,s=k));const o=new Date;let i=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}`,c=null,u=null,a=null;const f=s.reduce((k,w)=>(k[w.id]=w,k),{}),d=l.reduce((k,w)=>(k[w.id]=w,k),{});function _(k){const[w,S]=k.split("-"),T=new Date(parseInt(w),parseInt(S)-1,1).getTime(),P=new Date(parseInt(w),parseInt(S),1).getTime();al(T,P).then(N=>{const L=N.filter(de=>de.kind===le.Income),J=N.filter(de=>de.kind===le.Expense);n(1,c=g(L)),n(2,u=g(J)),Lt(c),Lt(u)})}function g(k){return k.reduce((w,S)=>{const T=f[S.categoryId];return T&&(w.cats[T.title]||(w.cats[T.title]={title:T.title,cats:{},docs:[],total:0}),w.cats[T.title].total+=h(S),w.cats[T.title].docs.push(S),T.subtitle&&(w.cats[T.title].cats[T.subtitle]||(w.cats[T.title].cats[T.subtitle]={title:T.subtitle,docs:[],total:0}),w.cats[T.title].cats[T.subtitle].total+=h(S),w.cats[T.title].cats[T.subtitle].docs.push(S))),w.total+=h(S),w},{cats:{},docs:[],total:0})}function b(k){n(3,a=k),document.documentElement.style.setProperty("overflow","hidden")}function h(k){const w=d[k.accountId];return w&&w.currencyCode!==r?k.amount*Ft(w.currencyCode,r):k.amount}function $(){i=this.value,n(0,i)}const C=k=>{n(3,a=null),document.documentElement.style.removeProperty("overflow")};return t.$$.update=()=>{t.$$.dirty&1&&_(i)},[i,c,u,a,f,d,b,$,C]}class ys extends V{constructor(e){super(),U(this,e,bs,gs,z,{})}}function $s(t){let e,n,r,l,s,o,i,c,u,a,f;return{c(){e=y("form"),n=y("div"),r=y("input"),l=j(),s=y("div"),o=y("input"),i=j(),c=y("div"),u=y("button"),u.textContent=`${t[3]?"Save":"Create"}`,m(r,"type","text"),m(r,"placeholder","Title"),m(n,"class","_1F3oU"),m(o,"type","text"),m(o,"placeholder","Subtitle (optional)"),m(s,"class","_1F3oU"),m(u,"type","submit"),m(c,"class","_1F3oU"),m(e,"class","_2sHk9")},m(d,_){A(d,e,_),p(e,n),p(n,r),q(r,t[0]),t[7](r),p(e,l),p(e,s),p(s,o),q(o,t[1]),p(e,i),p(e,c),p(c,u),a||(f=[F(r,"input",t[6]),F(o,"input",t[8]),F(e,"submit",ke(t[4]))],a=!0)},p(d,_){_&1&&r.value!==d[0]&&q(r,d[0]),_&2&&o.value!==d[1]&&q(o,d[1])},d(d){d&&E(e),t[7](null),a=!1,oe(f)}}}function ws(t){let e,n;return e=new ae({props:{slot:"header",title:t[3]?"Category":"New Category",returnPath:"/categories"}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function vs(t){let e,n;return e=new fe({props:{$$slots:{header:[ws],default:[$s]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&2055&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ks(t,e,n){let r;W(t,$e,g=>n(9,r=g));let{params:l={}}=e;const{id:s}=l;let o=s?r.find(g=>g.id===s):null,i=o?o.title:"",c=o?o.subtitle:"",u;Ze(()=>{u&&u.focus()});function a(){i.trim()?o?hl({...o,title:i.trim(),subtitle:c.trim()}).then(()=>{ee("/categories")}):hr(i.trim(),c.trim()).then(()=>{ee("/categories")}):alert("The title must be specified.")}function f(){i=this.value,n(0,i)}function d(g){Q[g?"unshift":"push"](()=>{u=g,n(2,u)})}function _(){c=this.value,n(1,c)}return t.$$set=g=>{"params"in g&&n(5,l=g.params)},[i,c,u,o,a,l,f,d,_]}class Vn extends V{constructor(e){super(),U(this,e,ks,vs,z,{params:5})}}function Cs(t){let e,n,r,l,s,o,i,c,u,a,f;return{c(){e=y("form"),n=y("div"),r=y("input"),l=j(),s=y("div"),o=y("input"),i=j(),c=y("div"),u=y("button"),u.textContent=`${t[4]?"Save":"Add"}`,m(r,"type","text"),m(r,"placeholder","Code"),r.disabled=t[4]!==null,m(n,"class","EbSwc"),m(o,"type","text"),m(o,"placeholder","Title"),m(s,"class","EbSwc"),m(u,"type","submit"),m(c,"class","EbSwc")},m(d,_){A(d,e,_),p(e,n),p(n,r),q(r,t[0]),t[8](r),p(e,l),p(e,s),p(s,o),q(o,t[1]),t[10](o),p(e,i),p(e,c),p(c,u),a||(f=[F(r,"input",t[7]),F(o,"input",t[9]),F(e,"submit",ke(t[5]))],a=!0)},p(d,_){_&1&&r.value!==d[0]&&q(r,d[0]),_&2&&o.value!==d[1]&&q(o,d[1])},d(d){d&&E(e),t[8](null),t[10](null),a=!1,oe(f)}}}function Is(t){let e,n;return e=new ae({props:{slot:"header",title:t[4]?"Currency":"New Currency",returnPath:"/currencies"}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Ss(t){let e,n;return e=new fe({props:{$$slots:{header:[Is],default:[Cs]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&8207&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Es(t,e,n){let r;W(t,Pe,h=>n(11,r=h));let{params:l={}}=e;const{cid:s}=l;let o=s?r.find(h=>h.code===s):null,i=o?o.code:"",c=o?o.title:"",u,a;function f(){i.trim()&&c.trim()?o?bl({...o,title:c.trim()}).then(()=>{ee("/currencies")}):gl(i.trim(),c.trim()).then(()=>{ee("/currencies")}):alert("Code and title must be specified.")}Ze(()=>{o?a&&a.focus():u&&u.focus()});function d(){i=this.value,n(0,i)}function _(h){Q[h?"unshift":"push"](()=>{u=h,n(2,u)})}function g(){c=this.value,n(1,c)}function b(h){Q[h?"unshift":"push"](()=>{a=h,n(3,a)})}return t.$$set=h=>{"params"in h&&n(6,l=h.params)},[i,c,u,a,o,f,l,d,_,g,b]}class qn extends V{constructor(e){super(),U(this,e,Es,Ss,z,{params:6})}}function Yn(t,e,n){const r=t.slice();return r[6]=e[n],r}function Kn(t,e,n){const r=t.slice();return r[9]=e[n],r}function Xn(t){let e,n=t[9].title+"",r,l;return{c(){e=y("option"),r=M(n),e.__value=l=t[9].id,q(e,e.__value)},m(s,o){A(s,e,o),p(e,r)},p(s,o){o&4&&n!==(n=s[9].title+"")&&G(r,n),o&4&&l!==(l=s[9].id)&&(e.__value=l,q(e,e.__value))},d(s){s&&E(e)}}}function Wn(t){let e,n,r=K(t[6].accounts),l=[];for(let s=0;s<r.length;s+=1)l[s]=Xn(Kn(t,r,s));return{c(){e=y("optgroup");for(let s=0;s<l.length;s+=1)l[s].c();m(e,"label",n=t[6].title)},m(s,o){A(s,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,o){if(o&4){r=K(s[6].accounts);let i;for(i=0;i<r.length;i+=1){const c=Kn(s,r,i);l[i]?l[i].p(c,o):(l[i]=Xn(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=r.length}o&4&&n!==(n=s[6].title)&&m(e,"label",n)},d(s){s&&E(e),be(l,s)}}}function As(t){let e,n,r,l,s,o=K(t[2]),i=[];for(let c=0;c<o.length;c+=1)i[c]=Wn(Yn(t,o,c));return{c(){e=y("select"),n=y("option"),r=M(t[1]);for(let c=0;c<i.length;c+=1)i[c].c();n.__value="",q(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_1vWtV"),e.required=!0,t[0]===void 0&&He(()=>t[5].call(e))},m(c,u){A(c,e,u),p(e,n),p(n,r);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);Ge(e,t[0],!0),l||(s=F(e,"change",t[5]),l=!0)},p(c,[u]){if(u&2&&G(r,c[1]),u&4){o=K(c[2]);let a;for(a=0;a<o.length;a+=1){const f=Yn(c,o,a);i[a]?i[a].p(f,u):(i[a]=Wn(f),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=o.length}u&5&&Ge(e,c[0])},i:D,o:D,d(c){c&&E(e),be(i,c),l=!1,s()}}}function Ts(t,e,n){let r,l,s;W(t,ce,u=>n(3,l=u)),W(t,Ie,u=>n(4,s=u));let{accountId:o}=e,{placeholder:i="Account"}=e;function c(){o=Ot(this),n(0,o),n(2,r),n(4,s),n(3,l)}return t.$$set=u=>{"accountId"in u&&n(0,o=u.accountId),"placeholder"in u&&n(1,i=u.placeholder)},t.$$.update=()=>{t.$$.dirty&24&&n(2,r=s.reduce((u,a)=>{const f={title:a.title,accounts:l.filter(d=>d.groupId===a.id)};return u.push(f),u},[]))},[o,i,r,l,s,c]}class Ds extends V{constructor(e){super(),U(this,e,Ts,As,z,{accountId:0,placeholder:1})}}function Jn(t,e,n){const r=t.slice();return r[2]=e[n],r}function Zn(t){let e,n,r;return{c(){e=y("span"),e.textContent=`${t[2].title} `,m(e,"data-value",t[2].value),ie(e,"_1zm3o",t[2].value===t[0])},m(l,s){A(l,e,s),n||(r=F(e,"pointerdown",t[1]),n=!0)},p(l,s){s&1&&ie(e,"_1zm3o",l[2].value===l[0])},d(l){l&&E(e),n=!1,r()}}}function js(t){let e,n=K(tn),r=[];for(let l=0;l<n.length;l+=1)r[l]=Zn(Jn(t,n,l));return{c(){e=y("div");for(let l=0;l<r.length;l+=1)r[l].c();m(e,"class","_2dieg")},m(l,s){A(l,e,s);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(l,[s]){if(s&3){n=K(tn);let o;for(o=0;o<n.length;o+=1){const i=Jn(l,n,o);r[o]?r[o].p(i,s):(r[o]=Zn(i),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:D,o:D,d(l){l&&E(e),be(r,l)}}}function Ps(t,e,n){let{kind:r}=e;function l(s){s.target instanceof HTMLSpanElement&&(console.log("kind:",s.target.dataset.value),n(0,r=s.target.dataset.value))}return t.$$set=s=>{"kind"in s&&n(0,r=s.kind)},[r,l]}class Ls extends V{constructor(e){super(),U(this,e,Ps,js,z,{kind:0})}}function Qn(t,e,n){const r=t.slice();return r[7]=e[n],r}function Ms(t){let e,n,r;return{c(){e=y("input"),m(e,"class","_1LWF4"),m(e,"type","text"),m(e,"placeholder","Category")},m(l,s){A(l,e,s),t[10](e),q(e,t[1]),n||(r=[F(e,"input",t[11]),F(e,"input",t[6])],n=!0)},p(l,s){s&2&&e.value!==l[1]&&q(e,l[1])},d(l){l&&E(e),t[10](null),n=!1,oe(r)}}}function xn(t){let e;return{c(){e=y("li"),e.textContent="Empty",m(e,"class","_1FJls")},m(n,r){A(n,e,r)},p:D,d(n){n&&E(e)}}}function er(t,e){let n,r=e[7].title+"",l,s=e[7].subtitle?`:${e[7].subtitle}`:"",o,i,c;return{key:t,first:null,c(){n=y("li"),l=M(r),o=M(s),i=j(),m(n,"data-id",c=e[7].id),ie(n,"_2P4tM",e[7].id===e[0]),this.first=n},m(u,a){A(u,n,a),p(n,l),p(n,o),p(n,i)},p(u,a){e=u,a&19&&r!==(r=e[7].title+"")&&G(l,r),a&19&&s!==(s=e[7].subtitle?`:${e[7].subtitle}`:"")&&G(o,s),a&19&&c!==(c=e[7].id)&&m(n,"data-id",c),a&19&&ie(n,"_2P4tM",e[7].id===e[0])},d(u){u&&E(n)}}}function Ns(t){let e,n=[],r=new Map,l,s,o=K(t[0]?t[4]:t[4].filter(t[9]));const i=u=>u[7].id;for(let u=0;u<o.length;u+=1){let a=Qn(t,o,u),f=i(a);r.set(f,n[u]=er(f,a))}let c=null;return o.length||(c=xn()),{c(){e=y("ul");for(let u=0;u<n.length;u+=1)n[u].c();c&&c.c(),m(e,"class","_2VAoI"),m(e,"slot","content")},m(u,a){A(u,e,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);c&&c.m(e,null),l||(s=F(e,"click",t[5]),l=!0)},p(u,a){a&19&&(o=K(u[0]?u[4]:u[4].filter(u[9])),n=Ce(n,a,i,1,u,o,r,e,ze,er,null,Qn),!o.length&&c?c.p(u,a):o.length?c&&(c.d(1),c=null):(c=xn(),c.c(),c.m(e,null)))},d(u){u&&E(e);for(let a=0;a<n.length;a+=1)n[a].d();c&&c.d(),l=!1,s()}}}function Os(t){let e,n,r={class:"_3pEZc",clickToggle:!0,$$slots:{content:[Ns],default:[Ms]},$$scope:{ctx:t}};return e=new $r({props:r}),t[12](e),{c(){R(e.$$.fragment)},m(l,s){O(e,l,s),n=!0},p(l,[s]){const o={};s&32795&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){t[12](null),B(e,l)}}}function tt(t){return`${t.title}${t.subtitle?`:${t.subtitle}`:""}`}function Bs(t,e,n){let r;W(t,$e,h=>n(4,r=h));let{categoryId:l}=e,s,o;function i(){n(0,l=""),n(1,u="")}let c=l?r.find(h=>h.id===l):null,{value:u=c?tt(c):""}=e;function a(h){if(h.target instanceof HTMLLIElement){n(0,l=h.target.dataset.id),s.close();const $=r.find(C=>C.id===l);$&&n(1,u=tt($))}}function f(){const h=r.find($=>o.value.trim().toLocaleLowerCase()===tt($).toLocaleLowerCase());h?(n(0,l=h.id),n(3,o.value=tt(h),o)):n(0,l="")}const d=h=>`${h.title}:${h.subtitle}`.toLowerCase().includes(u.trim().toLowerCase());function _(h){Q[h?"unshift":"push"](()=>{o=h,n(3,o)})}function g(){u=this.value,n(1,u)}function b(h){Q[h?"unshift":"push"](()=>{s=h,n(2,s)})}return t.$$set=h=>{"categoryId"in h&&n(0,l=h.categoryId),"value"in h&&n(1,u=h.value)},[l,u,s,o,r,a,f,c,i,d,_,g,b]}class Rs extends V{constructor(e){super(),U(this,e,Bs,Os,z,{categoryId:0,clear:8,value:1})}get clear(){return this.$$.ctx[8]}}function Gs(t){let e,n,r;return{c(){e=ue("svg"),n=ue("path"),r=ue("path"),m(n,"d","M5.83 5.146a.5.5 0 0 0 0 .708L7.975 8l-2.147 2.146a.5.5 0 0 0 .707.708l2.147-2.147 2.146 2.147a.5.5 0 0 0 .707-.708L9.39 8l2.146-2.146a.5.5 0 0 0-.707-.708L8.683 7.293 6.536 5.146a.5.5 0 0 0-.707 0z"),m(r,"d","M13.683 1a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7.08a2 2 0 0 1-1.519-.698L.241 8.65a1 1 0 0 1 0-1.302L5.084 1.7A2 2 0 0 1 6.603 1zm-7.08 1a1 1 0 0 0-.76.35L1 8l4.844 5.65a1 1 0 0 0 .759.35h7.08a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"fill","currentColor"),m(e,"viewBox","0 0 16 16")},m(l,s){A(l,e,s),p(e,n),p(e,r)},p(l,[s]){s&1&&m(e,"width",l[0]),s&1&&m(e,"height",l[0])},i:D,o:D,d(l){l&&E(e)}}}function Hs(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Fs extends V{constructor(e){super(),U(this,e,Hs,Gs,z,{size:0})}}function zs(t){let e,n,r,l,s,o,i,c,u,a,f,d,_,g,b,h,$;return a=new Fs({props:{size:24}}),{c(){e=y("div"),n=y("div"),n.innerHTML='<span data-key="1">1</span> <span data-key="2">2</span> <span data-key="3">3</span>',r=j(),l=y("div"),l.innerHTML='<span data-key="4">4</span> <span data-key="5">5</span> <span data-key="6">6</span>',s=j(),o=y("div"),o.innerHTML='<span data-key="7">7</span> <span data-key="8">8</span> <span data-key="9">9</span>',i=j(),c=y("div"),u=y("span"),R(a.$$.fragment),f=j(),d=y("span"),d.textContent="0",_=j(),g=y("span"),g.textContent=".",m(u,"data-key","<"),m(d,"data-key","0"),m(g,"data-key","."),m(e,"class","_3QCzM")},m(C,k){A(C,e,k),p(e,n),p(e,r),p(e,l),p(e,s),p(e,o),p(e,i),p(e,c),p(c,u),O(a,u,null),p(c,f),p(c,d),p(c,_),p(c,g),b=!0,h||($=[F(e,"pointerdown",ke(t[2])),F(e,"pointerup",t[0])],h=!0)},p:D,i(C){b||(v(a.$$.fragment,C),b=!0)},o(C){I(a.$$.fragment,C),b=!1},d(C){C&&E(e),B(a),h=!1,oe($)}}}function Us(t,e,n){let{onkey:r}=e;function l(o){o.target instanceof HTMLSpanElement&&o.target.dataset.key&&r(o.target.dataset.key)}function s(o){Et.call(this,t,o)}return t.$$set=o=>{"onkey"in o&&n(1,r=o.onkey)},[l,r,s]}class Vs extends V{constructor(e){super(),U(this,e,Us,zs,z,{onkey:1})}}function qs(t){let e,n,r,l,s,o,i,c,u,a,f;function d(b){t[24](b)}function _(b){t[26](b)}let g={};return t[8]!==void 0&&(g.categoryId=t[8]),t[6]!==void 0&&(g.value=t[6]),n=new Rs({props:g}),Q.push(()=>ge(n,"categoryId",d)),t[25](n),Q.push(()=>ge(n,"value",_)),{c(){e=y("div"),R(n.$$.fragment),s=j(),o=y("button"),i=M("Clear"),m(o,"type","button"),o.disabled=c=!t[8],m(e,"class","_36ncL")},m(b,h){A(b,e,h),O(n,e,null),p(e,s),p(e,o),p(o,i),u=!0,a||(f=F(o,"click",Ar(t[16])),a=!0)},p(b,h){const $={};!r&&h[0]&256&&(r=!0,$.categoryId=b[8],he(()=>r=!1)),!l&&h[0]&64&&(l=!0,$.value=b[6],he(()=>l=!1)),n.$set($),(!u||h[0]&256&&c!==(c=!b[8]))&&(o.disabled=c)},i(b){u||(v(n.$$.fragment,b),u=!0)},o(b){I(n.$$.fragment,b),u=!1},d(b){b&&E(e),t[25](null),B(n),a=!1,f()}}}function Ys(t){let e,n,r;function l(o){t[23](o)}let s={placeholder:"To"};return t[1]!==void 0&&(s.accountId=t[1]),e=new Ds({props:s}),Q.push(()=>ge(e,"accountId",l)),{c(){R(e.$$.fragment)},m(o,i){O(e,o,i),r=!0},p(o,i){const c={};!n&&i[0]&2&&(n=!0,c.accountId=o[1],he(()=>n=!1)),e.$set(c)},i(o){r||(v(e.$$.fragment,o),r=!0)},o(o){I(e.$$.fragment,o),r=!1},d(o){B(e,o)}}}function tr(t){var u;let e,n,r=((u=t[2])==null?void 0:u.currencyCode)+"",l,s,o,i,c;return{c(){e=y("div"),n=M("Amount, "),l=M(r),s=M(`:
      `),o=y("input"),m(o,"class","_3qKgQ"),m(o,"type","text")},m(a,f){A(a,e,f),p(e,n),p(e,l),p(e,s),p(e,o),q(o,t[13]),i||(c=F(o,"input",t[29]),i=!0)},p(a,f){var d;f[0]&4&&r!==(r=((d=a[2])==null?void 0:d.currencyCode)+"")&&G(l,r),f[0]&8192&&o.value!==a[13]&&q(o,a[13])},d(a){a&&E(e),i=!1,c()}}}function Ks(t){var Ut;let e,n,r,l,s,o,i,c,u,a,f,d,_,g,b=((Ut=t[3])==null?void 0:Ut.currencyCode)+"",h,$,C,k,w,S,T,P,N,L,J,de,Se,we,Qe,Ue,Ee,Me=t[0]?"Save":"Create",Ve,pe,qe,xe;function Y(X){t[21](X)}let et={};t[7]!==void 0&&(et.kind=t[7]),r=new Ls({props:et}),Q.push(()=>ge(r,"kind",Y));const Ye=[Ys,qs],_e=[];function yt(X,se){return X[7]===le.Transfer?0:1}a=yt(t),f=_e[a]=Ye[a](t);let x=t[14]&&tr(t);return we=new Vs({props:{onkey:t[17]}}),{c(){e=y("form"),n=y("div"),R(r.$$.fragment),s=j(),o=y("div"),i=y("input"),c=j(),u=y("div"),f.c(),d=j(),_=y("div"),g=M("Amount, "),h=M(b),$=M(`:
    `),C=y("input"),k=j(),x&&x.c(),w=j(),S=y("div"),T=y("input"),P=j(),N=y("div"),L=y("label"),J=y("input"),de=M(`
      Reconciled`),Se=j(),R(we.$$.fragment),Qe=j(),Ue=y("div"),Ee=y("button"),Ve=M(Me),m(i,"class","_3qKgQ"),m(i,"type","datetime-local"),m(C,"class","_3qKgQ"),m(C,"type","text"),ie(C,"_2YSkZ",!dt(t[12])),m(T,"class","_3qKgQ"),m(T,"type","text"),m(T,"placeholder","Comment"),m(J,"type","checkbox"),m(L,"class","xwEhV"),m(Ee,"class","_36-gn _-wwrS"),m(Ee,"type","submit"),m(e,"class","_1rZU2")},m(X,se){A(X,e,se),p(e,n),O(r,n,null),p(e,s),p(e,o),p(o,i),q(i,t[11]),p(e,c),p(e,u),_e[a].m(u,null),p(e,d),p(e,_),p(_,g),p(_,h),p(_,$),p(_,C),q(C,t[12]),t[28](C),p(e,k),x&&x.m(e,null),p(e,w),p(e,S),p(S,T),q(T,t[9]),p(e,P),p(e,N),p(N,L),p(L,J),J.checked=t[10],p(L,de),p(e,Se),O(we,e,null),p(e,Qe),p(e,Ue),p(Ue,Ee),p(Ee,Ve),pe=!0,qe||(xe=[F(i,"input",t[22]),F(C,"input",t[27]),F(T,"input",t[30]),F(J,"change",t[31]),F(e,"submit",ke(t[15]))],qe=!0)},p(X,se){var qt;const Vt={};!l&&se[0]&128&&(l=!0,Vt.kind=X[7],he(()=>l=!1)),r.$set(Vt),se[0]&2048&&q(i,X[11]);let $t=a;a=yt(X),a===$t?_e[a].p(X,se):(ne(),I(_e[$t],1,1,()=>{_e[$t]=null}),re(),f=_e[a],f?f.p(X,se):(f=_e[a]=Ye[a](X),f.c()),v(f,1),f.m(u,null)),(!pe||se[0]&8)&&b!==(b=((qt=X[3])==null?void 0:qt.currencyCode)+"")&&G(h,b),se[0]&4096&&C.value!==X[12]&&q(C,X[12]),(!pe||se[0]&4096)&&ie(C,"_2YSkZ",!dt(X[12])),X[14]?x?x.p(X,se):(x=tr(X),x.c(),x.m(e,w)):x&&(x.d(1),x=null),se[0]&512&&T.value!==X[9]&&q(T,X[9]),se[0]&1024&&(J.checked=X[10]),(!pe||se[0]&1)&&Me!==(Me=X[0]?"Save":"Create")&&G(Ve,Me)},i(X){pe||(v(r.$$.fragment,X),v(f),v(we.$$.fragment,X),pe=!0)},o(X){I(r.$$.fragment,X),I(f),I(we.$$.fragment,X),pe=!1},d(X){X&&E(e),B(r),_e[a].d(),t[28](null),x&&x.d(),B(we),qe=!1,oe(xe)}}}function Xs(t,e,n){let r,l,s,o,i,c;W(t,$e,Y=>n(32,i=Y)),W(t,ce,Y=>n(20,c=Y));let{accountId:u}=e,{transactionDoc:a=null}=e,f,d,_;Ze(()=>{});let{kind:g=le.Expense,categoryId:b,secondAccountId:h,comment:$="",reconciled:C=!1}=a||{},k=Wl(new Date((a==null?void 0:a.timestamp)||Date.now())),w=a?Z(a.amount):"",S=a?Z(a.secondAmount):"";const T=je();async function P(){const Y=N();if(Y){alert(Y);return}if(g!==le.Transfer&&!b&&_.trim()!==""){const[Ye,_e=""]=_.trim().split(":");if(!i.find(x=>x.title===Ye&&x.subtitle===_e)){const x=await hr(Ye,_e);n(8,b=x.id)}}const et=g===le.Transfer?{kind:g,timestamp:new Date(k).getTime(),accountId:u,secondAccountId:h,...o?{secondAmount:St(S)}:{},amount:St(w),comment:$.trim(),...C?{reconciled:!0}:{}}:{kind:g,timestamp:new Date(k).getTime(),accountId:u,categoryId:b||null,amount:St(w),comment:$.trim(),...C?{reconciled:!0}:{}};T("save",{params:et})}function N(){if(!dt(w))return"Invalid amount";if(g===le.Transfer){if(!h)return"Must choose the second account";if(h===u)return"Cannot transfer to the same account";if(o&&!dt(S))return"Invalid second amount"}return""}function L(){f.clear()}function J(Y){Y==="<"?n(12,w=w.substring(0,w.length-1)):n(12,w+=Y)}function de(Y){g=Y,n(7,g)}function Se(){k=this.value,n(11,k)}function we(Y){h=Y,n(1,h)}function Qe(Y){b=Y,n(8,b)}function Ue(Y){Q[Y?"unshift":"push"](()=>{f=Y,n(4,f)})}function Ee(Y){_=Y,n(6,_)}function Me(){w=this.value,n(12,w)}function Ve(Y){Q[Y?"unshift":"push"](()=>{d=Y,n(5,d)})}function pe(){S=this.value,n(13,S)}function qe(){$=this.value,n(9,$)}function xe(){C=this.checked,n(10,C)}return t.$$set=Y=>{"accountId"in Y&&n(18,u=Y.accountId),"transactionDoc"in Y&&n(0,a=Y.transactionDoc)},t.$$.update=()=>{t.$$.dirty[0]&1310720&&n(3,r=c.find(Y=>Y.id===u)),t.$$.dirty[0]&8&&n(19,l=r==null?void 0:r.currencyCode),t.$$.dirty[0]&1048578&&n(2,s=h?c.find(Y=>Y.id===h):null),t.$$.dirty[0]&524292&&n(14,o=s&&l?s.currencyCode!==l:!1)},[a,h,s,r,f,d,_,g,b,$,C,k,w,S,o,P,L,J,u,l,c,de,Se,we,Qe,Ue,Ee,Me,Ve,pe,qe,xe]}class vr extends V{constructor(e){super(),U(this,e,Xs,Ks,z,{accountId:18,transactionDoc:0},null,[-1,-1])}}function Ws(t){let e,n;return e=new vr({props:{accountId:t[2]}}),e.$on("save",t[6]),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p:D,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function Js(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:xs,then:Qs,catch:Zs,blocks:[,,,]};return cr(t[5](t[3]),r),{c(){e=te(),r.block.c()},m(l,s){A(l,e,s),r.block.m(l,r.anchor=s),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(l,s){t=l,Nr(r,t,s)},i(l){n||(v(r.block),n=!0)},o(l){for(let s=0;s<3;s+=1){const o=r.blocks[s];I(o)}n=!1},d(l){l&&E(e),r.block.d(l),r.token=null,r=null}}}function Zs(t){return{c:D,m:D,p:D,i:D,o:D,d:D}}function Qs(t){let e,n;return e=new vr({props:{accountId:t[2],transactionDoc:t[0]}}),e.$on("save",t[6]),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,l){const s={};l&1&&(s.transactionDoc=r[0]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function xs(t){return{c:D,m:D,p:D,i:D,o:D,d:D}}function ei(t){let e,n,r,l;const s=[Js,Ws],o=[];function i(c,u){return c[3]?0:1}return e=i(t),n=o[e]=s[e](t),{c(){n.c(),r=te()},m(c,u){o[e].m(c,u),A(c,r,u),l=!0},p(c,u){n.p(c,u)},i(c){l||(v(n),l=!0)},o(c){I(n),l=!1},d(c){c&&E(r),o[e].d(c)}}}function ti(t){let e,n;return e=new ae({props:{slot:"header",title:t[1]?`${t[1].title}: Transaction`:"Transaction",returnPath:`/accounts/${t[2]}`,menuItems:t[4]}}),e.$on("menu",t[9]),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,l){const s={};l&2&&(s.title=r[1]?`${r[1].title}: Transaction`:"Transaction"),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ni(t){let e,n;return e=new fe({props:{$$slots:{header:[ti],default:[ei]},$$scope:{ctx:t}}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},p(r,[l]){const s={};l&1027&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ri(t,e,n){let r,l;W(t,ce,_=>n(8,l=_));let{params:s}=e;const{id:o,tid:i}=s;let c;const u=i?[{id:"delete",title:"Delete"}]:null;async function a(_){n(0,c=await fl(_))}function f(_){i?il(c,_.detail.params).then(()=>{ee(`/accounts/${o}`)}):yl(_.detail.params).then(()=>{ee(`/accounts/${o}`)})}const d=_=>{switch(_.detail.id){case"delete":if(!confirm("Delete transaction?"))return!1;i&&sl(i).then(()=>{ee(`/accounts/${o}`)});break}};return t.$$set=_=>{"params"in _&&n(7,s=_.params)},t.$$.update=()=>{t.$$.dirty&256&&n(1,r=l.find(_=>_.id===o))},[c,r,o,i,u,a,f,s,l,d]}class nr extends V{constructor(e){super(),U(this,e,ri,ni,z,{params:7})}}function li(t){let e,n,r=t[0].wild+"",l;return{c(){e=y("div"),n=M("Page Not Found: /"),l=M(r)},m(s,o){A(s,e,o),p(e,n),p(e,l)},p(s,[o]){o&1&&r!==(r=s[0].wild+"")&&G(l,r)},i:D,o:D,d(s){s&&E(e)}}}function oi(t,e,n){let{params:r={}}=e;return t.$$set=l=>{"params"in l&&n(0,r=l.params)},[r]}class si extends V{constructor(e){super(),U(this,e,oi,li,z,{params:0})}}const ii={"/":ho,"/groups":wo,"/groups/new":yn,"/groups/:id":yn,"/accounts/new":vn,"/accounts/:id/edit":vn,"/accounts/:id":Yo,"/accounts/:id/transactions/new":nr,"/accounts/:id/transactions/:tid":nr,"/categories":Zo,"/categories/new":Vn,"/categories/:id":Vn,"/currencies":is,"/rates":ds,"/report":ys,"/currencies/new":qn,"/currencies/:cid":qn,"/settings":ns,"*":si};function ci(t){return{c:D,m:D,i:D,o:D,d:D}}function ui(t){let e,n;return e=new qr({props:{routes:ii}}),{c(){R(e.$$.fragment)},m(r,l){O(e,r,l),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){B(e,r)}}}function ai(t){return{c:D,m:D,i:D,o:D,d:D}}function fi(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:ai,then:ui,catch:ci,blocks:[,,,]};return cr(vl,r),{c(){e=te(),r.block.c()},m(l,s){A(l,e,s),r.block.m(l,r.anchor=s),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(l,[s]){t=l},i(l){n||(v(r.block),n=!0)},o(l){for(let s=0;s<3;s+=1){const o=r.blocks[s];I(o)}n=!1},d(l){l&&E(e),r.block.d(l),r.token=null,r=null}}}class di extends V{constructor(e){super(),U(this,e,null,fi,z,{})}}new di({target:document.getElementById("app")});
