var yr=Object.defineProperty;var wr=(t,e,n)=>e in t?yr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var mt=(t,e,n)=>(wr(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function A(){}function Et(t,e){for(const n in e)t[n]=e[n];return t}function vr(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function xn(t){return t()}function Ft(){return Object.create(null)}function ie(t){t.forEach(xn)}function We(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function kr(t){return Object.keys(t).length===0}function At(t,...e){if(t==null){for(const r of e)r(void 0);return A}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ut(t){let e;return At(t,n=>e=n)(),e}function Y(t,e,n){t.$$.on_destroy.push(At(e,n))}function Ze(t,e,n,r){if(t){const l=er(t,e,n,r);return t[0](l)}}function er(t,e,n,r){return t[1]&&r?Et(n.ctx.slice(),t[1](r(e))):n.ctx}function xe(t,e,n,r){if(t[2]&&r){const l=t[2](r(n));if(e.dirty===void 0)return l;if(typeof l=="object"){const s=[],o=Math.max(e.dirty.length,l.length);for(let i=0;i<o;i+=1)s[i]=e.dirty[i]|l[i];return s}return e.dirty|l}return e.dirty}function et(t,e,n,r,l,s){if(l){const o=er(e,n,r,s);t.p(o,l)}}function tt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Cr(t,e,n){return t.set(n),e}function ct(t){return t&&We(t.destroy)?t.destroy:A}function p(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function pe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function fe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function T(t){return document.createTextNode(t)}function D(){return T(" ")}function ee(){return T("")}function F(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function De(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Sr(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ir(t){return Array.from(t.childNodes)}function G(t,e){e=""+e,t.data!==e&&(t.data=e)}function U(t,e){t.value=e??""}function Be(t,e,n){for(let r=0;r<t.options.length;r+=1){const l=t.options[r];if(l.__value===e){l.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Dt(t){const e=t.querySelector(":checked");return e&&e.__value}function oe(t,e,n){t.classList.toggle(e,!!n)}function Er(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function nt(t,e){return new t(e)}let ze;function _e(t){ze=t}function Xe(){if(!ze)throw new Error("Function called outside component initialization");return ze}function Je(t){Xe().$$.on_mount.push(t)}function Ar(t){Xe().$$.after_update.push(t)}function Dr(t){Xe().$$.on_destroy.push(t)}function Te(){const t=Xe();return(e,n,{cancelable:r=!1}={})=>{const l=t.$$.callbacks[e];if(l){const s=Er(e,n,{cancelable:r});return l.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}function zt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Oe=[],Z=[];let Re=[];const wt=[],tr=Promise.resolve();let vt=!1;function nr(){vt||(vt=!0,tr.then(Tt))}function rr(){return nr(),tr}function Ge(t){Re.push(t)}function be(t){wt.push(t)}const ht=new Set;let Le=0;function Tt(){if(Le!==0)return;const t=ze;do{try{for(;Le<Oe.length;){const e=Oe[Le];Le++,_e(e),Tr(e.$$)}}catch(e){throw Oe.length=0,Le=0,e}for(_e(null),Oe.length=0,Le=0;Z.length;)Z.pop()();for(let e=0;e<Re.length;e+=1){const n=Re[e];ht.has(n)||(ht.add(n),n())}Re.length=0}while(Oe.length);for(;wt.length;)wt.pop()();vt=!1,ht.clear(),_e(t)}function Tr(t){if(t.fragment!==null){t.update(),ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ge)}}function jr(t){const e=[],n=[];Re.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Re=e}const Qe=new Set;let Ie;function te(){Ie={r:0,c:[],p:Ie}}function ne(){Ie.r||ie(Ie.c),Ie=Ie.p}function v(t,e){t&&t.i&&(Qe.delete(t),t.i(e))}function k(t,e,n,r){if(t&&t.o){if(Qe.has(t))return;Qe.add(t),Ie.c.push(()=>{Qe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function lr(t,e){const n=e.token={};function r(l,s,o,i){if(e.token!==n)return;e.resolved=i;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=i);const u=l&&(e.current=l)(c);let a=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==s&&f&&(te(),k(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),ne())}):e.block.d(1),u.c(),v(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[s]=u),a&&Tt()}if(vr(t)){const l=Xe();if(t.then(s=>{_e(l),r(e.then,1,e.value,s),_e(null)},s=>{if(_e(l),r(e.catch,2,e.error,s),_e(null),!e.hasCatch)throw s}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function Pr(t,e,n){const r=e.slice(),{resolved:l}=t;t.current===t.then&&(r[t.value]=l),t.current===t.catch&&(r[t.error]=l),t.block.p(r,n)}function V(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function He(t,e){t.d(1),e.delete(t.key)}function or(t,e){k(t,1,1,()=>{e.delete(t.key)})}function ye(t,e,n,r,l,s,o,i,c,u,a,f){let d=t.length,_=s.length,g=d;const b={};for(;g--;)b[t[g].key]=g;const h=[],y=new Map,w=new Map,E=[];for(g=_;g--;){const M=f(l,s,g),B=n(M);let j=o.get(B);j?r&&E.push(()=>j.p(M,e)):(j=u(B,M),j.c()),y.set(B,h[g]=j),B in b&&w.set(B,Math.abs(g-b[B]))}const I=new Set,P=new Set;function R(M){v(M,1),M.m(i,a),o.set(M.key,M),a=M.first,_--}for(;d&&_;){const M=h[_-1],B=t[d-1],j=M.key,K=B.key;M===B?(a=M.first,d--,_--):y.has(K)?!o.has(j)||I.has(j)?R(M):P.has(K)?d--:w.get(j)>w.get(K)?(P.add(j),R(M)):(I.add(K),d--):(c(B,o),d--)}for(;d--;){const M=t[d];y.has(M.key)||c(M,o)}for(;_;)R(h[_-1]);return ie(E),h}function rt(t,e){const n={},r={},l={$$scope:1};let s=t.length;for(;s--;){const o=t[s],i=e[s];if(i){for(const c in o)c in i||(r[c]=1);for(const c in i)l[c]||(n[c]=i[c],l[c]=1);t[s]=i}else for(const c in o)l[c]=1}for(const o in r)o in n||(n[o]=void 0);return n}function lt(t){return typeof t=="object"&&t!==null?t:{}}function $e(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function O(t){t&&t.c()}function L(t,e,n){const{fragment:r,after_update:l}=t.$$;r&&r.m(e,n),Ge(()=>{const s=t.$$.on_mount.map(xn).filter(We);t.$$.on_destroy?t.$$.on_destroy.push(...s):ie(s),t.$$.on_mount=[]}),l.forEach(Ge)}function N(t,e){const n=t.$$;n.fragment!==null&&(jr(n.after_update),ie(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Mr(t,e){t.$$.dirty[0]===-1&&(Oe.push(t),nr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(t,e,n,r,l,s,o=null,i=[-1]){const c=ze;_e(t);const u=t.$$={fragment:null,ctx:[],props:s,update:A,not_equal:l,bound:Ft(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ft(),dirty:i,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(f,d,..._)=>{const g=_.length?_[0]:d;return u.ctx&&l(u.ctx[f],u.ctx[f]=g)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](g),a&&Mr(t,f)),d}):[],u.update(),a=!0,ie(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=Ir(e.target);u.fragment&&u.fragment.l(f),f.forEach(C)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),L(t,e.target,e.anchor),Tt()}_e(c)}class W{constructor(){mt(this,"$$");mt(this,"$$set")}$destroy(){N(this,1),this.$destroy=A}$on(e,n){if(!We(n))return A;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const l=r.indexOf(n);l!==-1&&r.splice(l,1)}}$set(e){this.$$set&&!kr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Lr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Lr);const Ne=[];function sr(t,e){return{subscribe:me(t,e).subscribe}}function me(t,e=A){let n;const r=new Set;function l(i){if(z(t,i)&&(t=i,n)){const c=!Ne.length;for(const u of r)u[1](),Ne.push(u,t);if(c){for(let u=0;u<Ne.length;u+=2)Ne[u][0](Ne[u+1]);Ne.length=0}}}function s(i){l(i(t))}function o(i,c=A){const u=[i,c];return r.add(u),r.size===1&&(n=e(l,s)||A),i(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:l,update:s,subscribe:o}}function ir(t,e,n){const r=!Array.isArray(t),l=r?[t]:t;if(!l.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return sr(n,(o,i)=>{let c=!1;const u=[];let a=0,f=A;const d=()=>{if(a)return;f();const g=e(r?u[0]:u,o,i);s?o(g):f=We(g)?g:A},_=l.map((g,b)=>At(g,h=>{u[b]=h,a&=~(1<<b),c&&d()},()=>{a|=1<<b}));return c=!0,d(),function(){ie(_),f(),c=!1}})}function Nr(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,l,s,o=[],i="",c=t.split("/");for(c[0]||c.shift();l=c.shift();)n=l[0],n==="*"?(o.push("wild"),i+="/(.*)"):n===":"?(r=l.indexOf("?",1),s=l.indexOf(".",1),o.push(l.substring(1,~r?r:~s?s:l.length)),i+=~r&&!~s?"(?:/([^/]+?))?":"/([^/]+?)",~s&&(i+=(~r?"?":"")+"\\"+l.substring(s))):i+="/"+l;return{keys:o,pattern:new RegExp("^"+i+(e?"(?=$|/)":"/?$"),"i")}}function Or(t){let e,n,r;const l=[t[2]];var s=t[0];function o(i,c){let u={};if(c!==void 0&&c&4)u=rt(l,[lt(i[2])]);else for(let a=0;a<l.length;a+=1)u=Et(u,l[a]);return{props:u}}return s&&(e=nt(s,o(t)),e.$on("routeEvent",t[7])),{c(){e&&O(e.$$.fragment),n=ee()},m(i,c){e&&L(e,i,c),S(i,n,c),r=!0},p(i,c){if(c&1&&s!==(s=i[0])){if(e){te();const u=e;k(u.$$.fragment,1,0,()=>{N(u,1)}),ne()}s?(e=nt(s,o(i,c)),e.$on("routeEvent",i[7]),O(e.$$.fragment),v(e.$$.fragment,1),L(e,n.parentNode,n)):e=null}else if(s){const u=c&4?rt(l,[lt(i[2])]):{};e.$set(u)}},i(i){r||(e&&v(e.$$.fragment,i),r=!0)},o(i){e&&k(e.$$.fragment,i),r=!1},d(i){i&&C(n),e&&N(e,i)}}}function Rr(t){let e,n,r;const l=[{params:t[1]},t[2]];var s=t[0];function o(i,c){let u={};if(c!==void 0&&c&6)u=rt(l,[c&2&&{params:i[1]},c&4&&lt(i[2])]);else for(let a=0;a<l.length;a+=1)u=Et(u,l[a]);return{props:u}}return s&&(e=nt(s,o(t)),e.$on("routeEvent",t[6])),{c(){e&&O(e.$$.fragment),n=ee()},m(i,c){e&&L(e,i,c),S(i,n,c),r=!0},p(i,c){if(c&1&&s!==(s=i[0])){if(e){te();const u=e;k(u.$$.fragment,1,0,()=>{N(u,1)}),ne()}s?(e=nt(s,o(i,c)),e.$on("routeEvent",i[6]),O(e.$$.fragment),v(e.$$.fragment,1),L(e,n.parentNode,n)):e=null}else if(s){const u=c&6?rt(l,[c&2&&{params:i[1]},c&4&&lt(i[2])]):{};e.$set(u)}},i(i){r||(e&&v(e.$$.fragment,i),r=!0)},o(i){e&&k(e.$$.fragment,i),r=!1},d(i){i&&C(n),e&&N(e,i)}}}function Br(t){let e,n,r,l;const s=[Rr,Or],o=[];function i(c,u){return c[1]?0:1}return e=i(t),n=o[e]=s[e](t),{c(){n.c(),r=ee()},m(c,u){o[e].m(c,u),S(c,r,u),l=!0},p(c,[u]){let a=e;e=i(c),e===a?o[e].p(c,u):(te(),k(o[a],1,1,()=>{o[a]=null}),ne(),n=o[e],n?n.p(c,u):(n=o[e]=s[e](c),n.c()),v(n,1),n.m(r.parentNode,r))},i(c){l||(v(n),l=!0)},o(c){k(n),l=!1},d(c){c&&C(r),o[e].d(c)}}}function Vt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const jt=sr(null,function(e){e(Vt());const n=()=>{e(Vt())};return window.addEventListener("hashchange",n,!1),function(){window.removeEventListener("hashchange",n,!1)}});ir(jt,t=>t.location);ir(jt,t=>t.querystring);const qt=me(void 0);async function x(t){if(!t||t.length<1||t.charAt(0)!="/"&&t.indexOf("#/")!==0)throw Error("Invalid parameter location");await rr(),history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=(t.charAt(0)=="#"?"":"#")+t}function Pt(t,e){if(e=Xt(e),!t||!t.tagName||t.tagName.toLowerCase()!="a")throw Error('Action "link" can only be used with <a> tags');return Wt(t,e),{update(n){n=Xt(n),Wt(t,n)}}}function Gr(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function Wt(t,e){let n=e.href||t.getAttribute("href");if(n&&n.charAt(0)=="/")n="#"+n;else if(!n||n.length<2||n.slice(0,2)!="#/")throw Error('Invalid value for "href" attribute: '+n);t.setAttribute("href",n),t.addEventListener("click",r=>{r.preventDefault(),e.disabled||Hr(r.currentTarget.getAttribute("href"))})}function Xt(t){return t&&typeof t=="string"?{href:t}:t||{}}function Hr(t){history.replaceState({...history.state,__svelte_spa_router_scrollX:window.scrollX,__svelte_spa_router_scrollY:window.scrollY},void 0),window.location.hash=t}function Fr(t,e,n){let{routes:r={}}=e,{prefix:l=""}=e,{restoreScrollState:s=!1}=e;class o{constructor(P,R){if(!R||typeof R!="function"&&(typeof R!="object"||R._sveltesparouter!==!0))throw Error("Invalid component object");if(!P||typeof P=="string"&&(P.length<1||P.charAt(0)!="/"&&P.charAt(0)!="*")||typeof P=="object"&&!(P instanceof RegExp))throw Error('Invalid value for "path" argument - strings must start with / or *');const{pattern:M,keys:B}=Nr(P);this.path=P,typeof R=="object"&&R._sveltesparouter===!0?(this.component=R.component,this.conditions=R.conditions||[],this.userData=R.userData,this.props=R.props||{}):(this.component=()=>Promise.resolve(R),this.conditions=[],this.props={}),this._pattern=M,this._keys=B}match(P){if(l){if(typeof l=="string")if(P.startsWith(l))P=P.substr(l.length)||"/";else return null;else if(l instanceof RegExp){const j=P.match(l);if(j&&j[0])P=P.substr(j[0].length)||"/";else return null}}const R=this._pattern.exec(P);if(R===null)return null;if(this._keys===!1)return R;const M={};let B=0;for(;B<this._keys.length;){try{M[this._keys[B]]=decodeURIComponent(R[B+1]||"")||null}catch{M[this._keys[B]]=null}B++}return M}async checkConditions(P){for(let R=0;R<this.conditions.length;R++)if(!await this.conditions[R](P))return!1;return!0}}const i=[];r instanceof Map?r.forEach((I,P)=>{i.push(new o(P,I))}):Object.keys(r).forEach(I=>{i.push(new o(I,r[I]))});let c=null,u=null,a={};const f=Te();async function d(I,P){await rr(),f(I,P)}let _=null,g=null;s&&(g=I=>{I.state&&(I.state.__svelte_spa_router_scrollY||I.state.__svelte_spa_router_scrollX)?_=I.state:_=null},window.addEventListener("popstate",g),Ar(()=>{Gr(_)}));let b=null,h=null;const y=jt.subscribe(async I=>{b=I;let P=0;for(;P<i.length;){const R=i[P].match(I.location);if(!R){P++;continue}const M={route:i[P].path,location:I.location,querystring:I.querystring,userData:i[P].userData,params:R&&typeof R=="object"&&Object.keys(R).length?R:null};if(!await i[P].checkConditions(M)){n(0,c=null),h=null,d("conditionsFailed",M);return}d("routeLoading",Object.assign({},M));const B=i[P].component;if(h!=B){B.loading?(n(0,c=B.loading),h=B,n(1,u=B.loadingParams),n(2,a={}),d("routeLoaded",Object.assign({},M,{component:c,name:c.name,params:u}))):(n(0,c=null),h=null);const j=await B();if(I!=b)return;n(0,c=j&&j.default||j),h=B}R&&typeof R=="object"&&Object.keys(R).length?n(1,u=R):n(1,u=null),n(2,a=i[P].props),d("routeLoaded",Object.assign({},M,{component:c,name:c.name,params:u})).then(()=>{qt.set(u)});return}n(0,c=null),h=null,qt.set(void 0)});Dr(()=>{y(),g&&window.removeEventListener("popstate",g)});function w(I){zt.call(this,t,I)}function E(I){zt.call(this,t,I)}return t.$$set=I=>{"routes"in I&&n(3,r=I.routes),"prefix"in I&&n(4,l=I.prefix),"restoreScrollState"in I&&n(5,s=I.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=s?"manual":"auto")},[c,u,a,r,l,s,w,E]}class Ur extends W{constructor(e){super(),q(this,e,Fr,Br,z,{routes:3,prefix:4,restoreScrollState:5})}}const zr=(t,e)=>e.some(n=>t instanceof n);let Jt,Yt;function Vr(){return Jt||(Jt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qr(){return Yt||(Yt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cr=new WeakMap,kt=new WeakMap,ur=new WeakMap,gt=new WeakMap,Mt=new WeakMap;function Wr(t){const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ge(t.result)),l()},o=()=>{r(t.error),l()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cr.set(n,t)}).catch(()=>{}),Mt.set(e,t),e}function Xr(t){if(kt.has(t))return;const e=new Promise((n,r)=>{const l=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),l()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),l()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});kt.set(t,e)}let Ct={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kt.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ur.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ge(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Jr(t){Ct=t(Ct)}function Yr(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bt(this),e,...n);return ur.set(r,e.sort?e.sort():[e]),ge(r)}:qr().includes(t)?function(...e){return t.apply(bt(this),e),ge(cr.get(this))}:function(...e){return ge(t.apply(bt(this),e))}}function Kr(t){return typeof t=="function"?Yr(t):(t instanceof IDBTransaction&&Xr(t),zr(t,Vr())?new Proxy(t,Ct):t)}function ge(t){if(t instanceof IDBRequest)return Wr(t);if(gt.has(t))return gt.get(t);const e=Kr(t);return e!==t&&(gt.set(t,e),Mt.set(e,t)),e}const bt=t=>Mt.get(t);function Qr(t,e,{blocked:n,upgrade:r,blocking:l,terminated:s}={}){const o=indexedDB.open(t,e),i=ge(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ge(o.result),c.oldVersion,c.newVersion,ge(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),i.then(c=>{s&&c.addEventListener("close",()=>s()),l&&c.addEventListener("versionchange",u=>l(u.oldVersion,u.newVersion,u))}).catch(()=>{}),i}const Zr=["get","getKey","getAll","getAllKeys","count"],xr=["put","add","delete","clear"],$t=new Map;function Kt(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($t.get(e))return $t.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=xr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||Zr.includes(n)))return;const s=async function(o,...i){const c=this.transaction(o,l?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(i.shift())),(await Promise.all([u[n](...i),l&&c.done]))[0]};return $t.set(e,s),s}Jr(t=>({...t,get:(e,n,r)=>Kt(e,n)||t.get(e,n,r),has:(e,n)=>!!Kt(e,n)||t.has(e,n)}));let Ee=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");var se=(t=>(t.Expense="EXPENSE",t.Income="INCOME",t.Transfer="TRANSFER",t))(se||{});const ce=me([]),we=me([]),ve=me([]),je=me([]),ar=me([]),Ve=me(""),ut=me({}),Qt=[{value:se.Expense,title:"Expense"},{value:se.Transfer,title:"Transfer"},{value:se.Income,title:"Income"}],ot="baseCurrencyCode";let H;const el=Qr("acc",3,{upgrade(t,e,n,r){if(t.objectStoreNames.contains("accountGroups")||t.createObjectStore("accountGroups",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("accounts")||t.createObjectStore("accounts",{keyPath:"id"}).createIndex("title","title"),t.objectStoreNames.contains("currencies")||t.createObjectStore("currencies",{keyPath:"code"}),t.objectStoreNames.contains("categories")||t.createObjectStore("categories",{keyPath:"id"}).createIndex("title",["title","subtitle"]),t.objectStoreNames.contains("entries")||t.createObjectStore("entries",{keyPath:"id"}).createIndex("accountId","accountId"),!t.objectStoreNames.contains("transactions"))t.createObjectStore("transactions",{keyPath:"id"}).createIndex("timestamp","timestamp");else{const l=r.objectStore("transactions");console.log("store already exists, creating index"),l.createIndex("timestamp","timestamp")}t.objectStoreNames.contains("settings")||t.createObjectStore("settings",{keyPath:"name"}),t.objectStoreNames.contains("rates")||t.createObjectStore("rates",{keyPath:"code"})}}).then(t=>{H=t});function Pe(){return H.getAllFromIndex("accounts","title")}function tl(t){return H.get("accounts",t)}async function nl(t){await H.put("accounts",t),ce.set(await Pe())}async function rl(t){const e=await H.get("transactions",t);await Promise.all([H.delete("transactions",t),H.delete("entries",e.entryId),e.secondEntryId?H.delete("entries",e.secondEntryId):null]),await Promise.all([Ae(e.accountId),e.secondAccountId?Ae(e.secondAccountId):null]),ce.set(await Pe())}async function ll(t,e){const[n,r]=await Promise.all([H.get("entries",t.entryId),t.secondEntryId?H.get("entries",t.secondEntryId):null]),[l,s,o]=_r(e,t.id,n.id,r?r.id:Ee(5));await Promise.all([H.put("transactions",l),H.put("entries",s),o?r?H.put("entries",o):H.add("entries",o):r?H.delete("entries",r.id):null]);const[i,c]=await Promise.all([Ae(l.accountId),l.secondAccountId?Ae(l.secondAccountId):null,t.secondAccountId&&t.secondAccountId!==e.secondAccountId?Ae(t.secondAccountId):null]);(i||c)&&ce.set(await Pe())}function at(){return H.getAllFromIndex("accountGroups","title")}function ft(){return H.getAllFromIndex("categories","title")}function dt(){return H.getAll("currencies")}function ol(){return H.getAll("settings")}async function sl(){return(await H.getAll("rates")).reduce((e,n)=>(e[n.code]=n.rate,e),{})}async function fr(t,e=!0){return(await H.getAllFromIndex("entries","accountId",t)).sort((r,l)=>r.timestamp<l.timestamp?e?1:-1:r.timestamp>l.timestamp?e?-1:1:0)}async function il(t,e){return await H.getAllFromIndex("transactions","timestamp",IDBKeyRange.bound(t,e,!1,!0))}function cl(t){return H.get("transactions",t)}async function ul(t,e){await H.put("accountGroups",{id:Ee(5),currencyCode:e,title:t}),we.set(await at())}async function al(t){await H.put("accountGroups",t),we.set(await at())}async function fl(t,e,n){await H.put("accounts",{id:Ee(5),title:t,groupId:e,currencyCode:n,balance:0}),ce.set(await Pe())}async function dl(t,e){await H.put("categories",{id:Ee(5),title:t,subtitle:e}),ve.set(await ft())}async function dr(t){await H.put("settings",t)}async function _l(t,e){const n={};await H.delete("rates",e),await Promise.all(t.map(r=>(n[r.code]=r.rate,H.put("rates",r)))),ut.set(n)}async function pl(t){await H.put("categories",t),ve.set(await ft())}async function ml(t,e){await H.put("currencies",{code:t,title:e}),je.set(await dt())}async function hl(t){await H.put("currencies",t),je.set(await dt())}function _r({kind:t,accountId:e,timestamp:n,categoryId:r,secondAccountId:l,secondAmount:s,amount:o,comment:i,reconciled:c},u,a,f){const d={id:a,timestamp:n,accountId:e,...r?{categoryId:r}:{},transactionId:u,comment:i,amount:t===se.Income?o:-o,total:0,...c?{reconciled:c}:{}};if(t===se.Transfer){const _={id:f,timestamp:n,accountId:l,transactionId:u,comment:i,amount:s||o,total:0,...c?{reconciled:c}:{}};return[{id:u,kind:t,timestamp:n,accountId:e,secondAccountId:l,amount:o,...s?{secondAmount:s}:{},comment:i,entryId:d.id,secondEntryId:_.id,...c?{reconciled:c}:{}},d,_]}else return[{id:u,kind:t,timestamp:n,accountId:e,...r?{categoryId:r}:{},amount:o,comment:i,entryId:d.id,...c?{reconciled:c}:{}},d]}async function Ae(t){const e=await fr(t,!1);let n=0;for(const l of e)n+=l.amount,l.total!==n&&await H.put("entries",{...l,total:n});const r=await tl(t);return r.balance!==n?(await H.put("accounts",{...r,balance:n}),!0):!1}async function gl(t){const e=H.transaction(["entries","transactions"],"readwrite"),n=e.objectStore("entries"),r=e.objectStore("transactions"),[l,s,o]=_r(t,Ee(5),Ee(5),Ee(5));await Promise.all([r.add(l),n.add(s),...o?[n.add(o)]:[],e.done]);const[i,c]=await Promise.all([Ae(l.accountId),l.secondAccountId?Ae(l.secondAccountId):!1]);(i||c)&&ce.set(await Pe())}async function pr(){const[t,e,n,r,l,s]=await Promise.all([Pe(),at(),ft(),dt(),ol(),sl()]);je.set(r),we.set(e),ce.set(t),ve.set(n),ar.set(l);const o=bl(l);Ve.set(o),delete s[o],ut.set(s)}function bl(t){for(const e of t)if(e.name===ot)return e.value;return""}async function $l(){await el,await pr()}const yl=$l();function wl(t){function e(r){r.target instanceof Node&&t.hasAttribute("data-opened")&&(t.contains(r.target)||t.removeAttribute("data-opened"))}function n(r){r.code==="Escape"&&t.hasAttribute("data-opened")&&t.removeAttribute("data-opened")}return document.addEventListener("click",e),document.addEventListener("keydown",n),{destroy(){document.removeEventListener("keydown",n),document.removeEventListener("click",e)}}}const vl=t=>({}),Zt=t=>({});function kl(t){let e,n,r,l,s,o,i,c;const u=t[6].default,a=Ze(u,t,t[5],null),f=t[6].content,d=Ze(f,t,t[5],Zt);return{c(){e=$("div"),n=$("div"),a&&a.c(),r=D(),l=$("div"),d&&d.c(),m(n,"class","_2SXNm"),m(l,"class","_27WQU"),m(l,"data-role","popover"),m(e,"class",s="_2LTIc "+t[0])},m(_,g){S(_,e,g),p(e,n),a&&a.m(n,null),p(e,r),p(e,l),d&&d.m(l,null),t[8](e),o=!0,i||(c=[F(n,"click",function(){We(t[1]&&t[7])&&(t[1]&&t[7]).apply(this,arguments)}),ct(wl.call(null,e))],i=!0)},p(_,[g]){t=_,a&&a.p&&(!o||g&32)&&et(a,u,t,t[5],o?xe(u,t[5],g,null):tt(t[5]),null),d&&d.p&&(!o||g&32)&&et(d,f,t,t[5],o?xe(f,t[5],g,vl):tt(t[5]),Zt),(!o||g&1&&s!==(s="_2LTIc "+t[0]))&&m(e,"class",s)},i(_){o||(v(a,_),v(d,_),o=!0)},o(_){k(a,_),k(d,_),o=!1},d(_){_&&C(e),a&&a.d(_),d&&d.d(_),t[8](null),i=!1,ie(c)}}}function Cl(t,e,n){let{$$slots:r={},$$scope:l}=e,s,{class:o=void 0}=e,{clickToggle:i=!0}=e;function c(){s.toggleAttribute("data-opened",!1)}function u(){s.toggleAttribute("data-opened",!0)}const a=()=>{s.toggleAttribute("data-opened")};function f(d){Z[d?"unshift":"push"](()=>{s=d,n(2,s)})}return t.$$set=d=>{"class"in d&&n(0,o=d.class),"clickToggle"in d&&n(1,i=d.clickToggle),"$$scope"in d&&n(5,l=d.$$scope)},[o,i,s,c,u,l,r,a,f]}class mr extends W{constructor(e){super(),q(this,e,Cl,kl,z,{class:0,clickToggle:1,close:3,show:4})}get close(){return this.$$.ctx[3]}get show(){return this.$$.ctx[4]}}function xt(t,e,n){const r=t.slice();return r[3]=e[n],r}function Sl(t){let e,n=t[3].title+"",r;return{c(){e=$("span"),r=T(n),m(e,"class","_2YoB_")},m(l,s){S(l,e,s),p(e,r)},p(l,s){s&1&&n!==(n=l[3].title+"")&&G(r,n)},d(l){l&&C(e)}}}function Il(t){let e,n=t[3].title+"",r,l,s,o;return{c(){e=$("a"),r=T(n),m(e,"class","_2blFf"),m(e,"href",l=t[3].to),m(e,"draggable",!1)},m(i,c){S(i,e,c),p(e,r),s||(o=ct(Pt.call(null,e)),s=!0)},p(i,c){c&1&&n!==(n=i[3].title+"")&&G(r,n),c&1&&l!==(l=i[3].to)&&m(e,"href",l)},d(i){i&&C(e),s=!1,o()}}}function en(t,e){let n,r,l,s,o;function i(a,f){return a[3].to?Il:Sl}let c=i(e),u=c(e);return{key:t,first:null,c(){n=$("li"),u.c(),r=D(),m(n,"class","_161ne"),m(n,"data-id",l=e[3].id),this.first=n},m(a,f){S(a,n,f),u.m(n,null),p(n,r),s||(o=F(n,"click",e[2]),s=!0)},p(a,f){e=a,c===(c=i(e))&&u?u.p(e,f):(u.d(1),u=c(e),u&&(u.c(),u.m(n,r))),f&1&&l!==(l=e[3].id)&&m(n,"data-id",l)},d(a){a&&C(n),u.d(),s=!1,o()}}}function El(t){let e,n=[],r=new Map,l=V(t[0]);const s=o=>o[3].id;for(let o=0;o<l.length;o+=1){let i=xt(t,l,o),c=s(i);r.set(c,n[o]=en(c,i))}return{c(){e=$("ul");for(let o=0;o<n.length;o+=1)n[o].c();m(e,"class","_4OB04")},m(o,i){S(o,e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null)},p(o,[i]){i&3&&(l=V(o[0]),n=ye(n,i,s,1,o,l,r,e,He,en,null,xt))},i:A,o:A,d(o){o&&C(e);for(let i=0;i<n.length;i+=1)n[i].d()}}}function Al(t,e,n){let{items:r=[]}=e;const l=Te(),s=o=>{l("menu",{id:o.currentTarget.dataset.id})};return t.$$set=o=>{"items"in o&&n(0,r=o.items)},[r,l,s]}class Dl extends W{constructor(e){super(),q(this,e,Al,El,z,{items:0})}}function Tl(t){let e,n,r;return{c(){e=fe("svg"),n=fe("line"),r=fe("polyline"),m(n,"x1","19"),m(n,"y1","12"),m(n,"x2","5"),m(n,"y2","12"),m(r,"points","12 19 5 12 12 5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-arrow-left")},m(l,s){S(l,e,s),p(e,n),p(e,r)},p(l,[s]){s&1&&m(e,"width",l[0]),s&1&&m(e,"height",l[0])},i:A,o:A,d(l){l&&C(e)}}}function jl(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Pl extends W{constructor(e){super(),q(this,e,jl,Tl,z,{size:0})}}function Ml(t){let e,n,r;return{c(){e=fe("svg"),n=fe("line"),r=fe("line"),m(n,"x1","12"),m(n,"y1","5"),m(n,"x2","12"),m(n,"y2","19"),m(r,"x1","5"),m(r,"y1","12"),m(r,"x2","19"),m(r,"y2","12"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-plus")},m(l,s){S(l,e,s),p(e,n),p(e,r)},p(l,[s]){s&1&&m(e,"width",l[0]),s&1&&m(e,"height",l[0])},i:A,o:A,d(l){l&&C(e)}}}function Ll(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Nl extends W{constructor(e){super(),q(this,e,Ll,Ml,z,{size:0})}}function Ol(t){let e,n,r,l;return{c(){e=fe("svg"),n=fe("line"),r=fe("line"),l=fe("line"),m(n,"x1","3"),m(n,"y1","12"),m(n,"x2","21"),m(n,"y2","12"),m(r,"x1","3"),m(r,"y1","6"),m(r,"x2","21"),m(r,"y2","6"),m(l,"x1","3"),m(l,"y1","18"),m(l,"x2","21"),m(l,"y2","18"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"width",t[0]),m(e,"height",t[0]),m(e,"viewBox","0 0 24 24"),m(e,"fill","none"),m(e,"stroke","currentColor"),m(e,"stroke-width","2"),m(e,"stroke-linecap","round"),m(e,"stroke-linejoin","round"),m(e,"class","feather feather-menu")},m(s,o){S(s,e,o),p(e,n),p(e,r),p(e,l)},p(s,[o]){o&1&&m(e,"width",s[0]),o&1&&m(e,"height",s[0])},i:A,o:A,d(s){s&&C(e)}}}function Rl(t,e,n){let{size:r=24}=e;return t.$$set=l=>{"size"in l&&n(0,r=l.size)},[r]}class Bl extends W{constructor(e){super(),q(this,e,Rl,Ol,z,{size:0})}}function tn(t){let e,n,r,l,s;return n=new Pl({}),{c(){e=$("a"),O(n.$$.fragment),m(e,"class","_3SB3X"),m(e,"href",t[1]),m(e,"draggable",!1)},m(o,i){S(o,e,i),L(n,e,null),r=!0,l||(s=ct(Pt.call(null,e)),l=!0)},p(o,i){(!r||i&2)&&m(e,"href",o[1])},i(o){r||(v(n.$$.fragment,o),r=!0)},o(o){k(n.$$.fragment,o),r=!1},d(o){o&&C(e),N(n),l=!1,s()}}}function nn(t){let e,n,r,l,s;return n=new Nl({}),{c(){e=$("a"),O(n.$$.fragment),m(e,"class","_3SB3X"),m(e,"href",t[2]),m(e,"draggable",!1)},m(o,i){S(o,e,i),L(n,e,null),r=!0,l||(s=ct(Pt.call(null,e)),l=!0)},p(o,i){(!r||i&4)&&m(e,"href",o[2])},i(o){r||(v(n.$$.fragment,o),r=!0)},o(o){k(n.$$.fragment,o),r=!1},d(o){o&&C(e),N(n),l=!1,s()}}}function rn(t){let e,n,r={class:"_1qXOD",$$slots:{content:[Hl],default:[Gl]},$$scope:{ctx:t}};return e=new mr({props:r}),t[7](e),{c(){O(e.$$.fragment)},m(l,s){L(e,l,s),n=!0},p(l,s){const o={};s&280&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){t[7](null),N(e,l)}}}function Gl(t){let e,n;return e=new Bl({}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Hl(t){let e,n;return e=new Dl({props:{slot:"content",items:t[3]}}),e.$on("menu",t[6]),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const s={};l&8&&(s.items=r[3]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Fl(t){let e,n,r,l,s,o,i,c,u,a=t[1]&&tn(t),f=t[2]&&nn(t),d=t[3]&&rn(t);return{c(){e=$("header"),n=$("div"),a&&a.c(),r=D(),l=$("h1"),s=T(t[0]),o=D(),i=$("div"),f&&f.c(),c=D(),d&&d.c(),m(n,"class","_1J780"),m(l,"class","_17FA5"),m(i,"class","_3ifcR"),m(e,"class","_2Jb6S")},m(_,g){S(_,e,g),p(e,n),a&&a.m(n,null),p(e,r),p(e,l),p(l,s),p(e,o),p(e,i),f&&f.m(i,null),p(i,c),d&&d.m(i,null),u=!0},p(_,[g]){_[1]?a?(a.p(_,g),g&2&&v(a,1)):(a=tn(_),a.c(),v(a,1),a.m(n,null)):a&&(te(),k(a,1,1,()=>{a=null}),ne()),(!u||g&1)&&G(s,_[0]),_[2]?f?(f.p(_,g),g&4&&v(f,1)):(f=nn(_),f.c(),v(f,1),f.m(i,c)):f&&(te(),k(f,1,1,()=>{f=null}),ne()),_[3]?d?(d.p(_,g),g&8&&v(d,1)):(d=rn(_),d.c(),v(d,1),d.m(i,null)):d&&(te(),k(d,1,1,()=>{d=null}),ne())},i(_){u||(v(a),v(f),v(d),u=!0)},o(_){k(a),k(f),k(d),u=!1},d(_){_&&C(e),a&&a.d(),f&&f.d(),d&&d.d()}}}function Ul(t,e,n){let{title:r}=e,{returnPath:l=void 0}=e,{addPath:s=void 0}=e,{menuItems:o=null}=e,i=null;const c=Te(),u=f=>{i.close(),c("menu",{id:f.detail.id})};function a(f){Z[f?"unshift":"push"](()=>{i=f,n(4,i)})}return t.$$set=f=>{"title"in f&&n(0,r=f.title),"returnPath"in f&&n(1,l=f.returnPath),"addPath"in f&&n(2,s=f.addPath),"menuItems"in f&&n(3,o=f.menuItems)},[r,l,s,o,i,c,u,a]}class ue extends W{constructor(e){super(),q(this,e,Ul,Fl,z,{title:0,returnPath:1,addPath:2,menuItems:3})}}const zl=t=>({}),ln=t=>({});function Vl(t){let e,n,r;const l=t[1].header,s=Ze(l,t,t[0],ln),o=t[1].default,i=Ze(o,t,t[0],null);return{c(){e=$("main"),s&&s.c(),n=D(),i&&i.c(),m(e,"class","_2HUC4")},m(c,u){S(c,e,u),s&&s.m(e,null),p(e,n),i&&i.m(e,null),r=!0},p(c,[u]){s&&s.p&&(!r||u&1)&&et(s,l,c,c[0],r?xe(l,c[0],u,zl):tt(c[0]),ln),i&&i.p&&(!r||u&1)&&et(i,o,c,c[0],r?xe(o,c[0],u,null):tt(c[0]),null)},i(c){r||(v(s,c),v(i,c),r=!0)},o(c){k(s,c),k(i,c),r=!1},d(c){c&&C(e),s&&s.d(c),i&&i.d(c)}}}function ql(t,e,n){let{$$slots:r={},$$scope:l}=e;return t.$$set=s=>{"$$scope"in s&&n(0,l=s.$$scope)},[l,r]}class ae extends W{constructor(e){super(),q(this,e,ql,Vl,z,{})}}const Wl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Xl(t){const e=t.getTimezoneOffset()*6e4,n=new Date(t.getTime()-e),r=n.getFullYear(),l=String(n.getUTCMonth()+1).padStart(2,"0"),s=String(n.getUTCDate()).padStart(2,"0"),o=String(n.getUTCHours()).padStart(2,"0"),i=String(n.getUTCMinutes()).padStart(2,"0");return`${r}-${l}-${s}T${o}:${i}`}function st(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=r.getFullYear(),s=String(r.getUTCMonth()+1).padStart(2,"0"),o=String(r.getUTCDate()).padStart(2,"0"),i=String(r.getUTCHours()).padStart(2,"0"),c=String(r.getUTCMinutes()).padStart(2,"0");return`${l}-${s}-${o} ${i}:${c}`}function Jl(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=r.getUTCFullYear(),s=String(r.getUTCMonth()+1).padStart(2,"0"),o=String(r.getUTCDate()).padStart(2,"0"),i=Wl[r.getUTCDay()];return`${l}-${s}-${o} ${i}`}function on(t){const e=new Date(t),n=e.getTimezoneOffset()*6e4,r=new Date(e.getTime()-n),l=String(r.getUTCHours()).padStart(2,"0"),s=String(r.getUTCMinutes()).padStart(2,"0");return`${l}:${s}`}function it(t){return/^[1-9]\d*([.,]\d{1,2})?$/.test(t)}function yt(t){if(/[.,]/.test(t)){let[e,n]=t.split(/[.,]/);return n.length===1&&(n=n+"0"),parseInt(e+n)}else return parseInt(t)*100}function Q(t,e,n){t=Math.round(t);const r=t<0?Math.ceil(t/100):Math.floor(t/100),l=Math.abs(t%100);return(n&&t>0?"+":"")+`${e?Yl(r):r}.${String(l).padStart(2,"0")}`}function hr(t,e){const n=Ut(ut),r=Ut(Ve),l=n[t]?n[t]:1;return e===r?l:n[e]?l/n[e]:1}function Yl(t,e=" "){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)}function Kl(t,e){return t.reduce((n,r)=>(r.currencyCode===e?n+=r.balance:n+=r.balance*hr(r.currencyCode,e),n),0)}function Ql(t,e){const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=e,l.click(),URL.revokeObjectURL(r)}function Zl(t){const e=document.createElement("input");e.type="file",e.accept="application/json",e.multiple=!1,e.onchange=()=>{const n=e.files[0];if(n){const r=new FileReader;r.onload=function(){t(r.result)},r.readAsText(n)}},e.click()}function xl(t){try{return JSON.parse(t)}catch{return console.warn("JSON parsing failed."),null}}async function eo(){const[t,e,n,r,l,s,o,i]=await Promise.all([dt(),at(),Pe(),ft(),H.getAll("transactions"),H.getAll("entries"),H.getAll("settings"),H.getAll("rates")]);return{ver:st(Date.now()),currencies:t,accountGroups:e,accounts:n,categories:r,transactions:l,entries:s,settings:o,rates:i}}async function to(t){if(!confirm("All the data will be overwritten. Are you sure you want to continue?"))return!1;if(no(t)){const e=H.transaction(["currencies","accountGroups","accounts","categories","transactions","entries","settings","rates"],"readwrite");await Promise.all([e.objectStore("currencies").clear(),e.objectStore("accountGroups").clear(),e.objectStore("accounts").clear(),e.objectStore("categories").clear(),e.objectStore("transactions").clear(),e.objectStore("entries").clear(),e.objectStore("settings").clear(),e.objectStore("rates").clear()]);for(const n of t.currencies)await e.objectStore("currencies").put(n);for(const n of t.accountGroups)await e.objectStore("accountGroups").put(n);for(const n of t.accounts)await e.objectStore("accounts").put(n);for(const n of t.categories)await e.objectStore("categories").put(n);for(const n of t.transactions)await e.objectStore("transactions").put(n);for(const n of t.entries)await e.objectStore("entries").put(n);for(const n of t.settings)await e.objectStore("settings").put(n);for(const n of t.rates)await e.objectStore("rates").put(n);return await e.done,!0}else return alert("Invalid snapshot format."),!1}function no(t){return!(!t.ver||!t.currencies||!t.accountGroups||!t.categories||!t.categories||!t.transactions||!t.entries)}function ro(t){let e,n,r,l=t[0].title+"",s,o,i,c=Q(t[0].balance,!0)+"",u,a,f=t[0].currencyCode+"",d,_,g;return{c(){e=$("div"),n=$("div"),r=$("span"),s=T(l),o=D(),i=$("span"),u=T(c),a=D(),d=T(f),m(r,"class","_3HVLl"),m(n,"class","_1gfEY"),m(e,"class","_2kBg8"),m(e,"data-role","account")},m(b,h){S(b,e,h),p(e,n),p(n,r),p(r,s),p(n,o),p(n,i),p(i,u),p(i,a),p(i,d),_||(g=F(e,"click",t[3]),_=!0)},p(b,[h]){h&1&&l!==(l=b[0].title+"")&&G(s,l),h&1&&c!==(c=Q(b[0].balance,!0)+"")&&G(u,c),h&1&&f!==(f=b[0].currencyCode+"")&&G(d,f)},i:A,o:A,d(b){b&&C(e),_=!1,g()}}}function lo(t,e,n){let{account:r}=e,{editing:l=!1}=e;const s=Te(),o=()=>{l||s("account",{id:r.id})};return t.$$set=i=>{"account"in i&&n(0,r=i.account),"editing"in i&&n(1,l=i.editing)},[r,l,s,o]}class oo extends W{constructor(e){super(),q(this,e,lo,ro,z,{account:0,editing:1})}}function sn(t,e,n){const r=t.slice();return r[5]=e[n],r}function cn(t,e){let n,r,l;return r=new oo({props:{account:e[5]}}),r.$on("account",e[4]),{key:t,first:null,c(){n=ee(),O(r.$$.fragment),this.first=n},m(s,o){S(s,n,o),L(r,s,o),l=!0},p(s,o){e=s;const i={};o&2&&(i.account=e[5]),r.$set(i)},i(s){l||(v(r.$$.fragment,s),l=!0)},o(s){k(r.$$.fragment,s),l=!1},d(s){s&&C(n),N(r,s)}}}function so(t){let e,n,r,l=t[0].title+"",s,o,i,c=Q(t[2],!0)+"",u,a,f=t[0].currencyCode+"",d,_,g=[],b=new Map,h,y=V(t[1]);const w=E=>E[5].id;for(let E=0;E<y.length;E+=1){let I=sn(t,y,E),P=w(I);b.set(P,g[E]=cn(P,I))}return{c(){e=$("div"),n=$("div"),r=$("span"),s=T(l),o=D(),i=$("span"),u=T(c),a=D(),d=T(f),_=D();for(let E=0;E<g.length;E+=1)g[E].c();m(r,"class","_2RwqA"),m(n,"class","FmXIb")},m(E,I){S(E,e,I),p(e,n),p(n,r),p(r,s),p(n,o),p(n,i),p(i,u),p(i,a),p(i,d),p(e,_);for(let P=0;P<g.length;P+=1)g[P]&&g[P].m(e,null);h=!0},p(E,[I]){(!h||I&1)&&l!==(l=E[0].title+"")&&G(s,l),(!h||I&4)&&c!==(c=Q(E[2],!0)+"")&&G(u,c),(!h||I&1)&&f!==(f=E[0].currencyCode+"")&&G(d,f),I&2&&(y=V(E[1]),te(),g=ye(g,I,w,1,E,y,b,e,or,cn,null,sn),ne())},i(E){if(!h){for(let I=0;I<y.length;I+=1)v(g[I]);h=!0}},o(E){for(let I=0;I<g.length;I+=1)k(g[I]);h=!1},d(E){E&&C(e);for(let I=0;I<g.length;I+=1)g[I].d()}}}function io(t,e,n){let r,l,s;Y(t,ce,c=>n(3,s=c));let{accountGroup:o}=e;const i=c=>{x(`/accounts/${c.detail.id}`)};return t.$$set=c=>{"accountGroup"in c&&n(0,o=c.accountGroup)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=s.filter(c=>c.groupId===o.id)),t.$$.dirty&3&&n(2,l=Kl(r,o.currencyCode))},[o,r,l,s,i]}class co extends W{constructor(e){super(),q(this,e,io,so,z,{accountGroup:0})}}function un(t,e,n){const r=t.slice();return r[6]=e[n],r}function an(t){let e,n;return e=new co({props:{accountGroup:t[6]}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const s={};l&4&&(s.accountGroup=r[6]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function uo(t){let e,n,r,l,s,o=Q(t[1],!0)+"",i,c,u=(t[0]||"")+"",a,f,d=V(t[2]),_=[];for(let b=0;b<d.length;b+=1)_[b]=an(un(t,d,b));const g=b=>k(_[b],1,1,()=>{_[b]=null});return{c(){for(let b=0;b<_.length;b+=1)_[b].c();e=D(),n=$("div"),r=$("div"),r.textContent="Total",l=D(),s=$("div"),i=T(o),c=D(),a=T(u),m(s,"class","_2wBv"),m(n,"class","_3c4Tf")},m(b,h){for(let y=0;y<_.length;y+=1)_[y]&&_[y].m(b,h);S(b,e,h),S(b,n,h),p(n,r),p(n,l),p(n,s),p(s,i),p(s,c),p(s,a),f=!0},p(b,h){if(h&4){d=V(b[2]);let y;for(y=0;y<d.length;y+=1){const w=un(b,d,y);_[y]?(_[y].p(w,h),v(_[y],1)):(_[y]=an(w),_[y].c(),v(_[y],1),_[y].m(e.parentNode,e))}for(te(),y=d.length;y<_.length;y+=1)g(y);ne()}(!f||h&2)&&o!==(o=Q(b[1],!0)+"")&&G(i,o),(!f||h&1)&&u!==(u=(b[0]||"")+"")&&G(a,u)},i(b){if(!f){for(let h=0;h<d.length;h+=1)v(_[h]);f=!0}},o(b){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)k(_[h]);f=!1},d(b){b&&(C(e),C(n)),pe(_,b)}}}function ao(t){let e,n;return e=new ue({props:{slot:"header",title:"Accounts",addPath:"/accounts/new",menuItems:t[3]}}),e.$on("menu",t[5]),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function fo(t){let e,n;return e=new ae({props:{$$slots:{header:[ao],default:[uo]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&519&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function _o(t,e,n){let r,l,s,o;Y(t,Ve,u=>n(0,l=u)),Y(t,ce,u=>n(4,s=u)),Y(t,we,u=>n(2,o=u));const i=[{id:"groups",title:"Account Groups",to:"/groups"},{id:"category",title:"Categories",to:"/categories"},{id:"report",title:"Report",to:"/report"},{id:"currency",title:"Currencies",to:"/currencies"},{id:"rates",title:"Rates",to:"/rates"},{id:"backup",title:"Backup"},{id:"restore",title:"Restore"}],c=u=>{switch(u.detail.id){case"backup":eo().then(a=>{Ql(a,`${st(Date.now())}.json`)});break;case"restore":Zl(a=>{const f=xl(a);f&&to(f).then(d=>{d&&pr()})});break}};return t.$$.update=()=>{t.$$.dirty&17&&n(1,r=s.reduce((u,a)=>(a.currencyCode===l?u+=a.balance:u+=a.balance*hr(a.currencyCode,l),u),0))},[l,r,o,i,s,c]}class po extends W{constructor(e){super(),q(this,e,_o,fo,z,{})}}function fn(t,e,n){const r=t.slice();return r[2]=e[n],r}function dn(t,e){let n,r=e[2].title+"",l,s,o,i,c;return{key:t,first:null,c(){n=$("div"),l=T(r),s=D(),m(n,"class","_3JK5K"),m(n,"data-id",o=e[2].id),this.first=n},m(u,a){S(u,n,a),p(n,l),p(n,s),i||(c=F(n,"click",e[1]),i=!0)},p(u,a){e=u,a&1&&r!==(r=e[2].title+"")&&G(l,r),a&1&&o!==(o=e[2].id)&&m(n,"data-id",o)},d(u){u&&C(n),i=!1,c()}}}function mo(t){let e=[],n=new Map,r,l=V(t[0]);const s=o=>o[2].id;for(let o=0;o<l.length;o+=1){let i=fn(t,l,o),c=s(i);n.set(c,e[o]=dn(c,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=ee()},m(o,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,i);S(o,r,i)},p(o,i){i&3&&(l=V(o[0]),e=ye(e,i,s,1,o,l,n,r.parentNode,He,dn,r,fn))},d(o){o&&C(r);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function ho(t){let e,n;return e=new ue({props:{slot:"header",title:"Account Groups",returnPath:"/",addPath:"/groups/new"}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function go(t){let e,n;return e=new ae({props:{$$slots:{header:[ho],default:[mo]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&33&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function bo(t,e,n){let r;Y(t,we,s=>n(0,r=s));function l(s){s.target instanceof HTMLElement&&s.target.dataset.id&&x(`/groups/${s.target.dataset.id}`)}return[r,l]}class $o extends W{constructor(e){super(),q(this,e,bo,go,z,{})}}function _n(t,e,n){const r=t.slice();return r[4]=e[n].code,r[5]=e[n].title,r}function pn(t,e){let n,r,l=e[4]+"",s,o,i=e[5]+"",c,u,a;return{key:t,first:null,c(){n=T(`}
    `),r=$("option"),s=T(l),o=D(),c=T(i),u=D(),r.__value=a=e[4],U(r,r.__value),this.first=n},m(f,d){S(f,n,d),S(f,r,d),p(r,s),p(r,o),p(r,c),p(r,u)},p(f,d){e=f,d&4&&l!==(l=e[4]+"")&&G(s,l),d&4&&i!==(i=e[5]+"")&&G(c,i),d&4&&a!==(a=e[4])&&(r.__value=a,U(r,r.__value))},d(f){f&&(C(n),C(r))}}}function yo(t){let e,n,r,l=[],s=new Map,o,i,c=V(t[2]);const u=a=>a[4];for(let a=0;a<c.length;a+=1){let f=_n(t,c,a),d=u(f);s.set(d,l[a]=pn(d,f))}return{c(){e=$("select"),n=$("option"),r=T(t[1]);for(let a=0;a<l.length;a+=1)l[a].c();n.__value="",U(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_1kHx0"),e.required=!0,t[0]===void 0&&Ge(()=>t[3].call(e))},m(a,f){S(a,e,f),p(e,n),p(n,r);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(e,null);Be(e,t[0],!0),o||(i=F(e,"change",t[3]),o=!0)},p(a,[f]){f&2&&G(r,a[1]),f&4&&(c=V(a[2]),l=ye(l,f,u,1,a,c,s,e,He,pn,null,_n)),f&5&&Be(e,a[0])},i:A,o:A,d(a){a&&C(e);for(let f=0;f<l.length;f+=1)l[f].d();o=!1,i()}}}function wo(t,e,n){let r;Y(t,je,i=>n(2,r=i));let{currencyCode:l}=e,{placeholder:s="Currency"}=e;function o(){l=Dt(this),n(0,l)}return t.$$set=i=>{"currencyCode"in i&&n(0,l=i.currencyCode),"placeholder"in i&&n(1,s=i.placeholder)},[l,s,r,o]}class _t extends W{constructor(e){super(),q(this,e,wo,yo,z,{currencyCode:0,placeholder:1})}}function vo(t){let e,n,r,l,s,o,i,c,u,a,f=t[4]?"Save":"Create",d,_,g,b;function h(w){t[7](w)}let y={};return t[1]!==void 0&&(y.currencyCode=t[1]),r=new _t({props:y}),Z.push(()=>$e(r,"currencyCode",h)),{c(){e=$("form"),n=$("div"),O(r.$$.fragment),s=D(),o=$("div"),i=$("input"),c=D(),u=$("div"),a=$("button"),d=T(f),m(i,"class","_3xyX_"),m(i,"type","text"),i.disabled=t[3],m(i,"placeholder","Title"),m(a,"class","_2G9AC"),m(a,"type","submit"),a.disabled=t[3],m(e,"class","_3RSQr")},m(w,E){S(w,e,E),p(e,n),L(r,n,null),p(e,s),p(e,o),p(o,i),t[8](i),U(i,t[0]),p(e,c),p(e,u),p(u,a),p(a,d),_=!0,g||(b=[F(i,"input",t[9]),F(e,"submit",De(t[5]))],g=!0)},p(w,E){const I={};!l&&E&2&&(l=!0,I.currencyCode=w[1],be(()=>l=!1)),r.$set(I),(!_||E&8)&&(i.disabled=w[3]),E&1&&i.value!==w[0]&&U(i,w[0]),(!_||E&8)&&(a.disabled=w[3])},i(w){_||(v(r.$$.fragment,w),_=!0)},o(w){k(r.$$.fragment,w),_=!1},d(w){w&&C(e),N(r),t[8](null),g=!1,ie(b)}}}function ko(t){let e,n;return e=new ue({props:{slot:"header",title:t[4]?"Account Group":"New Account Group",returnPath:"/groups"}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Co(t){let e,n;return e=new ae({props:{$$slots:{header:[ko],default:[vo]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&4111&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function So(t,e,n){let r;Y(t,we,b=>n(10,r=b));let{params:l={}}=e;const{id:s}=l;let o=s?r.find(b=>b.id===s):null,i=o?o.title:"",c=o?o.currencyCode:void 0,u,a=!1;Je(()=>{u.focus()});function f(){i.trim()&&c?(n(3,a=!0),o?al({...o,title:i.trim(),currencyCode:c}).then(()=>{x("/groups")}).finally(()=>{n(3,a=!1)}):ul(i,c).then(()=>{x("/groups")}).finally(()=>{n(3,a=!1)})):alert("All fields must be specified.")}function d(b){c=b,n(1,c)}function _(b){Z[b?"unshift":"push"](()=>{u=b,n(2,u)})}function g(){i=this.value,n(0,i)}return t.$$set=b=>{"params"in b&&n(6,l=b.params)},[i,c,u,a,o,f,l,d,_,g]}class mn extends W{constructor(e){super(),q(this,e,So,Co,z,{params:6})}}function hn(t,e,n){const r=t.slice();return r[3]=e[n],r}function gn(t){let e,n=t[3].title+"",r,l,s;return{c(){e=$("option"),r=T(n),l=D(),e.__value=s=t[3].id,U(e,e.__value)},m(o,i){S(o,e,i),p(e,r),p(e,l)},p(o,i){i&2&&n!==(n=o[3].title+"")&&G(r,n),i&2&&s!==(s=o[3].id)&&(e.__value=s,U(e,e.__value))},d(o){o&&C(e)}}}function Io(t){let e,n,r,l,s=V(t[1]),o=[];for(let i=0;i<s.length;i+=1)o[i]=gn(hn(t,s,i));return{c(){e=$("select"),n=$("option"),n.textContent="Account Group";for(let i=0;i<o.length;i+=1)o[i].c();m(n,"class","placeholder"),n.__value="",U(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_2Ge4O"),e.required=!0,t[0]===void 0&&Ge(()=>t[2].call(e))},m(i,c){S(i,e,c),p(e,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);Be(e,t[0],!0),r||(l=F(e,"change",t[2]),r=!0)},p(i,[c]){if(c&2){s=V(i[1]);let u;for(u=0;u<s.length;u+=1){const a=hn(i,s,u);o[u]?o[u].p(a,c):(o[u]=gn(a),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=s.length}c&3&&Be(e,i[0])},i:A,o:A,d(i){i&&C(e),pe(o,i),r=!1,l()}}}function Eo(t,e,n){let r;Y(t,we,o=>n(1,r=o));let{groupId:l}=e;function s(){l=Dt(this),n(0,l)}return t.$$set=o=>{"groupId"in o&&n(0,l=o.groupId)},[l,r,s]}class Ao extends W{constructor(e){super(),q(this,e,Eo,Io,z,{groupId:0})}}function Do(t){let e,n,r,l,s,o,i,c,u,a,f,d,_,g,b=t[0]?"Save":"Create",h,y,w,E,I;function P(j){t[8](j)}let R={};t[2]!==void 0&&(R.groupId=t[2]),r=new Ao({props:R}),Z.push(()=>$e(r,"groupId",P));function M(j){t[9](j)}let B={};return t[3]!==void 0&&(B.currencyCode=t[3]),i=new _t({props:B}),Z.push(()=>$e(i,"currencyCode",M)),{c(){e=$("form"),n=$("div"),O(r.$$.fragment),s=D(),o=$("div"),O(i.$$.fragment),u=D(),a=$("div"),f=$("input"),d=D(),_=$("div"),g=$("button"),h=T(b),m(f,"class","_3hIGg"),m(f,"type","text"),m(f,"placeholder","Title"),f.disabled=t[5],m(g,"class","J-mxG"),m(g,"type","submit"),g.disabled=t[5],m(e,"class",y="_2Na6L "+t[1])},m(j,K){S(j,e,K),p(e,n),L(r,n,null),p(e,s),p(e,o),L(i,o,null),p(e,u),p(e,a),p(a,f),U(f,t[4]),t[11](f),p(e,d),p(e,_),p(_,g),p(g,h),w=!0,E||(I=[F(f,"input",t[10]),F(e,"submit",De(t[7]))],E=!0)},p(j,[K]){const ke={};!l&&K&4&&(l=!0,ke.groupId=j[2],be(()=>l=!1)),r.$set(ke);const Ce={};!c&&K&8&&(c=!0,Ce.currencyCode=j[3],be(()=>c=!1)),i.$set(Ce),(!w||K&32)&&(f.disabled=j[5]),K&16&&f.value!==j[4]&&U(f,j[4]),(!w||K&1)&&b!==(b=j[0]?"Save":"Create")&&G(h,b),(!w||K&32)&&(g.disabled=j[5]),(!w||K&2&&y!==(y="_2Na6L "+j[1]))&&m(e,"class",y)},i(j){w||(v(r.$$.fragment,j),v(i.$$.fragment,j),w=!0)},o(j){k(r.$$.fragment,j),k(i.$$.fragment,j),w=!1},d(j){j&&C(e),N(r),N(i),t[11](null),E=!1,ie(I)}}}function To(t,e,n){let{accountDoc:r=null}=e,{class:l=void 0}=e,{groupId:s,currencyCode:o,title:i=""}=r||{},c=!1,u;const a=Te();function f(){i.trim()&&s&&o?(n(5,c=!0),a("save",{groupId:s,currencyCode:o,title:i})):alert("Must fill all fields.")}Je(()=>{u&&u.focus()});function d(h){s=h,n(2,s)}function _(h){o=h,n(3,o)}function g(){i=this.value,n(4,i)}function b(h){Z[h?"unshift":"push"](()=>{u=h,n(6,u)})}return t.$$set=h=>{"accountDoc"in h&&n(0,r=h.accountDoc),"class"in h&&n(1,l=h.class)},[r,l,s,o,i,c,u,f,d,_,g,b]}class gr extends W{constructor(e){super(),q(this,e,To,Do,z,{accountDoc:0,class:1})}}function jo(t){let e,n;return e=new gr({props:{class:"_1tO9D"}}),e.$on("save",t[2]),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Po(t){let e,n;return e=new gr({props:{class:"_1tO9D",accountDoc:t[1]}}),e.$on("save",t[2]),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Mo(t){let e,n,r,l;const s=[Po,jo],o=[];function i(c,u){return c[0]?0:1}return e=i(t),n=o[e]=s[e](t),{c(){n.c(),r=ee()},m(c,u){o[e].m(c,u),S(c,r,u),l=!0},p(c,u){n.p(c,u)},i(c){l||(v(n),l=!0)},o(c){k(n),l=!1},d(c){c&&C(r),o[e].d(c)}}}function Lo(t){var r;let e,n;return e=new ue({props:{slot:"header",title:t[0]?(r=t[1])==null?void 0:r.title:"New Account",returnPath:"/"}}),{c(){O(e.$$.fragment)},m(l,s){L(e,l,s),n=!0},p:A,i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){N(e,l)}}}function No(t){let e,n;return e=new ae({props:{$$slots:{header:[Lo],default:[Mo]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&32&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Oo(t,e,n){let r;Y(t,ce,c=>n(4,r=c));let{params:l={}}=e;const{id:s}=l;let o=s?r.find(c=>c.id===s):null;function i(c){const{title:u,groupId:a,currencyCode:f}=c.detail;s?nl({...o,title:u,groupId:a,currencyCode:f}).then(()=>{x("/")}):fl(u,a,f).then(()=>{x("/")})}return t.$$set=c=>{"params"in c&&n(3,l=c.params)},[s,o,i,l]}class bn extends W{constructor(e){super(),q(this,e,Oo,No,z,{params:3})}}function $n(t){let e,n=t[1].title+"",r,l=t[1].subtitle?`:${t[1].subtitle}`:"",s;return{c(){e=$("span"),r=T(n),s=T(l),m(e,"class","_12oY6")},m(o,i){S(o,e,i),p(e,r),p(e,s)},p(o,i){i&2&&n!==(n=o[1].title+"")&&G(r,n),i&2&&l!==(l=o[1].subtitle?`:${o[1].subtitle}`:"")&&G(s,l)},d(o){o&&C(e)}}}function Ro(t){let e,n,r,l,s=t[0].comment+"",o,i,c,u,a=Q(t[0].amount,!0,!0)+"",f,d,_,g,b=on(t[0].timestamp)+"",h,y,w,E=Q(t[0].total,!0)+"",I,P,R,M=t[1]&&$n(t);return{c(){e=$("div"),n=$("div"),r=$("div"),l=$("span"),o=T(s),i=D(),M&&M.c(),c=D(),u=$("div"),f=T(a),d=D(),_=$("div"),g=$("div"),h=T(b),y=D(),w=$("div"),I=T(E),m(l,"class","BRMlm"),m(r,"class","_3ibZX"),m(u,"class","_2uKiq"),oe(u,"_2TC9s",t[0].amount>0),m(n,"class","_1RLk7"),m(g,"class","mm7AA"),m(w,"class","_1e2eL"),m(_,"class","_3_MwA"),m(e,"class","_3ieFT"),oe(e,"GILTz",t[0].reconciled)},m(B,j){S(B,e,j),p(e,n),p(n,r),p(r,l),p(l,o),p(r,i),M&&M.m(r,null),p(n,c),p(n,u),p(u,f),p(e,d),p(e,_),p(_,g),p(g,h),p(_,y),p(_,w),p(w,I),P||(R=F(e,"click",t[4]),P=!0)},p(B,[j]){j&1&&s!==(s=B[0].comment+"")&&G(o,s),B[1]?M?M.p(B,j):(M=$n(B),M.c(),M.m(r,null)):M&&(M.d(1),M=null),j&1&&a!==(a=Q(B[0].amount,!0,!0)+"")&&G(f,a),j&1&&oe(u,"_2TC9s",B[0].amount>0),j&1&&b!==(b=on(B[0].timestamp)+"")&&G(h,b),j&1&&E!==(E=Q(B[0].total,!0)+"")&&G(I,E),j&1&&oe(e,"GILTz",B[0].reconciled)},i:A,o:A,d(B){B&&C(e),M&&M.d(),P=!1,R()}}}function Bo(t,e,n){let r,l;Y(t,ve,c=>n(3,l=c));let{entry:s}=e;const o=Te(),i=()=>{o("transaction",{id:s.transactionId})};return t.$$set=c=>{"entry"in c&&n(0,s=c.entry)},t.$$.update=()=>{t.$$.dirty&9&&n(1,r=s.categoryId?l.find(c=>c.id===s.categoryId):null)},[s,r,o,l,i]}class Go extends W{constructor(e){super(),q(this,e,Bo,Ro,z,{entry:0})}}function yn(t,e,n){const r=t.slice();return r[7]=e[n],r}function wn(t,e,n){const r=t.slice();return r[10]=e[n],r}function vn(t,e){let n,r,l;return r=new Go({props:{entry:e[10]}}),r.$on("transaction",e[6]),{key:t,first:null,c(){n=ee(),O(r.$$.fragment),this.first=n},m(s,o){S(s,n,o),L(r,s,o),l=!0},p(s,o){e=s;const i={};o&1&&(i.entry=e[10]),r.$set(i)},i(s){l||(v(r.$$.fragment,s),l=!0)},o(s){k(r.$$.fragment,s),l=!1},d(s){s&&C(n),N(r,s)}}}function kn(t){let e,n,r=t[7]+"",l,s,o,i=Q(t[0][t[7]].total,!0,!0)+"",c,u,a=[],f=new Map,d,_,g=V(t[0][t[7]].entries);const b=h=>h[10].id;for(let h=0;h<g.length;h+=1){let y=wn(t,g,h),w=b(y);f.set(w,a[h]=vn(w,y))}return{c(){e=$("div"),n=$("span"),l=T(r),s=D(),o=$("span"),c=T(i),u=D();for(let h=0;h<a.length;h+=1)a[h].c();d=ee(),m(n,"class","AOdh"),m(o,"class","KP4vf"),m(e,"class","_1DJNy")},m(h,y){S(h,e,y),p(e,n),p(n,l),p(e,s),p(e,o),p(o,c),S(h,u,y);for(let w=0;w<a.length;w+=1)a[w]&&a[w].m(h,y);S(h,d,y),_=!0},p(h,y){(!_||y&1)&&r!==(r=h[7]+"")&&G(l,r),(!_||y&1)&&i!==(i=Q(h[0][h[7]].total,!0,!0)+"")&&G(c,i),y&5&&(g=V(h[0][h[7]].entries),te(),a=ye(a,y,b,1,h,g,f,d.parentNode,or,vn,d,wn),ne())},i(h){if(!_){for(let y=0;y<g.length;y+=1)v(a[y]);_=!0}},o(h){for(let y=0;y<a.length;y+=1)k(a[y]);_=!1},d(h){h&&(C(e),C(u),C(d));for(let y=0;y<a.length;y+=1)a[y].d(h)}}}function Ho(t){let e,n,r=V(Object.keys(t[0])),l=[];for(let o=0;o<r.length;o+=1)l[o]=kn(yn(t,r,o));const s=o=>k(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=ee()},m(o,i){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(o,i);S(o,e,i),n=!0},p(o,i){if(i&5){r=V(Object.keys(o[0]));let c;for(c=0;c<r.length;c+=1){const u=yn(o,r,c);l[c]?(l[c].p(u,i),v(l[c],1)):(l[c]=kn(u),l[c].c(),v(l[c],1),l[c].m(e.parentNode,e))}for(te(),c=r.length;c<l.length;c+=1)s(c);ne()}},i(o){if(!n){for(let i=0;i<r.length;i+=1)v(l[i]);n=!0}},o(o){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)k(l[i]);n=!1},d(o){o&&C(e),pe(l,o)}}}function Fo(t){let e,n;return e=new ue({props:{slot:"header",title:t[1]?`${t[1].title}`:"Not Found",returnPath:"/",addPath:`/accounts/${t[2]}/transactions/new`,menuItems:t[3]}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const s={};l&2&&(s.title=r[1]?`${r[1].title}`:"Not Found"),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Uo(t){let e,n;return e=new ae({props:{$$slots:{header:[Fo],default:[Ho]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&8195&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function zo(t,e,n){let r,l;Y(t,ce,a=>n(5,l=a));let{params:s}=e;const{id:o}=s;let i={};fr(o).then(a=>{n(0,i=a.reduce((f,d)=>{const _=Jl(d.timestamp);return f[_]?f[_].entries.push(d):f[_]={entries:[d],total:0},f},{}));for(const f of Object.values(i))f.total=f.entries.reduce((d,_)=>(d+=_.amount,d),0)});const c=[{id:"edit",title:"Edit",to:`/accounts/${o}/edit`}],u=a=>{x(`/accounts/${o}/transactions/${a.detail.id}`)};return t.$$set=a=>{"params"in a&&n(4,s=a.params)},t.$$.update=()=>{t.$$.dirty&32&&n(1,r=l.find(a=>a.id===o))},[i,r,o,c,s,l,u]}class Vo extends W{constructor(e){super(),q(this,e,zo,Uo,z,{params:4})}}function Cn(t,e,n){const r=t.slice();return r[2]=e[n],r}function Sn(t,e){let n,r=e[2].title+"",l,s=e[2].subtitle?`:${e[2].subtitle}`:"",o,i,c,u,a;return{key:t,first:null,c(){n=$("div"),l=T(r),o=T(s),i=D(),m(n,"class","_1Hdo"),m(n,"data-id",c=e[2].id),this.first=n},m(f,d){S(f,n,d),p(n,l),p(n,o),p(n,i),u||(a=F(n,"click",e[1]),u=!0)},p(f,d){e=f,d&1&&r!==(r=e[2].title+"")&&G(l,r),d&1&&s!==(s=e[2].subtitle?`:${e[2].subtitle}`:"")&&G(o,s),d&1&&c!==(c=e[2].id)&&m(n,"data-id",c)},d(f){f&&C(n),u=!1,a()}}}function qo(t){let e=[],n=new Map,r,l=V(t[0]);const s=o=>o[2].id;for(let o=0;o<l.length;o+=1){let i=Cn(t,l,o),c=s(i);n.set(c,e[o]=Sn(c,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=ee()},m(o,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,i);S(o,r,i)},p(o,i){i&3&&(l=V(o[0]),e=ye(e,i,s,1,o,l,n,r.parentNode,He,Sn,r,Cn))},d(o){o&&C(r);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function Wo(t){let e,n;return e=new ue({props:{slot:"header",title:"Categories",returnPath:"/",addPath:"/categories/new"}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Xo(t){let e,n;return e=new ae({props:{$$slots:{header:[Wo],default:[qo]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&33&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Jo(t,e,n){let r;Y(t,ve,s=>n(0,r=s));function l(s){if(s.target.dataset.id){const o=s.target.dataset.id;x(`/categories/${o}`)}}return[r,l]}class Yo extends W{constructor(e){super(),q(this,e,Jo,Xo,z,{})}}function Ko(t){let e,n,r,l,s,o,i,c,u,a;function f(_){t[2](_)}let d={placeholder:"Base Currency"};return t[0]!==void 0&&(d.currencyCode=t[0]),l=new _t({props:d}),Z.push(()=>$e(l,"currencyCode",f)),{c(){e=$("form"),n=$("div"),r=T(`Base currency:
      `),O(l.$$.fragment),o=D(),i=$("div"),i.innerHTML='<button class="_19-gA" type="submit">Save</button>',m(e,"class","_1JFP_")},m(_,g){S(_,e,g),p(e,n),p(n,r),L(l,n,null),p(e,o),p(e,i),c=!0,u||(a=F(e,"submit",De(t[1])),u=!0)},p(_,g){const b={};!s&&g&1&&(s=!0,b.currencyCode=_[0],be(()=>s=!1)),l.$set(b)},i(_){c||(v(l.$$.fragment,_),c=!0)},o(_){k(l.$$.fragment,_),c=!1},d(_){_&&C(e),N(l),u=!1,a()}}}function Qo(t){let e,n;return e=new ue({props:{slot:"header",title:"Settings",returnPath:"/"}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Zo(t){let e,n;return e=new ae({props:{$$slots:{header:[Qo],default:[Ko]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&17&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function xo(t,e,n){var i;let r;Y(t,ar,c=>n(3,r=c));let l=(i=r.find(c=>c.name===ot))==null?void 0:i.value;function s(){dr({name:ot,value:l}).then(()=>{x("/")})}function o(c){l=c,n(0,l)}return[l,s,o]}class es extends W{constructor(e){super(),q(this,e,xo,Zo,z,{})}}function In(t,e,n){const r=t.slice();return r[2]=e[n],r}function En(t,e){let n,r,l=e[2].code+"",s,o,i,c=e[2].title+"",u,a,f,d,_;return{key:t,first:null,c(){n=$("div"),r=$("div"),s=T(l),o=D(),i=$("div"),u=T(c),a=D(),m(r,"class","_4jwya"),m(i,"class","_1GjZM"),m(n,"class","_3HmHC"),m(n,"data-role","item"),m(n,"data-code",f=e[2].code),this.first=n},m(g,b){S(g,n,b),p(n,r),p(r,s),p(n,o),p(n,i),p(i,u),p(n,a),d||(_=F(n,"click",e[1]),d=!0)},p(g,b){e=g,b&1&&l!==(l=e[2].code+"")&&G(s,l),b&1&&c!==(c=e[2].title+"")&&G(u,c),b&1&&f!==(f=e[2].code)&&m(n,"data-code",f)},d(g){g&&C(n),d=!1,_()}}}function ts(t){let e=[],n=new Map,r,l=V(t[0]);const s=o=>o[2].code;for(let o=0;o<l.length;o+=1){let i=In(t,l,o),c=s(i);n.set(c,e[o]=En(c,i))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();r=ee()},m(o,i){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(o,i);S(o,r,i)},p(o,i){i&3&&(l=V(o[0]),e=ye(e,i,s,1,o,l,n,r.parentNode,He,En,r,In))},d(o){o&&C(r);for(let i=0;i<e.length;i+=1)e[i].d(o)}}}function ns(t){let e,n;return e=new ue({props:{slot:"header",title:"Currencies",returnPath:"/",addPath:"/currencies/new"}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function rs(t){let e,n;return e=new ae({props:{$$slots:{header:[ns],default:[ts]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&33&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function ls(t,e,n){let r;Y(t,je,s=>n(0,r=s));function l(s){if(s.target instanceof HTMLElement){const o=s.target.closest('[data-role="item"]');o instanceof HTMLElement&&o.dataset.code&&x(`/currencies/${o.dataset.code}`)}}return[r,l]}class os extends W{constructor(e){super(),q(this,e,ls,rs,z,{})}}function An(t,e,n){const r=t.slice();return r[11]=e[n].code,r[12]=e,r[13]=n,r}function Dn(t){let e,n,r=t[11]+"",l,s,o,i,c,u,a,f,d,_,g;function b(){t[7].call(c,t[11])}return{c(){e=$("div"),n=$("div"),l=T(r),s=T(":"),o=D(),i=$("div"),c=$("input"),a=D(),f=$("span"),d=T(t[1]),m(c,"id",u=t[11]),m(c,"class","_234LA"),m(c,"type","text"),oe(c,"_2j9gN",!qe(t[2][t[11]])),m(i,"class","gqdmv")},m(h,y){S(h,e,y),p(e,n),p(n,l),p(n,s),p(e,o),p(e,i),p(i,c),U(c,t[2][t[11]]),p(i,a),p(i,f),p(f,d),_||(g=F(c,"input",b),_=!0)},p(h,y){t=h,y&8&&r!==(r=t[11]+"")&&G(l,r),y&8&&u!==(u=t[11])&&m(c,"id",u),y&12&&c.value!==t[2][t[11]]&&U(c,t[2][t[11]]),y&13&&oe(c,"_2j9gN",!qe(t[2][t[11]])),y&2&&G(d,t[1])},d(h){h&&C(e),_=!1,g()}}}function Tn(t){let e,n=t[11]!==t[1]&&Dn(t);return{c(){n&&n.c(),e=ee()},m(r,l){n&&n.m(r,l),S(r,e,l)},p(r,l){r[11]!==r[1]?n?n.p(r,l):(n=Dn(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){r&&C(e),n&&n.d(r)}}}function ss(t){let e,n,r,l,s,o,i,c,u,a,f;function d(h){t[6](h)}let _={placeholder:"Base Currency"};t[1]!==void 0&&(_.currencyCode=t[1]),l=new _t({props:_}),Z.push(()=>$e(l,"currencyCode",d));let g=V(t[3]),b=[];for(let h=0;h<g.length;h+=1)b[h]=Tn(An(t,g,h));return{c(){e=$("form"),n=$("div"),r=T(`Base currency:
      `),O(l.$$.fragment),o=D();for(let h=0;h<b.length;h+=1)b[h].c();i=D(),c=$("div"),c.innerHTML='<button class="_3vC8G" type="submit">Save</button>',m(e,"class","_1SqME")},m(h,y){S(h,e,y),p(e,n),p(n,r),L(l,n,null),p(e,o);for(let w=0;w<b.length;w+=1)b[w]&&b[w].m(e,null);p(e,i),p(e,c),u=!0,a||(f=F(e,"submit",De(t[4])),a=!0)},p(h,y){const w={};if(!s&&y&2&&(s=!0,w.currencyCode=h[1],be(()=>s=!1)),l.$set(w),y&15){g=V(h[3]);let E;for(E=0;E<g.length;E+=1){const I=An(h,g,E);b[E]?b[E].p(I,y):(b[E]=Tn(I),b[E].c(),b[E].m(e,i))}for(;E<b.length;E+=1)b[E].d(1);b.length=g.length}},i(h){u||(v(l.$$.fragment,h),u=!0)},o(h){k(l.$$.fragment,h),u=!1},d(h){h&&C(e),N(l),pe(b,h),a=!1,f()}}}function is(t){let e,n;return e=new ue({props:{slot:"header",title:"Rates",returnPath:"/"}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function cs(t){let e,n;return e=new ae({props:{$$slots:{header:[is],default:[ss]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&16398&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function qe(t){return/^([1-9]\d*|[0])([.,]\d+)?$/.test(t)}function St(t){return parseFloat(t.replace(",","."))}function us(t,e,n){let r,l,s;Y(t,Ve,d=>n(8,r=d)),Y(t,je,d=>n(3,l=d)),Y(t,ut,d=>n(9,s=d));let o=r,i=l.reduce((d,{code:_})=>(d[_]=String(s[_]||1),d),{});function c(){const d=u();if(d){alert(d);return}const _=l.filter(({code:g})=>g!==o).map(({code:g})=>({code:g,rate:St(i[g])}));dr({name:ot,value:o}).then(()=>(Cr(Ve,r=o,r),_l(_,o))).then(()=>{x("/")})}function u(){for(const[d,_]of Object.entries(i))if(!qe(_)){const g=document.getElementById(d);return g&&g.focus(),`Invalid rate for ${d}`}return""}function a(d){o=d,n(1,o)}function f(d){i[d]=this.value,n(2,i)}return[qe,o,i,l,c,St,a,f]}class as extends W{constructor(e){super(),q(this,e,us,cs,z,{validateRate:0,parseRate:5})}get validateRate(){return qe}get parseRate(){return St}}function jn(t,e,n){const r=t.slice();return r[4]=e[n],r}function Pn(t){let e,n;return e=new Lt({props:{cat:t[4],nested:!0,ondocs:t[2]}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const s={};l&1&&(s.cat=r[4]),l&4&&(s.ondocs=r[2]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Mn(t){let e,n,r=t[4].title+"",l,s,o,i=Q(t[4].total,!0)+"",c,u,a,f,d,_;function g(){return t[3](t[4])}let b=t[4].sorted&&Pn(t);return{c(){e=$("div"),n=$("span"),l=T(r),s=D(),o=$("span"),c=T(i),u=D(),b&&b.c(),a=ee(),m(n,"class","_31Wp_"),m(e,"class","_1rD4x"),oe(e,"_3eEr8",t[1])},m(h,y){S(h,e,y),p(e,n),p(n,l),p(e,s),p(e,o),p(o,c),S(h,u,y),b&&b.m(h,y),S(h,a,y),f=!0,d||(_=F(e,"click",g),d=!0)},p(h,y){t=h,(!f||y&1)&&r!==(r=t[4].title+"")&&G(l,r),(!f||y&1)&&i!==(i=Q(t[4].total,!0)+"")&&G(c,i),(!f||y&2)&&oe(e,"_3eEr8",t[1]),t[4].sorted?b?(b.p(t,y),y&1&&v(b,1)):(b=Pn(t),b.c(),v(b,1),b.m(a.parentNode,a)):b&&(te(),k(b,1,1,()=>{b=null}),ne())},i(h){f||(v(b),f=!0)},o(h){k(b),f=!1},d(h){h&&(C(e),C(u),C(a)),b&&b.d(h),d=!1,_()}}}function fs(t){let e,n,r=V(t[0].sorted),l=[];for(let o=0;o<r.length;o+=1)l[o]=Mn(jn(t,r,o));const s=o=>k(l[o],1,1,()=>{l[o]=null});return{c(){e=$("div");for(let o=0;o<l.length;o+=1)l[o].c()},m(o,i){S(o,e,i);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);n=!0},p(o,[i]){if(i&7){r=V(o[0].sorted);let c;for(c=0;c<r.length;c+=1){const u=jn(o,r,c);l[c]?(l[c].p(u,i),v(l[c],1)):(l[c]=Mn(u),l[c].c(),v(l[c],1),l[c].m(e,null))}for(te(),c=r.length;c<l.length;c+=1)s(c);ne()}},i(o){if(!n){for(let i=0;i<r.length;i+=1)v(l[i]);n=!0}},o(o){l=l.filter(Boolean);for(let i=0;i<l.length;i+=1)k(l[i]);n=!1},d(o){o&&C(e),pe(l,o)}}}function ds(t,e,n){let{cat:r}=e,{nested:l=!1}=e,{ondocs:s=void 0}=e;const o=i=>{s==null||s(i.docs)};return t.$$set=i=>{"cat"in i&&n(0,r=i.cat),"nested"in i&&n(1,l=i.nested),"ondocs"in i&&n(2,s=i.ondocs)},[r,l,s,o]}class Lt extends W{constructor(e){super(),q(this,e,ds,fs,z,{cat:0,nested:1,ondocs:2})}}function Ln(t,e,n){const r=t.slice();return r[12]=e[n],r}function Nn(t){let e,n,r,l,s=Q(t[1].total,!0)+"",o,i,c,u;return c=new Lt({props:{cat:t[1],ondocs:t[5]}}),{c(){e=$("div"),n=$("span"),n.textContent="Income",r=D(),l=$("span"),o=T(s),i=D(),O(c.$$.fragment),m(n,"class","yRJK6"),m(e,"class","_1TMRv")},m(a,f){S(a,e,f),p(e,n),p(e,r),p(e,l),p(l,o),S(a,i,f),L(c,a,f),u=!0},p(a,f){(!u||f&2)&&s!==(s=Q(a[1].total,!0)+"")&&G(o,s);const d={};f&2&&(d.cat=a[1]),c.$set(d)},i(a){u||(v(c.$$.fragment,a),u=!0)},o(a){k(c.$$.fragment,a),u=!1},d(a){a&&(C(e),C(i)),N(c,a)}}}function On(t){let e,n,r,l,s=Q(t[2].total,!0)+"",o,i,c,u;return c=new Lt({props:{cat:t[2],ondocs:t[5]}}),{c(){e=$("div"),n=$("span"),n.textContent="Expenses",r=D(),l=$("span"),o=T(s),i=D(),O(c.$$.fragment),m(n,"class","yRJK6"),m(e,"class","_1TMRv")},m(a,f){S(a,e,f),p(e,n),p(e,r),p(e,l),p(l,o),S(a,i,f),L(c,a,f),u=!0},p(a,f){(!u||f&4)&&s!==(s=Q(a[2].total,!0)+"")&&G(o,s);const d={};f&4&&(d.cat=a[2]),c.$set(d)},i(a){u||(v(c.$$.fragment,a),u=!0)},o(a){k(c.$$.fragment,a),u=!1},d(a){a&&(C(e),C(i)),N(c,a)}}}function Rn(t){let e,n,r,l,s,o,i,c,u,a=V(t[3]),f=[];for(let d=0;d<a.length;d+=1)f[d]=Gn(Ln(t,a,d));return{c(){e=$("div"),n=$("div"),r=$("div"),l=$("h2"),l.textContent="Transactions",s=D(),o=$("button"),o.textContent="X",i=D();for(let d=0;d<f.length;d+=1)f[d].c();m(o,"class","_2VbDV"),m(r,"class","_1TMRv"),m(n,"class","_3SMqW"),m(e,"class","_3Hq_T")},m(d,_){S(d,e,_),p(e,n),p(n,r),p(r,l),p(r,s),p(r,o),p(n,i);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(n,null);c||(u=F(o,"click",t[7]),c=!0)},p(d,_){if(_&24){a=V(d[3]);let g;for(g=0;g<a.length;g+=1){const b=Ln(d,a,g);f[g]?f[g].p(b,_):(f[g]=Gn(b),f[g].c(),f[g].m(n,null))}for(;g<f.length;g+=1)f[g].d(1);f.length=a.length}},d(d){d&&C(e),pe(f,d),c=!1,u()}}}function Bn(t){let e,n=`${t[4][t[12].categoryId].title}${t[4][t[12].categoryId].subtitle?`:${t[4][t[12].categoryId].subtitle}`:""}`,r;return{c(){e=$("span"),r=T(n),m(e,"class","_1ADS9")},m(l,s){S(l,e,s),p(e,r)},p(l,s){s&8&&n!==(n=`${l[4][l[12].categoryId].title}${l[4][l[12].categoryId].subtitle?`:${l[4][l[12].categoryId].subtitle}`:""}`)&&G(r,n)},d(l){l&&C(e)}}}function Gn(t){let e,n,r,l=t[12].comment+"",s,o,i,c=Q(t[12].kind===se.Expense?-t[12].amount:t[12].amount,!0,!0)+"",u,a,f,d,_,g=st(t[12].timestamp)+"",b,h,y=t[4][t[12].categoryId]&&Bn(t);return{c(){e=$("div"),n=$("div"),r=$("span"),s=T(l),o=D(),i=$("span"),u=T(c),a=D(),f=$("div"),y&&y.c(),d=D(),_=$("span"),b=T(g),h=D(),m(r,"class","comment"),m(i,"class","_6cSq1"),m(n,"class","_2YqMe"),m(_,"class","_22nT_"),m(f,"class","fci0o"),m(e,"class","NIWXD")},m(w,E){S(w,e,E),p(e,n),p(n,r),p(r,s),p(n,o),p(n,i),p(i,u),p(e,a),p(e,f),y&&y.m(f,null),p(f,d),p(f,_),p(_,b),p(e,h)},p(w,E){E&8&&l!==(l=w[12].comment+"")&&G(s,l),E&8&&c!==(c=Q(w[12].kind===se.Expense?-w[12].amount:w[12].amount,!0,!0)+"")&&G(u,c),w[4][w[12].categoryId]?y?y.p(w,E):(y=Bn(w),y.c(),y.m(f,d)):y&&(y.d(1),y=null),E&8&&g!==(g=st(w[12].timestamp)+"")&&G(b,g)},d(w){w&&C(e),y&&y.d()}}}function _s(t){let e,n,r,l,s,o,i,c,u,a=t[1]&&Nn(t),f=t[2]&&On(t),d=t[3]&&Rn(t);return{c(){e=$("div"),n=$("input"),r=D(),a&&a.c(),l=D(),f&&f.c(),s=D(),d&&d.c(),o=ee(),m(n,"class","_1pQ37"),m(n,"type","month"),m(e,"class","_8RCV6")},m(_,g){S(_,e,g),p(e,n),U(n,t[0]),S(_,r,g),a&&a.m(_,g),S(_,l,g),f&&f.m(_,g),S(_,s,g),d&&d.m(_,g),S(_,o,g),i=!0,c||(u=F(n,"input",t[6]),c=!0)},p(_,g){g&1&&U(n,_[0]),_[1]?a?(a.p(_,g),g&2&&v(a,1)):(a=Nn(_),a.c(),v(a,1),a.m(l.parentNode,l)):a&&(te(),k(a,1,1,()=>{a=null}),ne()),_[2]?f?(f.p(_,g),g&4&&v(f,1)):(f=On(_),f.c(),v(f,1),f.m(s.parentNode,s)):f&&(te(),k(f,1,1,()=>{f=null}),ne()),_[3]?d?d.p(_,g):(d=Rn(_),d.c(),d.m(o.parentNode,o)):d&&(d.d(1),d=null)},i(_){i||(v(a),v(f),i=!0)},o(_){k(a),k(f),i=!1},d(_){_&&(C(e),C(r),C(l),C(s),C(o)),a&&a.d(_),f&&f.d(_),d&&d.d(_),c=!1,u()}}}function ps(t){let e,n;return e=new ue({props:{slot:"header",title:"Report",returnPath:"/"}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function ms(t){let e,n;return e=new ae({props:{$$slots:{header:[ps],default:[_s]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&32783&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function It(t){t.cats&&(t.sorted=Object.values(t.cats).sort((e,n)=>n.total-e.total),t.sorted.forEach(e=>{e.cats&&It(e)}))}function hs(t,e,n){let r;Y(t,ve,b=>n(8,r=b));const l=new Date;let s=`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}`,o=null,i=null,c=null;const u=r.reduce((b,h)=>(b[h.id]=h,b),{});function a(b){const[h,y]=b.split("-"),w=new Date(parseInt(h),parseInt(y)-1,1).getTime(),E=new Date(parseInt(h),parseInt(y),1).getTime();il(w,E).then(I=>{const P=I.filter(M=>M.kind===se.Income),R=I.filter(M=>M.kind===se.Expense);n(1,o=f(P)),n(2,i=f(R)),It(o),It(i)})}function f(b){return b.reduce((h,y)=>{const w=u[y.categoryId];return w&&(h.cats[w.title]||(h.cats[w.title]={title:w.title,cats:{},docs:[],total:0}),h.cats[w.title].total+=y.amount,h.cats[w.title].docs.push(y),w.subtitle&&(h.cats[w.title].cats[w.subtitle]||(h.cats[w.title].cats[w.subtitle]={title:w.subtitle,docs:[],total:0}),h.cats[w.title].cats[w.subtitle].total+=y.amount,h.cats[w.title].cats[w.subtitle].docs.push(y))),h.total+=y.amount,h},{cats:{},docs:[],total:0})}function d(b){n(3,c=b),document.documentElement.style.setProperty("overflow","hidden")}function _(){s=this.value,n(0,s)}const g=b=>{n(3,c=null),document.documentElement.style.removeProperty("overflow")};return t.$$.update=()=>{t.$$.dirty&1&&a(s)},[s,o,i,c,u,d,_,g]}class gs extends W{constructor(e){super(),q(this,e,hs,ms,z,{})}}function bs(t){let e,n,r,l,s,o,i,c,u,a,f;return{c(){e=$("form"),n=$("div"),r=$("input"),l=D(),s=$("div"),o=$("input"),i=D(),c=$("div"),u=$("button"),u.textContent=`${t[3]?"Save":"Create"}`,m(r,"type","text"),m(r,"placeholder","Title"),m(n,"class","_1F3oU"),m(o,"type","text"),m(o,"placeholder","Subtitle (optional)"),m(s,"class","_1F3oU"),m(u,"type","submit"),m(c,"class","_1F3oU"),m(e,"class","_2sHk9")},m(d,_){S(d,e,_),p(e,n),p(n,r),U(r,t[0]),t[7](r),p(e,l),p(e,s),p(s,o),U(o,t[1]),p(e,i),p(e,c),p(c,u),a||(f=[F(r,"input",t[6]),F(o,"input",t[8]),F(e,"submit",De(t[4]))],a=!0)},p(d,_){_&1&&r.value!==d[0]&&U(r,d[0]),_&2&&o.value!==d[1]&&U(o,d[1])},d(d){d&&C(e),t[7](null),a=!1,ie(f)}}}function $s(t){let e,n;return e=new ue({props:{slot:"header",title:t[3]?"Category":"New Category",returnPath:"/categories"}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function ys(t){let e,n;return e=new ae({props:{$$slots:{header:[$s],default:[bs]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&2055&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function ws(t,e,n){let r;Y(t,ve,g=>n(9,r=g));let{params:l={}}=e;const{id:s}=l;let o=s?r.find(g=>g.id===s):null,i=o?o.title:"",c=o?o.subtitle:"",u;Je(()=>{u&&u.focus()});function a(){i.trim()?o?pl({...o,title:i.trim(),subtitle:c.trim()}).then(()=>{x("/categories")}):dl(i.trim(),c.trim()).then(()=>{x("/categories")}):alert("The title must be specified.")}function f(){i=this.value,n(0,i)}function d(g){Z[g?"unshift":"push"](()=>{u=g,n(2,u)})}function _(){c=this.value,n(1,c)}return t.$$set=g=>{"params"in g&&n(5,l=g.params)},[i,c,u,o,a,l,f,d,_]}class Hn extends W{constructor(e){super(),q(this,e,ws,ys,z,{params:5})}}function vs(t){let e,n,r,l,s,o,i,c,u,a,f;return{c(){e=$("form"),n=$("div"),r=$("input"),l=D(),s=$("div"),o=$("input"),i=D(),c=$("div"),u=$("button"),u.textContent=`${t[4]?"Save":"Add"}`,m(r,"type","text"),m(r,"placeholder","Code"),r.disabled=t[4]!==null,m(n,"class","EbSwc"),m(o,"type","text"),m(o,"placeholder","Title"),m(s,"class","EbSwc"),m(u,"type","submit"),m(c,"class","EbSwc")},m(d,_){S(d,e,_),p(e,n),p(n,r),U(r,t[0]),t[8](r),p(e,l),p(e,s),p(s,o),U(o,t[1]),t[10](o),p(e,i),p(e,c),p(c,u),a||(f=[F(r,"input",t[7]),F(o,"input",t[9]),F(e,"submit",De(t[5]))],a=!0)},p(d,_){_&1&&r.value!==d[0]&&U(r,d[0]),_&2&&o.value!==d[1]&&U(o,d[1])},d(d){d&&C(e),t[8](null),t[10](null),a=!1,ie(f)}}}function ks(t){let e,n;return e=new ue({props:{slot:"header",title:t[4]?"Currency":"New Currency",returnPath:"/currencies"}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Cs(t){let e,n;return e=new ae({props:{$$slots:{header:[ks],default:[vs]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&8207&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Ss(t,e,n){let r;Y(t,je,h=>n(11,r=h));let{params:l={}}=e;const{cid:s}=l;let o=s?r.find(h=>h.code===s):null,i=o?o.code:"",c=o?o.title:"",u,a;function f(){i.trim()&&c.trim()?o?hl({...o,title:c.trim()}).then(()=>{x("/currencies")}):ml(i.trim(),c.trim()).then(()=>{x("/currencies")}):alert("Code and title must be specified.")}Je(()=>{o?a&&a.focus():u&&u.focus()});function d(){i=this.value,n(0,i)}function _(h){Z[h?"unshift":"push"](()=>{u=h,n(2,u)})}function g(){c=this.value,n(1,c)}function b(h){Z[h?"unshift":"push"](()=>{a=h,n(3,a)})}return t.$$set=h=>{"params"in h&&n(6,l=h.params)},[i,c,u,a,o,f,l,d,_,g,b]}class Fn extends W{constructor(e){super(),q(this,e,Ss,Cs,z,{params:6})}}function Un(t,e,n){const r=t.slice();return r[6]=e[n],r}function zn(t,e,n){const r=t.slice();return r[9]=e[n],r}function Vn(t){let e,n=t[9].title+"",r,l;return{c(){e=$("option"),r=T(n),e.__value=l=t[9].id,U(e,e.__value)},m(s,o){S(s,e,o),p(e,r)},p(s,o){o&4&&n!==(n=s[9].title+"")&&G(r,n),o&4&&l!==(l=s[9].id)&&(e.__value=l,U(e,e.__value))},d(s){s&&C(e)}}}function qn(t){let e,n,r=V(t[6].accounts),l=[];for(let s=0;s<r.length;s+=1)l[s]=Vn(zn(t,r,s));return{c(){e=$("optgroup");for(let s=0;s<l.length;s+=1)l[s].c();m(e,"label",n=t[6].title)},m(s,o){S(s,e,o);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(s,o){if(o&4){r=V(s[6].accounts);let i;for(i=0;i<r.length;i+=1){const c=zn(s,r,i);l[i]?l[i].p(c,o):(l[i]=Vn(c),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=r.length}o&4&&n!==(n=s[6].title)&&m(e,"label",n)},d(s){s&&C(e),pe(l,s)}}}function Is(t){let e,n,r,l,s,o=V(t[2]),i=[];for(let c=0;c<o.length;c+=1)i[c]=qn(Un(t,o,c));return{c(){e=$("select"),n=$("option"),r=T(t[1]);for(let c=0;c<i.length;c+=1)i[c].c();n.__value="",U(n,n.__value),n.disabled=!0,n.selected=!0,n.hidden=!0,m(e,"class","_1vWtV"),e.required=!0,t[0]===void 0&&Ge(()=>t[5].call(e))},m(c,u){S(c,e,u),p(e,n),p(n,r);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);Be(e,t[0],!0),l||(s=F(e,"change",t[5]),l=!0)},p(c,[u]){if(u&2&&G(r,c[1]),u&4){o=V(c[2]);let a;for(a=0;a<o.length;a+=1){const f=Un(c,o,a);i[a]?i[a].p(f,u):(i[a]=qn(f),i[a].c(),i[a].m(e,null))}for(;a<i.length;a+=1)i[a].d(1);i.length=o.length}u&5&&Be(e,c[0])},i:A,o:A,d(c){c&&C(e),pe(i,c),l=!1,s()}}}function Es(t,e,n){let r,l,s;Y(t,ce,u=>n(3,l=u)),Y(t,we,u=>n(4,s=u));let{accountId:o}=e,{placeholder:i="Account"}=e;function c(){o=Dt(this),n(0,o),n(2,r),n(4,s),n(3,l)}return t.$$set=u=>{"accountId"in u&&n(0,o=u.accountId),"placeholder"in u&&n(1,i=u.placeholder)},t.$$.update=()=>{t.$$.dirty&24&&n(2,r=s.reduce((u,a)=>{const f={title:a.title,accounts:l.filter(d=>d.groupId===a.id)};return u.push(f),u},[]))},[o,i,r,l,s,c]}class As extends W{constructor(e){super(),q(this,e,Es,Is,z,{accountId:0,placeholder:1})}}function Wn(t,e,n){const r=t.slice();return r[2]=e[n],r}function Xn(t){let e,n,r;return{c(){e=$("span"),e.textContent=`${t[2].title} `,m(e,"data-value",t[2].value),oe(e,"_1zm3o",t[2].value===t[0])},m(l,s){S(l,e,s),n||(r=F(e,"pointerdown",t[1]),n=!0)},p(l,s){s&1&&oe(e,"_1zm3o",l[2].value===l[0])},d(l){l&&C(e),n=!1,r()}}}function Ds(t){let e,n=V(Qt),r=[];for(let l=0;l<n.length;l+=1)r[l]=Xn(Wn(t,n,l));return{c(){e=$("div");for(let l=0;l<r.length;l+=1)r[l].c();m(e,"class","_2dieg")},m(l,s){S(l,e,s);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null)},p(l,[s]){if(s&3){n=V(Qt);let o;for(o=0;o<n.length;o+=1){const i=Wn(l,n,o);r[o]?r[o].p(i,s):(r[o]=Xn(i),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:A,o:A,d(l){l&&C(e),pe(r,l)}}}function Ts(t,e,n){let{kind:r}=e;function l(s){s.target instanceof HTMLSpanElement&&(console.log("kind:",s.target.dataset.value),n(0,r=s.target.dataset.value))}return t.$$set=s=>{"kind"in s&&n(0,r=s.kind)},[r,l]}class js extends W{constructor(e){super(),q(this,e,Ts,Ds,z,{kind:0})}}function Jn(t,e,n){const r=t.slice();return r[7]=e[n],r}function Ps(t){let e,n,r;return{c(){e=$("input"),m(e,"class","_1LWF4"),m(e,"type","text"),m(e,"placeholder","Category")},m(l,s){S(l,e,s),t[10](e),U(e,t[3]),n||(r=[F(e,"input",t[11]),F(e,"input",t[6])],n=!0)},p(l,s){s&8&&e.value!==l[3]&&U(e,l[3])},d(l){l&&C(e),t[10](null),n=!1,ie(r)}}}function Yn(t){let e;return{c(){e=$("li"),e.textContent="Empty",m(e,"class","_1FJls")},m(n,r){S(n,e,r)},p:A,d(n){n&&C(e)}}}function Kn(t,e){let n,r=e[7].title+"",l,s=e[7].subtitle?`:${e[7].subtitle}`:"",o,i,c;return{key:t,first:null,c(){n=$("li"),l=T(r),o=T(s),i=D(),m(n,"data-id",c=e[7].id),oe(n,"_2P4tM",e[7].id===e[0]),this.first=n},m(u,a){S(u,n,a),p(n,l),p(n,o),p(n,i)},p(u,a){e=u,a&25&&r!==(r=e[7].title+"")&&G(l,r),a&25&&s!==(s=e[7].subtitle?`:${e[7].subtitle}`:"")&&G(o,s),a&25&&c!==(c=e[7].id)&&m(n,"data-id",c),a&25&&oe(n,"_2P4tM",e[7].id===e[0])},d(u){u&&C(n)}}}function Ms(t){let e,n=[],r=new Map,l,s,o=V(t[0]?t[4]:t[4].filter(t[9]));const i=u=>u[7].id;for(let u=0;u<o.length;u+=1){let a=Jn(t,o,u),f=i(a);r.set(f,n[u]=Kn(f,a))}let c=null;return o.length||(c=Yn()),{c(){e=$("ul");for(let u=0;u<n.length;u+=1)n[u].c();c&&c.c(),m(e,"class","_2VAoI"),m(e,"slot","content")},m(u,a){S(u,e,a);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);c&&c.m(e,null),l||(s=F(e,"click",t[5]),l=!0)},p(u,a){a&25&&(o=V(u[0]?u[4]:u[4].filter(u[9])),n=ye(n,a,i,1,u,o,r,e,He,Kn,null,Jn),!o.length&&c?c.p(u,a):o.length?c&&(c.d(1),c=null):(c=Yn(),c.c(),c.m(e,null)))},d(u){u&&C(e);for(let a=0;a<n.length;a+=1)n[a].d();c&&c.d(),l=!1,s()}}}function Ls(t){let e,n,r={class:"_3pEZc",clickToggle:!0,$$slots:{content:[Ms],default:[Ps]},$$scope:{ctx:t}};return e=new mr({props:r}),t[12](e),{c(){O(e.$$.fragment)},m(l,s){L(e,l,s),n=!0},p(l,[s]){const o={};s&32797&&(o.$$scope={dirty:s,ctx:l}),e.$set(o)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){k(e.$$.fragment,l),n=!1},d(l){t[12](null),N(e,l)}}}function Ke(t){return`${t.title}${t.subtitle?`:${t.subtitle}`:""}`}function Ns(t,e,n){let r;Y(t,ve,h=>n(4,r=h));let{categoryId:l}=e,s,o;function i(){n(0,l=""),n(3,u="")}let c=l?r.find(h=>h.id===l):null,u=c?Ke(c):"";function a(h){if(h.target instanceof HTMLLIElement){n(0,l=h.target.dataset.id),s.close();const y=r.find(w=>w.id===l);y&&n(3,u=Ke(y))}}function f(){const h=r.find(y=>o.value.trim().toLocaleLowerCase()===Ke(y).toLocaleLowerCase());h?(n(0,l=h.id),n(2,o.value=Ke(h),o)):n(0,l="")}const d=h=>`${h.title}:${h.subtitle}`.toLowerCase().includes(u.trim().toLowerCase());function _(h){Z[h?"unshift":"push"](()=>{o=h,n(2,o)})}function g(){u=this.value,n(3,u)}function b(h){Z[h?"unshift":"push"](()=>{s=h,n(1,s)})}return t.$$set=h=>{"categoryId"in h&&n(0,l=h.categoryId)},[l,s,o,u,r,a,f,c,i,d,_,g,b]}class Os extends W{constructor(e){super(),q(this,e,Ns,Ls,z,{categoryId:0,clear:8})}get clear(){return this.$$.ctx[8]}}function Rs(t){let e,n,r,l,s,o,i,c,u,a;function f(_){t[22](_)}let d={};return t[7]!==void 0&&(d.categoryId=t[7]),n=new Os({props:d}),Z.push(()=>$e(n,"categoryId",f)),t[23](n),{c(){e=$("div"),O(n.$$.fragment),l=D(),s=$("button"),o=T("Clear"),m(s,"type","button"),s.disabled=i=!t[7],m(e,"class","_2d6ay")},m(_,g){S(_,e,g),L(n,e,null),p(e,l),p(e,s),p(s,o),c=!0,u||(a=F(s,"click",Sr(t[15])),u=!0)},p(_,g){const b={};!r&&g&128&&(r=!0,b.categoryId=_[7],be(()=>r=!1)),n.$set(b),(!c||g&128&&i!==(i=!_[7]))&&(s.disabled=i)},i(_){c||(v(n.$$.fragment,_),c=!0)},o(_){k(n.$$.fragment,_),c=!1},d(_){_&&C(e),t[23](null),N(n),u=!1,a()}}}function Bs(t){let e,n,r;function l(o){t[21](o)}let s={placeholder:"To"};return t[1]!==void 0&&(s.accountId=t[1]),e=new As({props:s}),Z.push(()=>$e(e,"accountId",l)),{c(){O(e.$$.fragment)},m(o,i){L(e,o,i),r=!0},p(o,i){const c={};!n&&i&2&&(n=!0,c.accountId=o[1],be(()=>n=!1)),e.$set(c)},i(o){r||(v(e.$$.fragment,o),r=!0)},o(o){k(e.$$.fragment,o),r=!1},d(o){N(e,o)}}}function Qn(t){var u;let e,n,r=((u=t[2])==null?void 0:u.currencyCode)+"",l,s,o,i,c;return{c(){e=$("div"),n=T("Amount, "),l=T(r),s=T(`:
      `),o=$("input"),m(o,"class","yrEDP"),m(o,"type","text")},m(a,f){S(a,e,f),p(e,n),p(e,l),p(e,s),p(e,o),U(o,t[12]),i||(c=F(o,"input",t[26]),i=!0)},p(a,f){var d;f&4&&r!==(r=((d=a[2])==null?void 0:d.currencyCode)+"")&&G(l,r),f&4096&&o.value!==a[12]&&U(o,a[12])},d(a){a&&C(e),i=!1,c()}}}function Gs(t){var Bt;let e,n,r,l,s,o,i,c,u,a,f,d,_,g,b=((Bt=t[3])==null?void 0:Bt.currencyCode)+"",h,y,w,E,I,P,R,M,B,j,K,ke,Ce,Fe,Se,Me=t[0]?"Save":"Create",Ue,de,X,Ye;function $r(J){t[19](J)}let Nt={};t[6]!==void 0&&(Nt.kind=t[6]),r=new js({props:Nt}),Z.push(()=>$e(r,"kind",$r));const Ot=[Bs,Rs],he=[];function Rt(J,le){return J[6]===se.Transfer?0:1}a=Rt(t),f=he[a]=Ot[a](t);let re=t[13]&&Qn(t);return{c(){e=$("form"),n=$("div"),O(r.$$.fragment),s=D(),o=$("div"),i=$("input"),c=D(),u=$("div"),f.c(),d=D(),_=$("div"),g=T("Amount, "),h=T(b),y=T(`:
    `),w=$("input"),E=D(),re&&re.c(),I=D(),P=$("div"),R=$("input"),M=D(),B=$("div"),j=$("label"),K=$("input"),ke=T(`
      Reconciled`),Ce=D(),Fe=$("div"),Se=$("button"),Ue=T(Me),m(i,"class","yrEDP"),m(i,"type","datetime-local"),m(w,"class","yrEDP"),m(w,"type","text"),oe(w,"_3p4li",!it(t[11])),m(R,"class","yrEDP"),m(R,"type","text"),m(R,"placeholder","Comment"),m(K,"type","checkbox"),m(j,"class","_19jWl"),m(Se,"class","DfOJQ"),m(Se,"type","submit"),m(e,"class","_2zOgU")},m(J,le){S(J,e,le),p(e,n),L(r,n,null),p(e,s),p(e,o),p(o,i),U(i,t[10]),p(e,c),p(e,u),he[a].m(u,null),p(e,d),p(e,_),p(_,g),p(_,h),p(_,y),p(_,w),U(w,t[11]),t[25](w),p(e,E),re&&re.m(e,null),p(e,I),p(e,P),p(P,R),U(R,t[8]),p(e,M),p(e,B),p(B,j),p(j,K),K.checked=t[9],p(j,ke),p(e,Ce),p(e,Fe),p(Fe,Se),p(Se,Ue),de=!0,X||(Ye=[F(i,"input",t[20]),F(w,"input",t[24]),F(R,"input",t[27]),F(K,"change",t[28]),F(e,"submit",De(t[14]))],X=!0)},p(J,[le]){var Ht;const Gt={};!l&&le&64&&(l=!0,Gt.kind=J[6],be(()=>l=!1)),r.$set(Gt),le&1024&&U(i,J[10]);let pt=a;a=Rt(J),a===pt?he[a].p(J,le):(te(),k(he[pt],1,1,()=>{he[pt]=null}),ne(),f=he[a],f?f.p(J,le):(f=he[a]=Ot[a](J),f.c()),v(f,1),f.m(u,null)),(!de||le&8)&&b!==(b=((Ht=J[3])==null?void 0:Ht.currencyCode)+"")&&G(h,b),le&2048&&w.value!==J[11]&&U(w,J[11]),(!de||le&2048)&&oe(w,"_3p4li",!it(J[11])),J[13]?re?re.p(J,le):(re=Qn(J),re.c(),re.m(e,I)):re&&(re.d(1),re=null),le&256&&R.value!==J[8]&&U(R,J[8]),le&512&&(K.checked=J[9]),(!de||le&1)&&Me!==(Me=J[0]?"Save":"Create")&&G(Ue,Me)},i(J){de||(v(r.$$.fragment,J),v(f),de=!0)},o(J){k(r.$$.fragment,J),k(f),de=!1},d(J){J&&C(e),N(r),he[a].d(),t[25](null),re&&re.d(),X=!1,ie(Ye)}}}function Hs(t,e,n){let r,l,s,o,i;Y(t,ce,X=>n(18,i=X));let{accountId:c}=e,{transactionDoc:u=null}=e,a,f;Je(()=>{f&&f.focus()});let{kind:d=se.Expense,categoryId:_,secondAccountId:g,comment:b="",reconciled:h=!1}=u||{},y=Xl(new Date((u==null?void 0:u.timestamp)||Date.now())),w=u?Q(u.amount):"",E=u?Q(u.secondAmount):"";const I=Te();function P(){const X=R();if(X){alert(X);return}const Ye=d===se.Transfer?{kind:d,timestamp:new Date(y).getTime(),accountId:c,secondAccountId:g,...o?{secondAmount:yt(E)}:{},amount:yt(w),comment:b.trim(),...h?{reconciled:!0}:{}}:{kind:d,timestamp:new Date(y).getTime(),accountId:c,categoryId:_||null,amount:yt(w),comment:b.trim(),...h?{reconciled:!0}:{}};I("save",{params:Ye})}function R(){if(!it(w))return"Invalid amount";if(d===se.Transfer){if(!g)return"Must choose the second account";if(g===c)return"Cannot transfer to the same account";if(o&&!it(E))return"Invalid second amount"}return""}function M(){a.clear()}function B(X){d=X,n(6,d)}function j(){y=this.value,n(10,y)}function K(X){g=X,n(1,g)}function ke(X){_=X,n(7,_)}function Ce(X){Z[X?"unshift":"push"](()=>{a=X,n(4,a)})}function Fe(){w=this.value,n(11,w)}function Se(X){Z[X?"unshift":"push"](()=>{f=X,n(5,f)})}function Me(){E=this.value,n(12,E)}function Ue(){b=this.value,n(8,b)}function de(){h=this.checked,n(9,h)}return t.$$set=X=>{"accountId"in X&&n(16,c=X.accountId),"transactionDoc"in X&&n(0,u=X.transactionDoc)},t.$$.update=()=>{t.$$.dirty&327680&&n(3,r=i.find(X=>X.id===c)),t.$$.dirty&8&&n(17,l=r==null?void 0:r.currencyCode),t.$$.dirty&262146&&n(2,s=g?i.find(X=>X.id===g):null),t.$$.dirty&131076&&n(13,o=s&&l?s.currencyCode!==l:!1)},[u,g,s,r,a,f,d,_,b,h,y,w,E,o,P,M,c,l,i,B,j,K,ke,Ce,Fe,Se,Me,Ue,de]}class br extends W{constructor(e){super(),q(this,e,Hs,Gs,z,{accountId:16,transactionDoc:0})}}function Fs(t){let e,n;return e=new br({props:{accountId:t[2]}}),e.$on("save",t[6]),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p:A,i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Us(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:qs,then:Vs,catch:zs,blocks:[,,,]};return lr(t[5](t[3]),r),{c(){e=ee(),r.block.c()},m(l,s){S(l,e,s),r.block.m(l,r.anchor=s),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(l,s){t=l,Pr(r,t,s)},i(l){n||(v(r.block),n=!0)},o(l){for(let s=0;s<3;s+=1){const o=r.blocks[s];k(o)}n=!1},d(l){l&&C(e),r.block.d(l),r.token=null,r=null}}}function zs(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function Vs(t){let e,n;return e=new br({props:{accountId:t[2],transactionDoc:t[0]}}),e.$on("save",t[6]),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const s={};l&1&&(s.transactionDoc=r[0]),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function qs(t){return{c:A,m:A,p:A,i:A,o:A,d:A}}function Ws(t){let e,n,r,l;const s=[Us,Fs],o=[];function i(c,u){return c[3]?0:1}return e=i(t),n=o[e]=s[e](t),{c(){n.c(),r=ee()},m(c,u){o[e].m(c,u),S(c,r,u),l=!0},p(c,u){n.p(c,u)},i(c){l||(v(n),l=!0)},o(c){k(n),l=!1},d(c){c&&C(r),o[e].d(c)}}}function Xs(t){let e,n;return e=new ue({props:{slot:"header",title:t[1]?`${t[1].title}: Transaction`:"Transaction",returnPath:`/accounts/${t[2]}`,menuItems:t[4]}}),e.$on("menu",t[9]),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,l){const s={};l&2&&(s.title=r[1]?`${r[1].title}: Transaction`:"Transaction"),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Js(t){let e,n;return e=new ae({props:{$$slots:{header:[Xs],default:[Ws]},$$scope:{ctx:t}}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},p(r,[l]){const s={};l&1027&&(s.$$scope={dirty:l,ctx:r}),e.$set(s)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function Ys(t,e,n){let r,l;Y(t,ce,_=>n(8,l=_));let{params:s}=e;const{id:o,tid:i}=s;let c;const u=i?[{id:"delete",title:"Delete"}]:null;async function a(_){n(0,c=await cl(_))}function f(_){i?ll(c,_.detail.params).then(()=>{x(`/accounts/${o}`)}):gl(_.detail.params).then(()=>{x(`/accounts/${o}`)})}const d=_=>{switch(_.detail.id){case"delete":if(!confirm("Delete transaction?"))return!1;i&&rl(i).then(()=>{x(`/accounts/${o}`)});break}};return t.$$set=_=>{"params"in _&&n(7,s=_.params)},t.$$.update=()=>{t.$$.dirty&256&&n(1,r=l.find(_=>_.id===o))},[c,r,o,i,u,a,f,s,l,d]}class Zn extends W{constructor(e){super(),q(this,e,Ys,Js,z,{params:7})}}function Ks(t){let e,n,r=t[0].wild+"",l;return{c(){e=$("div"),n=T("Page Not Found: /"),l=T(r)},m(s,o){S(s,e,o),p(e,n),p(e,l)},p(s,[o]){o&1&&r!==(r=s[0].wild+"")&&G(l,r)},i:A,o:A,d(s){s&&C(e)}}}function Qs(t,e,n){let{params:r={}}=e;return t.$$set=l=>{"params"in l&&n(0,r=l.params)},[r]}class Zs extends W{constructor(e){super(),q(this,e,Qs,Ks,z,{params:0})}}const xs={"/":po,"/groups":$o,"/groups/new":mn,"/groups/:id":mn,"/accounts/new":bn,"/accounts/:id/edit":bn,"/accounts/:id":Vo,"/accounts/:id/transactions/new":Zn,"/accounts/:id/transactions/:tid":Zn,"/categories":Yo,"/categories/new":Hn,"/categories/:id":Hn,"/currencies":os,"/rates":as,"/report":gs,"/currencies/new":Fn,"/currencies/:cid":Fn,"/settings":es,"*":Zs};function ei(t){return{c:A,m:A,i:A,o:A,d:A}}function ti(t){let e,n;return e=new Ur({props:{routes:xs}}),{c(){O(e.$$.fragment)},m(r,l){L(e,r,l),n=!0},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){k(e.$$.fragment,r),n=!1},d(r){N(e,r)}}}function ni(t){return{c:A,m:A,i:A,o:A,d:A}}function ri(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!1,pending:ni,then:ti,catch:ei,blocks:[,,,]};return lr(yl,r),{c(){e=ee(),r.block.c()},m(l,s){S(l,e,s),r.block.m(l,r.anchor=s),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(l,[s]){t=l},i(l){n||(v(r.block),n=!0)},o(l){for(let s=0;s<3;s+=1){const o=r.blocks[s];k(o)}n=!1},d(l){l&&C(e),r.block.d(l),r.token=null,r=null}}}class li extends W{constructor(e){super(),q(this,e,null,ri,z,{})}}new li({target:document.getElementById("app")});
